var ck=e=>{throw TypeError(e)};var a_=(e,t,n)=>t.has(e)||ck("Cannot "+n);var cn=(e,t,n)=>(a_(e,t,"read from private field"),n?n.call(e):t.get(e)),Zu=(e,t,n)=>t.has(e)?ck("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Co=(e,t,n,o)=>(a_(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),Yr=(e,t,n)=>(a_(e,t,"access private method"),n);var l_=(e,t,n,o)=>({set _(u){Co(e,t,u,n)},get _(){return cn(e,t,o)}});function RR(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const m=Object.getOwnPropertyDescriptor(o,u);m&&Object.defineProperty(e,u,m.get?m:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const y of m.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(u){if(u.ep)return;u.ep=!0;const m=n(u);fetch(u.href,m)}})();var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pu(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var u=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return e[o]}})}),n}var zI={exports:{}},nv={},DI={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=Symbol.for("react.element"),zR=Symbol.for("react.portal"),DR=Symbol.for("react.fragment"),OR=Symbol.for("react.strict_mode"),FR=Symbol.for("react.profiler"),BR=Symbol.for("react.provider"),$R=Symbol.for("react.context"),UR=Symbol.for("react.forward_ref"),jR=Symbol.for("react.suspense"),VR=Symbol.for("react.memo"),GR=Symbol.for("react.lazy"),hk=Symbol.iterator;function qR(e){return e===null||typeof e!="object"?null:(e=hk&&e[hk]||e["@@iterator"],typeof e=="function"?e:null)}var OI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FI=Object.assign,BI={};function lf(e,t,n){this.props=e,this.context=t,this.refs=BI,this.updater=n||OI}lf.prototype.isReactComponent={};lf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $I(){}$I.prototype=lf.prototype;function zx(e,t,n){this.props=e,this.context=t,this.refs=BI,this.updater=n||OI}var Dx=zx.prototype=new $I;Dx.constructor=zx;FI(Dx,lf.prototype);Dx.isPureReactComponent=!0;var dk=Array.isArray,UI=Object.prototype.hasOwnProperty,Ox={current:null},jI={key:!0,ref:!0,__self:!0,__source:!0};function VI(e,t,n){var o,u={},m=null,y=null;if(t!=null)for(o in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(m=""+t.key),t)UI.call(t,o)&&!jI.hasOwnProperty(o)&&(u[o]=t[o]);var d=arguments.length-2;if(d===1)u.children=n;else if(1<d){for(var M=Array(d),A=0;A<d;A++)M[A]=arguments[A+2];u.children=M}if(e&&e.defaultProps)for(o in d=e.defaultProps,d)u[o]===void 0&&(u[o]=d[o]);return{$$typeof:xm,type:e,key:m,ref:y,props:u,_owner:Ox.current}}function HR(e,t){return{$$typeof:xm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fx(e){return typeof e=="object"&&e!==null&&e.$$typeof===xm}function WR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fk=/\/+/g;function u_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WR(""+e.key):t.toString(36)}function jg(e,t,n,o,u){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(m){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case xm:case zR:y=!0}}if(y)return y=e,u=u(y),e=o===""?"."+u_(y,0):o,dk(u)?(n="",e!=null&&(n=e.replace(fk,"$&/")+"/"),jg(u,t,n,"",function(A){return A})):u!=null&&(Fx(u)&&(u=HR(u,n+(!u.key||y&&y.key===u.key?"":(""+u.key).replace(fk,"$&/")+"/")+e)),t.push(u)),1;if(y=0,o=o===""?".":o+":",dk(e))for(var d=0;d<e.length;d++){m=e[d];var M=o+u_(m,d);y+=jg(m,t,n,M,u)}else if(M=qR(e),typeof M=="function")for(e=M.call(e),d=0;!(m=e.next()).done;)m=m.value,M=o+u_(m,d++),y+=jg(m,t,n,M,u);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function cg(e,t,n){if(e==null)return e;var o=[],u=0;return jg(e,o,"","",function(m){return t.call(n,m,u++)}),o}function ZR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var es={current:null},Vg={transition:null},XR={ReactCurrentDispatcher:es,ReactCurrentBatchConfig:Vg,ReactCurrentOwner:Ox};function GI(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:cg,forEach:function(e,t,n){cg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cg(e,function(){t++}),t},toArray:function(e){return cg(e,function(t){return t})||[]},only:function(e){if(!Fx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=lf;Mn.Fragment=DR;Mn.Profiler=FR;Mn.PureComponent=zx;Mn.StrictMode=OR;Mn.Suspense=jR;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XR;Mn.act=GI;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=FI({},e.props),u=e.key,m=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,y=Ox.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(M in t)UI.call(t,M)&&!jI.hasOwnProperty(M)&&(o[M]=t[M]===void 0&&d!==void 0?d[M]:t[M])}var M=arguments.length-2;if(M===1)o.children=n;else if(1<M){d=Array(M);for(var A=0;A<M;A++)d[A]=arguments[A+2];o.children=d}return{$$typeof:xm,type:e.type,key:u,ref:m,props:o,_owner:y}};Mn.createContext=function(e){return e={$$typeof:$R,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:BR,_context:e},e.Consumer=e};Mn.createElement=VI;Mn.createFactory=function(e){var t=VI.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:UR,render:e}};Mn.isValidElement=Fx;Mn.lazy=function(e){return{$$typeof:GR,_payload:{_status:-1,_result:e},_init:ZR}};Mn.memo=function(e,t){return{$$typeof:VR,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=Vg.transition;Vg.transition={};try{e()}finally{Vg.transition=t}};Mn.unstable_act=GI;Mn.useCallback=function(e,t){return es.current.useCallback(e,t)};Mn.useContext=function(e){return es.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return es.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return es.current.useEffect(e,t)};Mn.useId=function(){return es.current.useId()};Mn.useImperativeHandle=function(e,t,n){return es.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return es.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return es.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return es.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return es.current.useReducer(e,t,n)};Mn.useRef=function(e){return es.current.useRef(e)};Mn.useState=function(e){return es.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return es.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return es.current.useTransition()};Mn.version="18.3.1";DI.exports=Mn;var qe=DI.exports;const Ba=tv(qe),K_=RR({__proto__:null,default:Ba},[qe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR=qe,KR=Symbol.for("react.element"),JR=Symbol.for("react.fragment"),QR=Object.prototype.hasOwnProperty,e5=YR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t5={key:!0,ref:!0,__self:!0,__source:!0};function qI(e,t,n){var o,u={},m=null,y=null;n!==void 0&&(m=""+n),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(y=t.ref);for(o in t)QR.call(t,o)&&!t5.hasOwnProperty(o)&&(u[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)u[o]===void 0&&(u[o]=t[o]);return{$$typeof:KR,type:e,key:m,ref:y,props:u,_owner:e5.current}}nv.Fragment=JR;nv.jsx=qI;nv.jsxs=qI;zI.exports=nv;var mt=zI.exports,J_={},HI={exports:{}},Bs={},WI={exports:{}},ZI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ge,ct){var Je=Ge.length;Ge.push(ct);e:for(;0<Je;){var At=Je-1>>>1,Ut=Ge[At];if(0<u(Ut,ct))Ge[At]=ct,Ge[Je]=Ut,Je=At;else break e}}function n(Ge){return Ge.length===0?null:Ge[0]}function o(Ge){if(Ge.length===0)return null;var ct=Ge[0],Je=Ge.pop();if(Je!==ct){Ge[0]=Je;e:for(var At=0,Ut=Ge.length,Sn=Ut>>>1;At<Sn;){var Ct=2*(At+1)-1,yn=Ge[Ct],Zn=Ct+1,nr=Ge[Zn];if(0>u(yn,Je))Zn<Ut&&0>u(nr,yn)?(Ge[At]=nr,Ge[Zn]=Je,At=Zn):(Ge[At]=yn,Ge[Ct]=Je,At=Ct);else if(Zn<Ut&&0>u(nr,Je))Ge[At]=nr,Ge[Zn]=Je,At=Zn;else break e}}return ct}function u(Ge,ct){var Je=Ge.sortIndex-ct.sortIndex;return Je!==0?Je:Ge.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var y=Date,d=y.now();e.unstable_now=function(){return y.now()-d}}var M=[],A=[],O=1,R=null,N=3,V=!1,H=!1,ne=!1,de=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Ge){for(var ct=n(A);ct!==null;){if(ct.callback===null)o(A);else if(ct.startTime<=Ge)o(A),ct.sortIndex=ct.expirationTime,t(M,ct);else break;ct=n(A)}}function ie(Ge){if(ne=!1,Q(Ge),!H)if(n(M)!==null)H=!0,ut(he);else{var ct=n(A);ct!==null&&wt(ie,ct.startTime-Ge)}}function he(Ge,ct){H=!1,ne&&(ne=!1,Y(Ie),Ie=-1),V=!0;var Je=N;try{for(Q(ct),R=n(M);R!==null&&(!(R.expirationTime>ct)||Ge&&!Ze());){var At=R.callback;if(typeof At=="function"){R.callback=null,N=R.priorityLevel;var Ut=At(R.expirationTime<=ct);ct=e.unstable_now(),typeof Ut=="function"?R.callback=Ut:R===n(M)&&o(M),Q(ct)}else o(M);R=n(M)}if(R!==null)var Sn=!0;else{var Ct=n(A);Ct!==null&&wt(ie,Ct.startTime-ct),Sn=!1}return Sn}finally{R=null,N=Je,V=!1}}var _e=!1,pe=null,Ie=-1,Le=5,$e=-1;function Ze(){return!(e.unstable_now()-$e<Le)}function et(){if(pe!==null){var Ge=e.unstable_now();$e=Ge;var ct=!0;try{ct=pe(!0,Ge)}finally{ct?at():(_e=!1,pe=null)}}else _e=!1}var at;if(typeof X=="function")at=function(){X(et)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,rt=Ne.port2;Ne.port1.onmessage=et,at=function(){rt.postMessage(null)}}else at=function(){de(et,0)};function ut(Ge){pe=Ge,_e||(_e=!0,at())}function wt(Ge,ct){Ie=de(function(){Ge(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ge){Ge.callback=null},e.unstable_continueExecution=function(){H||V||(H=!0,ut(he))},e.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<Ge?Math.floor(1e3/Ge):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(M)},e.unstable_next=function(Ge){switch(N){case 1:case 2:case 3:var ct=3;break;default:ct=N}var Je=N;N=ct;try{return Ge()}finally{N=Je}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ge,ct){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Je=N;N=Ge;try{return ct()}finally{N=Je}},e.unstable_scheduleCallback=function(Ge,ct,Je){var At=e.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?At+Je:At):Je=At,Ge){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=Je+Ut,Ge={id:O++,callback:ct,priorityLevel:Ge,startTime:Je,expirationTime:Ut,sortIndex:-1},Je>At?(Ge.sortIndex=Je,t(A,Ge),n(M)===null&&Ge===n(A)&&(ne?(Y(Ie),Ie=-1):ne=!0,wt(ie,Je-At))):(Ge.sortIndex=Ut,t(M,Ge),H||V||(H=!0,ut(he))),Ge},e.unstable_shouldYield=Ze,e.unstable_wrapCallback=function(Ge){var ct=N;return function(){var Je=N;N=ct;try{return Ge.apply(this,arguments)}finally{N=Je}}}})(ZI);WI.exports=ZI;var n5=WI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r5=qe,Fs=n5;function gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XI=new Set,Vp={};function Th(e,t){Yd(e,t),Yd(e+"Capture",t)}function Yd(e,t){for(Vp[e]=t,e=0;e<t.length;e++)XI.add(t[e])}var au=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q_=Object.prototype.hasOwnProperty,i5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pk={},mk={};function o5(e){return Q_.call(mk,e)?!0:Q_.call(pk,e)?!1:i5.test(e)?mk[e]=!0:(pk[e]=!0,!1)}function s5(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a5(e,t,n,o){if(t===null||typeof t>"u"||s5(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ts(e,t,n,o,u,m,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=y}var po={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){po[e]=new ts(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];po[t]=new ts(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){po[e]=new ts(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){po[e]=new ts(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){po[e]=new ts(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){po[e]=new ts(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){po[e]=new ts(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){po[e]=new ts(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){po[e]=new ts(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bx=/[\-:]([a-z])/g;function $x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bx,$x);po[t]=new ts(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bx,$x);po[t]=new ts(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bx,$x);po[t]=new ts(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){po[e]=new ts(e,1,!1,e.toLowerCase(),null,!1,!1)});po.xlinkHref=new ts("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){po[e]=new ts(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ux(e,t,n,o){var u=po.hasOwnProperty(t)?po[t]:null;(u!==null?u.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a5(t,n,u,o)&&(n=null),o||u===null?o5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,o=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var mu=r5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hg=Symbol.for("react.element"),Ed=Symbol.for("react.portal"),Id=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),e1=Symbol.for("react.profiler"),YI=Symbol.for("react.provider"),KI=Symbol.for("react.context"),Vx=Symbol.for("react.forward_ref"),t1=Symbol.for("react.suspense"),n1=Symbol.for("react.suspense_list"),Gx=Symbol.for("react.memo"),Ku=Symbol.for("react.lazy"),JI=Symbol.for("react.offscreen"),gk=Symbol.iterator;function ap(e){return e===null||typeof e!="object"?null:(e=gk&&e[gk]||e["@@iterator"],typeof e=="function"?e:null)}var ti=Object.assign,c_;function wp(e){if(c_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);c_=t&&t[1]||""}return`
`+c_+e}var h_=!1;function d_(e,t){if(!e||h_)return"";h_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var o=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){o=A}e.call(t.prototype)}else{try{throw Error()}catch(A){o=A}e()}}catch(A){if(A&&o&&typeof A.stack=="string"){for(var u=A.stack.split(`
`),m=o.stack.split(`
`),y=u.length-1,d=m.length-1;1<=y&&0<=d&&u[y]!==m[d];)d--;for(;1<=y&&0<=d;y--,d--)if(u[y]!==m[d]){if(y!==1||d!==1)do if(y--,d--,0>d||u[y]!==m[d]){var M=`
`+u[y].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=y&&0<=d);break}}}finally{h_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wp(e):""}function l5(e){switch(e.tag){case 5:return wp(e.type);case 16:return wp("Lazy");case 13:return wp("Suspense");case 19:return wp("SuspenseList");case 0:case 2:case 15:return e=d_(e.type,!1),e;case 11:return e=d_(e.type.render,!1),e;case 1:return e=d_(e.type,!0),e;default:return""}}function r1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Id:return"Fragment";case Ed:return"Portal";case e1:return"Profiler";case jx:return"StrictMode";case t1:return"Suspense";case n1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case KI:return(e.displayName||"Context")+".Consumer";case YI:return(e._context.displayName||"Context")+".Provider";case Vx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gx:return t=e.displayName||null,t!==null?t:r1(e.type)||"Memo";case Ku:t=e._payload,e=e._init;try{return r1(e(t))}catch{}}return null}function u5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return r1(t);case 8:return t===jx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function QI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function c5(e){var t=QI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,m=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(y){o=""+y,m.call(this,y)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dg(e){e._valueTracker||(e._valueTracker=c5(e))}function eT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=QI(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function my(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function i1(e,t){var n=t.checked;return ti({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yk(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=yc(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tT(e,t){t=t.checked,t!=null&&Ux(e,"checked",t,!1)}function o1(e,t){tT(e,t);var n=yc(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?s1(e,t.type,n):t.hasOwnProperty("defaultValue")&&s1(e,t.type,yc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function s1(e,t,n){(t!=="number"||my(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kp=Array.isArray;function Od(e,t,n,o){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&o&&(e[n].defaultSelected=!0)}else{for(n=""+yc(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function a1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(gt(91));return ti({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _k(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(gt(92));if(kp(n)){if(1<n.length)throw Error(gt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yc(n)}}function nT(e,t){var n=yc(t.value),o=yc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function xk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fg,iT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fg=fg||document.createElement("div"),fg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h5=["Webkit","ms","Moz","O"];Object.keys(Pp).forEach(function(e){h5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pp[t]=Pp[e]})});function oT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pp.hasOwnProperty(e)&&Pp[e]?(""+t).trim():t+"px"}function sT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,u=oT(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,u):e[n]=u}}var d5=ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u1(e,t){if(t){if(d5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(gt(62))}}function c1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h1=null;function qx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var d1=null,Fd=null,Bd=null;function bk(e){if(e=km(e)){if(typeof d1!="function")throw Error(gt(280));var t=e.stateNode;t&&(t=av(t),d1(e.stateNode,e.type,t))}}function aT(e){Fd?Bd?Bd.push(e):Bd=[e]:Fd=e}function lT(){if(Fd){var e=Fd,t=Bd;if(Bd=Fd=null,bk(e),t)for(e=0;e<t.length;e++)bk(t[e])}}function uT(e,t){return e(t)}function cT(){}var f_=!1;function hT(e,t,n){if(f_)return e(t,n);f_=!0;try{return uT(e,t,n)}finally{f_=!1,(Fd!==null||Bd!==null)&&(cT(),lT())}}function qp(e,t){var n=e.stateNode;if(n===null)return null;var o=av(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(gt(231,t,typeof n));return n}var f1=!1;if(au)try{var lp={};Object.defineProperty(lp,"passive",{get:function(){f1=!0}}),window.addEventListener("test",lp,lp),window.removeEventListener("test",lp,lp)}catch{f1=!1}function f5(e,t,n,o,u,m,y,d,M){var A=Array.prototype.slice.call(arguments,3);try{t.apply(n,A)}catch(O){this.onError(O)}}var Ap=!1,gy=null,yy=!1,p1=null,p5={onError:function(e){Ap=!0,gy=e}};function m5(e,t,n,o,u,m,y,d,M){Ap=!1,gy=null,f5.apply(p5,arguments)}function g5(e,t,n,o,u,m,y,d,M){if(m5.apply(this,arguments),Ap){if(Ap){var A=gy;Ap=!1,gy=null}else throw Error(gt(198));yy||(yy=!0,p1=A)}}function Ch(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wk(e){if(Ch(e)!==e)throw Error(gt(188))}function y5(e){var t=e.alternate;if(!t){if(t=Ch(e),t===null)throw Error(gt(188));return t!==e?null:e}for(var n=e,o=t;;){var u=n.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){n=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===n)return wk(u),e;if(m===o)return wk(u),t;m=m.sibling}throw Error(gt(188))}if(n.return!==o.return)n=u,o=m;else{for(var y=!1,d=u.child;d;){if(d===n){y=!0,n=u,o=m;break}if(d===o){y=!0,o=u,n=m;break}d=d.sibling}if(!y){for(d=m.child;d;){if(d===n){y=!0,n=m,o=u;break}if(d===o){y=!0,o=m,n=u;break}d=d.sibling}if(!y)throw Error(gt(189))}}if(n.alternate!==o)throw Error(gt(190))}if(n.tag!==3)throw Error(gt(188));return n.stateNode.current===n?e:t}function fT(e){return e=y5(e),e!==null?pT(e):null}function pT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pT(e);if(t!==null)return t;e=e.sibling}return null}var mT=Fs.unstable_scheduleCallback,kk=Fs.unstable_cancelCallback,v5=Fs.unstable_shouldYield,_5=Fs.unstable_requestPaint,mi=Fs.unstable_now,x5=Fs.unstable_getCurrentPriorityLevel,Hx=Fs.unstable_ImmediatePriority,gT=Fs.unstable_UserBlockingPriority,vy=Fs.unstable_NormalPriority,b5=Fs.unstable_LowPriority,yT=Fs.unstable_IdlePriority,rv=null,kl=null;function w5(e){if(kl&&typeof kl.onCommitFiberRoot=="function")try{kl.onCommitFiberRoot(rv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ua=Math.clz32?Math.clz32:E5,k5=Math.log,S5=Math.LN2;function E5(e){return e>>>=0,e===0?32:31-(k5(e)/S5|0)|0}var pg=64,mg=4194304;function Sp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _y(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,u=e.suspendedLanes,m=e.pingedLanes,y=n&268435455;if(y!==0){var d=y&~u;d!==0?o=Sp(d):(m&=y,m!==0&&(o=Sp(m)))}else y=n&~u,y!==0?o=Sp(y):m!==0&&(o=Sp(m));if(o===0)return 0;if(t!==0&&t!==o&&!(t&u)&&(u=o&-o,m=t&-t,u>=m||u===16&&(m&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-Ua(t),u=1<<n,o|=e[n],t&=~u;return o}function I5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T5(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,m=e.pendingLanes;0<m;){var y=31-Ua(m),d=1<<y,M=u[y];M===-1?(!(d&n)||d&o)&&(u[y]=I5(d,t)):M<=t&&(e.expiredLanes|=d),m&=~d}}function m1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vT(){var e=pg;return pg<<=1,!(pg&4194240)&&(pg=64),e}function p_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ua(t),e[t]=n}function C5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-Ua(n),m=1<<u;t[u]=0,o[u]=-1,e[u]=-1,n&=~m}}function Wx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-Ua(n),u=1<<o;u&t|e[o]&t&&(e[o]|=t),n&=~u}}var lr=0;function _T(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xT,Zx,bT,wT,kT,g1=!1,gg=[],lc=null,uc=null,cc=null,Hp=new Map,Wp=new Map,Qu=[],M5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sk(e,t){switch(e){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Hp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wp.delete(t.pointerId)}}function up(e,t,n,o,u,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},t!==null&&(t=km(t),t!==null&&Zx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function L5(e,t,n,o,u){switch(t){case"focusin":return lc=up(lc,e,t,n,o,u),!0;case"dragenter":return uc=up(uc,e,t,n,o,u),!0;case"mouseover":return cc=up(cc,e,t,n,o,u),!0;case"pointerover":var m=u.pointerId;return Hp.set(m,up(Hp.get(m)||null,e,t,n,o,u)),!0;case"gotpointercapture":return m=u.pointerId,Wp.set(m,up(Wp.get(m)||null,e,t,n,o,u)),!0}return!1}function ST(e){var t=uh(e.target);if(t!==null){var n=Ch(t);if(n!==null){if(t=n.tag,t===13){if(t=dT(n),t!==null){e.blockedOn=t,kT(e.priority,function(){bT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=y1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);h1=o,n.target.dispatchEvent(o),h1=null}else return t=km(n),t!==null&&Zx(t),e.blockedOn=n,!1;t.shift()}return!0}function Ek(e,t,n){Gg(e)&&n.delete(t)}function P5(){g1=!1,lc!==null&&Gg(lc)&&(lc=null),uc!==null&&Gg(uc)&&(uc=null),cc!==null&&Gg(cc)&&(cc=null),Hp.forEach(Ek),Wp.forEach(Ek)}function cp(e,t){e.blockedOn===t&&(e.blockedOn=null,g1||(g1=!0,Fs.unstable_scheduleCallback(Fs.unstable_NormalPriority,P5)))}function Zp(e){function t(u){return cp(u,e)}if(0<gg.length){cp(gg[0],e);for(var n=1;n<gg.length;n++){var o=gg[n];o.blockedOn===e&&(o.blockedOn=null)}}for(lc!==null&&cp(lc,e),uc!==null&&cp(uc,e),cc!==null&&cp(cc,e),Hp.forEach(t),Wp.forEach(t),n=0;n<Qu.length;n++)o=Qu[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qu.length&&(n=Qu[0],n.blockedOn===null);)ST(n),n.blockedOn===null&&Qu.shift()}var $d=mu.ReactCurrentBatchConfig,xy=!0;function A5(e,t,n,o){var u=lr,m=$d.transition;$d.transition=null;try{lr=1,Xx(e,t,n,o)}finally{lr=u,$d.transition=m}}function R5(e,t,n,o){var u=lr,m=$d.transition;$d.transition=null;try{lr=4,Xx(e,t,n,o)}finally{lr=u,$d.transition=m}}function Xx(e,t,n,o){if(xy){var u=y1(e,t,n,o);if(u===null)S_(e,t,o,by,n),Sk(e,o);else if(L5(u,e,t,n,o))o.stopPropagation();else if(Sk(e,o),t&4&&-1<M5.indexOf(e)){for(;u!==null;){var m=km(u);if(m!==null&&xT(m),m=y1(e,t,n,o),m===null&&S_(e,t,o,by,n),m===u)break;u=m}u!==null&&o.stopPropagation()}else S_(e,t,o,null,n)}}var by=null;function y1(e,t,n,o){if(by=null,e=qx(o),e=uh(e),e!==null)if(t=Ch(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return by=e,null}function ET(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x5()){case Hx:return 1;case gT:return 4;case vy:case b5:return 16;case yT:return 536870912;default:return 16}default:return 16}}var oc=null,Yx=null,qg=null;function IT(){if(qg)return qg;var e,t=Yx,n=t.length,o,u="value"in oc?oc.value:oc.textContent,m=u.length;for(e=0;e<n&&t[e]===u[e];e++);var y=n-e;for(o=1;o<=y&&t[n-o]===u[m-o];o++);return qg=u.slice(e,1<o?1-o:void 0)}function Hg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yg(){return!0}function Ik(){return!1}function $s(e){function t(n,o,u,m,y){this._reactName=n,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(m):m[d]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?yg:Ik,this.isPropagationStopped=Ik,this}return ti(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yg)},persist:function(){},isPersistent:yg}),t}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kx=$s(uf),wm=ti({},uf,{view:0,detail:0}),N5=$s(wm),m_,g_,hp,iv=ti({},wm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hp&&(hp&&e.type==="mousemove"?(m_=e.screenX-hp.screenX,g_=e.screenY-hp.screenY):g_=m_=0,hp=e),m_)},movementY:function(e){return"movementY"in e?e.movementY:g_}}),Tk=$s(iv),z5=ti({},iv,{dataTransfer:0}),D5=$s(z5),O5=ti({},wm,{relatedTarget:0}),y_=$s(O5),F5=ti({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),B5=$s(F5),$5=ti({},uf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U5=$s($5),j5=ti({},uf,{data:0}),Ck=$s(j5),V5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=q5[e])?!!t[e]:!1}function Jx(){return H5}var W5=ti({},wm,{key:function(e){if(e.key){var t=V5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jx,charCode:function(e){return e.type==="keypress"?Hg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z5=$s(W5),X5=ti({},iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mk=$s(X5),Y5=ti({},wm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jx}),K5=$s(Y5),J5=ti({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q5=$s(J5),e3=ti({},iv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t3=$s(e3),n3=[9,13,27,32],Qx=au&&"CompositionEvent"in window,Rp=null;au&&"documentMode"in document&&(Rp=document.documentMode);var r3=au&&"TextEvent"in window&&!Rp,TT=au&&(!Qx||Rp&&8<Rp&&11>=Rp),Lk=" ",Pk=!1;function CT(e,t){switch(e){case"keyup":return n3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Td=!1;function i3(e,t){switch(e){case"compositionend":return MT(t);case"keypress":return t.which!==32?null:(Pk=!0,Lk);case"textInput":return e=t.data,e===Lk&&Pk?null:e;default:return null}}function o3(e,t){if(Td)return e==="compositionend"||!Qx&&CT(e,t)?(e=IT(),qg=Yx=oc=null,Td=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TT&&t.locale!=="ko"?null:t.data;default:return null}}var s3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ak(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!s3[e.type]:t==="textarea"}function LT(e,t,n,o){aT(o),t=wy(t,"onChange"),0<t.length&&(n=new Kx("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Np=null,Xp=null;function a3(e){UT(e,0)}function ov(e){var t=Ld(e);if(eT(t))return e}function l3(e,t){if(e==="change")return t}var PT=!1;if(au){var v_;if(au){var __="oninput"in document;if(!__){var Rk=document.createElement("div");Rk.setAttribute("oninput","return;"),__=typeof Rk.oninput=="function"}v_=__}else v_=!1;PT=v_&&(!document.documentMode||9<document.documentMode)}function Nk(){Np&&(Np.detachEvent("onpropertychange",AT),Xp=Np=null)}function AT(e){if(e.propertyName==="value"&&ov(Xp)){var t=[];LT(t,Xp,e,qx(e)),hT(a3,t)}}function u3(e,t,n){e==="focusin"?(Nk(),Np=t,Xp=n,Np.attachEvent("onpropertychange",AT)):e==="focusout"&&Nk()}function c3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ov(Xp)}function h3(e,t){if(e==="click")return ov(t)}function d3(e,t){if(e==="input"||e==="change")return ov(t)}function f3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ga=typeof Object.is=="function"?Object.is:f3;function Yp(e,t){if(Ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var u=n[o];if(!Q_.call(t,u)||!Ga(e[u],t[u]))return!1}return!0}function zk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dk(e,t){var n=zk(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zk(n)}}function RT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NT(){for(var e=window,t=my();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=my(e.document)}return t}function eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function p3(e){var t=NT(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&RT(n.ownerDocument.documentElement,n)){if(o!==null&&eb(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,m=Math.min(o.start,u);o=o.end===void 0?m:Math.min(o.end,u),!e.extend&&m>o&&(u=o,o=m,m=u),u=Dk(n,m);var y=Dk(n,o);u&&y&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),m>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var m3=au&&"documentMode"in document&&11>=document.documentMode,Cd=null,v1=null,zp=null,_1=!1;function Ok(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_1||Cd==null||Cd!==my(o)||(o=Cd,"selectionStart"in o&&eb(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zp&&Yp(zp,o)||(zp=o,o=wy(v1,"onSelect"),0<o.length&&(t=new Kx("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Cd)))}function vg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Md={animationend:vg("Animation","AnimationEnd"),animationiteration:vg("Animation","AnimationIteration"),animationstart:vg("Animation","AnimationStart"),transitionend:vg("Transition","TransitionEnd")},x_={},zT={};au&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete Md.animationend.animation,delete Md.animationiteration.animation,delete Md.animationstart.animation),"TransitionEvent"in window||delete Md.transitionend.transition);function sv(e){if(x_[e])return x_[e];if(!Md[e])return e;var t=Md[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zT)return x_[e]=t[n];return e}var DT=sv("animationend"),OT=sv("animationiteration"),FT=sv("animationstart"),BT=sv("transitionend"),$T=new Map,Fk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wc(e,t){$T.set(e,t),Th(t,[e])}for(var b_=0;b_<Fk.length;b_++){var w_=Fk[b_],g3=w_.toLowerCase(),y3=w_[0].toUpperCase()+w_.slice(1);wc(g3,"on"+y3)}wc(DT,"onAnimationEnd");wc(OT,"onAnimationIteration");wc(FT,"onAnimationStart");wc("dblclick","onDoubleClick");wc("focusin","onFocus");wc("focusout","onBlur");wc(BT,"onTransitionEnd");Yd("onMouseEnter",["mouseout","mouseover"]);Yd("onMouseLeave",["mouseout","mouseover"]);Yd("onPointerEnter",["pointerout","pointerover"]);Yd("onPointerLeave",["pointerout","pointerover"]);Th("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Th("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Th("onBeforeInput",["compositionend","keypress","textInput","paste"]);Th("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Th("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Th("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ep="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ep));function Bk(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,g5(o,t,void 0,e),e.currentTarget=null}function UT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],u=o.event;o=o.listeners;e:{var m=void 0;if(t)for(var y=o.length-1;0<=y;y--){var d=o[y],M=d.instance,A=d.currentTarget;if(d=d.listener,M!==m&&u.isPropagationStopped())break e;Bk(u,d,A),m=M}else for(y=0;y<o.length;y++){if(d=o[y],M=d.instance,A=d.currentTarget,d=d.listener,M!==m&&u.isPropagationStopped())break e;Bk(u,d,A),m=M}}}if(yy)throw e=p1,yy=!1,p1=null,e}function Dr(e,t){var n=t[S1];n===void 0&&(n=t[S1]=new Set);var o=e+"__bubble";n.has(o)||(jT(t,e,2,!1),n.add(o))}function k_(e,t,n){var o=0;t&&(o|=4),jT(n,e,o,t)}var _g="_reactListening"+Math.random().toString(36).slice(2);function Kp(e){if(!e[_g]){e[_g]=!0,XI.forEach(function(n){n!=="selectionchange"&&(v3.has(n)||k_(n,!1,e),k_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_g]||(t[_g]=!0,k_("selectionchange",!1,t))}}function jT(e,t,n,o){switch(ET(t)){case 1:var u=A5;break;case 4:u=R5;break;default:u=Xx}n=u.bind(null,t,n,e),u=void 0,!f1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function S_(e,t,n,o,u){var m=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var d=o.stateNode.containerInfo;if(d===u||d.nodeType===8&&d.parentNode===u)break;if(y===4)for(y=o.return;y!==null;){var M=y.tag;if((M===3||M===4)&&(M=y.stateNode.containerInfo,M===u||M.nodeType===8&&M.parentNode===u))return;y=y.return}for(;d!==null;){if(y=uh(d),y===null)return;if(M=y.tag,M===5||M===6){o=m=y;continue e}d=d.parentNode}}o=o.return}hT(function(){var A=m,O=qx(n),R=[];e:{var N=$T.get(e);if(N!==void 0){var V=Kx,H=e;switch(e){case"keypress":if(Hg(n)===0)break e;case"keydown":case"keyup":V=Z5;break;case"focusin":H="focus",V=y_;break;case"focusout":H="blur",V=y_;break;case"beforeblur":case"afterblur":V=y_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Tk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=D5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=K5;break;case DT:case OT:case FT:V=B5;break;case BT:V=Q5;break;case"scroll":V=N5;break;case"wheel":V=t3;break;case"copy":case"cut":case"paste":V=U5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Mk}var ne=(t&4)!==0,de=!ne&&e==="scroll",Y=ne?N!==null?N+"Capture":null:N;ne=[];for(var X=A,Q;X!==null;){Q=X;var ie=Q.stateNode;if(Q.tag===5&&ie!==null&&(Q=ie,Y!==null&&(ie=qp(X,Y),ie!=null&&ne.push(Jp(X,ie,Q)))),de)break;X=X.return}0<ne.length&&(N=new V(N,H,null,n,O),R.push({event:N,listeners:ne}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",N&&n!==h1&&(H=n.relatedTarget||n.fromElement)&&(uh(H)||H[lu]))break e;if((V||N)&&(N=O.window===O?O:(N=O.ownerDocument)?N.defaultView||N.parentWindow:window,V?(H=n.relatedTarget||n.toElement,V=A,H=H?uh(H):null,H!==null&&(de=Ch(H),H!==de||H.tag!==5&&H.tag!==6)&&(H=null)):(V=null,H=A),V!==H)){if(ne=Tk,ie="onMouseLeave",Y="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(ne=Mk,ie="onPointerLeave",Y="onPointerEnter",X="pointer"),de=V==null?N:Ld(V),Q=H==null?N:Ld(H),N=new ne(ie,X+"leave",V,n,O),N.target=de,N.relatedTarget=Q,ie=null,uh(O)===A&&(ne=new ne(Y,X+"enter",H,n,O),ne.target=Q,ne.relatedTarget=de,ie=ne),de=ie,V&&H)t:{for(ne=V,Y=H,X=0,Q=ne;Q;Q=cd(Q))X++;for(Q=0,ie=Y;ie;ie=cd(ie))Q++;for(;0<X-Q;)ne=cd(ne),X--;for(;0<Q-X;)Y=cd(Y),Q--;for(;X--;){if(ne===Y||Y!==null&&ne===Y.alternate)break t;ne=cd(ne),Y=cd(Y)}ne=null}else ne=null;V!==null&&$k(R,N,V,ne,!1),H!==null&&de!==null&&$k(R,de,H,ne,!0)}}e:{if(N=A?Ld(A):window,V=N.nodeName&&N.nodeName.toLowerCase(),V==="select"||V==="input"&&N.type==="file")var he=l3;else if(Ak(N))if(PT)he=d3;else{he=c3;var _e=u3}else(V=N.nodeName)&&V.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(he=h3);if(he&&(he=he(e,A))){LT(R,he,n,O);break e}_e&&_e(e,N,A),e==="focusout"&&(_e=N._wrapperState)&&_e.controlled&&N.type==="number"&&s1(N,"number",N.value)}switch(_e=A?Ld(A):window,e){case"focusin":(Ak(_e)||_e.contentEditable==="true")&&(Cd=_e,v1=A,zp=null);break;case"focusout":zp=v1=Cd=null;break;case"mousedown":_1=!0;break;case"contextmenu":case"mouseup":case"dragend":_1=!1,Ok(R,n,O);break;case"selectionchange":if(m3)break;case"keydown":case"keyup":Ok(R,n,O)}var pe;if(Qx)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Td?CT(e,n)&&(Ie="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ie="onCompositionStart");Ie&&(TT&&n.locale!=="ko"&&(Td||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Td&&(pe=IT()):(oc=O,Yx="value"in oc?oc.value:oc.textContent,Td=!0)),_e=wy(A,Ie),0<_e.length&&(Ie=new Ck(Ie,e,null,n,O),R.push({event:Ie,listeners:_e}),pe?Ie.data=pe:(pe=MT(n),pe!==null&&(Ie.data=pe)))),(pe=r3?i3(e,n):o3(e,n))&&(A=wy(A,"onBeforeInput"),0<A.length&&(O=new Ck("onBeforeInput","beforeinput",null,n,O),R.push({event:O,listeners:A}),O.data=pe))}UT(R,t)})}function Jp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wy(e,t){for(var n=t+"Capture",o=[];e!==null;){var u=e,m=u.stateNode;u.tag===5&&m!==null&&(u=m,m=qp(e,n),m!=null&&o.unshift(Jp(e,m,u)),m=qp(e,t),m!=null&&o.push(Jp(e,m,u))),e=e.return}return o}function cd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $k(e,t,n,o,u){for(var m=t._reactName,y=[];n!==null&&n!==o;){var d=n,M=d.alternate,A=d.stateNode;if(M!==null&&M===o)break;d.tag===5&&A!==null&&(d=A,u?(M=qp(n,m),M!=null&&y.unshift(Jp(n,M,d))):u||(M=qp(n,m),M!=null&&y.push(Jp(n,M,d)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var _3=/\r\n?/g,x3=/\u0000|\uFFFD/g;function Uk(e){return(typeof e=="string"?e:""+e).replace(_3,`
`).replace(x3,"")}function xg(e,t,n){if(t=Uk(t),Uk(e)!==t&&n)throw Error(gt(425))}function ky(){}var x1=null,b1=null;function w1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var k1=typeof setTimeout=="function"?setTimeout:void 0,b3=typeof clearTimeout=="function"?clearTimeout:void 0,jk=typeof Promise=="function"?Promise:void 0,w3=typeof queueMicrotask=="function"?queueMicrotask:typeof jk<"u"?function(e){return jk.resolve(null).then(e).catch(k3)}:k1;function k3(e){setTimeout(function(){throw e})}function E_(e,t){var n=t,o=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(o===0){e.removeChild(u),Zp(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=u}while(n);Zp(t)}function hc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cf=Math.random().toString(36).slice(2),bl="__reactFiber$"+cf,Qp="__reactProps$"+cf,lu="__reactContainer$"+cf,S1="__reactEvents$"+cf,S3="__reactListeners$"+cf,E3="__reactHandles$"+cf;function uh(e){var t=e[bl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lu]||n[bl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vk(e);e!==null;){if(n=e[bl])return n;e=Vk(e)}return t}e=n,n=e.parentNode}return null}function km(e){return e=e[bl]||e[lu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ld(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(gt(33))}function av(e){return e[Qp]||null}var E1=[],Pd=-1;function kc(e){return{current:e}}function Fr(e){0>Pd||(e.current=E1[Pd],E1[Pd]=null,Pd--)}function Pr(e,t){Pd++,E1[Pd]=e.current,e.current=t}var vc={},No=kc(vc),ms=kc(!1),_h=vc;function Kd(e,t){var n=e.type.contextTypes;if(!n)return vc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var u={},m;for(m in n)u[m]=t[m];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function gs(e){return e=e.childContextTypes,e!=null}function Sy(){Fr(ms),Fr(No)}function Gk(e,t,n){if(No.current!==vc)throw Error(gt(168));Pr(No,t),Pr(ms,n)}function VT(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var u in o)if(!(u in t))throw Error(gt(108,u5(e)||"Unknown",u));return ti({},n,o)}function Ey(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vc,_h=No.current,Pr(No,e),Pr(ms,ms.current),!0}function qk(e,t,n){var o=e.stateNode;if(!o)throw Error(gt(169));n?(e=VT(e,t,_h),o.__reactInternalMemoizedMergedChildContext=e,Fr(ms),Fr(No),Pr(No,e)):Fr(ms),Pr(ms,n)}var eu=null,lv=!1,I_=!1;function GT(e){eu===null?eu=[e]:eu.push(e)}function I3(e){lv=!0,GT(e)}function Sc(){if(!I_&&eu!==null){I_=!0;var e=0,t=lr;try{var n=eu;for(lr=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}eu=null,lv=!1}catch(u){throw eu!==null&&(eu=eu.slice(e+1)),mT(Hx,Sc),u}finally{lr=t,I_=!1}}return null}var Ad=[],Rd=0,Iy=null,Ty=0,ca=[],ha=0,xh=null,tu=1,nu="";function rh(e,t){Ad[Rd++]=Ty,Ad[Rd++]=Iy,Iy=e,Ty=t}function qT(e,t,n){ca[ha++]=tu,ca[ha++]=nu,ca[ha++]=xh,xh=e;var o=tu;e=nu;var u=32-Ua(o)-1;o&=~(1<<u),n+=1;var m=32-Ua(t)+u;if(30<m){var y=u-u%5;m=(o&(1<<y)-1).toString(32),o>>=y,u-=y,tu=1<<32-Ua(t)+u|n<<u|o,nu=m+e}else tu=1<<m|n<<u|o,nu=e}function tb(e){e.return!==null&&(rh(e,1),qT(e,1,0))}function nb(e){for(;e===Iy;)Iy=Ad[--Rd],Ad[Rd]=null,Ty=Ad[--Rd],Ad[Rd]=null;for(;e===xh;)xh=ca[--ha],ca[ha]=null,nu=ca[--ha],ca[ha]=null,tu=ca[--ha],ca[ha]=null}var Ds=null,zs=null,Vr=!1,Fa=null;function HT(e,t){var n=fa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ds=e,zs=hc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ds=e,zs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xh!==null?{id:tu,overflow:nu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ds=e,zs=null,!0):!1;default:return!1}}function I1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function T1(e){if(Vr){var t=zs;if(t){var n=t;if(!Hk(e,t)){if(I1(e))throw Error(gt(418));t=hc(n.nextSibling);var o=Ds;t&&Hk(e,t)?HT(o,n):(e.flags=e.flags&-4097|2,Vr=!1,Ds=e)}}else{if(I1(e))throw Error(gt(418));e.flags=e.flags&-4097|2,Vr=!1,Ds=e}}}function Wk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ds=e}function bg(e){if(e!==Ds)return!1;if(!Vr)return Wk(e),Vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!w1(e.type,e.memoizedProps)),t&&(t=zs)){if(I1(e))throw WT(),Error(gt(418));for(;t;)HT(e,t),t=hc(t.nextSibling)}if(Wk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zs=hc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zs=null}}else zs=Ds?hc(e.stateNode.nextSibling):null;return!0}function WT(){for(var e=zs;e;)e=hc(e.nextSibling)}function Jd(){zs=Ds=null,Vr=!1}function rb(e){Fa===null?Fa=[e]:Fa.push(e)}var T3=mu.ReactCurrentBatchConfig;function dp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(gt(309));var o=n.stateNode}if(!o)throw Error(gt(147,e));var u=o,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(y){var d=u.refs;y===null?delete d[m]:d[m]=y},t._stringRef=m,t)}if(typeof e!="string")throw Error(gt(284));if(!n._owner)throw Error(gt(290,e))}return e}function wg(e,t){throw e=Object.prototype.toString.call(t),Error(gt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zk(e){var t=e._init;return t(e._payload)}function ZT(e){function t(Y,X){if(e){var Q=Y.deletions;Q===null?(Y.deletions=[X],Y.flags|=16):Q.push(X)}}function n(Y,X){if(!e)return null;for(;X!==null;)t(Y,X),X=X.sibling;return null}function o(Y,X){for(Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function u(Y,X){return Y=mc(Y,X),Y.index=0,Y.sibling=null,Y}function m(Y,X,Q){return Y.index=Q,e?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<X?(Y.flags|=2,X):Q):(Y.flags|=2,X)):(Y.flags|=1048576,X)}function y(Y){return e&&Y.alternate===null&&(Y.flags|=2),Y}function d(Y,X,Q,ie){return X===null||X.tag!==6?(X=R_(Q,Y.mode,ie),X.return=Y,X):(X=u(X,Q),X.return=Y,X)}function M(Y,X,Q,ie){var he=Q.type;return he===Id?O(Y,X,Q.props.children,ie,Q.key):X!==null&&(X.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ku&&Zk(he)===X.type)?(ie=u(X,Q.props),ie.ref=dp(Y,X,Q),ie.return=Y,ie):(ie=Qg(Q.type,Q.key,Q.props,null,Y.mode,ie),ie.ref=dp(Y,X,Q),ie.return=Y,ie)}function A(Y,X,Q,ie){return X===null||X.tag!==4||X.stateNode.containerInfo!==Q.containerInfo||X.stateNode.implementation!==Q.implementation?(X=N_(Q,Y.mode,ie),X.return=Y,X):(X=u(X,Q.children||[]),X.return=Y,X)}function O(Y,X,Q,ie,he){return X===null||X.tag!==7?(X=gh(Q,Y.mode,ie,he),X.return=Y,X):(X=u(X,Q),X.return=Y,X)}function R(Y,X,Q){if(typeof X=="string"&&X!==""||typeof X=="number")return X=R_(""+X,Y.mode,Q),X.return=Y,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case hg:return Q=Qg(X.type,X.key,X.props,null,Y.mode,Q),Q.ref=dp(Y,null,X),Q.return=Y,Q;case Ed:return X=N_(X,Y.mode,Q),X.return=Y,X;case Ku:var ie=X._init;return R(Y,ie(X._payload),Q)}if(kp(X)||ap(X))return X=gh(X,Y.mode,Q,null),X.return=Y,X;wg(Y,X)}return null}function N(Y,X,Q,ie){var he=X!==null?X.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return he!==null?null:d(Y,X,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case hg:return Q.key===he?M(Y,X,Q,ie):null;case Ed:return Q.key===he?A(Y,X,Q,ie):null;case Ku:return he=Q._init,N(Y,X,he(Q._payload),ie)}if(kp(Q)||ap(Q))return he!==null?null:O(Y,X,Q,ie,null);wg(Y,Q)}return null}function V(Y,X,Q,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Y=Y.get(Q)||null,d(X,Y,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case hg:return Y=Y.get(ie.key===null?Q:ie.key)||null,M(X,Y,ie,he);case Ed:return Y=Y.get(ie.key===null?Q:ie.key)||null,A(X,Y,ie,he);case Ku:var _e=ie._init;return V(Y,X,Q,_e(ie._payload),he)}if(kp(ie)||ap(ie))return Y=Y.get(Q)||null,O(X,Y,ie,he,null);wg(X,ie)}return null}function H(Y,X,Q,ie){for(var he=null,_e=null,pe=X,Ie=X=0,Le=null;pe!==null&&Ie<Q.length;Ie++){pe.index>Ie?(Le=pe,pe=null):Le=pe.sibling;var $e=N(Y,pe,Q[Ie],ie);if($e===null){pe===null&&(pe=Le);break}e&&pe&&$e.alternate===null&&t(Y,pe),X=m($e,X,Ie),_e===null?he=$e:_e.sibling=$e,_e=$e,pe=Le}if(Ie===Q.length)return n(Y,pe),Vr&&rh(Y,Ie),he;if(pe===null){for(;Ie<Q.length;Ie++)pe=R(Y,Q[Ie],ie),pe!==null&&(X=m(pe,X,Ie),_e===null?he=pe:_e.sibling=pe,_e=pe);return Vr&&rh(Y,Ie),he}for(pe=o(Y,pe);Ie<Q.length;Ie++)Le=V(pe,Y,Ie,Q[Ie],ie),Le!==null&&(e&&Le.alternate!==null&&pe.delete(Le.key===null?Ie:Le.key),X=m(Le,X,Ie),_e===null?he=Le:_e.sibling=Le,_e=Le);return e&&pe.forEach(function(Ze){return t(Y,Ze)}),Vr&&rh(Y,Ie),he}function ne(Y,X,Q,ie){var he=ap(Q);if(typeof he!="function")throw Error(gt(150));if(Q=he.call(Q),Q==null)throw Error(gt(151));for(var _e=he=null,pe=X,Ie=X=0,Le=null,$e=Q.next();pe!==null&&!$e.done;Ie++,$e=Q.next()){pe.index>Ie?(Le=pe,pe=null):Le=pe.sibling;var Ze=N(Y,pe,$e.value,ie);if(Ze===null){pe===null&&(pe=Le);break}e&&pe&&Ze.alternate===null&&t(Y,pe),X=m(Ze,X,Ie),_e===null?he=Ze:_e.sibling=Ze,_e=Ze,pe=Le}if($e.done)return n(Y,pe),Vr&&rh(Y,Ie),he;if(pe===null){for(;!$e.done;Ie++,$e=Q.next())$e=R(Y,$e.value,ie),$e!==null&&(X=m($e,X,Ie),_e===null?he=$e:_e.sibling=$e,_e=$e);return Vr&&rh(Y,Ie),he}for(pe=o(Y,pe);!$e.done;Ie++,$e=Q.next())$e=V(pe,Y,Ie,$e.value,ie),$e!==null&&(e&&$e.alternate!==null&&pe.delete($e.key===null?Ie:$e.key),X=m($e,X,Ie),_e===null?he=$e:_e.sibling=$e,_e=$e);return e&&pe.forEach(function(et){return t(Y,et)}),Vr&&rh(Y,Ie),he}function de(Y,X,Q,ie){if(typeof Q=="object"&&Q!==null&&Q.type===Id&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case hg:e:{for(var he=Q.key,_e=X;_e!==null;){if(_e.key===he){if(he=Q.type,he===Id){if(_e.tag===7){n(Y,_e.sibling),X=u(_e,Q.props.children),X.return=Y,Y=X;break e}}else if(_e.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ku&&Zk(he)===_e.type){n(Y,_e.sibling),X=u(_e,Q.props),X.ref=dp(Y,_e,Q),X.return=Y,Y=X;break e}n(Y,_e);break}else t(Y,_e);_e=_e.sibling}Q.type===Id?(X=gh(Q.props.children,Y.mode,ie,Q.key),X.return=Y,Y=X):(ie=Qg(Q.type,Q.key,Q.props,null,Y.mode,ie),ie.ref=dp(Y,X,Q),ie.return=Y,Y=ie)}return y(Y);case Ed:e:{for(_e=Q.key;X!==null;){if(X.key===_e)if(X.tag===4&&X.stateNode.containerInfo===Q.containerInfo&&X.stateNode.implementation===Q.implementation){n(Y,X.sibling),X=u(X,Q.children||[]),X.return=Y,Y=X;break e}else{n(Y,X);break}else t(Y,X);X=X.sibling}X=N_(Q,Y.mode,ie),X.return=Y,Y=X}return y(Y);case Ku:return _e=Q._init,de(Y,X,_e(Q._payload),ie)}if(kp(Q))return H(Y,X,Q,ie);if(ap(Q))return ne(Y,X,Q,ie);wg(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,X!==null&&X.tag===6?(n(Y,X.sibling),X=u(X,Q),X.return=Y,Y=X):(n(Y,X),X=R_(Q,Y.mode,ie),X.return=Y,Y=X),y(Y)):n(Y,X)}return de}var Qd=ZT(!0),XT=ZT(!1),Cy=kc(null),My=null,Nd=null,ib=null;function ob(){ib=Nd=My=null}function sb(e){var t=Cy.current;Fr(Cy),e._currentValue=t}function C1(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Ud(e,t){My=e,ib=Nd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ps=!0),e.firstContext=null)}function ya(e){var t=e._currentValue;if(ib!==e)if(e={context:e,memoizedValue:t,next:null},Nd===null){if(My===null)throw Error(gt(308));Nd=e,My.dependencies={lanes:0,firstContext:e}}else Nd=Nd.next=e;return t}var ch=null;function ab(e){ch===null?ch=[e]:ch.push(e)}function YT(e,t,n,o){var u=t.interleaved;return u===null?(n.next=n,ab(t)):(n.next=u.next,u.next=n),t.interleaved=n,uu(e,o)}function uu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ju=!1;function lb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function iu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dc(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Vn&2){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,uu(e,n)}return u=o.interleaved,u===null?(t.next=t,ab(o)):(t.next=u.next,u.next=t),o.interleaved=t,uu(e,n)}function Wg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Wx(e,n)}}function Xk(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var u=null,m=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};m===null?u=m=y:m=m.next=y,n=n.next}while(n!==null);m===null?u=m=t:m=m.next=t}else u=m=t;n={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ly(e,t,n,o){var u=e.updateQueue;Ju=!1;var m=u.firstBaseUpdate,y=u.lastBaseUpdate,d=u.shared.pending;if(d!==null){u.shared.pending=null;var M=d,A=M.next;M.next=null,y===null?m=A:y.next=A,y=M;var O=e.alternate;O!==null&&(O=O.updateQueue,d=O.lastBaseUpdate,d!==y&&(d===null?O.firstBaseUpdate=A:d.next=A,O.lastBaseUpdate=M))}if(m!==null){var R=u.baseState;y=0,O=A=M=null,d=m;do{var N=d.lane,V=d.eventTime;if((o&N)===N){O!==null&&(O=O.next={eventTime:V,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var H=e,ne=d;switch(N=t,V=n,ne.tag){case 1:if(H=ne.payload,typeof H=="function"){R=H.call(V,R,N);break e}R=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=ne.payload,N=typeof H=="function"?H.call(V,R,N):H,N==null)break e;R=ti({},R,N);break e;case 2:Ju=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,N=u.effects,N===null?u.effects=[d]:N.push(d))}else V={eventTime:V,lane:N,tag:d.tag,payload:d.payload,callback:d.callback,next:null},O===null?(A=O=V,M=R):O=O.next=V,y|=N;if(d=d.next,d===null){if(d=u.shared.pending,d===null)break;N=d,d=N.next,N.next=null,u.lastBaseUpdate=N,u.shared.pending=null}}while(!0);if(O===null&&(M=R),u.baseState=M,u.firstBaseUpdate=A,u.lastBaseUpdate=O,t=u.shared.interleaved,t!==null){u=t;do y|=u.lane,u=u.next;while(u!==t)}else m===null&&(u.shared.lanes=0);wh|=y,e.lanes=y,e.memoizedState=R}}function Yk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],u=o.callback;if(u!==null){if(o.callback=null,o=n,typeof u!="function")throw Error(gt(191,u));u.call(o)}}}var Sm={},Sl=kc(Sm),em=kc(Sm),tm=kc(Sm);function hh(e){if(e===Sm)throw Error(gt(174));return e}function ub(e,t){switch(Pr(tm,t),Pr(em,e),Pr(Sl,Sm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:l1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=l1(t,e)}Fr(Sl),Pr(Sl,t)}function ef(){Fr(Sl),Fr(em),Fr(tm)}function JT(e){hh(tm.current);var t=hh(Sl.current),n=l1(t,e.type);t!==n&&(Pr(em,e),Pr(Sl,n))}function cb(e){em.current===e&&(Fr(Sl),Fr(em))}var Kr=kc(0);function Py(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var T_=[];function hb(){for(var e=0;e<T_.length;e++)T_[e]._workInProgressVersionPrimary=null;T_.length=0}var Zg=mu.ReactCurrentDispatcher,C_=mu.ReactCurrentBatchConfig,bh=0,ei=null,zi=null,Wi=null,Ay=!1,Dp=!1,nm=0,C3=0;function Mo(){throw Error(gt(321))}function db(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ga(e[n],t[n]))return!1;return!0}function fb(e,t,n,o,u,m){if(bh=m,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zg.current=e===null||e.memoizedState===null?A3:R3,e=n(o,u),Dp){m=0;do{if(Dp=!1,nm=0,25<=m)throw Error(gt(301));m+=1,Wi=zi=null,t.updateQueue=null,Zg.current=N3,e=n(o,u)}while(Dp)}if(Zg.current=Ry,t=zi!==null&&zi.next!==null,bh=0,Wi=zi=ei=null,Ay=!1,t)throw Error(gt(300));return e}function pb(){var e=nm!==0;return nm=0,e}function yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?ei.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function va(){if(zi===null){var e=ei.alternate;e=e!==null?e.memoizedState:null}else e=zi.next;var t=Wi===null?ei.memoizedState:Wi.next;if(t!==null)Wi=t,zi=e;else{if(e===null)throw Error(gt(310));zi=e,e={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},Wi===null?ei.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function rm(e,t){return typeof t=="function"?t(e):t}function M_(e){var t=va(),n=t.queue;if(n===null)throw Error(gt(311));n.lastRenderedReducer=e;var o=zi,u=o.baseQueue,m=n.pending;if(m!==null){if(u!==null){var y=u.next;u.next=m.next,m.next=y}o.baseQueue=u=m,n.pending=null}if(u!==null){m=u.next,o=o.baseState;var d=y=null,M=null,A=m;do{var O=A.lane;if((bh&O)===O)M!==null&&(M=M.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),o=A.hasEagerState?A.eagerState:e(o,A.action);else{var R={lane:O,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};M===null?(d=M=R,y=o):M=M.next=R,ei.lanes|=O,wh|=O}A=A.next}while(A!==null&&A!==m);M===null?y=o:M.next=d,Ga(o,t.memoizedState)||(ps=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=M,n.lastRenderedState=o}if(e=n.interleaved,e!==null){u=e;do m=u.lane,ei.lanes|=m,wh|=m,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function L_(e){var t=va(),n=t.queue;if(n===null)throw Error(gt(311));n.lastRenderedReducer=e;var o=n.dispatch,u=n.pending,m=t.memoizedState;if(u!==null){n.pending=null;var y=u=u.next;do m=e(m,y.action),y=y.next;while(y!==u);Ga(m,t.memoizedState)||(ps=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),n.lastRenderedState=m}return[m,o]}function QT(){}function eC(e,t){var n=ei,o=va(),u=t(),m=!Ga(o.memoizedState,u);if(m&&(o.memoizedState=u,ps=!0),o=o.queue,mb(rC.bind(null,n,o,e),[e]),o.getSnapshot!==t||m||Wi!==null&&Wi.memoizedState.tag&1){if(n.flags|=2048,im(9,nC.bind(null,n,o,u,t),void 0,null),Yi===null)throw Error(gt(349));bh&30||tC(n,t,u)}return u}function tC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ei.updateQueue,t===null?(t={lastEffect:null,stores:null},ei.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nC(e,t,n,o){t.value=n,t.getSnapshot=o,iC(t)&&oC(e)}function rC(e,t,n){return n(function(){iC(t)&&oC(e)})}function iC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ga(e,n)}catch{return!0}}function oC(e){var t=uu(e,1);t!==null&&ja(t,e,1,-1)}function Kk(e){var t=yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:e},t.queue=e,e=e.dispatch=P3.bind(null,ei,e),[t.memoizedState,e]}function im(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=ei.updateQueue,t===null?(t={lastEffect:null,stores:null},ei.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function sC(){return va().memoizedState}function Xg(e,t,n,o){var u=yl();ei.flags|=e,u.memoizedState=im(1|t,n,void 0,o===void 0?null:o)}function uv(e,t,n,o){var u=va();o=o===void 0?null:o;var m=void 0;if(zi!==null){var y=zi.memoizedState;if(m=y.destroy,o!==null&&db(o,y.deps)){u.memoizedState=im(t,n,m,o);return}}ei.flags|=e,u.memoizedState=im(1|t,n,m,o)}function Jk(e,t){return Xg(8390656,8,e,t)}function mb(e,t){return uv(2048,8,e,t)}function aC(e,t){return uv(4,2,e,t)}function lC(e,t){return uv(4,4,e,t)}function uC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cC(e,t,n){return n=n!=null?n.concat([e]):null,uv(4,4,uC.bind(null,t,e),n)}function gb(){}function hC(e,t){var n=va();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&db(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function dC(e,t){var n=va();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&db(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function fC(e,t,n){return bh&21?(Ga(n,t)||(n=vT(),ei.lanes|=n,wh|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ps=!0),e.memoizedState=n)}function M3(e,t){var n=lr;lr=n!==0&&4>n?n:4,e(!0);var o=C_.transition;C_.transition={};try{e(!1),t()}finally{lr=n,C_.transition=o}}function pC(){return va().memoizedState}function L3(e,t,n){var o=pc(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},mC(e))gC(t,n);else if(n=YT(e,t,n,o),n!==null){var u=Qo();ja(n,e,o,u),yC(n,t,o)}}function P3(e,t,n){var o=pc(e),u={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(mC(e))gC(t,u);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var y=t.lastRenderedState,d=m(y,n);if(u.hasEagerState=!0,u.eagerState=d,Ga(d,y)){var M=t.interleaved;M===null?(u.next=u,ab(t)):(u.next=M.next,M.next=u),t.interleaved=u;return}}catch{}finally{}n=YT(e,t,u,o),n!==null&&(u=Qo(),ja(n,e,o,u),yC(n,t,o))}}function mC(e){var t=e.alternate;return e===ei||t!==null&&t===ei}function gC(e,t){Dp=Ay=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yC(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Wx(e,n)}}var Ry={readContext:ya,useCallback:Mo,useContext:Mo,useEffect:Mo,useImperativeHandle:Mo,useInsertionEffect:Mo,useLayoutEffect:Mo,useMemo:Mo,useReducer:Mo,useRef:Mo,useState:Mo,useDebugValue:Mo,useDeferredValue:Mo,useTransition:Mo,useMutableSource:Mo,useSyncExternalStore:Mo,useId:Mo,unstable_isNewReconciler:!1},A3={readContext:ya,useCallback:function(e,t){return yl().memoizedState=[e,t===void 0?null:t],e},useContext:ya,useEffect:Jk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xg(4194308,4,uC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xg(4,2,e,t)},useMemo:function(e,t){var n=yl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=yl();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=L3.bind(null,ei,e),[o.memoizedState,e]},useRef:function(e){var t=yl();return e={current:e},t.memoizedState=e},useState:Kk,useDebugValue:gb,useDeferredValue:function(e){return yl().memoizedState=e},useTransition:function(){var e=Kk(!1),t=e[0];return e=M3.bind(null,e[1]),yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ei,u=yl();if(Vr){if(n===void 0)throw Error(gt(407));n=n()}else{if(n=t(),Yi===null)throw Error(gt(349));bh&30||tC(o,t,n)}u.memoizedState=n;var m={value:n,getSnapshot:t};return u.queue=m,Jk(rC.bind(null,o,m,e),[e]),o.flags|=2048,im(9,nC.bind(null,o,m,n,t),void 0,null),n},useId:function(){var e=yl(),t=Yi.identifierPrefix;if(Vr){var n=nu,o=tu;n=(o&~(1<<32-Ua(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=nm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=C3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},R3={readContext:ya,useCallback:hC,useContext:ya,useEffect:mb,useImperativeHandle:cC,useInsertionEffect:aC,useLayoutEffect:lC,useMemo:dC,useReducer:M_,useRef:sC,useState:function(){return M_(rm)},useDebugValue:gb,useDeferredValue:function(e){var t=va();return fC(t,zi.memoizedState,e)},useTransition:function(){var e=M_(rm)[0],t=va().memoizedState;return[e,t]},useMutableSource:QT,useSyncExternalStore:eC,useId:pC,unstable_isNewReconciler:!1},N3={readContext:ya,useCallback:hC,useContext:ya,useEffect:mb,useImperativeHandle:cC,useInsertionEffect:aC,useLayoutEffect:lC,useMemo:dC,useReducer:L_,useRef:sC,useState:function(){return L_(rm)},useDebugValue:gb,useDeferredValue:function(e){var t=va();return zi===null?t.memoizedState=e:fC(t,zi.memoizedState,e)},useTransition:function(){var e=L_(rm)[0],t=va().memoizedState;return[e,t]},useMutableSource:QT,useSyncExternalStore:eC,useId:pC,unstable_isNewReconciler:!1};function Da(e,t){if(e&&e.defaultProps){t=ti({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function M1(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:ti({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cv={isMounted:function(e){return(e=e._reactInternals)?Ch(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Qo(),u=pc(e),m=iu(o,u);m.payload=t,n!=null&&(m.callback=n),t=dc(e,m,u),t!==null&&(ja(t,e,u,o),Wg(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Qo(),u=pc(e),m=iu(o,u);m.tag=1,m.payload=t,n!=null&&(m.callback=n),t=dc(e,m,u),t!==null&&(ja(t,e,u,o),Wg(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qo(),o=pc(e),u=iu(n,o);u.tag=2,t!=null&&(u.callback=t),t=dc(e,u,o),t!==null&&(ja(t,e,o,n),Wg(t,e,o))}};function Qk(e,t,n,o,u,m,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,y):t.prototype&&t.prototype.isPureReactComponent?!Yp(n,o)||!Yp(u,m):!0}function vC(e,t,n){var o=!1,u=vc,m=t.contextType;return typeof m=="object"&&m!==null?m=ya(m):(u=gs(t)?_h:No.current,o=t.contextTypes,m=(o=o!=null)?Kd(e,u):vc),t=new t(n,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cv,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=m),t}function eS(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&cv.enqueueReplaceState(t,t.state,null)}function L1(e,t,n,o){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs={},lb(e);var m=t.contextType;typeof m=="object"&&m!==null?u.context=ya(m):(m=gs(t)?_h:No.current,u.context=Kd(e,m)),u.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(M1(e,t,m,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&cv.enqueueReplaceState(u,u.state,null),Ly(e,n,u,o),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function tf(e,t){try{var n="",o=t;do n+=l5(o),o=o.return;while(o);var u=n}catch(m){u=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:u,digest:null}}function P_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function P1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var z3=typeof WeakMap=="function"?WeakMap:Map;function _C(e,t,n){n=iu(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){zy||(zy=!0,U1=o),P1(e,t)},n}function xC(e,t,n){n=iu(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var u=t.value;n.payload=function(){return o(u)},n.callback=function(){P1(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(n.callback=function(){P1(e,t),typeof o!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),n}function tS(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new z3;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(n)||(u.add(n),e=X3.bind(null,e,t,n),t.then(e,e))}function nS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rS(e,t,n,o,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=iu(-1,1),t.tag=2,dc(n,t,1))),n.lanes|=1),e)}var D3=mu.ReactCurrentOwner,ps=!1;function Ko(e,t,n,o){t.child=e===null?XT(t,null,n,o):Qd(t,e.child,n,o)}function iS(e,t,n,o,u){n=n.render;var m=t.ref;return Ud(t,u),o=fb(e,t,n,o,m,u),n=pb(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,cu(e,t,u)):(Vr&&n&&tb(t),t.flags|=1,Ko(e,t,o,u),t.child)}function oS(e,t,n,o,u){if(e===null){var m=n.type;return typeof m=="function"&&!Sb(m)&&m.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=m,bC(e,t,m,o,u)):(e=Qg(n.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&u)){var y=m.memoizedProps;if(n=n.compare,n=n!==null?n:Yp,n(y,o)&&e.ref===t.ref)return cu(e,t,u)}return t.flags|=1,e=mc(m,o),e.ref=t.ref,e.return=t,t.child=e}function bC(e,t,n,o,u){if(e!==null){var m=e.memoizedProps;if(Yp(m,o)&&e.ref===t.ref)if(ps=!1,t.pendingProps=o=m,(e.lanes&u)!==0)e.flags&131072&&(ps=!0);else return t.lanes=e.lanes,cu(e,t,u)}return A1(e,t,n,o,u)}function wC(e,t,n){var o=t.pendingProps,u=o.children,m=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Dd,As),As|=n;else{if(!(n&1073741824))return e=m!==null?m.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(Dd,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=m!==null?m.baseLanes:n,Pr(Dd,As),As|=o}else m!==null?(o=m.baseLanes|n,t.memoizedState=null):o=n,Pr(Dd,As),As|=o;return Ko(e,t,u,n),t.child}function kC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function A1(e,t,n,o,u){var m=gs(n)?_h:No.current;return m=Kd(t,m),Ud(t,u),n=fb(e,t,n,o,m,u),o=pb(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,cu(e,t,u)):(Vr&&o&&tb(t),t.flags|=1,Ko(e,t,n,u),t.child)}function sS(e,t,n,o,u){if(gs(n)){var m=!0;Ey(t)}else m=!1;if(Ud(t,u),t.stateNode===null)Yg(e,t),vC(t,n,o),L1(t,n,o,u),o=!0;else if(e===null){var y=t.stateNode,d=t.memoizedProps;y.props=d;var M=y.context,A=n.contextType;typeof A=="object"&&A!==null?A=ya(A):(A=gs(n)?_h:No.current,A=Kd(t,A));var O=n.getDerivedStateFromProps,R=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function";R||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(d!==o||M!==A)&&eS(t,y,o,A),Ju=!1;var N=t.memoizedState;y.state=N,Ly(t,o,y,u),M=t.memoizedState,d!==o||N!==M||ms.current||Ju?(typeof O=="function"&&(M1(t,n,O,o),M=t.memoizedState),(d=Ju||Qk(t,n,d,o,N,M,A))?(R||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=M),y.props=o,y.state=M,y.context=A,o=d):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,KT(e,t),d=t.memoizedProps,A=t.type===t.elementType?d:Da(t.type,d),y.props=A,R=t.pendingProps,N=y.context,M=n.contextType,typeof M=="object"&&M!==null?M=ya(M):(M=gs(n)?_h:No.current,M=Kd(t,M));var V=n.getDerivedStateFromProps;(O=typeof V=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(d!==R||N!==M)&&eS(t,y,o,M),Ju=!1,N=t.memoizedState,y.state=N,Ly(t,o,y,u);var H=t.memoizedState;d!==R||N!==H||ms.current||Ju?(typeof V=="function"&&(M1(t,n,V,o),H=t.memoizedState),(A=Ju||Qk(t,n,A,o,N,H,M)||!1)?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,H,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,H,M)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||d===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=H),y.props=o,y.state=H,y.context=M,o=A):(typeof y.componentDidUpdate!="function"||d===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),o=!1)}return R1(e,t,n,o,m,u)}function R1(e,t,n,o,u,m){kC(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return u&&qk(t,n,!1),cu(e,t,m);o=t.stateNode,D3.current=t;var d=y&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=Qd(t,e.child,null,m),t.child=Qd(t,null,d,m)):Ko(e,t,d,m),t.memoizedState=o.state,u&&qk(t,n,!0),t.child}function SC(e){var t=e.stateNode;t.pendingContext?Gk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gk(e,t.context,!1),ub(e,t.containerInfo)}function aS(e,t,n,o,u){return Jd(),rb(u),t.flags|=256,Ko(e,t,n,o),t.child}var N1={dehydrated:null,treeContext:null,retryLane:0};function z1(e){return{baseLanes:e,cachePool:null,transitions:null}}function EC(e,t,n){var o=t.pendingProps,u=Kr.current,m=!1,y=(t.flags&128)!==0,d;if((d=y)||(d=e!==null&&e.memoizedState===null?!1:(u&2)!==0),d?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Pr(Kr,u&1),e===null)return T1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=o.children,e=o.fallback,m?(o=t.mode,m=t.child,y={mode:"hidden",children:y},!(o&1)&&m!==null?(m.childLanes=0,m.pendingProps=y):m=fv(y,o,0,null),e=gh(e,o,n,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=z1(n),t.memoizedState=N1,e):yb(t,y));if(u=e.memoizedState,u!==null&&(d=u.dehydrated,d!==null))return O3(e,t,y,o,d,u,n);if(m){m=o.fallback,y=t.mode,u=e.child,d=u.sibling;var M={mode:"hidden",children:o.children};return!(y&1)&&t.child!==u?(o=t.child,o.childLanes=0,o.pendingProps=M,t.deletions=null):(o=mc(u,M),o.subtreeFlags=u.subtreeFlags&14680064),d!==null?m=mc(d,m):(m=gh(m,y,n,null),m.flags|=2),m.return=t,o.return=t,o.sibling=m,t.child=o,o=m,m=t.child,y=e.child.memoizedState,y=y===null?z1(n):{baseLanes:y.baseLanes|n,cachePool:null,transitions:y.transitions},m.memoizedState=y,m.childLanes=e.childLanes&~n,t.memoizedState=N1,o}return m=e.child,e=m.sibling,o=mc(m,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function yb(e,t){return t=fv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kg(e,t,n,o){return o!==null&&rb(o),Qd(t,e.child,null,n),e=yb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function O3(e,t,n,o,u,m,y){if(n)return t.flags&256?(t.flags&=-257,o=P_(Error(gt(422))),kg(e,t,y,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=o.fallback,u=t.mode,o=fv({mode:"visible",children:o.children},u,0,null),m=gh(m,u,y,null),m.flags|=2,o.return=t,m.return=t,o.sibling=m,t.child=o,t.mode&1&&Qd(t,e.child,null,y),t.child.memoizedState=z1(y),t.memoizedState=N1,m);if(!(t.mode&1))return kg(e,t,y,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var d=o.dgst;return o=d,m=Error(gt(419)),o=P_(m,o,void 0),kg(e,t,y,o)}if(d=(y&e.childLanes)!==0,ps||d){if(o=Yi,o!==null){switch(y&-y){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|y)?0:u,u!==0&&u!==m.retryLane&&(m.retryLane=u,uu(e,u),ja(o,e,u,-1))}return kb(),o=P_(Error(gt(421))),kg(e,t,y,o)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Y3.bind(null,e),u._reactRetry=t,null):(e=m.treeContext,zs=hc(u.nextSibling),Ds=t,Vr=!0,Fa=null,e!==null&&(ca[ha++]=tu,ca[ha++]=nu,ca[ha++]=xh,tu=e.id,nu=e.overflow,xh=t),t=yb(t,o.children),t.flags|=4096,t)}function lS(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),C1(e.return,t,n)}function A_(e,t,n,o,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=n,m.tailMode=u)}function IC(e,t,n){var o=t.pendingProps,u=o.revealOrder,m=o.tail;if(Ko(e,t,o.children,n),o=Kr.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lS(e,n,t);else if(e.tag===19)lS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Pr(Kr,o),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&Py(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),A_(t,!1,u,n,m);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Py(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}A_(t,!0,n,null,m);break;case"together":A_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wh|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(gt(153));if(t.child!==null){for(e=t.child,n=mc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function F3(e,t,n){switch(t.tag){case 3:SC(t),Jd();break;case 5:JT(t);break;case 1:gs(t.type)&&Ey(t);break;case 4:ub(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,u=t.memoizedProps.value;Pr(Cy,o._currentValue),o._currentValue=u;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Pr(Kr,Kr.current&1),t.flags|=128,null):n&t.child.childLanes?EC(e,t,n):(Pr(Kr,Kr.current&1),e=cu(e,t,n),e!==null?e.sibling:null);Pr(Kr,Kr.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return IC(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Pr(Kr,Kr.current),o)break;return null;case 22:case 23:return t.lanes=0,wC(e,t,n)}return cu(e,t,n)}var TC,D1,CC,MC;TC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};D1=function(){};CC=function(e,t,n,o){var u=e.memoizedProps;if(u!==o){e=t.stateNode,hh(Sl.current);var m=null;switch(n){case"input":u=i1(e,u),o=i1(e,o),m=[];break;case"select":u=ti({},u,{value:void 0}),o=ti({},o,{value:void 0}),m=[];break;case"textarea":u=a1(e,u),o=a1(e,o),m=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ky)}u1(n,o);var y;n=null;for(A in u)if(!o.hasOwnProperty(A)&&u.hasOwnProperty(A)&&u[A]!=null)if(A==="style"){var d=u[A];for(y in d)d.hasOwnProperty(y)&&(n||(n={}),n[y]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Vp.hasOwnProperty(A)?m||(m=[]):(m=m||[]).push(A,null));for(A in o){var M=o[A];if(d=u!=null?u[A]:void 0,o.hasOwnProperty(A)&&M!==d&&(M!=null||d!=null))if(A==="style")if(d){for(y in d)!d.hasOwnProperty(y)||M&&M.hasOwnProperty(y)||(n||(n={}),n[y]="");for(y in M)M.hasOwnProperty(y)&&d[y]!==M[y]&&(n||(n={}),n[y]=M[y])}else n||(m||(m=[]),m.push(A,n)),n=M;else A==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,d=d?d.__html:void 0,M!=null&&d!==M&&(m=m||[]).push(A,M)):A==="children"?typeof M!="string"&&typeof M!="number"||(m=m||[]).push(A,""+M):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(Vp.hasOwnProperty(A)?(M!=null&&A==="onScroll"&&Dr("scroll",e),m||d===M||(m=[])):(m=m||[]).push(A,M))}n&&(m=m||[]).push("style",n);var A=m;(t.updateQueue=A)&&(t.flags|=4)}};MC=function(e,t,n,o){n!==o&&(t.flags|=4)};function fp(e,t){if(!Vr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Lo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function B3(e,t,n){var o=t.pendingProps;switch(nb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lo(t),null;case 1:return gs(t.type)&&Sy(),Lo(t),null;case 3:return o=t.stateNode,ef(),Fr(ms),Fr(No),hb(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(bg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fa!==null&&(G1(Fa),Fa=null))),D1(e,t),Lo(t),null;case 5:cb(t);var u=hh(tm.current);if(n=t.type,e!==null&&t.stateNode!=null)CC(e,t,n,o,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(gt(166));return Lo(t),null}if(e=hh(Sl.current),bg(t)){o=t.stateNode,n=t.type;var m=t.memoizedProps;switch(o[bl]=t,o[Qp]=m,e=(t.mode&1)!==0,n){case"dialog":Dr("cancel",o),Dr("close",o);break;case"iframe":case"object":case"embed":Dr("load",o);break;case"video":case"audio":for(u=0;u<Ep.length;u++)Dr(Ep[u],o);break;case"source":Dr("error",o);break;case"img":case"image":case"link":Dr("error",o),Dr("load",o);break;case"details":Dr("toggle",o);break;case"input":yk(o,m),Dr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!m.multiple},Dr("invalid",o);break;case"textarea":_k(o,m),Dr("invalid",o)}u1(n,m),u=null;for(var y in m)if(m.hasOwnProperty(y)){var d=m[y];y==="children"?typeof d=="string"?o.textContent!==d&&(m.suppressHydrationWarning!==!0&&xg(o.textContent,d,e),u=["children",d]):typeof d=="number"&&o.textContent!==""+d&&(m.suppressHydrationWarning!==!0&&xg(o.textContent,d,e),u=["children",""+d]):Vp.hasOwnProperty(y)&&d!=null&&y==="onScroll"&&Dr("scroll",o)}switch(n){case"input":dg(o),vk(o,m,!0);break;case"textarea":dg(o),xk(o);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(o.onclick=ky)}o=u,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(n,{is:o.is}):(e=y.createElement(n),n==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,n),e[bl]=t,e[Qp]=o,TC(e,t,!1,!1),t.stateNode=e;e:{switch(y=c1(n,o),n){case"dialog":Dr("cancel",e),Dr("close",e),u=o;break;case"iframe":case"object":case"embed":Dr("load",e),u=o;break;case"video":case"audio":for(u=0;u<Ep.length;u++)Dr(Ep[u],e);u=o;break;case"source":Dr("error",e),u=o;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),u=o;break;case"details":Dr("toggle",e),u=o;break;case"input":yk(e,o),u=i1(e,o),Dr("invalid",e);break;case"option":u=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=ti({},o,{value:void 0}),Dr("invalid",e);break;case"textarea":_k(e,o),u=a1(e,o),Dr("invalid",e);break;default:u=o}u1(n,u),d=u;for(m in d)if(d.hasOwnProperty(m)){var M=d[m];m==="style"?sT(e,M):m==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&iT(e,M)):m==="children"?typeof M=="string"?(n!=="textarea"||M!=="")&&Gp(e,M):typeof M=="number"&&Gp(e,""+M):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Vp.hasOwnProperty(m)?M!=null&&m==="onScroll"&&Dr("scroll",e):M!=null&&Ux(e,m,M,y))}switch(n){case"input":dg(e),vk(e,o,!1);break;case"textarea":dg(e),xk(e);break;case"option":o.value!=null&&e.setAttribute("value",""+yc(o.value));break;case"select":e.multiple=!!o.multiple,m=o.value,m!=null?Od(e,!!o.multiple,m,!1):o.defaultValue!=null&&Od(e,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=ky)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Lo(t),null;case 6:if(e&&t.stateNode!=null)MC(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(gt(166));if(n=hh(tm.current),hh(Sl.current),bg(t)){if(o=t.stateNode,n=t.memoizedProps,o[bl]=t,(m=o.nodeValue!==n)&&(e=Ds,e!==null))switch(e.tag){case 3:xg(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xg(o.nodeValue,n,(e.mode&1)!==0)}m&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[bl]=t,t.stateNode=o}return Lo(t),null;case 13:if(Fr(Kr),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vr&&zs!==null&&t.mode&1&&!(t.flags&128))WT(),Jd(),t.flags|=98560,m=!1;else if(m=bg(t),o!==null&&o.dehydrated!==null){if(e===null){if(!m)throw Error(gt(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(gt(317));m[bl]=t}else Jd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lo(t),m=!1}else Fa!==null&&(G1(Fa),Fa=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Kr.current&1?Di===0&&(Di=3):kb())),t.updateQueue!==null&&(t.flags|=4),Lo(t),null);case 4:return ef(),D1(e,t),e===null&&Kp(t.stateNode.containerInfo),Lo(t),null;case 10:return sb(t.type._context),Lo(t),null;case 17:return gs(t.type)&&Sy(),Lo(t),null;case 19:if(Fr(Kr),m=t.memoizedState,m===null)return Lo(t),null;if(o=(t.flags&128)!==0,y=m.rendering,y===null)if(o)fp(m,!1);else{if(Di!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Py(e),y!==null){for(t.flags|=128,fp(m,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)m=n,e=o,m.flags&=14680066,y=m.alternate,y===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,e=y.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pr(Kr,Kr.current&1|2),t.child}e=e.sibling}m.tail!==null&&mi()>nf&&(t.flags|=128,o=!0,fp(m,!1),t.lanes=4194304)}else{if(!o)if(e=Py(y),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fp(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Vr)return Lo(t),null}else 2*mi()-m.renderingStartTime>nf&&n!==1073741824&&(t.flags|=128,o=!0,fp(m,!1),t.lanes=4194304);m.isBackwards?(y.sibling=t.child,t.child=y):(n=m.last,n!==null?n.sibling=y:t.child=y,m.last=y)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=mi(),t.sibling=null,n=Kr.current,Pr(Kr,o?n&1|2:n&1),t):(Lo(t),null);case 22:case 23:return wb(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?As&1073741824&&(Lo(t),t.subtreeFlags&6&&(t.flags|=8192)):Lo(t),null;case 24:return null;case 25:return null}throw Error(gt(156,t.tag))}function $3(e,t){switch(nb(t),t.tag){case 1:return gs(t.type)&&Sy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ef(),Fr(ms),Fr(No),hb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cb(t),null;case 13:if(Fr(Kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(gt(340));Jd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fr(Kr),null;case 4:return ef(),null;case 10:return sb(t.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var Sg=!1,Ro=!1,U3=typeof WeakSet=="function"?WeakSet:Set,$t=null;function zd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){ai(e,t,o)}else n.current=null}function O1(e,t,n){try{n()}catch(o){ai(e,t,o)}}var uS=!1;function j3(e,t){if(x1=xy,e=NT(),eb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{n.nodeType,m.nodeType}catch{n=null;break e}var y=0,d=-1,M=-1,A=0,O=0,R=e,N=null;t:for(;;){for(var V;R!==n||u!==0&&R.nodeType!==3||(d=y+u),R!==m||o!==0&&R.nodeType!==3||(M=y+o),R.nodeType===3&&(y+=R.nodeValue.length),(V=R.firstChild)!==null;)N=R,R=V;for(;;){if(R===e)break t;if(N===n&&++A===u&&(d=y),N===m&&++O===o&&(M=y),(V=R.nextSibling)!==null)break;R=N,N=R.parentNode}R=V}n=d===-1||M===-1?null:{start:d,end:M}}else n=null}n=n||{start:0,end:0}}else n=null;for(b1={focusedElem:e,selectionRange:n},xy=!1,$t=t;$t!==null;)if(t=$t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$t=e;else for(;$t!==null;){t=$t;try{var H=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var ne=H.memoizedProps,de=H.memoizedState,Y=t.stateNode,X=Y.getSnapshotBeforeUpdate(t.elementType===t.type?ne:Da(t.type,ne),de);Y.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var Q=t.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gt(163))}}catch(ie){ai(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,$t=e;break}$t=t.return}return H=uS,uS=!1,H}function Op(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&e)===e){var m=u.destroy;u.destroy=void 0,m!==void 0&&O1(t,n,m)}u=u.next}while(u!==o)}}function hv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function F1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function LC(e){var t=e.alternate;t!==null&&(e.alternate=null,LC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bl],delete t[Qp],delete t[S1],delete t[S3],delete t[E3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function PC(e){return e.tag===5||e.tag===3||e.tag===4}function cS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||PC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function B1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ky));else if(o!==4&&(e=e.child,e!==null))for(B1(e,t,n),e=e.sibling;e!==null;)B1(e,t,n),e=e.sibling}function $1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for($1(e,t,n),e=e.sibling;e!==null;)$1(e,t,n),e=e.sibling}var uo=null,Oa=!1;function Xu(e,t,n){for(n=n.child;n!==null;)AC(e,t,n),n=n.sibling}function AC(e,t,n){if(kl&&typeof kl.onCommitFiberUnmount=="function")try{kl.onCommitFiberUnmount(rv,n)}catch{}switch(n.tag){case 5:Ro||zd(n,t);case 6:var o=uo,u=Oa;uo=null,Xu(e,t,n),uo=o,Oa=u,uo!==null&&(Oa?(e=uo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):uo.removeChild(n.stateNode));break;case 18:uo!==null&&(Oa?(e=uo,n=n.stateNode,e.nodeType===8?E_(e.parentNode,n):e.nodeType===1&&E_(e,n),Zp(e)):E_(uo,n.stateNode));break;case 4:o=uo,u=Oa,uo=n.stateNode.containerInfo,Oa=!0,Xu(e,t,n),uo=o,Oa=u;break;case 0:case 11:case 14:case 15:if(!Ro&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var m=u,y=m.destroy;m=m.tag,y!==void 0&&(m&2||m&4)&&O1(n,t,y),u=u.next}while(u!==o)}Xu(e,t,n);break;case 1:if(!Ro&&(zd(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(d){ai(n,t,d)}Xu(e,t,n);break;case 21:Xu(e,t,n);break;case 22:n.mode&1?(Ro=(o=Ro)||n.memoizedState!==null,Xu(e,t,n),Ro=o):Xu(e,t,n);break;default:Xu(e,t,n)}}function hS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new U3),t.forEach(function(o){var u=K3.bind(null,e,o);n.has(o)||(n.add(o),o.then(u,u))})}}function Ra(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var u=n[o];try{var m=e,y=t,d=y;e:for(;d!==null;){switch(d.tag){case 5:uo=d.stateNode,Oa=!1;break e;case 3:uo=d.stateNode.containerInfo,Oa=!0;break e;case 4:uo=d.stateNode.containerInfo,Oa=!0;break e}d=d.return}if(uo===null)throw Error(gt(160));AC(m,y,u),uo=null,Oa=!1;var M=u.alternate;M!==null&&(M.return=null),u.return=null}catch(A){ai(u,t,A)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RC(t,e),t=t.sibling}function RC(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ra(t,e),gl(e),o&4){try{Op(3,e,e.return),hv(3,e)}catch(ne){ai(e,e.return,ne)}try{Op(5,e,e.return)}catch(ne){ai(e,e.return,ne)}}break;case 1:Ra(t,e),gl(e),o&512&&n!==null&&zd(n,n.return);break;case 5:if(Ra(t,e),gl(e),o&512&&n!==null&&zd(n,n.return),e.flags&32){var u=e.stateNode;try{Gp(u,"")}catch(ne){ai(e,e.return,ne)}}if(o&4&&(u=e.stateNode,u!=null)){var m=e.memoizedProps,y=n!==null?n.memoizedProps:m,d=e.type,M=e.updateQueue;if(e.updateQueue=null,M!==null)try{d==="input"&&m.type==="radio"&&m.name!=null&&tT(u,m),c1(d,y);var A=c1(d,m);for(y=0;y<M.length;y+=2){var O=M[y],R=M[y+1];O==="style"?sT(u,R):O==="dangerouslySetInnerHTML"?iT(u,R):O==="children"?Gp(u,R):Ux(u,O,R,A)}switch(d){case"input":o1(u,m);break;case"textarea":nT(u,m);break;case"select":var N=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!m.multiple;var V=m.value;V!=null?Od(u,!!m.multiple,V,!1):N!==!!m.multiple&&(m.defaultValue!=null?Od(u,!!m.multiple,m.defaultValue,!0):Od(u,!!m.multiple,m.multiple?[]:"",!1))}u[Qp]=m}catch(ne){ai(e,e.return,ne)}}break;case 6:if(Ra(t,e),gl(e),o&4){if(e.stateNode===null)throw Error(gt(162));u=e.stateNode,m=e.memoizedProps;try{u.nodeValue=m}catch(ne){ai(e,e.return,ne)}}break;case 3:if(Ra(t,e),gl(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Zp(t.containerInfo)}catch(ne){ai(e,e.return,ne)}break;case 4:Ra(t,e),gl(e);break;case 13:Ra(t,e),gl(e),u=e.child,u.flags&8192&&(m=u.memoizedState!==null,u.stateNode.isHidden=m,!m||u.alternate!==null&&u.alternate.memoizedState!==null||(xb=mi())),o&4&&hS(e);break;case 22:if(O=n!==null&&n.memoizedState!==null,e.mode&1?(Ro=(A=Ro)||O,Ra(t,e),Ro=A):Ra(t,e),gl(e),o&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!O&&e.mode&1)for($t=e,O=e.child;O!==null;){for(R=$t=O;$t!==null;){switch(N=$t,V=N.child,N.tag){case 0:case 11:case 14:case 15:Op(4,N,N.return);break;case 1:zd(N,N.return);var H=N.stateNode;if(typeof H.componentWillUnmount=="function"){o=N,n=N.return;try{t=o,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(ne){ai(o,n,ne)}}break;case 5:zd(N,N.return);break;case 22:if(N.memoizedState!==null){fS(R);continue}}V!==null?(V.return=N,$t=V):fS(R)}O=O.sibling}e:for(O=null,R=e;;){if(R.tag===5){if(O===null){O=R;try{u=R.stateNode,A?(m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(d=R.stateNode,M=R.memoizedProps.style,y=M!=null&&M.hasOwnProperty("display")?M.display:null,d.style.display=oT("display",y))}catch(ne){ai(e,e.return,ne)}}}else if(R.tag===6){if(O===null)try{R.stateNode.nodeValue=A?"":R.memoizedProps}catch(ne){ai(e,e.return,ne)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;O===R&&(O=null),R=R.return}O===R&&(O=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:Ra(t,e),gl(e),o&4&&hS(e);break;case 21:break;default:Ra(t,e),gl(e)}}function gl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(PC(n)){var o=n;break e}n=n.return}throw Error(gt(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(Gp(u,""),o.flags&=-33);var m=cS(e);$1(e,m,u);break;case 3:case 4:var y=o.stateNode.containerInfo,d=cS(e);B1(e,d,y);break;default:throw Error(gt(161))}}catch(M){ai(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function V3(e,t,n){$t=e,NC(e)}function NC(e,t,n){for(var o=(e.mode&1)!==0;$t!==null;){var u=$t,m=u.child;if(u.tag===22&&o){var y=u.memoizedState!==null||Sg;if(!y){var d=u.alternate,M=d!==null&&d.memoizedState!==null||Ro;d=Sg;var A=Ro;if(Sg=y,(Ro=M)&&!A)for($t=u;$t!==null;)y=$t,M=y.child,y.tag===22&&y.memoizedState!==null?pS(u):M!==null?(M.return=y,$t=M):pS(u);for(;m!==null;)$t=m,NC(m),m=m.sibling;$t=u,Sg=d,Ro=A}dS(e)}else u.subtreeFlags&8772&&m!==null?(m.return=u,$t=m):dS(e)}}function dS(e){for(;$t!==null;){var t=$t;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ro||hv(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Ro)if(n===null)o.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Da(t.type,n.memoizedProps);o.componentDidUpdate(u,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&Yk(t,m,o);break;case 3:var y=t.updateQueue;if(y!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yk(t,y,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var M=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&n.focus();break;case"img":M.src&&(n.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var A=t.alternate;if(A!==null){var O=A.memoizedState;if(O!==null){var R=O.dehydrated;R!==null&&Zp(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gt(163))}Ro||t.flags&512&&F1(t)}catch(N){ai(t,t.return,N)}}if(t===e){$t=null;break}if(n=t.sibling,n!==null){n.return=t.return,$t=n;break}$t=t.return}}function fS(e){for(;$t!==null;){var t=$t;if(t===e){$t=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$t=n;break}$t=t.return}}function pS(e){for(;$t!==null;){var t=$t;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hv(4,t)}catch(M){ai(t,n,M)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var u=t.return;try{o.componentDidMount()}catch(M){ai(t,u,M)}}var m=t.return;try{F1(t)}catch(M){ai(t,m,M)}break;case 5:var y=t.return;try{F1(t)}catch(M){ai(t,y,M)}}}catch(M){ai(t,t.return,M)}if(t===e){$t=null;break}var d=t.sibling;if(d!==null){d.return=t.return,$t=d;break}$t=t.return}}var G3=Math.ceil,Ny=mu.ReactCurrentDispatcher,vb=mu.ReactCurrentOwner,ga=mu.ReactCurrentBatchConfig,Vn=0,Yi=null,Ei=null,fo=0,As=0,Dd=kc(0),Di=0,om=null,wh=0,dv=0,_b=0,Fp=null,fs=null,xb=0,nf=1/0,Ql=null,zy=!1,U1=null,fc=null,Eg=!1,sc=null,Dy=0,Bp=0,j1=null,Kg=-1,Jg=0;function Qo(){return Vn&6?mi():Kg!==-1?Kg:Kg=mi()}function pc(e){return e.mode&1?Vn&2&&fo!==0?fo&-fo:T3.transition!==null?(Jg===0&&(Jg=vT()),Jg):(e=lr,e!==0||(e=window.event,e=e===void 0?16:ET(e.type)),e):1}function ja(e,t,n,o){if(50<Bp)throw Bp=0,j1=null,Error(gt(185));bm(e,n,o),(!(Vn&2)||e!==Yi)&&(e===Yi&&(!(Vn&2)&&(dv|=n),Di===4&&ec(e,fo)),ys(e,o),n===1&&Vn===0&&!(t.mode&1)&&(nf=mi()+500,lv&&Sc()))}function ys(e,t){var n=e.callbackNode;T5(e,t);var o=_y(e,e===Yi?fo:0);if(o===0)n!==null&&kk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&kk(n),t===1)e.tag===0?I3(mS.bind(null,e)):GT(mS.bind(null,e)),w3(function(){!(Vn&6)&&Sc()}),n=null;else{switch(_T(o)){case 1:n=Hx;break;case 4:n=gT;break;case 16:n=vy;break;case 536870912:n=yT;break;default:n=vy}n=jC(n,zC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zC(e,t){if(Kg=-1,Jg=0,Vn&6)throw Error(gt(327));var n=e.callbackNode;if(jd()&&e.callbackNode!==n)return null;var o=_y(e,e===Yi?fo:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Oy(e,o);else{t=o;var u=Vn;Vn|=2;var m=OC();(Yi!==e||fo!==t)&&(Ql=null,nf=mi()+500,mh(e,t));do try{W3();break}catch(d){DC(e,d)}while(!0);ob(),Ny.current=m,Vn=u,Ei!==null?t=0:(Yi=null,fo=0,t=Di)}if(t!==0){if(t===2&&(u=m1(e),u!==0&&(o=u,t=V1(e,u))),t===1)throw n=om,mh(e,0),ec(e,o),ys(e,mi()),n;if(t===6)ec(e,o);else{if(u=e.current.alternate,!(o&30)&&!q3(u)&&(t=Oy(e,o),t===2&&(m=m1(e),m!==0&&(o=m,t=V1(e,m))),t===1))throw n=om,mh(e,0),ec(e,o),ys(e,mi()),n;switch(e.finishedWork=u,e.finishedLanes=o,t){case 0:case 1:throw Error(gt(345));case 2:ih(e,fs,Ql);break;case 3:if(ec(e,o),(o&130023424)===o&&(t=xb+500-mi(),10<t)){if(_y(e,0)!==0)break;if(u=e.suspendedLanes,(u&o)!==o){Qo(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=k1(ih.bind(null,e,fs,Ql),t);break}ih(e,fs,Ql);break;case 4:if(ec(e,o),(o&4194240)===o)break;for(t=e.eventTimes,u=-1;0<o;){var y=31-Ua(o);m=1<<y,y=t[y],y>u&&(u=y),o&=~m}if(o=u,o=mi()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*G3(o/1960))-o,10<o){e.timeoutHandle=k1(ih.bind(null,e,fs,Ql),o);break}ih(e,fs,Ql);break;case 5:ih(e,fs,Ql);break;default:throw Error(gt(329))}}}return ys(e,mi()),e.callbackNode===n?zC.bind(null,e):null}function V1(e,t){var n=Fp;return e.current.memoizedState.isDehydrated&&(mh(e,t).flags|=256),e=Oy(e,t),e!==2&&(t=fs,fs=n,t!==null&&G1(t)),e}function G1(e){fs===null?fs=e:fs.push.apply(fs,e)}function q3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var u=n[o],m=u.getSnapshot;u=u.value;try{if(!Ga(m(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ec(e,t){for(t&=~_b,t&=~dv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ua(t),o=1<<n;e[n]=-1,t&=~o}}function mS(e){if(Vn&6)throw Error(gt(327));jd();var t=_y(e,0);if(!(t&1))return ys(e,mi()),null;var n=Oy(e,t);if(e.tag!==0&&n===2){var o=m1(e);o!==0&&(t=o,n=V1(e,o))}if(n===1)throw n=om,mh(e,0),ec(e,t),ys(e,mi()),n;if(n===6)throw Error(gt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ih(e,fs,Ql),ys(e,mi()),null}function bb(e,t){var n=Vn;Vn|=1;try{return e(t)}finally{Vn=n,Vn===0&&(nf=mi()+500,lv&&Sc())}}function kh(e){sc!==null&&sc.tag===0&&!(Vn&6)&&jd();var t=Vn;Vn|=1;var n=ga.transition,o=lr;try{if(ga.transition=null,lr=1,e)return e()}finally{lr=o,ga.transition=n,Vn=t,!(Vn&6)&&Sc()}}function wb(){As=Dd.current,Fr(Dd)}function mh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,b3(n)),Ei!==null)for(n=Ei.return;n!==null;){var o=n;switch(nb(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Sy();break;case 3:ef(),Fr(ms),Fr(No),hb();break;case 5:cb(o);break;case 4:ef();break;case 13:Fr(Kr);break;case 19:Fr(Kr);break;case 10:sb(o.type._context);break;case 22:case 23:wb()}n=n.return}if(Yi=e,Ei=e=mc(e.current,null),fo=As=t,Di=0,om=null,_b=dv=wh=0,fs=Fp=null,ch!==null){for(t=0;t<ch.length;t++)if(n=ch[t],o=n.interleaved,o!==null){n.interleaved=null;var u=o.next,m=n.pending;if(m!==null){var y=m.next;m.next=u,o.next=y}n.pending=o}ch=null}return e}function DC(e,t){do{var n=Ei;try{if(ob(),Zg.current=Ry,Ay){for(var o=ei.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Ay=!1}if(bh=0,Wi=zi=ei=null,Dp=!1,nm=0,vb.current=null,n===null||n.return===null){Di=1,om=t,Ei=null;break}e:{var m=e,y=n.return,d=n,M=t;if(t=fo,d.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var A=M,O=d,R=O.tag;if(!(O.mode&1)&&(R===0||R===11||R===15)){var N=O.alternate;N?(O.updateQueue=N.updateQueue,O.memoizedState=N.memoizedState,O.lanes=N.lanes):(O.updateQueue=null,O.memoizedState=null)}var V=nS(y);if(V!==null){V.flags&=-257,rS(V,y,d,m,t),V.mode&1&&tS(m,A,t),t=V,M=A;var H=t.updateQueue;if(H===null){var ne=new Set;ne.add(M),t.updateQueue=ne}else H.add(M);break e}else{if(!(t&1)){tS(m,A,t),kb();break e}M=Error(gt(426))}}else if(Vr&&d.mode&1){var de=nS(y);if(de!==null){!(de.flags&65536)&&(de.flags|=256),rS(de,y,d,m,t),rb(tf(M,d));break e}}m=M=tf(M,d),Di!==4&&(Di=2),Fp===null?Fp=[m]:Fp.push(m),m=y;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var Y=_C(m,M,t);Xk(m,Y);break e;case 1:d=M;var X=m.type,Q=m.stateNode;if(!(m.flags&128)&&(typeof X.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(fc===null||!fc.has(Q)))){m.flags|=65536,t&=-t,m.lanes|=t;var ie=xC(m,d,t);Xk(m,ie);break e}}m=m.return}while(m!==null)}BC(n)}catch(he){t=he,Ei===n&&n!==null&&(Ei=n=n.return);continue}break}while(!0)}function OC(){var e=Ny.current;return Ny.current=Ry,e===null?Ry:e}function kb(){(Di===0||Di===3||Di===2)&&(Di=4),Yi===null||!(wh&268435455)&&!(dv&268435455)||ec(Yi,fo)}function Oy(e,t){var n=Vn;Vn|=2;var o=OC();(Yi!==e||fo!==t)&&(Ql=null,mh(e,t));do try{H3();break}catch(u){DC(e,u)}while(!0);if(ob(),Vn=n,Ny.current=o,Ei!==null)throw Error(gt(261));return Yi=null,fo=0,Di}function H3(){for(;Ei!==null;)FC(Ei)}function W3(){for(;Ei!==null&&!v5();)FC(Ei)}function FC(e){var t=UC(e.alternate,e,As);e.memoizedProps=e.pendingProps,t===null?BC(e):Ei=t,vb.current=null}function BC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=$3(n,t),n!==null){n.flags&=32767,Ei=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Di=6,Ei=null;return}}else if(n=B3(n,t,As),n!==null){Ei=n;return}if(t=t.sibling,t!==null){Ei=t;return}Ei=t=e}while(t!==null);Di===0&&(Di=5)}function ih(e,t,n){var o=lr,u=ga.transition;try{ga.transition=null,lr=1,Z3(e,t,n,o)}finally{ga.transition=u,lr=o}return null}function Z3(e,t,n,o){do jd();while(sc!==null);if(Vn&6)throw Error(gt(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(gt(177));e.callbackNode=null,e.callbackPriority=0;var m=n.lanes|n.childLanes;if(C5(e,m),e===Yi&&(Ei=Yi=null,fo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eg||(Eg=!0,jC(vy,function(){return jd(),null})),m=(n.flags&15990)!==0,n.subtreeFlags&15990||m){m=ga.transition,ga.transition=null;var y=lr;lr=1;var d=Vn;Vn|=4,vb.current=null,j3(e,n),RC(n,e),p3(b1),xy=!!x1,b1=x1=null,e.current=n,V3(n),_5(),Vn=d,lr=y,ga.transition=m}else e.current=n;if(Eg&&(Eg=!1,sc=e,Dy=u),m=e.pendingLanes,m===0&&(fc=null),w5(n.stateNode),ys(e,mi()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],o(u.value,{componentStack:u.stack,digest:u.digest});if(zy)throw zy=!1,e=U1,U1=null,e;return Dy&1&&e.tag!==0&&jd(),m=e.pendingLanes,m&1?e===j1?Bp++:(Bp=0,j1=e):Bp=0,Sc(),null}function jd(){if(sc!==null){var e=_T(Dy),t=ga.transition,n=lr;try{if(ga.transition=null,lr=16>e?16:e,sc===null)var o=!1;else{if(e=sc,sc=null,Dy=0,Vn&6)throw Error(gt(331));var u=Vn;for(Vn|=4,$t=e.current;$t!==null;){var m=$t,y=m.child;if($t.flags&16){var d=m.deletions;if(d!==null){for(var M=0;M<d.length;M++){var A=d[M];for($t=A;$t!==null;){var O=$t;switch(O.tag){case 0:case 11:case 15:Op(8,O,m)}var R=O.child;if(R!==null)R.return=O,$t=R;else for(;$t!==null;){O=$t;var N=O.sibling,V=O.return;if(LC(O),O===A){$t=null;break}if(N!==null){N.return=V,$t=N;break}$t=V}}}var H=m.alternate;if(H!==null){var ne=H.child;if(ne!==null){H.child=null;do{var de=ne.sibling;ne.sibling=null,ne=de}while(ne!==null)}}$t=m}}if(m.subtreeFlags&2064&&y!==null)y.return=m,$t=y;else e:for(;$t!==null;){if(m=$t,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Op(9,m,m.return)}var Y=m.sibling;if(Y!==null){Y.return=m.return,$t=Y;break e}$t=m.return}}var X=e.current;for($t=X;$t!==null;){y=$t;var Q=y.child;if(y.subtreeFlags&2064&&Q!==null)Q.return=y,$t=Q;else e:for(y=X;$t!==null;){if(d=$t,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:hv(9,d)}}catch(he){ai(d,d.return,he)}if(d===y){$t=null;break e}var ie=d.sibling;if(ie!==null){ie.return=d.return,$t=ie;break e}$t=d.return}}if(Vn=u,Sc(),kl&&typeof kl.onPostCommitFiberRoot=="function")try{kl.onPostCommitFiberRoot(rv,e)}catch{}o=!0}return o}finally{lr=n,ga.transition=t}}return!1}function gS(e,t,n){t=tf(n,t),t=_C(e,t,1),e=dc(e,t,1),t=Qo(),e!==null&&(bm(e,1,t),ys(e,t))}function ai(e,t,n){if(e.tag===3)gS(e,e,n);else for(;t!==null;){if(t.tag===3){gS(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(fc===null||!fc.has(o))){e=tf(n,e),e=xC(t,e,1),t=dc(t,e,1),e=Qo(),t!==null&&(bm(t,1,e),ys(t,e));break}}t=t.return}}function X3(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Qo(),e.pingedLanes|=e.suspendedLanes&n,Yi===e&&(fo&n)===n&&(Di===4||Di===3&&(fo&130023424)===fo&&500>mi()-xb?mh(e,0):_b|=n),ys(e,t)}function $C(e,t){t===0&&(e.mode&1?(t=mg,mg<<=1,!(mg&130023424)&&(mg=4194304)):t=1);var n=Qo();e=uu(e,t),e!==null&&(bm(e,t,n),ys(e,n))}function Y3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$C(e,n)}function K3(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(gt(314))}o!==null&&o.delete(t),$C(e,n)}var UC;UC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ms.current)ps=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ps=!1,F3(e,t,n);ps=!!(e.flags&131072)}else ps=!1,Vr&&t.flags&1048576&&qT(t,Ty,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Yg(e,t),e=t.pendingProps;var u=Kd(t,No.current);Ud(t,n),u=fb(null,t,o,e,u,n);var m=pb();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gs(o)?(m=!0,Ey(t)):m=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,lb(t),u.updater=cv,t.stateNode=u,u._reactInternals=t,L1(t,o,e,n),t=R1(null,t,o,!0,m,n)):(t.tag=0,Vr&&m&&tb(t),Ko(null,t,u,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Yg(e,t),e=t.pendingProps,u=o._init,o=u(o._payload),t.type=o,u=t.tag=Q3(o),e=Da(o,e),u){case 0:t=A1(null,t,o,e,n);break e;case 1:t=sS(null,t,o,e,n);break e;case 11:t=iS(null,t,o,e,n);break e;case 14:t=oS(null,t,o,Da(o.type,e),n);break e}throw Error(gt(306,o,""))}return t;case 0:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Da(o,u),A1(e,t,o,u,n);case 1:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Da(o,u),sS(e,t,o,u,n);case 3:e:{if(SC(t),e===null)throw Error(gt(387));o=t.pendingProps,m=t.memoizedState,u=m.element,KT(e,t),Ly(t,o,null,n);var y=t.memoizedState;if(o=y.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){u=tf(Error(gt(423)),t),t=aS(e,t,o,n,u);break e}else if(o!==u){u=tf(Error(gt(424)),t),t=aS(e,t,o,n,u);break e}else for(zs=hc(t.stateNode.containerInfo.firstChild),Ds=t,Vr=!0,Fa=null,n=XT(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jd(),o===u){t=cu(e,t,n);break e}Ko(e,t,o,n)}t=t.child}return t;case 5:return JT(t),e===null&&T1(t),o=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,y=u.children,w1(o,u)?y=null:m!==null&&w1(o,m)&&(t.flags|=32),kC(e,t),Ko(e,t,y,n),t.child;case 6:return e===null&&T1(t),null;case 13:return EC(e,t,n);case 4:return ub(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Qd(t,null,o,n):Ko(e,t,o,n),t.child;case 11:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Da(o,u),iS(e,t,o,u,n);case 7:return Ko(e,t,t.pendingProps,n),t.child;case 8:return Ko(e,t,t.pendingProps.children,n),t.child;case 12:return Ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,u=t.pendingProps,m=t.memoizedProps,y=u.value,Pr(Cy,o._currentValue),o._currentValue=y,m!==null)if(Ga(m.value,y)){if(m.children===u.children&&!ms.current){t=cu(e,t,n);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var d=m.dependencies;if(d!==null){y=m.child;for(var M=d.firstContext;M!==null;){if(M.context===o){if(m.tag===1){M=iu(-1,n&-n),M.tag=2;var A=m.updateQueue;if(A!==null){A=A.shared;var O=A.pending;O===null?M.next=M:(M.next=O.next,O.next=M),A.pending=M}}m.lanes|=n,M=m.alternate,M!==null&&(M.lanes|=n),C1(m.return,n,t),d.lanes|=n;break}M=M.next}}else if(m.tag===10)y=m.type===t.type?null:m.child;else if(m.tag===18){if(y=m.return,y===null)throw Error(gt(341));y.lanes|=n,d=y.alternate,d!==null&&(d.lanes|=n),C1(y,n,t),y=m.sibling}else y=m.child;if(y!==null)y.return=m;else for(y=m;y!==null;){if(y===t){y=null;break}if(m=y.sibling,m!==null){m.return=y.return,y=m;break}y=y.return}m=y}Ko(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,o=t.pendingProps.children,Ud(t,n),u=ya(u),o=o(u),t.flags|=1,Ko(e,t,o,n),t.child;case 14:return o=t.type,u=Da(o,t.pendingProps),u=Da(o.type,u),oS(e,t,o,u,n);case 15:return bC(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Da(o,u),Yg(e,t),t.tag=1,gs(o)?(e=!0,Ey(t)):e=!1,Ud(t,n),vC(t,o,u),L1(t,o,u,n),R1(null,t,o,!0,e,n);case 19:return IC(e,t,n);case 22:return wC(e,t,n)}throw Error(gt(156,t.tag))};function jC(e,t){return mT(e,t)}function J3(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,n,o){return new J3(e,t,n,o)}function Sb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Q3(e){if(typeof e=="function")return Sb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vx)return 11;if(e===Gx)return 14}return 2}function mc(e,t){var n=e.alternate;return n===null?(n=fa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qg(e,t,n,o,u,m){var y=2;if(o=e,typeof e=="function")Sb(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Id:return gh(n.children,u,m,t);case jx:y=8,u|=8;break;case e1:return e=fa(12,n,t,u|2),e.elementType=e1,e.lanes=m,e;case t1:return e=fa(13,n,t,u),e.elementType=t1,e.lanes=m,e;case n1:return e=fa(19,n,t,u),e.elementType=n1,e.lanes=m,e;case JI:return fv(n,u,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YI:y=10;break e;case KI:y=9;break e;case Vx:y=11;break e;case Gx:y=14;break e;case Ku:y=16,o=null;break e}throw Error(gt(130,e==null?e:typeof e,""))}return t=fa(y,n,t,u),t.elementType=e,t.type=o,t.lanes=m,t}function gh(e,t,n,o){return e=fa(7,e,o,t),e.lanes=n,e}function fv(e,t,n,o){return e=fa(22,e,o,t),e.elementType=JI,e.lanes=n,e.stateNode={isHidden:!1},e}function R_(e,t,n){return e=fa(6,e,null,t),e.lanes=n,e}function N_(e,t,n){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eN(e,t,n,o,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p_(0),this.expirationTimes=p_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p_(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Eb(e,t,n,o,u,m,y,d,M){return e=new eN(e,t,n,d,M),t===1?(t=1,m===!0&&(t|=8)):t=0,m=fa(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lb(m),e}function tN(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ed,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function VC(e){if(!e)return vc;e=e._reactInternals;e:{if(Ch(e)!==e||e.tag!==1)throw Error(gt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(gt(171))}if(e.tag===1){var n=e.type;if(gs(n))return VT(e,n,t)}return t}function GC(e,t,n,o,u,m,y,d,M){return e=Eb(n,o,!0,e,u,m,y,d,M),e.context=VC(null),n=e.current,o=Qo(),u=pc(n),m=iu(o,u),m.callback=t??null,dc(n,m,u),e.current.lanes=u,bm(e,u,o),ys(e,o),e}function pv(e,t,n,o){var u=t.current,m=Qo(),y=pc(u);return n=VC(n),t.context===null?t.context=n:t.pendingContext=n,t=iu(m,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=dc(u,t,y),e!==null&&(ja(e,u,y,m),Wg(e,u,y)),y}function Fy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ib(e,t){yS(e,t),(e=e.alternate)&&yS(e,t)}function nN(){return null}var qC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tb(e){this._internalRoot=e}mv.prototype.render=Tb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(gt(409));pv(e,t,null,null)};mv.prototype.unmount=Tb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kh(function(){pv(null,e,null,null)}),t[lu]=null}};function mv(e){this._internalRoot=e}mv.prototype.unstable_scheduleHydration=function(e){if(e){var t=wT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qu.length&&t!==0&&t<Qu[n].priority;n++);Qu.splice(n,0,e),n===0&&ST(e)}};function Cb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vS(){}function rN(e,t,n,o,u){if(u){if(typeof o=="function"){var m=o;o=function(){var A=Fy(y);m.call(A)}}var y=GC(t,o,e,0,null,!1,!1,"",vS);return e._reactRootContainer=y,e[lu]=y.current,Kp(e.nodeType===8?e.parentNode:e),kh(),y}for(;u=e.lastChild;)e.removeChild(u);if(typeof o=="function"){var d=o;o=function(){var A=Fy(M);d.call(A)}}var M=Eb(e,0,!1,null,null,!1,!1,"",vS);return e._reactRootContainer=M,e[lu]=M.current,Kp(e.nodeType===8?e.parentNode:e),kh(function(){pv(t,M,n,o)}),M}function yv(e,t,n,o,u){var m=n._reactRootContainer;if(m){var y=m;if(typeof u=="function"){var d=u;u=function(){var M=Fy(y);d.call(M)}}pv(t,y,e,u)}else y=rN(n,t,e,u,o);return Fy(y)}xT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sp(t.pendingLanes);n!==0&&(Wx(t,n|1),ys(t,mi()),!(Vn&6)&&(nf=mi()+500,Sc()))}break;case 13:kh(function(){var o=uu(e,1);if(o!==null){var u=Qo();ja(o,e,1,u)}}),Ib(e,1)}};Zx=function(e){if(e.tag===13){var t=uu(e,134217728);if(t!==null){var n=Qo();ja(t,e,134217728,n)}Ib(e,134217728)}};bT=function(e){if(e.tag===13){var t=pc(e),n=uu(e,t);if(n!==null){var o=Qo();ja(n,e,t,o)}Ib(e,t)}};wT=function(){return lr};kT=function(e,t){var n=lr;try{return lr=e,t()}finally{lr=n}};d1=function(e,t,n){switch(t){case"input":if(o1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var u=av(o);if(!u)throw Error(gt(90));eT(o),o1(o,u)}}}break;case"textarea":nT(e,n);break;case"select":t=n.value,t!=null&&Od(e,!!n.multiple,t,!1)}};uT=bb;cT=kh;var iN={usingClientEntryPoint:!1,Events:[km,Ld,av,aT,lT,bb]},pp={findFiberByHostInstance:uh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oN={bundleType:pp.bundleType,version:pp.version,rendererPackageName:pp.rendererPackageName,rendererConfig:pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fT(e),e===null?null:e.stateNode},findFiberByHostInstance:pp.findFiberByHostInstance||nN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ig.isDisabled&&Ig.supportsFiber)try{rv=Ig.inject(oN),kl=Ig}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iN;Bs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cb(t))throw Error(gt(200));return tN(e,t,null,n)};Bs.createRoot=function(e,t){if(!Cb(e))throw Error(gt(299));var n=!1,o="",u=qC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Eb(e,1,!1,null,null,n,!1,o,u),e[lu]=t.current,Kp(e.nodeType===8?e.parentNode:e),new Tb(t)};Bs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(gt(188)):(e=Object.keys(e).join(","),Error(gt(268,e)));return e=fT(t),e=e===null?null:e.stateNode,e};Bs.flushSync=function(e){return kh(e)};Bs.hydrate=function(e,t,n){if(!gv(t))throw Error(gt(200));return yv(null,e,t,!0,n)};Bs.hydrateRoot=function(e,t,n){if(!Cb(e))throw Error(gt(405));var o=n!=null&&n.hydratedSources||null,u=!1,m="",y=qC;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(m=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),t=GC(t,null,e,1,n??null,u,!1,m,y),e[lu]=t.current,Kp(e),o)for(e=0;e<o.length;e++)n=o[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new mv(t)};Bs.render=function(e,t,n){if(!gv(t))throw Error(gt(200));return yv(null,e,t,!1,n)};Bs.unmountComponentAtNode=function(e){if(!gv(e))throw Error(gt(40));return e._reactRootContainer?(kh(function(){yv(null,null,e,!1,function(){e._reactRootContainer=null,e[lu]=null})}),!0):!1};Bs.unstable_batchedUpdates=bb;Bs.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!gv(n))throw Error(gt(200));if(e==null||e._reactInternals===void 0)throw Error(gt(38));return yv(e,t,n,!1,o)};Bs.version="18.3.1-next-f1338f8080-20240426";function HC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HC)}catch(e){console.error(e)}}HC(),HI.exports=Bs;var Mb=HI.exports;const Tg=tv(Mb);var _S=Mb;J_.createRoot=_S.createRoot,J_.hydrateRoot=_S.hydrateRoot;var WC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
 */(function(e,t){(function(n,o){e.exports=o()})(NR,function(){var n={},o={};function u(y,d,M){if(o[y]=M,y==="index"){var A="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",O={};return o.shared(O),o.index(n,O),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([A],{type:"text/javascript"}))),n}}u("shared",["exports"],function(y){function d(s,i,a,p){return new(a||(a=Promise))(function(_,S){function E(D){try{L(p.next(D))}catch(B){S(B)}}function T(D){try{L(p.throw(D))}catch(B){S(B)}}function L(D){var B;D.done?_(D.value):(B=D.value,B instanceof a?B:new a(function(j){j(B)})).then(E,T)}L((p=p.apply(s,i||[])).next())})}function M(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var A=O;function O(s,i){this.x=s,this.y=i}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,a=s.y-this.y;return i*i+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),a=Math.sin(s),p=a*this.x+i*this.y;return this.x=i*this.x-a*this.y,this.y=p,this},_rotateAround:function(s,i){var a=Math.cos(s),p=Math.sin(s),_=i.y+p*(this.x-i.x)+a*(this.y-i.y);return this.x=i.x+a*(this.x-i.x)-p*(this.y-i.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(s){return s instanceof O?s:Array.isArray(s)?new O(s[0],s[1]):s};var R=M(A),N=V;function V(s,i,a,p){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=a,this.p2y=p}V.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,p=0;p<8;p++){var _=this.sampleCurveX(a)-s;if(Math.abs(_)<i)return a;var S=this.sampleCurveDerivativeX(a);if(Math.abs(S)<1e-6)break;a-=_/S}var E=0,T=1;for(a=s,p=0;p<20&&(_=this.sampleCurveX(a),!(Math.abs(_-s)<i));p++)s>_?E=a:T=a,a=.5*(T-E)+E;return a},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var H=M(N);let ne,de;function Y(){return ne==null&&(ne=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ne}function X(){if(de==null&&(de=!1,Y())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let p=0;p<5*5;p++){const _=4*p;i.fillStyle=`rgb(${_},${_+1},${_+2})`,i.fillRect(p%5,Math.floor(p/5),1,1)}const a=i.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&a[p]!==p){de=!0;break}}}return de||!1}function Q(s,i,a,p){const _=new H(s,i,a,p);return S=>_.solve(S)}const ie=Q(.25,.1,.25,1);function he(s,i,a){return Math.min(a,Math.max(i,s))}function _e(s,i,a){const p=a-i,_=((s-i)%p+p)%p+i;return _===i?a:_}function pe(s,...i){for(const a of i)for(const p in a)s[p]=a[p];return s}let Ie=1;function Le(s,i,a){const p={};for(const _ in s)p[_]=i.call(this,s[_],_,s);return p}function $e(s,i,a){const p={};for(const _ in s)i.call(this,s[_],_,s)&&(p[_]=s[_]);return p}function Ze(s){return Array.isArray(s)?s.map(Ze):typeof s=="object"&&s?Le(s,Ze):s}const et={};function at(s){et[s]||(typeof console<"u"&&console.warn(s),et[s]=!0)}function Ne(s,i,a){return(a.y-s.y)*(i.x-s.x)>(i.y-s.y)*(a.x-s.x)}function rt(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let ut=null;function wt(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ct(s,i,a,p,_){return d(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(s,{timestamp:0});try{const E=S==null?void 0:S.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const T=E.startsWith("BGR"),L=new Uint8ClampedArray(p*_*4);if(yield S.copyTo(L,function(D,B,j,W,ee){const re=4*Math.max(-B,0),ae=(Math.max(0,j)-j)*W*4+re,ge=4*W,we=Math.max(0,B),Fe=Math.max(0,j);return{rect:{x:we,y:Fe,width:Math.min(D.width,B+W)-we,height:Math.min(D.height,j+ee)-Fe},layout:[{offset:ae,stride:ge}]}}(s,i,a,p,_)),T)for(let D=0;D<L.length;D+=4){const B=L[D];L[D]=L[D+2],L[D+2]=B}return L}finally{S.close()}})}let Je,At;const Ut="AbortError";function Sn(){return new Error(Ut)}const Ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function yn(s){return Ct.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const Zn="global-dispatcher";class nr extends Error{constructor(i,a,p,_){super(`AJAXError: ${a} (${i}): ${p}`),this.status=i,this.statusText=a,this.url=p,this.body=_}}const Be=()=>rt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,hr=function(s,i){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const p=yn(s.url);if(p)return p(s,i);if(rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:Zn},i)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Be())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,_){return d(this,void 0,void 0,function*(){const S=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Be(),signal:_.signal});p.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");const E=yield fetch(S);if(!E.ok){const D=yield E.blob();throw new nr(E.status,E.statusText,p.url,D)}let T;T=p.type==="arrayBuffer"||p.type==="image"?E.arrayBuffer():p.type==="json"?E.json():E.text();const L=yield T;if(_.signal.aborted)throw Sn();return{data:L,cacheControl:E.headers.get("Cache-Control"),expires:E.headers.get("Expires")}})}(s,i);if(rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:Zn},i)}var a;return function(p,_){return new Promise((S,E)=>{var T;const L=new XMLHttpRequest;L.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(L.responseType="arraybuffer");for(const D in p.headers)L.setRequestHeader(D,p.headers[D]);p.type==="json"&&(L.responseType="text",!((T=p.headers)===null||T===void 0)&&T.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=p.credentials==="include",L.onerror=()=>{E(new Error(L.statusText))},L.onload=()=>{if(!_.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let D=L.response;if(p.type==="json")try{D=JSON.parse(L.response)}catch(B){return void E(B)}S({data:D,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const D=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});E(new nr(L.status,L.statusText,p.url,D))}},_.signal.addEventListener("abort",()=>{L.abort(),E(Sn())}),L.send(p.body)})}(s,i)};function mn(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const i=new URL(s),a=window.location;return i.protocol===a.protocol&&i.host===a.host}function Dt(s,i,a){a[s]&&a[s].indexOf(i)!==-1||(a[s]=a[s]||[],a[s].push(i))}function xe(s,i,a){if(a&&a[s]){const p=a[s].indexOf(i);p!==-1&&a[s].splice(p,1)}}class Vt{constructor(i,a={}){pe(this,a),this.type=i}}class gn extends Vt{constructor(i,a={}){super("error",pe({error:i},a))}}class Jt{on(i,a){return this._listeners=this._listeners||{},Dt(i,a,this._listeners),this}off(i,a){return xe(i,a,this._listeners),xe(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Dt(i,a,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,a){typeof i=="string"&&(i=new Vt(i,a||{}));const p=i.type;if(this.listens(p)){i.target=this;const _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const T of _)T.call(this,i);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const T of S)xe(p,T,this._oneTimeListeners),T.call(this,i);const E=this._eventedParent;E&&(pe(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(i))}else i instanceof gn&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Er=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ln(s,i){const a={};for(const p in s)p!=="ref"&&(a[p]=s[p]);return Er.forEach(p=>{p in i&&(a[p]=i[p])}),a}function Xe(s,i){if(Array.isArray(s)){if(!Array.isArray(i)||s.length!==i.length)return!1;for(let a=0;a<s.length;a++)if(!Xe(s[a],i[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&i!==null){if(typeof i!="object"||Object.keys(s).length!==Object.keys(i).length)return!1;for(const a in s)if(!Xe(s[a],i[a]))return!1;return!0}return s===i}function En(s,i){s.push(i)}function li(s,i,a){En(a,{command:"addSource",args:[s,i[s]]})}function kr(s,i,a){En(i,{command:"removeSource",args:[s]}),a[s]=!0}function vi(s,i,a,p){kr(s,a,p),li(s,i,a)}function Wt(s,i,a){let p;for(p in s[a])if(Object.prototype.hasOwnProperty.call(s[a],p)&&p!=="data"&&!Xe(s[a][p],i[a][p]))return!1;for(p in i[a])if(Object.prototype.hasOwnProperty.call(i[a],p)&&p!=="data"&&!Xe(s[a][p],i[a][p]))return!1;return!0}function dr(s,i,a,p,_,S){s=s||{},i=i||{};for(const E in s)Object.prototype.hasOwnProperty.call(s,E)&&(Xe(s[E],i[E])||a.push({command:S,args:[p,E,i[E],_]}));for(const E in i)Object.prototype.hasOwnProperty.call(i,E)&&!Object.prototype.hasOwnProperty.call(s,E)&&(Xe(s[E],i[E])||a.push({command:S,args:[p,E,i[E],_]}))}function qr(s){return s.id}function Qi(s,i){return s[i.id]=i,s}class He{constructor(i,a,p,_){this.message=(i?`${i}: `:"")+p,_&&(this.identifier=_),a!=null&&a.__line__&&(this.line=a.__line__)}}function Gt(s,...i){for(const a of i)for(const p in a)s[p]=a[p];return s}class Kt extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}class jt{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[p,_]of a)this.bindings[p]=_}concat(i){return new jt(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const eo={kind:"null"},lt={kind:"number"},on={kind:"string"},st={kind:"boolean"},_i={kind:"color"},to={kind:"object"},Qt={kind:"value"},Sr={kind:"collator"},Ii={kind:"formatted"},Hr={kind:"padding"},no={kind:"resolvedImage"},ve={kind:"variableAnchorOffsetCollection"};function J(s,i){return{kind:"array",itemType:s,N:i}}function K(s){if(s.kind==="array"){const i=K(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const se=[eo,lt,on,st,_i,Ii,to,J(Qt),Hr,no,ve];function oe(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!oe(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const a of se)if(!oe(a,i))return null}}return`Expected ${K(s)} but found ${K(i)} instead.`}function ce(s,i){return i.some(a=>a.kind===s.kind)}function Te(s,i){return i.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function Ae(s,i){return s.kind==="array"&&i.kind==="array"?s.itemType.kind===i.itemType.kind&&typeof s.N=="number":s.kind===i.kind}const be=.96422,Oe=.82521,Ke=4/29,je=6/29,dt=3*je*je,Lt=je*je*je,Ft=Math.PI/180,_n=180/Math.PI;function sn(s){return(s%=360)<0&&(s+=360),s}function an([s,i,a,p]){let _,S;const E=fr((.2225045*(s=fn(s))+.7168786*(i=fn(i))+.0606169*(a=fn(a)))/1);s===i&&i===a?_=S=E:(_=fr((.4360747*s+.3850649*i+.1430804*a)/be),S=fr((.0139322*s+.0971045*i+.7141733*a)/Oe));const T=116*E-16;return[T<0?0:T,500*(_-E),200*(E-S),p]}function fn(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function fr(s){return s>Lt?Math.pow(s,1/3):s/dt+Ke}function Un([s,i,a,p]){let _=(s+16)/116,S=isNaN(i)?_:_+i/500,E=isNaN(a)?_:_-a/200;return _=1*Pn(_),S=be*Pn(S),E=Oe*Pn(E),[rn(3.1338561*S-1.6168667*_-.4906146*E),rn(-.9787684*S+1.9161415*_+.033454*E),rn(.0719453*S-.2289914*_+1.4052427*E),p]}function rn(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Pn(s){return s>je?s*s*s:dt*(s-Ke)}function Gn(s){return parseInt(s.padEnd(2,s),16)/255}function Ir(s,i){return wn(i?s/100:s,0,1)}function wn(s,i,a){return Math.min(Math.max(i,s),a)}function Ti(s){return!s.some(Number.isNaN)}const Ha={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class In{constructor(i,a,p,_=1,S=!0){this.r=i,this.g=a,this.b=p,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[i,a,p,_]))}static parse(i){if(i instanceof In)return i;if(typeof i!="string")return;const a=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=Ha[p];if(_){const[E,T,L]=_;return[E/255,T/255,L/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const E=p.length<6?1:2;let T=1;return[Gn(p.slice(T,T+=E)),Gn(p.slice(T,T+=E)),Gn(p.slice(T,T+=E)),Gn(p.slice(T,T+E)||"ff")]}if(p.startsWith("rgb")){const E=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[T,L,D,B,j,W,ee,re,ae,ge,we,Fe]=E,Me=[B||" ",ee||" ",ge].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const De=[D,W,ae].join(""),We=De==="%%%"?100:De===""?255:0;if(We){const ot=[wn(+L/We,0,1),wn(+j/We,0,1),wn(+re/We,0,1),we?Ir(+we,Fe):1];if(Ti(ot))return ot}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[E,T,L,D,B,j,W,ee,re]=S,ae=[L||" ",B||" ",W].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const ge=[+T,wn(+D,0,100),wn(+j,0,100),ee?Ir(+ee,re):1];if(Ti(ge))return function([we,Fe,Me,De]){function We(ot){const Et=(ot+we/30)%12,Zt=Fe*Math.min(Me,1-Me);return Me-Zt*Math.max(-1,Math.min(Et-3,9-Et,1))}return we=sn(we),Fe/=100,Me/=100,[We(0),We(8),We(4),De]}(ge)}}}(i);return a?new In(...a,!1):void 0}get rgb(){const{r:i,g:a,b:p,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[i/S,a/S,p/S,_])}get hcl(){return this.overwriteGetter("hcl",function(i){const[a,p,_,S]=an(i),E=Math.sqrt(p*p+_*_);return[Math.round(1e4*E)?sn(Math.atan2(_,p)*_n):NaN,E,a,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",an(this.rgb))}overwriteGetter(i,a){return Object.defineProperty(this,i,{value:a}),a}toString(){const[i,a,p,_]=this.rgb;return`rgba(${[i,a,p].map(S=>Math.round(255*S)).join(",")},${_})`}}In.black=new In(0,0,0,1),In.white=new In(1,1,1,1),In.transparent=new In(0,0,0,0),In.red=new In(1,0,0,1);class ka{constructor(i,a,p){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pl{constructor(i,a,p,_,S){this.text=i,this.image=a,this.scale=p,this.fontStack=_,this.textColor=S}}class Ci{constructor(i){this.sections=i}static fromString(i){return new Ci([new Pl(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ci?i:Ci.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Fi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Fi)return i;if(typeof i=="number")return new Fi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const a of i)if(typeof a!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Fi(i)}}toString(){return JSON.stringify(this.values)}}const yf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Tr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Tr)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let a=0;a<i.length;a+=2){const p=i[a],_=i[a+1];if(typeof p!="string"||!yf.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Tr(i)}}toString(){return JSON.stringify(this.values)}}class ni{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new ni({name:i,available:!1}):null}}function Vs(s,i,a,p){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,i,a,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,i,a,p]:[s,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof In||s instanceof ka||s instanceof Ci||s instanceof Fi||s instanceof Tr||s instanceof ni)return!0;if(Array.isArray(s)){for(const i of s)if(!mo(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!mo(s[i]))return!1;return!0}return!1}function Cr(s){if(s===null)return eo;if(typeof s=="string")return on;if(typeof s=="boolean")return st;if(typeof s=="number")return lt;if(s instanceof In)return _i;if(s instanceof ka)return Sr;if(s instanceof Ci)return Ii;if(s instanceof Fi)return Hr;if(s instanceof Tr)return ve;if(s instanceof ni)return no;if(Array.isArray(s)){const i=s.length;let a;for(const p of s){const _=Cr(p);if(a){if(a===_)continue;a=Qt;break}a=_}return J(a||Qt,i)}return to}function Al(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof In||s instanceof Ci||s instanceof Fi||s instanceof Tr||s instanceof ni?s.toString():JSON.stringify(s)}class Fo{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!mo(i[1]))return a.error("invalid value");const p=i[1];let _=Cr(p);const S=a.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Fo(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Rr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Rl={string:on,number:lt,boolean:st,object:to};class go{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let p,_=1;const S=i[0];if(S==="array"){let T,L;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in Rl)||D==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);T=Rl[D],_++}else T=Qt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);L=i[2],_++}p=J(T,L)}else{if(!Rl[S])throw new Error(`Types doesn't contain name = ${S}`);p=Rl[S]}const E=[];for(;_<i.length;_++){const T=a.parse(i[_],_,Qt);if(!T)return null;E.push(T)}return new go(p,E)}evaluate(i){for(let a=0;a<this.args.length;a++){const p=this.args[a].evaluate(i);if(!oe(this.type,Cr(p)))return p;if(a===this.args.length-1)throw new Rr(`Expected value to be of type ${K(this.type)}, but found ${K(Cr(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Wa={"to-boolean":st,"to-color":_i,"to-number":lt,"to-string":on};class Wr{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const p=i[0];if(!Wa[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return a.error("Expected one argument.");const _=Wa[p],S=[];for(let E=1;E<i.length;E++){const T=a.parse(i[E],E,Qt);if(!T)return null;S.push(T)}return new Wr(_,S)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let a,p;for(const _ of this.args){if(a=_.evaluate(i),p=null,a instanceof In)return a;if(typeof a=="string"){const S=i.parseColor(a);if(S)return S}else if(Array.isArray(a)&&(p=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Vs(a[0],a[1],a[2],a[3]),!p))return new In(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Rr(p||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const p of this.args){a=p.evaluate(i);const _=Fi.parse(a);if(_)return _}throw new Rr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const p of this.args){a=p.evaluate(i);const _=Tr.parse(a);if(_)return _}throw new Rr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const p of this.args){if(a=p.evaluate(i),a===null)return 0;const _=Number(a);if(!isNaN(_))return _}throw new Rr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Ci.fromString(Al(this.args[0].evaluate(i)));case"resolvedImage":return ni.fromString(Al(this.args[0].evaluate(i)));default:return Al(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Gs=["Unknown","Point","LineString","Polygon"];class Nl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Gs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let a=this._parseColorCache[i];return a||(a=this._parseColorCache[i]=In.parse(i)),a}}class yo{constructor(i,a,p=[],_,S=new jt,E=[]){this.registry=i,this.path=p,this.key=p.map(T=>`[${T}]`).join(""),this.scope=S,this.errors=E,this.expectedType=_,this._isConstant=a}parse(i,a,p,_,S={}){return a?this.concat(a,p,_)._parse(i,S):this._parse(i,S)}_parse(i,a){function p(_,S,E){return E==="assert"?new go(S,[_]):E==="coerce"?new Wr(S,[_]):_}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=i[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let E=S.parse(i,this);if(!E)return null;if(this.expectedType){const T=this.expectedType,L=E.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||L.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(T.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(T,L))return null}else E=p(E,T,a.typeAnnotation||"coerce");else E=p(E,T,a.typeAnnotation||"coerce");else E=p(E,T,a.typeAnnotation||"coerce");else E=p(E,T,a.typeAnnotation||"assert")}if(!(E instanceof Fo)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const T=new Nl;try{E=new Fo(E.type,E.evaluate(T))}catch(L){return this.error(L.message),null}}return E}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,p){const _=typeof i=="number"?this.path.concat(i):this.path,S=p?this.scope.concat(p):this.scope;return new yo(this.registry,this._isConstant,_,a||null,S,this.errors)}error(i,...a){const p=`${this.key}${a.map(_=>`[${_}]`).join("")}`;this.errors.push(new Kt(p,i))}checkSubtype(i,a){const p=oe(i,a);return p&&this.error(p),p}}class qs{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let S=1;S<i.length-1;S+=2){const E=i[S];if(typeof E!="string")return a.error(`Expected string, but found ${typeof E} instead.`,S);if(/[^a-zA-Z0-9_]/.test(E))return a.error("Variable names must contain only alphanumeric characters or '_'.",S);const T=a.parse(i[S+1],S+1);if(!T)return null;p.push([E,T])}const _=a.parse(i[i.length-1],i.length-1,a.expectedType,p);return _?new qs(p,_):null}outputDefined(){return this.result.outputDefined()}}class Tn{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const p=i[1];return a.scope.has(p)?new Tn(p,a.scope.get(p)):a.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Mc{constructor(i,a,p){this.type=i,this.index=a,this.input=p}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=a.parse(i[1],1,lt),_=a.parse(i[2],2,J(a.expectedType||Qt));return p&&_?new Mc(_.type.itemType,p,_):null}evaluate(i){const a=this.index.evaluate(i),p=this.input.evaluate(i);if(a<0)throw new Rr(`Array index out of bounds: ${a} < 0.`);if(a>=p.length)throw new Rr(`Array index out of bounds: ${a} > ${p.length-1}.`);if(a!==Math.floor(a))throw new Rr(`Array index must be an integer, but found ${a} instead.`);return p[a]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Lc{constructor(i,a){this.type=st,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=a.parse(i[1],1,Qt),_=a.parse(i[2],2,Qt);return p&&_?ce(p.type,[st,on,lt,eo,Qt])?new Lc(p,_):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(p.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!Te(a,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${K(Cr(a))} instead.`);if(!Te(p,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${K(Cr(p))} instead.`);return p.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Sa{constructor(i,a,p){this.type=lt,this.needle=i,this.haystack=a,this.fromIndex=p}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=a.parse(i[1],1,Qt),_=a.parse(i[2],2,Qt);if(!p||!_)return null;if(!ce(p.type,[st,on,lt,eo,Qt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(p.type)} instead`);if(i.length===4){const S=a.parse(i[3],3,lt);return S?new Sa(p,_,S):null}return new Sa(p,_)}evaluate(i){const a=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!Te(a,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${K(Cr(a))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(i)),Te(p,["string"])){const S=p.indexOf(a,_);return S===-1?-1:[...p.slice(0,S)].length}if(Te(p,["array"]))return p.indexOf(a,_);throw new Rr(`Expected second argument to be of type array or string, but found ${K(Cr(p))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Ea{constructor(i,a,p,_,S,E){this.inputType=i,this.type=a,this.input=p,this.cases=_,this.outputs=S,this.otherwise=E}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let p,_;a.expectedType&&a.expectedType.kind!=="value"&&(_=a.expectedType);const S={},E=[];for(let D=2;D<i.length-1;D+=2){let B=i[D];const j=i[D+1];Array.isArray(B)||(B=[B]);const W=a.concat(D);if(B.length===0)return W.error("Expected at least one branch label.");for(const re of B){if(typeof re!="number"&&typeof re!="string")return W.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return W.error("Numeric branch labels must be integer values.");if(p){if(W.checkSubtype(p,Cr(re)))return null}else p=Cr(re);if(S[String(re)]!==void 0)return W.error("Branch labels must be unique.");S[String(re)]=E.length}const ee=a.parse(j,D,_);if(!ee)return null;_=_||ee.type,E.push(ee)}const T=a.parse(i[1],1,Qt);if(!T)return null;const L=a.parse(i[i.length-1],i.length-1,_);return L?T.type.kind!=="value"&&a.concat(1).checkSubtype(p,T.type)?null:new Ea(p,_,T,S,E,L):null}evaluate(i){const a=this.input.evaluate(i);return(Cr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class zl{constructor(i,a,p){this.type=i,this.branches=a,this.otherwise=p}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const _=[];for(let E=1;E<i.length-1;E+=2){const T=a.parse(i[E],E,st);if(!T)return null;const L=a.parse(i[E+1],E+1,p);if(!L)return null;_.push([T,L]),p=p||L.type}const S=a.parse(i[i.length-1],i.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new zl(p,_,S)}evaluate(i){for(const[a,p]of this.branches)if(a.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,p]of this.branches)i(a),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Dl{constructor(i,a,p,_){this.type=i,this.input=a,this.beginIndex=p,this.endIndex=_}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=a.parse(i[1],1,Qt),_=a.parse(i[2],2,lt);if(!p||!_)return null;if(!ce(p.type,[J(Qt),on,Qt]))return a.error(`Expected first argument to be of type array or string, but found ${K(p.type)} instead`);if(i.length===4){const S=a.parse(i[3],3,lt);return S?new Dl(p.type,p,_,S):null}return new Dl(p.type,p,_)}evaluate(i){const a=this.input.evaluate(i),p=this.beginIndex.evaluate(i);let _;if(this.endIndex&&(_=this.endIndex.evaluate(i)),Te(a,["string"]))return[...a].slice(p,_).join("");if(Te(a,["array"]))return a.slice(p,_);throw new Rr(`Expected first argument to be of type array or string, but found ${K(Cr(a))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Ol(s,i){const a=s.length-1;let p,_,S=0,E=a,T=0;for(;S<=E;)if(T=Math.floor((S+E)/2),p=s[T],_=s[T+1],p<=i){if(T===a||i<_)return T;S=T+1}else{if(!(p>i))throw new Rr("Input is not a number.");E=T-1}return 0}class Za{constructor(i,a,p){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[_,S]of p)this.labels.push(_),this.outputs.push(S)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const p=a.parse(i[1],1,lt);if(!p)return null;const _=[];let S=null;a.expectedType&&a.expectedType.kind!=="value"&&(S=a.expectedType);for(let E=1;E<i.length;E+=2){const T=E===1?-1/0:i[E],L=i[E+1],D=E,B=E+1;if(typeof T!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(_.length&&_[_.length-1][0]>=T)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=a.parse(L,B,S);if(!j)return null;S=S||j.type,_.push([T,j])}return new Za(S,p,_)}evaluate(i){const a=this.labels,p=this.outputs;if(a.length===1)return p[0].evaluate(i);const _=this.input.evaluate(i);if(_<=a[0])return p[0].evaluate(i);const S=a.length;return _>=a[S-1]?p[S-1].evaluate(i):p[Ol(a,_)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function yu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var pr=Hs;function Hs(s,i,a,p){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=a,this.p2y=p}Hs.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,p=0;p<8;p++){var _=this.sampleCurveX(a)-s;if(Math.abs(_)<i)return a;var S=this.sampleCurveDerivativeX(a);if(Math.abs(S)<1e-6)break;a-=_/S}var E=0,T=1;for(a=s,p=0;p<20&&(_=this.sampleCurveX(a),!(Math.abs(_-s)<i));p++)s>_?E=a:T=a,a=.5*(T-E)+E;return a},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var vf=yu(pr);function _s(s,i,a){return s+a*(i-s)}function xi(s,i,a){return s.map((p,_)=>_s(p,i[_],a))}const sr={number:_s,color:function(s,i,a,p="rgb"){switch(p){case"rgb":{const[_,S,E,T]=xi(s.rgb,i.rgb,a);return new In(_,S,E,T,!1)}case"hcl":{const[_,S,E,T]=s.hcl,[L,D,B,j]=i.hcl;let W,ee;if(isNaN(_)||isNaN(L))isNaN(_)?isNaN(L)?W=NaN:(W=L,E!==1&&E!==0||(ee=D)):(W=_,B!==1&&B!==0||(ee=S));else{let Fe=L-_;L>_&&Fe>180?Fe-=360:L<_&&_-L>180&&(Fe+=360),W=_+a*Fe}const[re,ae,ge,we]=function([Fe,Me,De,We]){return Fe=isNaN(Fe)?0:Fe*Ft,Un([De,Math.cos(Fe)*Me,Math.sin(Fe)*Me,We])}([W,ee??_s(S,D,a),_s(E,B,a),_s(T,j,a)]);return new In(re,ae,ge,we,!1)}case"lab":{const[_,S,E,T]=Un(xi(s.lab,i.lab,a));return new In(_,S,E,T,!1)}}},array:xi,padding:function(s,i,a){return new Fi(xi(s.values,i.values,a))},variableAnchorOffsetCollection:function(s,i,a){const p=s.values,_=i.values;if(p.length!==_.length)throw new Rr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${i.toString()}`);const S=[];for(let E=0;E<p.length;E+=2){if(p[E]!==_[E])throw new Rr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${p[E]}, to[${E}]: ${_[E]}`);S.push(p[E]);const[T,L]=p[E+1],[D,B]=_[E+1];S.push([_s(T,D,a),_s(L,B,a)])}return new Tr(S)}};class ui{constructor(i,a,p,_,S){this.type=i,this.operator=a,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[E,T]of S)this.labels.push(E),this.outputs.push(T)}static interpolationFactor(i,a,p,_){let S=0;if(i.name==="exponential")S=vu(a,i.base,p,_);else if(i.name==="linear")S=vu(a,1,p,_);else if(i.name==="cubic-bezier"){const E=i.controlPoints;S=new vf(E[0],E[1],E[2],E[3]).solve(vu(a,1,p,_))}return S}static parse(i,a){let[p,_,S,...E]=i;if(!Array.isArray(_)||_.length===0)return a.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const D=_[1];if(typeof D!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:D}}else{if(_[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const D=_.slice(1);if(D.length!==4||D.some(B=>typeof B!="number"||B<0||B>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(S=a.parse(S,2,lt),!S)return null;const T=[];let L=null;p==="interpolate-hcl"||p==="interpolate-lab"?L=_i:a.expectedType&&a.expectedType.kind!=="value"&&(L=a.expectedType);for(let D=0;D<E.length;D+=2){const B=E[D],j=E[D+1],W=D+3,ee=D+4;if(typeof B!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(T.length&&T[T.length-1][0]>=B)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const re=a.parse(j,ee,L);if(!re)return null;L=L||re.type,T.push([B,re])}return Ae(L,lt)||Ae(L,_i)||Ae(L,Hr)||Ae(L,ve)||Ae(L,J(lt))?new ui(L,p,_,S,T):a.error(`Type ${K(L)} is not interpolatable.`)}evaluate(i){const a=this.labels,p=this.outputs;if(a.length===1)return p[0].evaluate(i);const _=this.input.evaluate(i);if(_<=a[0])return p[0].evaluate(i);const S=a.length;if(_>=a[S-1])return p[S-1].evaluate(i);const E=Ol(a,_),T=ui.interpolationFactor(this.interpolation,_,a[E],a[E+1]),L=p[E].evaluate(i),D=p[E+1].evaluate(i);switch(this.operator){case"interpolate":return sr[this.type.kind](L,D,T);case"interpolate-hcl":return sr.color(L,D,T,"hcl");case"interpolate-lab":return sr.color(L,D,T,"lab")}}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function vu(s,i,a,p){const _=p-a,S=s-a;return _===0?0:i===1?S/_:(Math.pow(i,S)-1)/(Math.pow(i,_)-1)}class _u{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expectected at least one argument.");let p=null;const _=a.expectedType;_&&_.kind!=="value"&&(p=_);const S=[];for(const T of i.slice(1)){const L=a.parse(T,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!L)return null;p=p||L.type,S.push(L)}if(!p)throw new Error("No output type");const E=_&&S.some(T=>oe(_,T.type));return new _u(E?Qt:p,S)}evaluate(i){let a,p=null,_=0;for(const S of this.args)if(_++,p=S.evaluate(i),p&&p instanceof ni&&!p.available&&(a||(a=p.name),p=null,_===this.args.length&&(p=a)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function Fl(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Bl(s,i,a,p){return p.compare(i,a)===0}function Xa(s,i,a){const p=s!=="=="&&s!=="!=";return class ZC{constructor(S,E,T){this.type=st,this.lhs=S,this.rhs=E,this.collator=T,this.hasUntypedArgument=S.type.kind==="value"||E.type.kind==="value"}static parse(S,E){if(S.length!==3&&S.length!==4)return E.error("Expected two or three arguments.");const T=S[0];let L=E.parse(S[1],1,Qt);if(!L)return null;if(!Fl(T,L.type))return E.concat(1).error(`"${T}" comparisons are not supported for type '${K(L.type)}'.`);let D=E.parse(S[2],2,Qt);if(!D)return null;if(!Fl(T,D.type))return E.concat(2).error(`"${T}" comparisons are not supported for type '${K(D.type)}'.`);if(L.type.kind!==D.type.kind&&L.type.kind!=="value"&&D.type.kind!=="value")return E.error(`Cannot compare types '${K(L.type)}' and '${K(D.type)}'.`);p&&(L.type.kind==="value"&&D.type.kind!=="value"?L=new go(D.type,[L]):L.type.kind!=="value"&&D.type.kind==="value"&&(D=new go(L.type,[D])));let B=null;if(S.length===4){if(L.type.kind!=="string"&&D.type.kind!=="string"&&L.type.kind!=="value"&&D.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(B=E.parse(S[3],3,Sr),!B)return null}return new ZC(L,D,B)}evaluate(S){const E=this.lhs.evaluate(S),T=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const L=Cr(E),D=Cr(T);if(L.kind!==D.kind||L.kind!=="string"&&L.kind!=="number")throw new Rr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${L.kind}, ${D.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const L=Cr(E),D=Cr(T);if(L.kind!=="string"||D.kind!=="string")return i(S,E,T)}return this.collator?a(S,E,T,this.collator.evaluate(S)):i(S,E,T)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Mh=Xa("==",function(s,i,a){return i===a},Bl),An=Xa("!=",function(s,i,a){return i!==a},function(s,i,a,p){return!Bl(0,i,a,p)}),Bo=Xa("<",function(s,i,a){return i<a},function(s,i,a,p){return p.compare(i,a)<0}),Pc=Xa(">",function(s,i,a){return i>a},function(s,i,a,p){return p.compare(i,a)>0}),Lh=Xa("<=",function(s,i,a){return i<=a},function(s,i,a,p){return p.compare(i,a)<=0}),Ya=Xa(">=",function(s,i,a){return i>=a},function(s,i,a,p){return p.compare(i,a)>=0});class Ka{constructor(i,a,p){this.type=Sr,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return a.error("Collator options argument must be an object.");const _=a.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,st);if(!_)return null;const S=a.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,st);if(!S)return null;let E=null;return p.locale&&(E=a.parse(p.locale,1,on),!E)?null:new Ka(_,S,E)}evaluate(i){return new ka(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class ci{constructor(i,a,p,_,S){this.type=on,this.number=i,this.locale=a,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const p=a.parse(i[1],1,lt);if(!p)return null;const _=i[2];if(typeof _!="object"||Array.isArray(_))return a.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=a.parse(_.locale,1,on),!S))return null;let E=null;if(_.currency&&(E=a.parse(_.currency,1,on),!E))return null;let T=null;if(_["min-fraction-digits"]&&(T=a.parse(_["min-fraction-digits"],1,lt),!T))return null;let L=null;return _["max-fraction-digits"]&&(L=a.parse(_["max-fraction-digits"],1,lt),!L)?null:new ci(p,S,E,T,L)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class $l{constructor(i){this.type=Ii,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return a.error("First argument must be an image or text section.");const _=[];let S=!1;for(let E=1;E<=i.length-1;++E){const T=i[E];if(S&&typeof T=="object"&&!Array.isArray(T)){S=!1;let L=null;if(T["font-scale"]&&(L=a.parse(T["font-scale"],1,lt),!L))return null;let D=null;if(T["text-font"]&&(D=a.parse(T["text-font"],1,J(on)),!D))return null;let B=null;if(T["text-color"]&&(B=a.parse(T["text-color"],1,_i),!B))return null;const j=_[_.length-1];j.scale=L,j.font=D,j.textColor=B}else{const L=a.parse(i[E],1,Qt);if(!L)return null;const D=L.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:L,scale:null,font:null,textColor:null})}}return new $l(_)}evaluate(i){return new Ci(this.sections.map(a=>{const p=a.content.evaluate(i);return Cr(p)===no?new Pl("",p,null,null,null):new Pl(Al(p),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}}class Ul{constructor(i){this.type=no,this.input=i}static parse(i,a){if(i.length!==2)return a.error("Expected two arguments.");const p=a.parse(i[1],1,on);return p?new Ul(p):a.error("No image name provided.")}evaluate(i){const a=this.input.evaluate(i),p=ni.fromString(a);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(a)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class xu{constructor(i){this.type=lt,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=a.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${K(p.type)} instead.`):new xu(p):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Rr(`Expected value to be of type string or array, but found ${K(Cr(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const $o=8192;function _f(s,i){const a=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,_=Math.pow(2,i.z);return[Math.round(a*_*$o),Math.round(p*_*$o)]}function bu(s,i){const a=Math.pow(2,i.z);return[(_=(s[0]/$o+i.x)/a,360*_-180),(p=(s[1]/$o+i.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,_}function Mi(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Uo(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Rn(s,i,a){const p=s[0]-i[0],_=s[1]-i[1],S=s[0]-a[0],E=s[1]-a[1];return p*E-S*_==0&&p*S<=0&&_*E<=0}function Li(s,i,a,p){return(_=[p[0]-a[0],p[1]-a[1]])[0]*(S=[i[0]-s[0],i[1]-s[1]])[1]-_[1]*S[0]!=0&&!(!Ph(s,i,a,p)||!Ph(a,p,s,i));var _,S}function Ja(s,i,a){for(const p of a)for(let _=0;_<p.length-1;++_)if(Li(s,i,p[_],p[_+1]))return!0;return!1}function Qa(s,i,a=!1){let p=!1;for(const T of i)for(let L=0;L<T.length-1;L++){if(Rn(s,T[L],T[L+1]))return a;(S=T[L])[1]>(_=s)[1]!=(E=T[L+1])[1]>_[1]&&_[0]<(E[0]-S[0])*(_[1]-S[1])/(E[1]-S[1])+S[0]&&(p=!p)}var _,S,E;return p}function el(s,i){for(const a of i)if(Qa(s,a))return!0;return!1}function Ac(s,i){for(const a of s)if(!Qa(a,i))return!1;for(let a=0;a<s.length-1;++a)if(Ja(s[a],s[a+1],i))return!1;return!0}function tl(s,i){for(const a of i)if(Ac(s,a))return!0;return!1}function Ph(s,i,a,p){const _=p[0]-a[0],S=p[1]-a[1],E=(s[0]-a[0])*S-_*(s[1]-a[1]),T=(i[0]-a[0])*S-_*(i[1]-a[1]);return E>0&&T<0||E<0&&T>0}function vo(s,i,a){const p=[];for(let _=0;_<s.length;_++){const S=[];for(let E=0;E<s[_].length;E++){const T=_f(s[_][E],a);Mi(i,T),S.push(T)}p.push(S)}return p}function Rc(s,i,a){const p=[];for(let _=0;_<s.length;_++){const S=vo(s[_],i,a);p.push(S)}return p}function Ah(s,i,a,p){if(s[0]<a[0]||s[0]>a[2]){const _=.5*p;let S=s[0]-a[0]>_?-p:a[0]-s[0]>_?p:0;S===0&&(S=s[0]-a[2]>_?-p:a[2]-s[0]>_?p:0),s[0]+=S}Mi(i,s)}function Rh(s,i,a,p){const _=Math.pow(2,p.z)*$o,S=[p.x*$o,p.y*$o],E=[];for(const T of s)for(const L of T){const D=[L.x+S[0],L.y+S[1]];Ah(D,i,a,_),E.push(D)}return E}function Nh(s,i,a,p){const _=Math.pow(2,p.z)*$o,S=[p.x*$o,p.y*$o],E=[];for(const L of s){const D=[];for(const B of L){const j=[B.x+S[0],B.y+S[1]];Mi(i,j),D.push(j)}E.push(D)}if(i[2]-i[0]<=_/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const L of E)for(const D of L)Ah(D,i,a,_)}var T;return E}class Ia{constructor(i,a){this.type=st,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(mo(i[1])){const p=i[1];if(p.type==="FeatureCollection"){const _=[];for(const S of p.features){const{type:E,coordinates:T}=S.geometry;E==="Polygon"&&_.push(T),E==="MultiPolygon"&&_.push(...T)}if(_.length)return new Ia(p,{type:"MultiPolygon",coordinates:_})}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Ia(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ia(p,p)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if(p.type==="Polygon"){const T=vo(p.coordinates,S,E),L=Rh(a.geometry(),_,S,E);if(!Uo(_,S))return!1;for(const D of L)if(!Qa(D,T))return!1}if(p.type==="MultiPolygon"){const T=Rc(p.coordinates,S,E),L=Rh(a.geometry(),_,S,E);if(!Uo(_,S))return!1;for(const D of L)if(!el(D,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if(p.type==="Polygon"){const T=vo(p.coordinates,S,E),L=Nh(a.geometry(),_,S,E);if(!Uo(_,S))return!1;for(const D of L)if(!Ac(D,T))return!1}if(p.type==="MultiPolygon"){const T=Rc(p.coordinates,S,E),L=Nh(a.geometry(),_,S,E);if(!Uo(_,S))return!1;for(const D of L)if(!tl(D,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zh=class{constructor(s=[],i=(a,p)=>a<p?-1:a>p?1:0){if(this.data=s,this.length=this.data.length,this.compare=i,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:i,compare:a}=this,p=i[s];for(;s>0;){const _=s-1>>1,S=i[_];if(a(p,S)>=0)break;i[s]=S,s=_}i[s]=p}_down(s){const{data:i,compare:a}=this,p=this.length>>1,_=i[s];for(;s<p;){let S=1+(s<<1);const E=S+1;if(E<this.length&&a(i[E],i[S])<0&&(S=E),a(i[S],_)>=0)break;i[s]=i[S],s=S}i[s]=_}};function xf(s,i,a,p,_){Dh(s,i,a,p||s.length-1,_||ro)}function Dh(s,i,a,p,_){for(;p>a;){if(p-a>600){var S=p-a+1,E=i-a+1,T=Math.log(S),L=.5*Math.exp(2*T/3),D=.5*Math.sqrt(T*L*(S-L)/S)*(E-S/2<0?-1:1);Dh(s,i,Math.max(a,Math.floor(i-E*L/S+D)),Math.min(p,Math.floor(i+(S-E)*L/S+D)),_)}var B=s[i],j=a,W=p;for(jo(s,a,i),_(s[p],B)>0&&jo(s,a,p);j<W;){for(jo(s,j,W),j++,W--;_(s[j],B)<0;)j++;for(;_(s[W],B)>0;)W--}_(s[a],B)===0?jo(s,a,W):jo(s,++W,p),W<=i&&(a=W+1),i<=W&&(p=W-1)}}function jo(s,i,a){var p=s[i];s[i]=s[a],s[a]=p}function ro(s,i){return s<i?-1:s>i?1:0}function wu(s,i){if(s.length<=1)return[s];const a=[];let p,_;for(const S of s){const E=bf(S);E!==0&&(S.area=Math.abs(E),_===void 0&&(_=E<0),_===E<0?(p&&a.push(p),p=[S]):p.push(S))}if(p&&a.push(p),i>1)for(let S=0;S<a.length;S++)a[S].length<=i||(xf(a[S],i,1,a[S].length-1,Oh),a[S]=a[S].slice(0,i));return a}function Oh(s,i){return i.area-s.area}function bf(s){let i=0;for(let a,p,_=0,S=s.length,E=S-1;_<S;E=_++)a=s[_],p=s[E],i+=(p.x-a.x)*(a.y+p.y);return i}const ku=1/298.257223563,Nc=ku*(2-ku),Su=Math.PI/180;class Eu{constructor(i){const a=6378.137*Su*1e3,p=Math.cos(i*Su),_=1/(1-Nc*(1-p*p)),S=Math.sqrt(_);this.kx=a*S*p,this.ky=a*S*_*(1-Nc)}distance(i,a){const p=this.wrap(i[0]-a[0])*this.kx,_=(i[1]-a[1])*this.ky;return Math.sqrt(p*p+_*_)}pointOnLine(i,a){let p,_,S,E,T=1/0;for(let L=0;L<i.length-1;L++){let D=i[L][0],B=i[L][1],j=this.wrap(i[L+1][0]-D)*this.kx,W=(i[L+1][1]-B)*this.ky,ee=0;j===0&&W===0||(ee=(this.wrap(a[0]-D)*this.kx*j+(a[1]-B)*this.ky*W)/(j*j+W*W),ee>1?(D=i[L+1][0],B=i[L+1][1]):ee>0&&(D+=j/this.kx*ee,B+=W/this.ky*ee)),j=this.wrap(a[0]-D)*this.kx,W=(a[1]-B)*this.ky;const re=j*j+W*W;re<T&&(T=re,p=D,_=B,S=L,E=ee)}return{point:[p,_],index:S,t:Math.max(0,Math.min(1,E))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function _o(s,i){return i[0]-s[0]}function jl(s){return s[1]-s[0]+1}function Nr(s,i){return s[1]>=s[0]&&s[1]<i}function Ta(s,i){if(s[0]>s[1])return[null,null];const a=jl(s);if(i){if(a===2)return[s,null];const _=Math.floor(a/2);return[[s[0],s[0]+_],[s[0]+_,s[1]]]}if(a===1)return[s,null];const p=Math.floor(a/2)-1;return[[s[0],s[0]+p],[s[0]+p+1,s[1]]]}function zc(s,i){if(!Nr(i,s.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let p=i[0];p<=i[1];++p)Mi(a,s[p]);return a}function Iu(s){const i=[1/0,1/0,-1/0,-1/0];for(const a of s)for(const p of a)Mi(i,p);return i}function Vl(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Tu(s,i,a){if(!Vl(s)||!Vl(i))return NaN;let p=0,_=0;return s[2]<i[0]&&(p=i[0]-s[2]),s[0]>i[2]&&(p=s[0]-i[2]),s[1]>i[3]&&(_=s[1]-i[3]),s[3]<i[1]&&(_=i[1]-s[3]),a.distance([0,0],[p,_])}function xs(s,i,a){const p=a.pointOnLine(i,s);return a.distance(s,p.point)}function Dc(s,i,a,p,_){const S=Math.min(xs(s,[a,p],_),xs(i,[a,p],_)),E=Math.min(xs(a,[s,i],_),xs(p,[s,i],_));return Math.min(S,E)}function wf(s,i,a,p,_){if(!Nr(i,s.length)||!Nr(p,a.length))return 1/0;let S=1/0;for(let E=i[0];E<i[1];++E){const T=s[E],L=s[E+1];for(let D=p[0];D<p[1];++D){const B=a[D],j=a[D+1];if(Li(T,L,B,j))return 0;S=Math.min(S,Dc(T,L,B,j,_))}}return S}function Mr(s,i,a,p,_){if(!Nr(i,s.length)||!Nr(p,a.length))return NaN;let S=1/0;for(let E=i[0];E<=i[1];++E)for(let T=p[0];T<=p[1];++T)if(S=Math.min(S,_.distance(s[E],a[T])),S===0)return S;return S}function kf(s,i,a){if(Qa(s,i,!0))return 0;let p=1/0;for(const _ of i){const S=_[0],E=_[_.length-1];if(S!==E&&(p=Math.min(p,xs(s,[E,S],a)),p===0))return p;const T=a.pointOnLine(_,s);if(p=Math.min(p,a.distance(s,T.point)),p===0)return p}return p}function pn(s,i,a,p){if(!Nr(i,s.length))return NaN;for(let S=i[0];S<=i[1];++S)if(Qa(s[S],a,!0))return 0;let _=1/0;for(let S=i[0];S<i[1];++S){const E=s[S],T=s[S+1];for(const L of a)for(let D=0,B=L.length,j=B-1;D<B;j=D++){const W=L[j],ee=L[D];if(Li(E,T,W,ee))return 0;_=Math.min(_,Dc(E,T,W,ee,p))}}return _}function Cu(s,i){for(const a of s)for(const p of a)if(Qa(p,i,!0))return!0;return!1}function Xn(s,i,a,p=1/0){const _=Iu(s),S=Iu(i);if(p!==1/0&&Tu(_,S,a)>=p)return p;if(Uo(_,S)){if(Cu(s,i))return 0}else if(Cu(i,s))return 0;let E=1/0;for(const T of s)for(let L=0,D=T.length,B=D-1;L<D;B=L++){const j=T[B],W=T[L];for(const ee of i)for(let re=0,ae=ee.length,ge=ae-1;re<ae;ge=re++){const we=ee[ge],Fe=ee[re];if(Li(j,W,we,Fe))return 0;E=Math.min(E,Dc(j,W,we,Fe,a))}}return E}function jn(s,i,a,p,_,S){if(!S)return;const E=Tu(zc(p,S),_,a);E<i&&s.push([E,S,[0,0]])}function Ws(s,i,a,p,_,S,E){if(!S||!E)return;const T=Tu(zc(p,S),zc(_,E),a);T<i&&s.push([T,S,E])}function Gl(s,i,a,p,_=1/0){let S=Math.min(p.distance(s[0],a[0][0]),_);if(S===0)return S;const E=new zh([[0,[0,s.length-1],[0,0]]],_o),T=Iu(a);for(;E.length>0;){const L=E.pop();if(L[0]>=S)continue;const D=L[1],B=i?50:100;if(jl(D)<=B){if(!Nr(D,s.length))return NaN;if(i){const j=pn(s,D,a,p);if(isNaN(j)||j===0)return j;S=Math.min(S,j)}else for(let j=D[0];j<=D[1];++j){const W=kf(s[j],a,p);if(S=Math.min(S,W),S===0)return 0}}else{const j=Ta(D,i);jn(E,S,p,s,T,j[0]),jn(E,S,p,s,T,j[1])}}return S}function nl(s,i,a,p,_,S=1/0){let E=Math.min(S,_.distance(s[0],a[0]));if(E===0)return E;const T=new zh([[0,[0,s.length-1],[0,a.length-1]]],_o);for(;T.length>0;){const L=T.pop();if(L[0]>=E)continue;const D=L[1],B=L[2],j=i?50:100,W=p?50:100;if(jl(D)<=j&&jl(B)<=W){if(!Nr(D,s.length)&&Nr(B,a.length))return NaN;let ee;if(i&&p)ee=wf(s,D,a,B,_),E=Math.min(E,ee);else if(i&&!p){const re=s.slice(D[0],D[1]+1);for(let ae=B[0];ae<=B[1];++ae)if(ee=xs(a[ae],re,_),E=Math.min(E,ee),E===0)return E}else if(!i&&p){const re=a.slice(B[0],B[1]+1);for(let ae=D[0];ae<=D[1];++ae)if(ee=xs(s[ae],re,_),E=Math.min(E,ee),E===0)return E}else ee=Mr(s,D,a,B,_),E=Math.min(E,ee)}else{const ee=Ta(D,i),re=Ta(B,p);Ws(T,E,_,s,a,ee[0],re[0]),Ws(T,E,_,s,a,ee[0],re[1]),Ws(T,E,_,s,a,ee[1],re[0]),Ws(T,E,_,s,a,ee[1],re[1])}}return E}function Oc(s){return s.type==="MultiPolygon"?s.coordinates.map(i=>({type:"Polygon",coordinates:i})):s.type==="MultiLineString"?s.coordinates.map(i=>({type:"LineString",coordinates:i})):s.type==="MultiPoint"?s.coordinates.map(i=>({type:"Point",coordinates:i})):[s]}class Ca{constructor(i,a){this.type=lt,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(mo(i[1])){const p=i[1];if(p.type==="FeatureCollection")return new Ca(p,p.features.map(_=>Oc(_.geometry)).flat());if(p.type==="Feature")return new Ca(p,Oc(p.geometry));if("type"in p&&"coordinates"in p)return new Ca(p,Oc(p))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,p){const _=a.geometry(),S=_.flat().map(L=>bu([L.x,L.y],a.canonical));if(_.length===0)return NaN;const E=new Eu(S[0][1]);let T=1/0;for(const L of p){switch(L.type){case"Point":T=Math.min(T,nl(S,!1,[L.coordinates],!1,E,T));break;case"LineString":T=Math.min(T,nl(S,!1,L.coordinates,!0,E,T));break;case"Polygon":T=Math.min(T,Gl(S,!1,L.coordinates,E,T))}if(T===0)return T}return T}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,p){const _=a.geometry(),S=_.flat().map(L=>bu([L.x,L.y],a.canonical));if(_.length===0)return NaN;const E=new Eu(S[0][1]);let T=1/0;for(const L of p){switch(L.type){case"Point":T=Math.min(T,nl(S,!0,[L.coordinates],!1,E,T));break;case"LineString":T=Math.min(T,nl(S,!0,L.coordinates,!0,E,T));break;case"Polygon":T=Math.min(T,Gl(S,!0,L.coordinates,E,T))}if(T===0)return T}return T}(i,this.geometries);if(i.geometryType()==="Polygon")return function(a,p){const _=a.geometry();if(_.length===0||_[0].length===0)return NaN;const S=wu(_,0).map(L=>L.map(D=>D.map(B=>bu([B.x,B.y],a.canonical)))),E=new Eu(S[0][0][0][1]);let T=1/0;for(const L of p)for(const D of S){switch(L.type){case"Point":T=Math.min(T,Gl([L.coordinates],!1,D,E,T));break;case"LineString":T=Math.min(T,Gl(L.coordinates,!0,D,E,T));break;case"Polygon":T=Math.min(T,Xn(D,L.coordinates,E,T))}if(T===0)return T}return T}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const rl={"==":Mh,"!=":An,">":Pc,"<":Bo,">=":Ya,"<=":Lh,array:go,at:Mc,boolean:go,case:zl,coalesce:_u,collator:Ka,format:$l,image:Ul,in:Lc,"index-of":Sa,interpolate:ui,"interpolate-hcl":ui,"interpolate-lab":ui,length:xu,let:qs,literal:Fo,match:Ea,number:go,"number-format":ci,object:go,slice:Dl,step:Za,string:go,"to-boolean":Wr,"to-color":Wr,"to-number":Wr,"to-string":Wr,var:Tn,within:Ia,distance:Ca};class xo{constructor(i,a,p,_){this.name=i,this.type=a,this._evaluate=p,this.args=_}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,a){const p=i[0],_=xo.definitions[p];if(!_)return a.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,E=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,T=E.filter(([D])=>!Array.isArray(D)||D.length===i.length-1);let L=null;for(const[D,B]of T){L=new yo(a.registry,il,a.path,null,a.scope);const j=[];let W=!1;for(let ee=1;ee<i.length;ee++){const re=i[ee],ae=Array.isArray(D)?D[ee-1]:D.type,ge=L.parse(re,1+j.length,ae);if(!ge){W=!0;break}j.push(ge)}if(!W)if(Array.isArray(D)&&D.length!==j.length)L.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let ee=0;ee<j.length;ee++){const re=Array.isArray(D)?D[ee]:D.type,ae=j[ee];L.concat(ee+1).checkSubtype(re,ae.type)}if(L.errors.length===0)return new xo(p,S,B,j)}}if(T.length===1)a.errors.push(...L.errors);else{const D=(T.length?T:E).map(([j])=>{return W=j,Array.isArray(W)?`(${W.map(K).join(", ")})`:`(${K(W.type)}...)`;var W}).join(" | "),B=[];for(let j=1;j<i.length;j++){const W=a.parse(i[j],1+B.length);if(!W)return null;B.push(K(W.type))}a.error(`Expected arguments of type ${D}, but found (${B.join(", ")}) instead.`)}return null}static register(i,a){xo.definitions=a;for(const p in a)i[p]=xo}}function Fc(s,[i,a,p,_]){i=i.evaluate(s),a=a.evaluate(s),p=p.evaluate(s);const S=_?_.evaluate(s):1,E=Vs(i,a,p,S);if(E)throw new Rr(E);return new In(i/255,a/255,p/255,S,!1)}function Bc(s,i){return s in i}function $c(s,i){const a=i[s];return a===void 0?null:a}function Zs(s){return{type:s}}function il(s){if(s instanceof Tn)return il(s.boundExpression);if(s instanceof xo&&s.name==="error"||s instanceof Ka||s instanceof Ia||s instanceof Ca)return!1;const i=s instanceof Wr||s instanceof go;let a=!0;return s.eachChild(p=>{a=i?a&&il(p):a&&p instanceof Fo}),!!a&&ol(s)&&al(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ol(s){if(s instanceof xo&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Ia||s instanceof Ca)return!1;let i=!0;return s.eachChild(a=>{i&&!ol(a)&&(i=!1)}),i}function sl(s){if(s instanceof xo&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(a=>{i&&!sl(a)&&(i=!1)}),i}function al(s,i){if(s instanceof xo&&i.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(p=>{a&&!al(p,i)&&(a=!1)}),a}function ll(s){return{result:"success",value:s}}function ul(s){return{result:"error",value:s}}function Ma(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Uc(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function jc(s){return!!s.expression&&s.expression.interpolated}function kn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function bs(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Sf(s){return s}function Vc(s,i){const a=i.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",_=p||!(p||s.property!==void 0),S=s.type||(jc(i)?"exponential":"interval");if(a||i.type==="padding"){const B=a?In.parse:Fi.parse;(s=Gt({},s)).stops&&(s.stops=s.stops.map(j=>[j[0],B(j[1])])),s.default=B(s.default?s.default:i.default)}if(s.colorSpace&&(E=s.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var E;let T,L,D;if(S==="exponential")T=l;else if(S==="interval")T=k;else if(S==="categorical"){T=Vo,L=Object.create(null);for(const B of s.stops)L[B[0]]=B[1];D=typeof s.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);T=h}if(p){const B={},j=[];for(let re=0;re<s.stops.length;re++){const ae=s.stops[re],ge=ae[0].zoom;B[ge]===void 0&&(B[ge]={zoom:ge,type:s.type,property:s.property,default:s.default,stops:[]},j.push(ge)),B[ge].stops.push([ae[0].value,ae[1]])}const W=[];for(const re of j)W.push([B[re].zoom,Vc(B[re],i)]);const ee={name:"linear"};return{kind:"composite",interpolationType:ee,interpolationFactor:ui.interpolationFactor.bind(void 0,ee),zoomStops:W.map(re=>re[0]),evaluate:({zoom:re},ae)=>l({stops:W,base:s.base},i,re).evaluate(re,ae)}}if(_){const B=S==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:ui.interpolationFactor.bind(void 0,B),zoomStops:s.stops.map(j=>j[0]),evaluate:({zoom:j})=>T(s,i,j,L,D)}}return{kind:"source",evaluate(B,j){const W=j&&j.properties?j.properties[s.property]:void 0;return W===void 0?hi(s.default,i.default):T(s,i,W,L,D)}}}function hi(s,i,a){return s!==void 0?s:i!==void 0?i:a!==void 0?a:void 0}function Vo(s,i,a,p,_){return hi(typeof a===_?p[a]:void 0,s.default,i.default)}function k(s,i,a){if(kn(a)!=="number")return hi(s.default,i.default);const p=s.stops.length;if(p===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[p-1][0])return s.stops[p-1][1];const _=Ol(s.stops.map(S=>S[0]),a);return s.stops[_][1]}function l(s,i,a){const p=s.base!==void 0?s.base:1;if(kn(a)!=="number")return hi(s.default,i.default);const _=s.stops.length;if(_===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[_-1][0])return s.stops[_-1][1];const S=Ol(s.stops.map(B=>B[0]),a),E=function(B,j,W,ee){const re=ee-W,ae=B-W;return re===0?0:j===1?ae/re:(Math.pow(j,ae)-1)/(Math.pow(j,re)-1)}(a,p,s.stops[S][0],s.stops[S+1][0]),T=s.stops[S][1],L=s.stops[S+1][1],D=sr[i.type]||Sf;return typeof T.evaluate=="function"?{evaluate(...B){const j=T.evaluate.apply(void 0,B),W=L.evaluate.apply(void 0,B);if(j!==void 0&&W!==void 0)return D(j,W,E,s.colorSpace)}}:D(T,L,E,s.colorSpace)}function h(s,i,a){switch(i.type){case"color":a=In.parse(a);break;case"formatted":a=Ci.fromString(a.toString());break;case"resolvedImage":a=ni.fromString(a.toString());break;case"padding":a=Fi.parse(a);break;default:kn(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0)}return hi(a,s.default,i.default)}xo.register(rl,{error:[{kind:"error"},[on],(s,[i])=>{throw new Rr(i.evaluate(s))}],typeof:[on,[Qt],(s,[i])=>K(Cr(i.evaluate(s)))],"to-rgba":[J(lt,4),[_i],(s,[i])=>{const[a,p,_,S]=i.evaluate(s).rgb;return[255*a,255*p,255*_,S]}],rgb:[_i,[lt,lt,lt],Fc],rgba:[_i,[lt,lt,lt,lt],Fc],has:{type:st,overloads:[[[on],(s,[i])=>Bc(i.evaluate(s),s.properties())],[[on,to],(s,[i,a])=>Bc(i.evaluate(s),a.evaluate(s))]]},get:{type:Qt,overloads:[[[on],(s,[i])=>$c(i.evaluate(s),s.properties())],[[on,to],(s,[i,a])=>$c(i.evaluate(s),a.evaluate(s))]]},"feature-state":[Qt,[on],(s,[i])=>$c(i.evaluate(s),s.featureState||{})],properties:[to,[],s=>s.properties()],"geometry-type":[on,[],s=>s.geometryType()],id:[Qt,[],s=>s.id()],zoom:[lt,[],s=>s.globals.zoom],"heatmap-density":[lt,[],s=>s.globals.heatmapDensity||0],"line-progress":[lt,[],s=>s.globals.lineProgress||0],accumulated:[Qt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[lt,Zs(lt),(s,i)=>{let a=0;for(const p of i)a+=p.evaluate(s);return a}],"*":[lt,Zs(lt),(s,i)=>{let a=1;for(const p of i)a*=p.evaluate(s);return a}],"-":{type:lt,overloads:[[[lt,lt],(s,[i,a])=>i.evaluate(s)-a.evaluate(s)],[[lt],(s,[i])=>-i.evaluate(s)]]},"/":[lt,[lt,lt],(s,[i,a])=>i.evaluate(s)/a.evaluate(s)],"%":[lt,[lt,lt],(s,[i,a])=>i.evaluate(s)%a.evaluate(s)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(s,[i,a])=>Math.pow(i.evaluate(s),a.evaluate(s))],sqrt:[lt,[lt],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[lt,[lt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[lt,[lt],(s,[i])=>Math.log(i.evaluate(s))],log2:[lt,[lt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[lt,[lt],(s,[i])=>Math.sin(i.evaluate(s))],cos:[lt,[lt],(s,[i])=>Math.cos(i.evaluate(s))],tan:[lt,[lt],(s,[i])=>Math.tan(i.evaluate(s))],asin:[lt,[lt],(s,[i])=>Math.asin(i.evaluate(s))],acos:[lt,[lt],(s,[i])=>Math.acos(i.evaluate(s))],atan:[lt,[lt],(s,[i])=>Math.atan(i.evaluate(s))],min:[lt,Zs(lt),(s,i)=>Math.min(...i.map(a=>a.evaluate(s)))],max:[lt,Zs(lt),(s,i)=>Math.max(...i.map(a=>a.evaluate(s)))],abs:[lt,[lt],(s,[i])=>Math.abs(i.evaluate(s))],round:[lt,[lt],(s,[i])=>{const a=i.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[lt,[lt],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[lt,[lt],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[st,[on,Qt],(s,[i,a])=>s.properties()[i.value]===a.value],"filter-id-==":[st,[Qt],(s,[i])=>s.id()===i.value],"filter-type-==":[st,[on],(s,[i])=>s.geometryType()===i.value],"filter-<":[st,[on,Qt],(s,[i,a])=>{const p=s.properties()[i.value],_=a.value;return typeof p==typeof _&&p<_}],"filter-id-<":[st,[Qt],(s,[i])=>{const a=s.id(),p=i.value;return typeof a==typeof p&&a<p}],"filter->":[st,[on,Qt],(s,[i,a])=>{const p=s.properties()[i.value],_=a.value;return typeof p==typeof _&&p>_}],"filter-id->":[st,[Qt],(s,[i])=>{const a=s.id(),p=i.value;return typeof a==typeof p&&a>p}],"filter-<=":[st,[on,Qt],(s,[i,a])=>{const p=s.properties()[i.value],_=a.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[st,[Qt],(s,[i])=>{const a=s.id(),p=i.value;return typeof a==typeof p&&a<=p}],"filter->=":[st,[on,Qt],(s,[i,a])=>{const p=s.properties()[i.value],_=a.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[st,[Qt],(s,[i])=>{const a=s.id(),p=i.value;return typeof a==typeof p&&a>=p}],"filter-has":[st,[Qt],(s,[i])=>i.value in s.properties()],"filter-has-id":[st,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[st,[J(on)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[st,[J(Qt)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[st,[on,J(Qt)],(s,[i,a])=>a.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[st,[on,J(Qt)],(s,[i,a])=>function(p,_,S,E){for(;S<=E;){const T=S+E>>1;if(_[T]===p)return!0;_[T]>p?E=T-1:S=T+1}return!1}(s.properties()[i.value],a.value,0,a.value.length-1)],all:{type:st,overloads:[[[st,st],(s,[i,a])=>i.evaluate(s)&&a.evaluate(s)],[Zs(st),(s,i)=>{for(const a of i)if(!a.evaluate(s))return!1;return!0}]]},any:{type:st,overloads:[[[st,st],(s,[i,a])=>i.evaluate(s)||a.evaluate(s)],[Zs(st),(s,i)=>{for(const a of i)if(a.evaluate(s))return!0;return!1}]]},"!":[st,[st],(s,[i])=>!i.evaluate(s)],"is-supported-script":[st,[on],(s,[i])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(i.evaluate(s))}],upcase:[on,[on],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[on,[on],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[on,Zs(Qt),(s,i)=>i.map(a=>Al(a.evaluate(s))).join("")],"resolved-locale":[on,[Sr],(s,[i])=>i.evaluate(s).resolvedLocale()]});class f{constructor(i,a){var p;this.expression=i,this._warningHistory={},this._evaluator=new Nl,this._defaultValue=a?(p=a).type==="color"&&bs(p.default)?new In(0,0,0,0):p.type==="color"?In.parse(p.default)||null:p.type==="padding"?Fi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?Tr.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(i,a,p,_,S,E){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(i,a,p,_,S,E){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function x(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in rl}function I(s,i){const a=new yo(rl,il,[],i?function(_){const S={color:_i,string:on,number:lt,enum:on,boolean:st,formatted:Ii,padding:Hr,resolvedImage:no,variableAnchorOffsetCollection:ve};return _.type==="array"?J(S[_.value]||Qt,_.length):S[_.type]}(i):void 0),p=a.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?ll(new f(p,i)):ul(a.errors)}class F{constructor(i,a){this.kind=i,this._styleExpression=a,this.isStateDependent=i!=="constant"&&!sl(a.expression)}evaluateWithoutErrorHandling(i,a,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(i,a,p,_,S,E)}evaluate(i,a,p,_,S,E){return this._styleExpression.evaluate(i,a,p,_,S,E)}}class U{constructor(i,a,p,_){this.kind=i,this.zoomStops=p,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!sl(a.expression),this.interpolationType=_}evaluateWithoutErrorHandling(i,a,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(i,a,p,_,S,E)}evaluate(i,a,p,_,S,E){return this._styleExpression.evaluate(i,a,p,_,S,E)}interpolationFactor(i,a,p){return this.interpolationType?ui.interpolationFactor(this.interpolationType,i,a,p):0}}function Z(s,i){const a=I(s,i);if(a.result==="error")return a;const p=a.value.expression,_=ol(p);if(!_&&!Ma(i))return ul([new Kt("","data expressions not supported")]);const S=al(p,["zoom"]);if(!S&&!Uc(i))return ul([new Kt("","zoom expressions not supported")]);const E=Ee(p);return E||S?E instanceof Kt?ul([E]):E instanceof ui&&!jc(i)?ul([new Kt("",'"interpolate" expressions cannot be used with this property')]):ll(E?new U(_?"camera":"composite",a.value,E.labels,E instanceof ui?E.interpolation:void 0):new F(_?"constant":"source",a.value)):ul([new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class le{constructor(i,a){this._parameters=i,this._specification=a,Gt(this,Vc(this._parameters,this._specification))}static deserialize(i){return new le(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Ee(s){let i=null;if(s instanceof qs)i=Ee(s.result);else if(s instanceof _u){for(const a of s.args)if(i=Ee(a),i)break}else(s instanceof Za||s instanceof ui)&&s.input instanceof xo&&s.input.name==="zoom"&&(i=s);return i instanceof Kt||s.eachChild(a=>{const p=Ee(a);p instanceof Kt?i=p:!i&&p?i=new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new Kt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Re(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!Re(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Ye={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pt(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Re(s)||(s=Yt(s));const i=I(s,Ye);if(i.result==="error")throw new Error(i.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,p,_)=>i.value.evaluate(a,p,{},_),needGeometry:qt(s)}}function ft(s,i){return s<i?-1:s>i?1:0}function qt(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let i=1;i<s.length;i++)if(qt(s[i]))return!0;return!1}function Yt(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?ln(s[1],s[2],"=="):i==="!="?zn(ln(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?ln(s[1],s[2],i):i==="any"?(a=s.slice(1),["any"].concat(a.map(Yt))):i==="all"?["all"].concat(s.slice(1).map(Yt)):i==="none"?["all"].concat(s.slice(1).map(Yt).map(zn)):i==="in"?Cn(s[1],s.slice(2)):i==="!in"?zn(Cn(s[1],s.slice(2))):i==="has"?Yn(s[1]):i!=="!has"||zn(Yn(s[1]));var a}function ln(s,i,a){switch(s){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,s,i]}}function Cn(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",s,["literal",i.sort(ft)]]:["filter-in-small",s,["literal",i]]}}function Yn(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function zn(s){return["!",s]}function Zr(s){const i=typeof s;if(i==="number"||i==="boolean"||i==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let _="[";for(const S of s)_+=`${Zr(S)},`;return`${_}]`}const a=Object.keys(s).sort();let p="{";for(let _=0;_<a.length;_++)p+=`${JSON.stringify(a[_])}:${Zr(s[a[_]])},`;return`${p}}`}function bo(s){let i="";for(const a of Er)i+=`/${Zr(s[a])}`;return i}function rs(s){const i=s.value;return i?[new He(s.key,i,"constants have been deprecated as of v8")]:[]}function qn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Pi(s){if(Array.isArray(s))return s.map(Pi);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const a in s)i[a]=Pi(s[a]);return i}return qn(s)}function di(s){const i=s.key,a=s.value,p=s.valueSpec||{},_=s.objectElementValidators||{},S=s.style,E=s.styleSpec,T=s.validateSpec;let L=[];const D=kn(a);if(D!=="object")return[new He(i,a,`object expected, ${D} found`)];for(const B in a){const j=B.split(".")[0],W=p[j]||p["*"];let ee;if(_[j])ee=_[j];else if(p[j])ee=T;else if(_["*"])ee=_["*"];else{if(!p["*"]){L.push(new He(i,a[B],`unknown property "${B}"`));continue}ee=T}L=L.concat(ee({key:(i&&`${i}.`)+B,value:a[B],valueSpec:W,style:S,styleSpec:E,object:a,objectKey:B,validateSpec:T},a))}for(const B in p)_[B]||p[B].required&&p[B].default===void 0&&a[B]===void 0&&L.push(new He(i,a,`missing required property "${B}"`));return L}function is(s){const i=s.value,a=s.valueSpec,p=s.style,_=s.styleSpec,S=s.key,E=s.arrayElementValidator||s.validateSpec;if(kn(i)!=="array")return[new He(S,i,`array expected, ${kn(i)} found`)];if(a.length&&i.length!==a.length)return[new He(S,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new He(S,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let T={type:a.value,values:a.values};_.$version<7&&(T.function=a.function),kn(a.value)==="object"&&(T=a.value);let L=[];for(let D=0;D<i.length;D++)L=L.concat(E({array:i,arrayIndex:D,value:i[D],valueSpec:T,validateSpec:s.validateSpec,style:p,styleSpec:_,key:`${S}[${D}]`}));return L}function Mu(s){const i=s.key,a=s.value,p=s.valueSpec;let _=kn(a);return _==="number"&&a!=a&&(_="NaN"),_!=="number"?[new He(i,a,`number expected, ${_} found`)]:"minimum"in p&&a<p.minimum?[new He(i,a,`${a} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&a>p.maximum?[new He(i,a,`${a} is greater than the maximum value ${p.maximum}`)]:[]}function ql(s){const i=s.valueSpec,a=qn(s.value.type);let p,_,S,E={};const T=a!=="categorical"&&s.value.property===void 0,L=!T,D=kn(s.value.stops)==="array"&&kn(s.value.stops[0])==="array"&&kn(s.value.stops[0][0])==="object",B=di({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(ee){if(a==="identity")return[new He(ee.key,ee.value,'identity function may not have a "stops" property')];let re=[];const ae=ee.value;return re=re.concat(is({key:ee.key,value:ae,valueSpec:ee.valueSpec,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,arrayElementValidator:j})),kn(ae)==="array"&&ae.length===0&&re.push(new He(ee.key,ae,"array must have at least one stop")),re},default:function(ee){return ee.validateSpec({key:ee.key,value:ee.value,valueSpec:i,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec})}}});return a==="identity"&&T&&B.push(new He(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||B.push(new He(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!jc(s.valueSpec)&&B.push(new He(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(L&&!Ma(s.valueSpec)?B.push(new He(s.key,s.value,"property functions not supported")):T&&!Uc(s.valueSpec)&&B.push(new He(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!D||s.value.property!==void 0||B.push(new He(s.key,s.value,'"property" property is required')),B;function j(ee){let re=[];const ae=ee.value,ge=ee.key;if(kn(ae)!=="array")return[new He(ge,ae,`array expected, ${kn(ae)} found`)];if(ae.length!==2)return[new He(ge,ae,`array length 2 expected, length ${ae.length} found`)];if(D){if(kn(ae[0])!=="object")return[new He(ge,ae,`object expected, ${kn(ae[0])} found`)];if(ae[0].zoom===void 0)return[new He(ge,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new He(ge,ae,"object stop key must have value")];if(S&&S>qn(ae[0].zoom))return[new He(ge,ae[0].zoom,"stop zoom values must appear in ascending order")];qn(ae[0].zoom)!==S&&(S=qn(ae[0].zoom),_=void 0,E={}),re=re.concat(di({key:`${ge}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{zoom:Mu,value:W}}))}else re=re.concat(W({key:`${ge}[0]`,value:ae[0],valueSpec:{},validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec},ae));return x(Pi(ae[1]))?re.concat([new He(`${ge}[1]`,ae[1],"expressions are not allowed in function stops.")]):re.concat(ee.validateSpec({key:`${ge}[1]`,value:ae[1],valueSpec:i,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec}))}function W(ee,re){const ae=kn(ee.value),ge=qn(ee.value),we=ee.value!==null?ee.value:re;if(p){if(ae!==p)return[new He(ee.key,we,`${ae} stop domain type must match previous stop domain type ${p}`)]}else p=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new He(ee.key,we,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&a!=="categorical"){let Fe=`number expected, ${ae} found`;return Ma(i)&&a===void 0&&(Fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(ee.key,we,Fe)]}return a!=="categorical"||ae!=="number"||isFinite(ge)&&Math.floor(ge)===ge?a!=="categorical"&&ae==="number"&&_!==void 0&&ge<_?[new He(ee.key,we,"stop domain values must appear in ascending order")]:(_=ge,a==="categorical"&&ge in E?[new He(ee.key,we,"stop domain values must be unique")]:(E[ge]=!0,[])):[new He(ee.key,we,`integer expected, found ${ge}`)]}}function Xs(s){const i=(s.expressionContext==="property"?Z:I)(Pi(s.value),s.valueSpec);if(i.result==="error")return i.value.map(p=>new He(`${s.key}${p.key}`,s.value,p.message));const a=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new He(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!sl(a))return[new He(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!sl(a))return[new He(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!al(a,["zoom","feature-state"]))return[new He(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!ol(a))return[new He(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Go(s){const i=s.key,a=s.value,p=s.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(qn(a))===-1&&_.push(new He(i,a,`expected one of [${p.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(p.values).indexOf(qn(a))===-1&&_.push(new He(i,a,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(a)} found`)),_}function Ef(s){return Re(Pi(s.value))?Xs(Gt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fh(s)}function Fh(s){const i=s.value,a=s.key;if(kn(i)!=="array")return[new He(a,i,`array expected, ${kn(i)} found`)];const p=s.styleSpec;let _,S=[];if(i.length<1)return[new He(a,i,"filter array must have at least 1 element")];switch(S=S.concat(Go({key:`${a}[0]`,value:i[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),qn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&qn(i[1])==="$type"&&S.push(new He(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new He(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(_=kn(i[1]),_!=="string"&&S.push(new He(`${a}[1]`,i[1],`string expected, ${_} found`)));for(let E=2;E<i.length;E++)_=kn(i[E]),qn(i[1])==="$type"?S=S.concat(Go({key:`${a}[${E}]`,value:i[E],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new He(`${a}[${E}]`,i[E],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let E=1;E<i.length;E++)S=S.concat(Fh({key:`${a}[${E}]`,value:i[E],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":_=kn(i[1]),i.length!==2?S.push(new He(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new He(`${a}[1]`,i[1],`string expected, ${_} found`))}return S}function If(s,i){const a=s.key,p=s.validateSpec,_=s.style,S=s.styleSpec,E=s.value,T=s.objectKey,L=S[`${i}_${s.layerType}`];if(!L)return[];const D=T.match(/^(.*)-transition$/);if(i==="paint"&&D&&L[D[1]]&&L[D[1]].transition)return p({key:a,value:E,valueSpec:S.transition,style:_,styleSpec:S});const B=s.valueSpec||L[T];if(!B)return[new He(a,E,`unknown property "${T}"`)];let j;if(kn(E)==="string"&&Ma(B)&&!B.tokens&&(j=/^{([^}]+)}$/.exec(E)))return[new He(a,E,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const W=[];return s.layerType==="symbol"&&(T==="text-field"&&_&&!_.glyphs&&W.push(new He(a,E,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&bs(Pi(E))&&qn(E.type)==="identity"&&W.push(new He(a,E,'"text-font" does not support identity functions'))),W.concat(p({key:s.key,value:E,valueSpec:B,style:_,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:T}))}function Bh(s){return If(s,"paint")}function Tf(s){return If(s,"layout")}function Cf(s){let i=[];const a=s.value,p=s.key,_=s.style,S=s.styleSpec;a.type||a.ref||i.push(new He(p,a,'either "type" or "ref" is required'));let E=qn(a.type);const T=qn(a.ref);if(a.id){const L=qn(a.id);for(let D=0;D<s.arrayIndex;D++){const B=_.layers[D];qn(B.id)===L&&i.push(new He(p,a.id,`duplicate layer id "${a.id}", previously used at line ${B.id.__line__}`))}}if("ref"in a){let L;["type","source","source-layer","filter","layout"].forEach(D=>{D in a&&i.push(new He(p,a[D],`"${D}" is prohibited for ref layers`))}),_.layers.forEach(D=>{qn(D.id)===T&&(L=D)}),L?L.ref?i.push(new He(p,a.ref,"ref cannot reference another ref layer")):E=qn(L.type):i.push(new He(p,a.ref,`ref layer "${T}" not found`))}else if(E!=="background")if(a.source){const L=_.sources&&_.sources[a.source],D=L&&qn(L.type);L?D==="vector"&&E==="raster"?i.push(new He(p,a.source,`layer "${a.id}" requires a raster source`)):D!=="raster-dem"&&E==="hillshade"?i.push(new He(p,a.source,`layer "${a.id}" requires a raster-dem source`)):D==="raster"&&E!=="raster"?i.push(new He(p,a.source,`layer "${a.id}" requires a vector source`)):D!=="vector"||a["source-layer"]?D==="raster-dem"&&E!=="hillshade"?i.push(new He(p,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!a.paint||!a.paint["line-gradient"]||D==="geojson"&&L.lineMetrics||i.push(new He(p,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new He(p,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new He(p,a.source,`source "${a.source}" not found`))}else i.push(new He(p,a,'missing required property "source"'));return i=i.concat(di({key:p,value:a,valueSpec:S.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:a.type,valueSpec:S.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:Ef,layout:L=>di({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":D=>Tf(Gt({layerType:E},D))}}),paint:L=>di({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":D=>Bh(Gt({layerType:E},D))}})}})),i}function Hl(s){const i=s.value,a=s.key,p=kn(i);return p!=="string"?[new He(a,i,`string expected, ${p} found`)]:[]}const $h={promoteId:function({key:s,value:i}){if(kn(i)==="string")return Hl({key:s,value:i});{const a=[];for(const p in i)a.push(...Hl({key:`${s}.${p}`,value:i[p]}));return a}}};function Gc(s){const i=s.value,a=s.key,p=s.styleSpec,_=s.style,S=s.validateSpec;if(!i.type)return[new He(a,i,'"type" is required')];const E=qn(i.type);let T;switch(E){case"vector":case"raster":return T=di({key:a,value:i,valueSpec:p[`source_${E.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:$h,validateSpec:S}),T;case"raster-dem":return T=function(L){var D;const B=(D=L.sourceName)!==null&&D!==void 0?D:"",j=L.value,W=L.styleSpec,ee=W.source_raster_dem,re=L.style;let ae=[];const ge=kn(j);if(j===void 0)return ae;if(ge!=="object")return ae.push(new He("source_raster_dem",j,`object expected, ${ge} found`)),ae;const we=qn(j.encoding)==="custom",Fe=["redFactor","greenFactor","blueFactor","baseShift"],Me=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const De in j)!we&&Fe.includes(De)?ae.push(new He(De,j[De],`In "${B}": "${De}" is only valid when "encoding" is set to "custom". ${Me} encoding found`)):ee[De]?ae=ae.concat(L.validateSpec({key:De,value:j[De],valueSpec:ee[De],validateSpec:L.validateSpec,style:re,styleSpec:W})):ae.push(new He(De,j[De],`unknown property "${De}"`));return ae}({sourceName:a,value:i,style:s.style,styleSpec:p,validateSpec:S}),T;case"geojson":if(T=di({key:a,value:i,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:S,objectElementValidators:$h}),i.cluster)for(const L in i.clusterProperties){const[D,B]=i.clusterProperties[L],j=typeof D=="string"?[D,["accumulated"],["get",L]]:D;T.push(...Xs({key:`${a}.${L}.map`,value:B,validateSpec:S,expressionContext:"cluster-map"})),T.push(...Xs({key:`${a}.${L}.reduce`,value:j,validateSpec:S,expressionContext:"cluster-reduce"}))}return T;case"video":return di({key:a,value:i,valueSpec:p.source_video,style:_,validateSpec:S,styleSpec:p});case"image":return di({key:a,value:i,valueSpec:p.source_image,style:_,validateSpec:S,styleSpec:p});case"canvas":return[new He(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Go({key:`${a}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:S,styleSpec:p})}}function Mf(s){const i=s.value,a=s.styleSpec,p=a.light,_=s.style;let S=[];const E=kn(i);if(i===void 0)return S;if(E!=="object")return S=S.concat([new He("light",i,`object expected, ${E} found`)]),S;for(const T in i){const L=T.match(/^(.*)-transition$/);S=S.concat(L&&p[L[1]]&&p[L[1]].transition?s.validateSpec({key:T,value:i[T],valueSpec:a.transition,validateSpec:s.validateSpec,style:_,styleSpec:a}):p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:_,styleSpec:a}):[new He(T,i[T],`unknown property "${T}"`)])}return S}function Lf(s){const i=s.value,a=s.styleSpec,p=a.sky,_=s.style,S=kn(i);if(i===void 0)return[];if(S!=="object")return[new He("sky",i,`object expected, ${S} found`)];let E=[];for(const T in i)E=E.concat(p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],style:_,styleSpec:a}):[new He(T,i[T],`unknown property "${T}"`)]);return E}function Pf(s){const i=s.value,a=s.styleSpec,p=a.terrain,_=s.style;let S=[];const E=kn(i);if(i===void 0)return S;if(E!=="object")return S=S.concat([new He("terrain",i,`object expected, ${E} found`)]),S;for(const T in i)S=S.concat(p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:_,styleSpec:a}):[new He(T,i[T],`unknown property "${T}"`)]);return S}function Af(s){let i=[];const a=s.value,p=s.key;if(Array.isArray(a)){const _=[],S=[];for(const E in a)a[E].id&&_.includes(a[E].id)&&i.push(new He(p,a,`all the sprites' ids must be unique, but ${a[E].id} is duplicated`)),_.push(a[E].id),a[E].url&&S.includes(a[E].url)&&i.push(new He(p,a,`all the sprites' URLs must be unique, but ${a[E].url} is duplicated`)),S.push(a[E].url),i=i.concat(di({key:`${p}[${E}]`,value:a[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return i}return Hl({key:p,value:a})}const Uh={"*":()=>[],array:is,boolean:function(s){const i=s.value,a=s.key,p=kn(i);return p!=="boolean"?[new He(a,i,`boolean expected, ${p} found`)]:[]},number:Mu,color:function(s){const i=s.key,a=s.value,p=kn(a);return p!=="string"?[new He(i,a,`color expected, ${p} found`)]:In.parse(String(a))?[]:[new He(i,a,`color expected, "${a}" found`)]},constants:rs,enum:Go,filter:Ef,function:ql,layer:Cf,object:di,source:Gc,light:Mf,sky:Lf,terrain:Pf,projection:function(s){const i=s.value,a=s.styleSpec,p=a.projection,_=s.style,S=kn(i);if(i===void 0)return[];if(S!=="object")return[new He("projection",i,`object expected, ${S} found`)];let E=[];for(const T in i)E=E.concat(p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],style:_,styleSpec:a}):[new He(T,i[T],`unknown property "${T}"`)]);return E},string:Hl,formatted:function(s){return Hl(s).length===0?[]:Xs(s)},resolvedImage:function(s){return Hl(s).length===0?[]:Xs(s)},padding:function(s){const i=s.key,a=s.value;if(kn(a)==="array"){if(a.length<1||a.length>4)return[new He(i,a,`padding requires 1 to 4 values; ${a.length} values found`)];const p={type:"number"};let _=[];for(let S=0;S<a.length;S++)_=_.concat(s.validateSpec({key:`${i}[${S}]`,value:a[S],validateSpec:s.validateSpec,valueSpec:p}));return _}return Mu({key:i,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const i=s.key,a=s.value,p=kn(a),_=s.styleSpec;if(p!=="array"||a.length<1||a.length%2!=0)return[new He(i,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let E=0;E<a.length;E+=2)S=S.concat(Go({key:`${i}[${E}]`,value:a[E],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(is({key:`${i}[${E+1}]`,value:a[E+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:_}));return S},sprite:Af};function Lu(s){const i=s.value,a=s.valueSpec,p=s.styleSpec;return s.validateSpec=Lu,a.expression&&bs(qn(i))?ql(s):a.expression&&x(Pi(i))?Xs(s):a.type&&Uh[a.type]?Uh[a.type](s):di(Gt({},s,{valueSpec:a.type?p[a.type]:a}))}function Nm(s){const i=s.value,a=s.key,p=Hl(s);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new He(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new He(a,i,'"glyphs" url must include a "{range}" token'))),p}function os(s,i=Ve){let a=[];return a=a.concat(Lu({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,validateSpec:Lu,objectElementValidators:{glyphs:Nm,"*":()=>[]}})),s.constants&&(a=a.concat(rs({key:"constants",value:s.constants,style:s,styleSpec:i,validateSpec:Lu}))),Rf(a)}function Ys(s){return function(i){return s({...i,validateSpec:Lu})}}function Rf(s){return[].concat(s).sort((i,a)=>i.line-a.line)}function ws(s){return function(...i){return Rf(s.apply(this,i))}}os.source=ws(Ys(Gc)),os.sprite=ws(Ys(Af)),os.glyphs=ws(Ys(Nm)),os.light=ws(Ys(Mf)),os.sky=ws(Ys(Lf)),os.terrain=ws(Ys(Pf)),os.layer=ws(Ys(Cf)),os.filter=ws(Ys(Ef)),os.paintProperty=ws(Ys(Bh)),os.layoutProperty=ws(Ys(Tf));const Wl=os,h0=Wl.light,d0=Wl.sky,zm=Wl.paintProperty,Dm=Wl.layoutProperty;function Nf(s,i){let a=!1;if(i&&i.length)for(const p of i)s.fire(new gn(new Error(p.message))),a=!0;return a}class Pu{constructor(i,a,p){const _=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const E=new Int32Array(this.arrayBuffer);i=E[0],this.d=(a=E[1])+2*(p=E[2]);for(let L=0;L<this.d*this.d;L++){const D=E[3+L],B=E[3+L+1];_.push(D===B?null:E.subarray(D,B))}const T=E[3+_.length+1];this.keys=E.subarray(E[3+_.length],T),this.bboxes=E.subarray(T),this.insert=this._insertReadonly}else{this.d=a+2*p;for(let E=0;E<this.d*this.d;E++)_.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=i,this.padding=p,this.scale=a/i,this.uid=0;const S=p/a*i;this.min=-S,this.max=i+S}insert(i,a,p,_,S){this._forEachCell(a,p,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,a,p,_,S,E){this.cells[S].push(E)}query(i,a,p,_,S){const E=this.min,T=this.max;if(i<=E&&a<=E&&T<=p&&T<=_&&!S)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(i,a,p,_,this._queryCell,L,{},S),L}}_queryCell(i,a,p,_,S,E,T,L){const D=this.cells[S];if(D!==null){const B=this.keys,j=this.bboxes;for(let W=0;W<D.length;W++){const ee=D[W];if(T[ee]===void 0){const re=4*ee;(L?L(j[re+0],j[re+1],j[re+2],j[re+3]):i<=j[re+2]&&a<=j[re+3]&&p>=j[re+0]&&_>=j[re+1])?(T[ee]=!0,E.push(B[ee])):T[ee]=!1}}}}_forEachCell(i,a,p,_,S,E,T,L){const D=this._convertToCellCoord(i),B=this._convertToCellCoord(a),j=this._convertToCellCoord(p),W=this._convertToCellCoord(_);for(let ee=D;ee<=j;ee++)for(let re=B;re<=W;re++){const ae=this.d*re+ee;if((!L||L(this._convertFromCellCoord(ee),this._convertFromCellCoord(re),this._convertFromCellCoord(ee+1),this._convertFromCellCoord(re+1)))&&S.call(this,i,a,p,_,ae,E,T,L))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,a=3+this.cells.length+1+1;let p=0;for(let E=0;E<this.cells.length;E++)p+=this.cells[E].length;const _=new Int32Array(a+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=a;for(let E=0;E<i.length;E++){const T=i[E];_[3+E]=S,_.set(T,S),S+=T.length}return _[3+i.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+i.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(i,a){const p=i.toArrayBuffer();return a&&a.push(p),{buffer:p}}static deserialize(i){return new Pu(i.buffer)}}const ss={};function Mt(s,i,a={}){if(ss[s])throw new Error(`${s} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:s,writeable:!1}),ss[s]={klass:i,omit:a.omit||[],shallow:a.shallow||[]}}Mt("Object",Object),Mt("TransferableGridIndex",Pu),Mt("Color",In),Mt("Error",Error),Mt("AJAXError",nr),Mt("ResolvedImage",ni),Mt("StylePropertyFunction",le),Mt("StyleExpression",f,{omit:["_evaluator"]}),Mt("ZoomDependentExpression",U),Mt("ZoomConstantExpression",F),Mt("CompoundExpression",xo,{omit:["_evaluate"]});for(const s in rl)rl[s]._classRegistryKey||Mt(`Expression_${s}`,rl[s]);function jh(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function zf(s){return s.$name||s.constructor._classRegistryKey}function Om(s){return!function(i){if(i===null||typeof i!="object")return!1;const a=zf(i);return!(!a||a==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||jh(s)||wt(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Au(s,i){if(Om(s))return(jh(s)||wt(s))&&i&&i.push(s),ArrayBuffer.isView(s)&&i&&i.push(s.buffer),s instanceof ImageData&&i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const S=[];for(const E of s)S.push(Au(E,i));return S}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const a=zf(s);if(!a)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!ss[a])throw new Error(`${a} is not registered.`);const{klass:p}=ss[a],_=p.serialize?p.serialize(s,i):{};if(p.serialize){if(i&&_===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in s){if(!s.hasOwnProperty(S)||ss[a].omit.indexOf(S)>=0)continue;const E=s[S];_[S]=ss[a].shallow.indexOf(S)>=0?E:Au(E,i)}s instanceof Error&&(_.message=s.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(_.$name=a),_}function Ru(s){if(Om(s))return s;if(Array.isArray(s))return s.map(Ru);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const i=zf(s)||"Object";if(!ss[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:a}=ss[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(s);const p=Object.create(a.prototype);for(const _ of Object.keys(s)){if(_==="$name")continue;const S=s[_];p[_]=ss[i].shallow.indexOf(_)>=0?S:Ru(S)}return p}class Df{constructor(){this.first=!0}update(i,a){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=a),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}const xn={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Of(s){for(const i of s)if(Bf(i.charCodeAt(0)))return!0;return!1}function f0(s){for(const i of s)if(!Nu(i.charCodeAt(0)))return!1;return!0}function Ff(s){const i=s.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(i.join("|"),"u")}const p0=Ff(["Arab","Dupl","Mong","Ougr","Syrc"]);function Nu(s){return!p0.test(String.fromCodePoint(s))}const Fm=Ff(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Bf(s){return!(s!==746&&s!==747&&(s<4352||!(xn["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||xn["CJK Compatibility"](s)||xn["CJK Strokes"](s)||!(!xn["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||xn["Enclosed CJK Letters and Months"](s)||xn["Ideographic Description Characters"](s)||xn.Kanbun(s)||xn.Katakana(s)&&s!==12540||!(!xn["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!xn["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||xn["Vertical Forms"](s)||xn["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Fm.test(String.fromCodePoint(s)))))}function Bm(s){return!(Bf(s)||function(i){return!!(xn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||xn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||xn["Letterlike Symbols"](i)||xn["Number Forms"](i)||xn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||xn["Control Pictures"](i)&&i!==9251||xn["Optical Character Recognition"](i)||xn["Enclosed Alphanumerics"](i)||xn["Geometric Shapes"](i)||xn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||xn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||xn["CJK Symbols and Punctuation"](i)||xn.Katakana(i)||xn["Private Use Area"](i)||xn["CJK Compatibility Forms"](i)||xn["Small Form Variants"](i)||xn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}const m0=Ff(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function $f(s){return m0.test(String.fromCodePoint(s))}function g0(s,i){return!(!i&&$f(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||xn.Khmer(s))}function y0(s){for(const i of s)if($f(i.charCodeAt(0)))return!0;return!1}const qo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class mr{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Df,this.transition={})}isSupportedScript(i){return function(a,p){for(const _ of a)if(!g0(_.charCodeAt(0),p))return!1;return!0}(i,qo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,a=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*a}}}class zu{constructor(i,a){this.property=i,this.value=a,this.expression=function(p,_){if(bs(p))return new le(p,_);if(x(p)){const S=Z(p,_);if(S.result==="error")throw new Error(S.value.map(E=>`${E.key}: ${E.message}`).join(", "));return S.value}{let S=p;return _.type==="color"&&typeof p=="string"?S=In.parse(p):_.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(S=Tr.parse(p)):S=Fi.parse(p),{kind:"constant",evaluate:()=>S}}}(a===void 0?i.specification.default:a,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,p){return this.property.possiblyEvaluate(this,i,a,p)}}class Vh{constructor(i){this.property=i,this.value=new zu(i,void 0)}transitioned(i,a){return new $m(this.property,this.value,a,pe({},i.transition,this.transition),i.now)}untransitioned(){return new $m(this.property,this.value,null,{},0)}}class Gh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ze(this._values[i].value.value)}setValue(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Vh(this._values[i].property)),this._values[i].value=new zu(this._values[i].property,a===null?void 0:Ze(a))}getTransition(i){return Ze(this._values[i].transition)}setTransition(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Vh(this._values[i].property)),this._values[i].transition=Ze(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const p=this.getValue(a);p!==void 0&&(i[a]=p);const _=this.getTransition(a);_!==void 0&&(i[`${a}-transition`]=_)}return i}transitioned(i,a){const p=new qc(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(i,a._values[_]);return p}untransitioned(){const i=new qc(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class $m{constructor(i,a,p,_,S){this.property=i,this.value=a,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,i.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(i,a,p){const _=i.now||0,S=this.value.possiblyEvaluate(i,a,p),E=this.prior;if(E){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return E.possiblyEvaluate(i,a,p);{const T=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(i,a,p),S,function(L){if(L<=0)return 0;if(L>=1)return 1;const D=L*L,B=D*L;return 4*(L<.5?B:3*(L-D)+B-.75)}(T))}}return S}}class qc{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,p){const _=new Wc(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(i,a,p);return _}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Hc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Ze(this._values[i].value)}setValue(i,a){this._values[i]=new zu(this._values[i].property,a===null?void 0:Ze(a))}serialize(){const i={};for(const a of Object.keys(this._values)){const p=this.getValue(a);p!==void 0&&(i[a]=p)}return i}possiblyEvaluate(i,a,p){const _=new Wc(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(i,a,p);return _}}class Ks{constructor(i,a,p){this.property=i,this.value=a,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,p,_){return this.property.evaluate(this.value,this.parameters,i,a,p,_)}}class Wc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Rt{constructor(i){this.specification=i}possiblyEvaluate(i,a){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(a)}interpolate(i,a,p){const _=sr[this.specification.type];return _?_(i,a,p):i}}class Xt{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,p,_){return new Ks(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},p,_)}:i.expression,a)}interpolate(i,a,p){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new Ks(this,{kind:"constant",value:void 0},i.parameters);const _=sr[this.specification.type];if(_){const S=_(i.value.value,a.value.value,p);return new Ks(this,{kind:"constant",value:S},i.parameters)}return i}evaluate(i,a,p,_,S,E){return i.kind==="constant"?i.value:i.evaluate(a,p,_,S,E)}}class qh extends Xt{possiblyEvaluate(i,a,p,_){if(i.value===void 0)return new Ks(this,{kind:"constant",value:void 0},a);if(i.expression.kind==="constant"){const S=i.expression.evaluate(a,null,{},p,_),E=i.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,T=this._calculate(E,E,E,a);return new Ks(this,{kind:"constant",value:T},a)}if(i.expression.kind==="camera"){const S=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new Ks(this,{kind:"constant",value:S},a)}return new Ks(this,i.expression,a)}evaluate(i,a,p,_,S,E){if(i.kind==="source"){const T=i.evaluate(a,p,_,S,E);return this._calculate(T,T,T,a)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},p,_),i.evaluate({zoom:Math.floor(a.zoom)},p,_),i.evaluate({zoom:Math.floor(a.zoom)+1},p,_),a):i.value}_calculate(i,a,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:p,to:a}}interpolate(i){return i}}class Hh{constructor(i){this.specification=i}possiblyEvaluate(i,a,p,_){if(i.value!==void 0){if(i.expression.kind==="constant"){const S=i.expression.evaluate(a,null,{},p,_);return this._calculate(S,S,S,a)}return this._calculate(i.expression.evaluate(new mr(Math.floor(a.zoom-1),a)),i.expression.evaluate(new mr(Math.floor(a.zoom),a)),i.expression.evaluate(new mr(Math.floor(a.zoom+1),a)),a)}}_calculate(i,a,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:p,to:a}}interpolate(i){return i}}class Uf{constructor(i){this.specification=i}possiblyEvaluate(i,a,p,_){return!!i.expression.evaluate(a,null,{},p,_)}interpolate(){return!1}}class w{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in i){const p=i[a];p.specification.overridable&&this.overridableProperties.push(a);const _=this.defaultPropertyValues[a]=new zu(p,void 0),S=this.defaultTransitionablePropertyValues[a]=new Vh(p);this.defaultTransitioningPropertyValues[a]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=_.possiblyEvaluate({})}}}Mt("DataDrivenProperty",Xt),Mt("DataConstantProperty",Rt),Mt("CrossFadedDataDrivenProperty",qh),Mt("CrossFadedProperty",Hh),Mt("ColorRampProperty",Uf);const r="-transition";class c extends Jt{constructor(i,a){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new Hc(a.layout)),a.paint)){this._transitionablePaint=new Gh(a.paint);for(const p in i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(const p in i.layout)this.setLayoutProperty(p,i.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wc(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a,p={}){a!=null&&this._validate(Dm,`layers.${this.id}.layout.${i}`,i,a,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,a):this.visibility=a)}getPaintProperty(i){return i.endsWith(r)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a,p={}){if(a!=null&&this._validate(zm,`layers.${this.id}.paint.${i}`,i,a,p))return!1;if(i.endsWith(r))return this._transitionablePaint.setTransition(i.slice(0,-11),a||void 0),!1;{const _=this._transitionablePaint._values[i],S=_.property.specification["property-type"]==="cross-faded-data-driven",E=_.value.isDataDriven(),T=_.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);const L=this._transitionablePaint._values[i].value;return L.isDataDriven()||E||S||this._handleOverridablePaintPropertyUpdate(i,T,L)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,a,p){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),$e(i,(a,p)=>!(a===void 0||p==="layout"&&!Object.keys(a).length||p==="paint"&&!Object.keys(a).length))}_validate(i,a,p,_,S={}){return(!S||S.validate!==!1)&&Nf(this,i.call(Wl,{key:a,layerType:this.type,objectKey:p,value:_,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof Ks&&Ma(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class v{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class b{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(s,i=1){let a=0,p=0;return{members:s.map(_=>{const S=g[_.type].BYTES_PER_ELEMENT,E=a=P(a,Math.max(i,S)),T=_.components||1;return p=Math.max(p,S),a+=S*T,{name:_.name,type:_.type,components:T,offset:E}}),size:P(a,Math.max(p,i)),alignment:i}}function P(s,i){return Math.ceil(s/i)*i}class z extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const p=this.length;return this.resize(p+1),this.emplace(p,i,a)}emplace(i,a,p){const _=2*i;return this.int16[_+0]=a,this.int16[_+1]=p,i}}z.prototype.bytesPerElement=4,Mt("StructArrayLayout2i4",z);class $ extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,p)}emplace(i,a,p,_){const S=3*i;return this.int16[S+0]=a,this.int16[S+1]=p,this.int16[S+2]=_,i}}$.prototype.bytesPerElement=6,Mt("StructArrayLayout3i6",$);class G extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,i,a,p,_)}emplace(i,a,p,_,S){const E=4*i;return this.int16[E+0]=a,this.int16[E+1]=p,this.int16[E+2]=_,this.int16[E+3]=S,i}}G.prototype.bytesPerElement=8,Mt("StructArrayLayout4i8",G);class q extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,a,p,_,S,E)}emplace(i,a,p,_,S,E,T){const L=6*i;return this.int16[L+0]=a,this.int16[L+1]=p,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=E,this.int16[L+5]=T,i}}q.prototype.bytesPerElement=12,Mt("StructArrayLayout2i4i12",q);class te extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,a,p,_,S,E)}emplace(i,a,p,_,S,E,T){const L=4*i,D=8*i;return this.int16[L+0]=a,this.int16[L+1]=p,this.uint8[D+4]=_,this.uint8[D+5]=S,this.uint8[D+6]=E,this.uint8[D+7]=T,i}}te.prototype.bytesPerElement=8,Mt("StructArrayLayout2i4ub8",te);class ue extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const p=this.length;return this.resize(p+1),this.emplace(p,i,a)}emplace(i,a,p){const _=2*i;return this.float32[_+0]=a,this.float32[_+1]=p,i}}ue.prototype.bytesPerElement=8,Mt("StructArrayLayout2f8",ue);class fe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E,T,L,D,B){const j=this.length;return this.resize(j+1),this.emplace(j,i,a,p,_,S,E,T,L,D,B)}emplace(i,a,p,_,S,E,T,L,D,B,j){const W=10*i;return this.uint16[W+0]=a,this.uint16[W+1]=p,this.uint16[W+2]=_,this.uint16[W+3]=S,this.uint16[W+4]=E,this.uint16[W+5]=T,this.uint16[W+6]=L,this.uint16[W+7]=D,this.uint16[W+8]=B,this.uint16[W+9]=j,i}}fe.prototype.bytesPerElement=20,Mt("StructArrayLayout10ui20",fe);class ye extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E,T,L,D,B,j,W){const ee=this.length;return this.resize(ee+1),this.emplace(ee,i,a,p,_,S,E,T,L,D,B,j,W)}emplace(i,a,p,_,S,E,T,L,D,B,j,W,ee){const re=12*i;return this.int16[re+0]=a,this.int16[re+1]=p,this.int16[re+2]=_,this.int16[re+3]=S,this.uint16[re+4]=E,this.uint16[re+5]=T,this.uint16[re+6]=L,this.uint16[re+7]=D,this.int16[re+8]=B,this.int16[re+9]=j,this.int16[re+10]=W,this.int16[re+11]=ee,i}}ye.prototype.bytesPerElement=24,Mt("StructArrayLayout4i4ui4i24",ye);class ke extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,p){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,p)}emplace(i,a,p,_){const S=3*i;return this.float32[S+0]=a,this.float32[S+1]=p,this.float32[S+2]=_,i}}ke.prototype.bytesPerElement=12,Mt("StructArrayLayout3f12",ke);class Se extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}Se.prototype.bytesPerElement=4,Mt("StructArrayLayout1ul4",Se);class Ce extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E,T,L,D){const B=this.length;return this.resize(B+1),this.emplace(B,i,a,p,_,S,E,T,L,D)}emplace(i,a,p,_,S,E,T,L,D,B){const j=10*i,W=5*i;return this.int16[j+0]=a,this.int16[j+1]=p,this.int16[j+2]=_,this.int16[j+3]=S,this.int16[j+4]=E,this.int16[j+5]=T,this.uint32[W+3]=L,this.uint16[j+8]=D,this.uint16[j+9]=B,i}}Ce.prototype.bytesPerElement=20,Mt("StructArrayLayout6i1ul2ui20",Ce);class me extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,a,p,_,S,E)}emplace(i,a,p,_,S,E,T){const L=6*i;return this.int16[L+0]=a,this.int16[L+1]=p,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=E,this.int16[L+5]=T,i}}me.prototype.bytesPerElement=12,Mt("StructArrayLayout2i2i2i12",me);class Pe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S){const E=this.length;return this.resize(E+1),this.emplace(E,i,a,p,_,S)}emplace(i,a,p,_,S,E){const T=4*i,L=8*i;return this.float32[T+0]=a,this.float32[T+1]=p,this.float32[T+2]=_,this.int16[L+6]=S,this.int16[L+7]=E,i}}Pe.prototype.bytesPerElement=16,Mt("StructArrayLayout2f1f2i16",Pe);class ze extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,a,p,_,S,E)}emplace(i,a,p,_,S,E,T){const L=16*i,D=4*i,B=8*i;return this.uint8[L+0]=a,this.uint8[L+1]=p,this.float32[D+1]=_,this.float32[D+2]=S,this.int16[B+6]=E,this.int16[B+7]=T,i}}ze.prototype.bytesPerElement=16,Mt("StructArrayLayout2ub2f2i16",ze);class Ue extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,p){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,p)}emplace(i,a,p,_){const S=3*i;return this.uint16[S+0]=a,this.uint16[S+1]=p,this.uint16[S+2]=_,i}}Ue.prototype.bytesPerElement=6,Mt("StructArrayLayout3ui6",Ue);class nt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we)}emplace(i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we,Fe){const Me=24*i,De=12*i,We=48*i;return this.int16[Me+0]=a,this.int16[Me+1]=p,this.uint16[Me+2]=_,this.uint16[Me+3]=S,this.uint32[De+2]=E,this.uint32[De+3]=T,this.uint32[De+4]=L,this.uint16[Me+10]=D,this.uint16[Me+11]=B,this.uint16[Me+12]=j,this.float32[De+7]=W,this.float32[De+8]=ee,this.uint8[We+36]=re,this.uint8[We+37]=ae,this.uint8[We+38]=ge,this.uint32[De+10]=we,this.int16[Me+22]=Fe,i}}nt.prototype.bytesPerElement=48,Mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",nt);class ht extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we,Fe,Me,De,We,ot,Et,Zt,kt,xt,Ot,Pt){const Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we,Fe,Me,De,We,ot,Et,Zt,kt,xt,Ot,Pt)}emplace(i,a,p,_,S,E,T,L,D,B,j,W,ee,re,ae,ge,we,Fe,Me,De,We,ot,Et,Zt,kt,xt,Ot,Pt,Tt){const Qe=32*i,Bt=16*i;return this.int16[Qe+0]=a,this.int16[Qe+1]=p,this.int16[Qe+2]=_,this.int16[Qe+3]=S,this.int16[Qe+4]=E,this.int16[Qe+5]=T,this.int16[Qe+6]=L,this.int16[Qe+7]=D,this.uint16[Qe+8]=B,this.uint16[Qe+9]=j,this.uint16[Qe+10]=W,this.uint16[Qe+11]=ee,this.uint16[Qe+12]=re,this.uint16[Qe+13]=ae,this.uint16[Qe+14]=ge,this.uint16[Qe+15]=we,this.uint16[Qe+16]=Fe,this.uint16[Qe+17]=Me,this.uint16[Qe+18]=De,this.uint16[Qe+19]=We,this.uint16[Qe+20]=ot,this.uint16[Qe+21]=Et,this.uint16[Qe+22]=Zt,this.uint32[Bt+12]=kt,this.float32[Bt+13]=xt,this.float32[Bt+14]=Ot,this.uint16[Qe+30]=Pt,this.uint16[Qe+31]=Tt,i}}ht.prototype.bytesPerElement=64,Mt("StructArrayLayout8i15ui1ul2f2ui64",ht);class bt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}bt.prototype.bytesPerElement=4,Mt("StructArrayLayout1f4",bt);class It extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,p){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,p)}emplace(i,a,p,_){const S=3*i;return this.uint16[6*i+0]=a,this.float32[S+1]=p,this.float32[S+2]=_,i}}It.prototype.bytesPerElement=12,Mt("StructArrayLayout1ui2f12",It);class vt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,p){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,p)}emplace(i,a,p,_){const S=4*i;return this.uint32[2*i+0]=a,this.uint16[S+2]=p,this.uint16[S+3]=_,i}}vt.prototype.bytesPerElement=8,Mt("StructArrayLayout1ul2ui8",vt);class yt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const p=this.length;return this.resize(p+1),this.emplace(p,i,a)}emplace(i,a,p){const _=2*i;return this.uint16[_+0]=a,this.uint16[_+1]=p,i}}yt.prototype.bytesPerElement=4,Mt("StructArrayLayout2ui4",yt);class Nt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}Nt.prototype.bytesPerElement=2,Mt("StructArrayLayout1ui2",Nt);class nn extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,i,a,p,_)}emplace(i,a,p,_,S){const E=4*i;return this.float32[E+0]=a,this.float32[E+1]=p,this.float32[E+2]=_,this.float32[E+3]=S,i}}nn.prototype.bytesPerElement=16,Mt("StructArrayLayout4f16",nn);class _t extends v{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}_t.prototype.size=20;class St extends Ce{get(i){return new _t(this,i)}}Mt("CollisionBoxArray",St);class en extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}en.prototype.size=48;class gr extends nt{get(i){return new en(this,i)}}Mt("PlacedSymbolArray",gr);class hn extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}hn.prototype.size=64;class vn extends ht{get(i){return new hn(this,i)}}Mt("SymbolInstanceArray",vn);class yr extends bt{getoffsetX(i){return this.float32[1*i+0]}}Mt("GlyphOffsetArray",yr);class Bi extends ${getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Mt("SymbolLineVertexArray",Bi);class ks extends v{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ks.prototype.size=12;class vr extends It{get(i){return new ks(this,i)}}Mt("TextAnchorOffsetArray",vr);class wo extends v{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wo.prototype.size=8;class io extends vt{get(i){return new wo(this,i)}}Mt("FeatureIndexArray",io);class $i extends z{}class oo extends z{}class Js extends z{}class Du extends q{}class Wh extends te{}class Ou extends ue{}class as extends fe{}class Zh extends ye{}class jf extends ke{}class ls extends Se{}class us extends me{}class cl extends ze{}class Ss extends Ue{}class Ai extends yt{}const Ui=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ho}=Ui;class bn{constructor(i=[]){this.segments=i}prepareSegment(i,a,p,_){let S=this.segments[this.segments.length-1];return i>bn.MAX_VERTEX_ARRAY_LENGTH&&at(`Max vertices per segment is ${bn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!S||S.vertexLength+i>bn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:a.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},_!==void 0&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,p,_){return new bn([{vertexOffset:i,primitiveOffset:a,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function Zl(s,i){return 256*(s=he(Math.floor(s),0,255))+he(Math.floor(i),0,255)}bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mt("SegmentVector",bn);const Fu=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Bu={exports:{}},Um={exports:{}};Um.exports=function(s,i){var a,p,_,S,E,T,L,D;for(p=s.length-(a=3&s.length),_=i,E=3432918353,T=461845907,D=0;D<p;)L=255&s.charCodeAt(D)|(255&s.charCodeAt(++D))<<8|(255&s.charCodeAt(++D))<<16|(255&s.charCodeAt(++D))<<24,++D,_=27492+(65535&(S=5*(65535&(_=(_^=L=(65535&(L=(L=(65535&L)*E+(((L>>>16)*E&65535)<<16)&4294967295)<<15|L>>>17))*T+(((L>>>16)*T&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(L=0,a){case 3:L^=(255&s.charCodeAt(D+2))<<16;case 2:L^=(255&s.charCodeAt(D+1))<<8;case 1:_^=L=(65535&(L=(L=(65535&(L^=255&s.charCodeAt(D)))*E+(((L>>>16)*E&65535)<<16)&4294967295)<<15|L>>>17))*T+(((L>>>16)*T&65535)<<16)&4294967295}return _^=s.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var v0=Um.exports,jm={exports:{}};jm.exports=function(s,i){for(var a,p=s.length,_=i^p,S=0;p>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(S)|(255&s.charCodeAt(++S))<<8|(255&s.charCodeAt(++S))<<16|(255&s.charCodeAt(++S))<<24))+((1540483477*(a>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:_^=(255&s.charCodeAt(S+2))<<16;case 2:_^=(255&s.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&s.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var hl=v0,Vm=jm.exports;Bu.exports=hl,Bu.exports.murmur3=hl,Bu.exports.murmur2=Vm;var Xh=M(Bu.exports);class Zc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,a,p,_){this.ids.push(Yh(i)),this.positions.push(a,p,_)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Yh(i);let p=0,_=this.ids.length-1;for(;p<_;){const E=p+_>>1;this.ids[E]>=a?_=E:p=E+1}const S=[];for(;this.ids[p]===a;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(i,a){const p=new Float64Array(i.ids),_=new Uint32Array(i.positions);return Kh(p,_,0,p.length-1),a&&a.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(i){const a=new Zc;return a.ids=i.ids,a.positions=i.positions,a.indexed=!0,a}}function Yh(s){const i=+s;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Xh(String(s))}function Kh(s,i,a,p){for(;a<p;){const _=s[a+p>>1];let S=a-1,E=p+1;for(;;){do S++;while(s[S]<_);do E--;while(s[E]>_);if(S>=E)break;$u(s,S,E),$u(i,3*S,3*E),$u(i,3*S+1,3*E+1),$u(i,3*S+2,3*E+2)}E-a<p-E?(Kh(s,i,a,E),a=E+1):(Kh(s,i,E+1,p),p=E)}}function $u(s,i,a){const p=s[i];s[i]=s[a],s[a]=p}Mt("FeaturePositionMap",Zc);class Xc{constructor(i,a){this.gl=i.gl,this.location=a}}class Gm extends Xc{constructor(i,a){super(i,a),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Tw extends Xc{constructor(i,a){super(i,a),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Cw extends Xc{constructor(i,a){super(i,a),this.current=In.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const UP=new Float32Array(16);function _0(s){return[Zl(255*s.r,255*s.g),Zl(255*s.b,255*s.a)]}class Vf{constructor(i,a,p){this.value=i,this.uniformNames=a.map(_=>`u_${_}`),this.type=p}setUniform(i,a,p){i.set(p.constantOr(this.value))}getBinding(i,a,p){return this.type==="color"?new Cw(i,a):new Gm(i,a)}}class Jh{constructor(i,a){this.uniformNames=a.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=i.tlbr}setUniform(i,a,p,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&i.set(S)}getBinding(i,a,p){return p.substr(0,9)==="u_pattern"?new Tw(i,a):new Gm(i,a)}}class Xl{constructor(i,a,p,_){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=a.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,a,p,_,S){const E=this.paintVertexArray.length,T=this.expression.evaluate(new mr(0),a,{},_,[],S);this.paintVertexArray.resize(i),this._setPaintValue(E,i,T)}updatePaintArray(i,a,p,_){const S=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(i,a,S)}_setPaintValue(i,a,p){if(this.type==="color"){const _=_0(p);for(let S=i;S<a;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=i;_<a;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class La{constructor(i,a,p,_,S,E){this.expression=i,this.uniformNames=a.map(T=>`u_${T}_t`),this.type=p,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=a.map(T=>({name:`a_${T}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(i,a,p,_,S){const E=this.expression.evaluate(new mr(this.zoom),a,{},_,[],S),T=this.expression.evaluate(new mr(this.zoom+1),a,{},_,[],S),L=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(L,i,E,T)}updatePaintArray(i,a,p,_){const S=this.expression.evaluate({zoom:this.zoom},p,_),E=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(i,a,S,E)}_setPaintValue(i,a,p,_){if(this.type==="color"){const S=_0(p),E=_0(_);for(let T=i;T<a;T++)this.paintVertexArray.emplace(T,S[0],S[1],E[0],E[1])}else{for(let S=i;S<a;S++)this.paintVertexArray.emplace(S,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a){const p=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,_=he(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(_)}getBinding(i,a,p){return new Gm(i,a)}}class Uu{constructor(i,a,p,_,S,E){this.expression=i,this.type=a,this.useIntegerZoom=p,this.zoom=_,this.layerId=E,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(i,a,p){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(_,i,a.patterns&&a.patterns[this.layerId],p)}updatePaintArray(i,a,p,_,S){this._setPaintValues(i,a,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(i,a,p,_){if(!_||!p)return;const{min:S,mid:E,max:T}=p,L=_[S],D=_[E],B=_[T];if(L&&D&&B)for(let j=i;j<a;j++)this.zoomInPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],D.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],D.pixelRatio,B.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Fu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Fu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Mw{constructor(i,a,p){this.binders={},this._buffers=[];const _=[];for(const S in i.paint._values){if(!p(S))continue;const E=i.paint.get(S);if(!(E instanceof Ks&&Ma(E.property.specification)))continue;const T=jP(S,i.type),L=E.value,D=E.property.specification.type,B=E.property.useIntegerZoom,j=E.property.specification["property-type"],W=j==="cross-faded"||j==="cross-faded-data-driven";if(L.kind==="constant")this.binders[S]=W?new Jh(L.value,T):new Vf(L.value,T,D),_.push(`/u_${S}`);else if(L.kind==="source"||W){const ee=Lw(S,D,"source");this.binders[S]=W?new Uu(L,D,B,a,ee,i.id):new Xl(L,T,D,ee),_.push(`/a_${S}`)}else{const ee=Lw(S,D,"composite");this.binders[S]=new La(L,T,D,B,a,ee),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof Xl||a instanceof La?a.maxValue:0}populatePaintArrays(i,a,p,_,S){for(const E in this.binders){const T=this.binders[E];(T instanceof Xl||T instanceof La||T instanceof Uu)&&T.populatePaintArray(i,a,p,_,S)}}setConstantPatternPositions(i,a){for(const p in this.binders){const _=this.binders[p];_ instanceof Jh&&_.setConstantPatternPositions(i,a)}}updatePaintArrays(i,a,p,_,S){let E=!1;for(const T in i){const L=a.getPositions(T);for(const D of L){const B=p.feature(D.index);for(const j in this.binders){const W=this.binders[j];if((W instanceof Xl||W instanceof La||W instanceof Uu)&&W.expression.isStateDependent===!0){const ee=_.paint.get(j);W.expression=ee.value,W.updatePaintArray(D.start,D.end,B,i[T],S),E=!0}}}}return E}defines(){const i=[];for(const a in this.binders){const p=this.binders[a];(p instanceof Vf||p instanceof Jh)&&i.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof Xl||p instanceof La)for(let _=0;_<p.paintVertexAttributes.length;_++)i.push(p.paintVertexAttributes[_].name);else if(p instanceof Uu)for(let _=0;_<Fu.members.length;_++)i.push(Fu.members[_].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof Vf||p instanceof Jh||p instanceof La)for(const _ of p.uniformNames)i.push(_)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,a){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof Vf||S instanceof Jh||S instanceof La){for(const E of S.uniformNames)if(a[E]){const T=S.getBinding(i,a[E],E);p.push({name:E,property:_,binding:T})}}}return p}setUniforms(i,a,p,_){for(const{name:S,property:E,binding:T}of a)this.binders[E].setUniform(T,_,p.get(E),S)}updatePaintBuffers(i){this._buffers=[];for(const a in this.binders){const p=this.binders[a];if(i&&p instanceof Uu){const _=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof Xl||p instanceof La)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const a in this.binders){const p=this.binders[a];(p instanceof Xl||p instanceof La||p instanceof Uu)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof Xl||a instanceof La||a instanceof Uu)&&a.destroy()}}}class Yc{constructor(i,a,p=()=>!0){this.programConfigurations={};for(const _ of i)this.programConfigurations[_.id]=new Mw(_,a,p);this.needsUpload=!1,this._featureMap=new Zc,this._bufferOffset=0}populatePaintArrays(i,a,p,_,S,E){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,a,_,S,E);a.id!==void 0&&this._featureMap.add(a.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,p,_){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(i,this._featureMap,a,S,_)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function jP(s,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}function Lw(s,i,a){const p={color:{source:ue,composite:nn},number:{source:bt,composite:ue}},_=function(S){return{"line-pattern":{source:as,composite:as},"fill-pattern":{source:as,composite:as},"fill-extrusion-pattern":{source:as,composite:as}}[S]}(s);return _&&_[a]||p[i][a]}Mt("ConstantBinder",Vf),Mt("CrossFadedConstantBinder",Jh),Mt("SourceExpressionBinder",Xl),Mt("CrossFadedCompositeBinder",Uu),Mt("CompositeExpressionBinder",La),Mt("ProgramConfiguration",Mw,{omit:["_buffers"]}),Mt("ProgramConfigurationSet",Yc);const ri=8192,x0=Math.pow(2,14)-1,Pw=-x0-1;function Kc(s){const i=ri/s.extent,a=s.loadGeometry();for(let p=0;p<a.length;p++){const _=a[p];for(let S=0;S<_.length;S++){const E=_[S],T=Math.round(E.x*i),L=Math.round(E.y*i);E.x=he(T,Pw,x0),E.y=he(L,Pw,x0),(T<E.x||T>E.x+1||L<E.y||L>E.y+1)&&at("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Jc(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?Kc(s):[]}}function qm(s,i,a,p,_){s.emplaceBack(2*i+(p+1)/2,2*a+(_+1)/2)}class b0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new oo,this.indexArray=new Ss,this.segments=new bn,this.programConfigurations=new Yc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,p){const _=this.layers[0],S=[];let E=null,T=!1;_.type==="circle"&&(E=_.layout.get("circle-sort-key"),T=!E.isConstant());for(const{feature:L,id:D,index:B,sourceLayerIndex:j}of i){const W=this.layers[0]._featureFilter.needGeometry,ee=Jc(L,W);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),ee,p))continue;const re=T?E.evaluate(ee,{},p):void 0,ae={id:D,properties:L.properties,type:L.type,sourceLayerIndex:j,index:B,geometry:W?ee.geometry:Kc(L),patterns:{},sortKey:re};S.push(ae)}T&&S.sort((L,D)=>L.sortKey-D.sortKey);for(const L of S){const{geometry:D,index:B,sourceLayerIndex:j}=L,W=i[B].feature;this.addFeature(L,D,B,p),a.featureIndex.insert(W,D,B,j,this.index)}}update(i,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ho),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,p,_){for(const S of a)for(const E of S){const T=E.x,L=E.y;if(T<0||T>=ri||L<0||L>=ri)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),B=D.vertexLength;qm(this.layoutVertexArray,T,L,-1,-1),qm(this.layoutVertexArray,T,L,1,-1),qm(this.layoutVertexArray,T,L,1,1),qm(this.layoutVertexArray,T,L,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{},_)}}function Aw(s,i){for(let a=0;a<s.length;a++)if(Qh(i,s[a]))return!0;for(let a=0;a<i.length;a++)if(Qh(s,i[a]))return!0;return!!w0(s,i)}function VP(s,i,a){return!!Qh(s,i)||!!k0(i,s,a)}function Rw(s,i){if(s.length===1)return zw(i,s[0]);for(let a=0;a<i.length;a++){const p=i[a];for(let _=0;_<p.length;_++)if(Qh(s,p[_]))return!0}for(let a=0;a<s.length;a++)if(zw(i,s[a]))return!0;for(let a=0;a<i.length;a++)if(w0(s,i[a]))return!0;return!1}function GP(s,i,a){if(s.length>1){if(w0(s,i))return!0;for(let p=0;p<i.length;p++)if(k0(i[p],s,a))return!0}for(let p=0;p<s.length;p++)if(k0(s[p],i,a))return!0;return!1}function w0(s,i){if(s.length===0||i.length===0)return!1;for(let a=0;a<s.length-1;a++){const p=s[a],_=s[a+1];for(let S=0;S<i.length-1;S++)if(qP(p,_,i[S],i[S+1]))return!0}return!1}function qP(s,i,a,p){return Ne(s,a,p)!==Ne(i,a,p)&&Ne(s,i,a)!==Ne(s,i,p)}function k0(s,i,a){const p=a*a;if(i.length===1)return s.distSqr(i[0])<p;for(let _=1;_<i.length;_++)if(Nw(s,i[_-1],i[_])<p)return!0;return!1}function Nw(s,i,a){const p=i.distSqr(a);if(p===0)return s.distSqr(i);const _=((s.x-i.x)*(a.x-i.x)+(s.y-i.y)*(a.y-i.y))/p;return s.distSqr(_<0?i:_>1?a:a.sub(i)._mult(_)._add(i))}function zw(s,i){let a,p,_,S=!1;for(let E=0;E<s.length;E++){a=s[E];for(let T=0,L=a.length-1;T<a.length;L=T++)p=a[T],_=a[L],p.y>i.y!=_.y>i.y&&i.x<(_.x-p.x)*(i.y-p.y)/(_.y-p.y)+p.x&&(S=!S)}return S}function Qh(s,i){let a=!1;for(let p=0,_=s.length-1;p<s.length;_=p++){const S=s[p],E=s[_];S.y>i.y!=E.y>i.y&&i.x<(E.x-S.x)*(i.y-S.y)/(E.y-S.y)+S.x&&(a=!a)}return a}function HP(s,i,a){const p=a[0],_=a[2];if(s.x<p.x&&i.x<p.x||s.x>_.x&&i.x>_.x||s.y<p.y&&i.y<p.y||s.y>_.y&&i.y>_.y)return!1;const S=Ne(s,i,a[0]);return S!==Ne(s,i,a[1])||S!==Ne(s,i,a[2])||S!==Ne(s,i,a[3])}function Gf(s,i,a){const p=i.paint.get(s).value;return p.kind==="constant"?p.value:a.programConfigurations.get(i.id).getMaxValue(s)}function Hm(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wm(s,i,a,p,_){if(!i[0]&&!i[1])return s;const S=R.convert(i)._mult(_);a==="viewport"&&S._rotate(-p);const E=[];for(let T=0;T<s.length;T++)E.push(s[T].sub(S));return E}let Dw,Ow;Mt("CircleBucket",b0,{omit:["layers"]});var WP={get paint(){return Ow=Ow||new w({"circle-radius":new Xt(Ve.paint_circle["circle-radius"]),"circle-color":new Xt(Ve.paint_circle["circle-color"]),"circle-blur":new Xt(Ve.paint_circle["circle-blur"]),"circle-opacity":new Xt(Ve.paint_circle["circle-opacity"]),"circle-translate":new Rt(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Rt(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rt(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rt(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt(Ve.paint_circle["circle-stroke-opacity"])})},get layout(){return Dw=Dw||new w({"circle-sort-key":new Xt(Ve.layout_circle["circle-sort-key"])})}},ko=1e-6,ed=typeof Float32Array<"u"?Float32Array:Array;function S0(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Fw(s,i,a){var p=i[0],_=i[1],S=i[2],E=i[3],T=i[4],L=i[5],D=i[6],B=i[7],j=i[8],W=i[9],ee=i[10],re=i[11],ae=i[12],ge=i[13],we=i[14],Fe=i[15],Me=a[0],De=a[1],We=a[2],ot=a[3];return s[0]=Me*p+De*T+We*j+ot*ae,s[1]=Me*_+De*L+We*W+ot*ge,s[2]=Me*S+De*D+We*ee+ot*we,s[3]=Me*E+De*B+We*re+ot*Fe,s[4]=(Me=a[4])*p+(De=a[5])*T+(We=a[6])*j+(ot=a[7])*ae,s[5]=Me*_+De*L+We*W+ot*ge,s[6]=Me*S+De*D+We*ee+ot*we,s[7]=Me*E+De*B+We*re+ot*Fe,s[8]=(Me=a[8])*p+(De=a[9])*T+(We=a[10])*j+(ot=a[11])*ae,s[9]=Me*_+De*L+We*W+ot*ge,s[10]=Me*S+De*D+We*ee+ot*we,s[11]=Me*E+De*B+We*re+ot*Fe,s[12]=(Me=a[12])*p+(De=a[13])*T+(We=a[14])*j+(ot=a[15])*ae,s[13]=Me*_+De*L+We*W+ot*ge,s[14]=Me*S+De*D+We*ee+ot*we,s[15]=Me*E+De*B+We*re+ot*Fe,s}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var qf,ZP=Fw;function Zm(s,i,a){var p=i[0],_=i[1],S=i[2],E=i[3];return s[0]=a[0]*p+a[4]*_+a[8]*S+a[12]*E,s[1]=a[1]*p+a[5]*_+a[9]*S+a[13]*E,s[2]=a[2]*p+a[6]*_+a[10]*S+a[14]*E,s[3]=a[3]*p+a[7]*_+a[11]*S+a[15]*E,s}qf=new ed(4),ed!=Float32Array&&(qf[0]=0,qf[1]=0,qf[2]=0,qf[3]=0);class XP extends c{constructor(i){super(i,WP)}createBucket(i){return new b0(i)}queryRadius(i){const a=i;return Gf("circle-radius",this,a)+Gf("circle-stroke-width",this,a)+Hm(this.paint.get("circle-translate"))}queryIntersectsFeature(i,a,p,_,S,E,T,L){const D=Wm(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),B=this.paint.get("circle-radius").evaluate(a,p)+this.paint.get("circle-stroke-width").evaluate(a,p),j=this.paint.get("circle-pitch-alignment")==="map",W=j?D:function(re,ae){return re.map(ge=>Bw(ge,ae))}(D,L),ee=j?B*T:B;for(const re of _)for(const ae of re){const ge=j?ae:Bw(ae,L);let we=ee;const Fe=Zm([],[ae.x,ae.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Fe[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=E.cameraToCenterDistance/Fe[3]),VP(W,ge,we))return!0}return!1}}function Bw(s,i){const a=Zm([],[s.x,s.y,0,1],i);return new R(a[0]/a[3],a[1]/a[3])}class $w extends b0{}let Uw;Mt("HeatmapBucket",$w,{omit:["layers"]});var YP={get paint(){return Uw=Uw||new w({"heatmap-radius":new Xt(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rt(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uf(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rt(Ve.paint_heatmap["heatmap-opacity"])})}};function E0(s,{width:i,height:a},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==i*a*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${i*a*p}`)}else _=new Uint8Array(i*a*p);return s.width=i,s.height=a,s.data=_,s}function jw(s,{width:i,height:a},p){if(i===s.width&&a===s.height)return;const _=E0({},{width:i,height:a},p);I0(s,_,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,i),height:Math.min(s.height,a)},p),s.width=i,s.height=a,s.data=_.data}function I0(s,i,a,p,_,S){if(_.width===0||_.height===0)return i;if(_.width>s.width||_.height>s.height||a.x>s.width-_.width||a.y>s.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>i.width||_.height>i.height||p.x>i.width-_.width||p.y>i.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const E=s.data,T=i.data;if(E===T)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<_.height;L++){const D=((a.y+L)*s.width+a.x)*S,B=((p.y+L)*i.width+p.x)*S;for(let j=0;j<_.width*S;j++)T[B+j]=E[D+j]}return i}class Hf{constructor(i,a){E0(this,i,1,a)}resize(i){jw(this,i,1)}clone(){return new Hf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,p,_,S){I0(i,a,p,_,S,1)}}class Es{constructor(i,a){E0(this,i,4,a)}resize(i){jw(this,i,4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Es({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,p,_,S){I0(i,a,p,_,S,4)}}function Vw(s){const i={},a=s.resolution||256,p=s.clips?s.clips.length:1,_=s.image||new Es({width:a,height:p});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const S=(E,T,L)=>{i[s.evaluationKey]=L;const D=s.expression.evaluate(i);_.data[E+T+0]=Math.floor(255*D.r/D.a),_.data[E+T+1]=Math.floor(255*D.g/D.a),_.data[E+T+2]=Math.floor(255*D.b/D.a),_.data[E+T+3]=Math.floor(255*D.a)};if(s.clips)for(let E=0,T=0;E<p;++E,T+=4*a)for(let L=0,D=0;L<a;L++,D+=4){const B=L/(a-1),{start:j,end:W}=s.clips[E];S(T,D,j*(1-B)+W*B)}else for(let E=0,T=0;E<a;E++,T+=4)S(0,T,E/(a-1));return _}Mt("AlphaImage",Hf),Mt("RGBAImage",Es);const T0="big-fb";class KP extends c{createBucket(i){return new $w(i)}constructor(i){super(i,YP),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(T0)&&this.heatmapFbos.delete(T0)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Gw;var JP={get paint(){return Gw=Gw||new w({"hillshade-illumination-direction":new Rt(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rt(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rt(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rt(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rt(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rt(Ve.paint_hillshade["hillshade-accent-color"])})}};class QP extends c{constructor(i){super(i,JP)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const eA=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:tA}=eA;function qw(s,i,a=2){const p=i&&i.length,_=p?i[0]*a:s.length;let S=Hw(s,0,_,a,!0);const E=[];if(!S||S.next===S.prev)return E;let T,L,D;if(p&&(S=function(B,j,W,ee){const re=[];for(let ae=0,ge=j.length;ae<ge;ae++){const we=Hw(B,j[ae]*ee,ae<ge-1?j[ae+1]*ee:B.length,ee,!1);we===we.next&&(we.steiner=!0),re.push(uA(we))}re.sort(sA);for(let ae=0;ae<re.length;ae++)W=aA(re[ae],W);return W}(s,i,S,a)),s.length>80*a){T=1/0,L=1/0;let B=-1/0,j=-1/0;for(let W=a;W<_;W+=a){const ee=s[W],re=s[W+1];ee<T&&(T=ee),re<L&&(L=re),ee>B&&(B=ee),re>j&&(j=re)}D=Math.max(B-T,j-L),D=D!==0?32767/D:0}return Wf(S,E,a,T,L,D,0),E}function Hw(s,i,a,p,_){let S;if(_===function(E,T,L,D){let B=0;for(let j=T,W=L-D;j<L;j+=D)B+=(E[W]-E[j])*(E[j+1]+E[W+1]),W=j;return B}(s,i,a,p)>0)for(let E=i;E<a;E+=p)S=Xw(E/p|0,s[E],s[E+1],S);else for(let E=a-p;E>=i;E-=p)S=Xw(E/p|0,s[E],s[E+1],S);return S&&Xm(S,S.next)&&(Xf(S),S=S.next),S}function Qc(s,i){if(!s)return s;i||(i=s);let a,p=s;do if(a=!1,p.steiner||!Xm(p,p.next)&&Xr(p.prev,p,p.next)!==0)p=p.next;else{if(Xf(p),p=i=p.prev,p===p.next)break;a=!0}while(a||p!==i);return i}function Wf(s,i,a,p,_,S,E){if(!s)return;!E&&S&&function(L,D,B,j){let W=L;do W.z===0&&(W.z=C0(W.x,W.y,D,B,j)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==L);W.prevZ.nextZ=null,W.prevZ=null,function(ee){let re,ae=1;do{let ge,we=ee;ee=null;let Fe=null;for(re=0;we;){re++;let Me=we,De=0;for(let ot=0;ot<ae&&(De++,Me=Me.nextZ,Me);ot++);let We=ae;for(;De>0||We>0&&Me;)De!==0&&(We===0||!Me||we.z<=Me.z)?(ge=we,we=we.nextZ,De--):(ge=Me,Me=Me.nextZ,We--),Fe?Fe.nextZ=ge:ee=ge,ge.prevZ=Fe,Fe=ge;we=Me}Fe.nextZ=null,ae*=2}while(re>1)}(W)}(s,p,_,S);let T=s;for(;s.prev!==s.next;){const L=s.prev,D=s.next;if(S?rA(s,p,_,S):nA(s))i.push(L.i,s.i,D.i),Xf(s),s=D.next,T=D.next;else if((s=D)===T){E?E===1?Wf(s=iA(Qc(s),i),i,a,p,_,S,2):E===2&&oA(s,i,a,p,_,S):Wf(Qc(s),i,a,p,_,S,1);break}}}function nA(s){const i=s.prev,a=s,p=s.next;if(Xr(i,a,p)>=0)return!1;const _=i.x,S=a.x,E=p.x,T=i.y,L=a.y,D=p.y,B=_<S?_<E?_:E:S<E?S:E,j=T<L?T<D?T:D:L<D?L:D,W=_>S?_>E?_:E:S>E?S:E,ee=T>L?T>D?T:D:L>D?L:D;let re=p.next;for(;re!==i;){if(re.x>=B&&re.x<=W&&re.y>=j&&re.y<=ee&&td(_,T,S,L,E,D,re.x,re.y)&&Xr(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function rA(s,i,a,p){const _=s.prev,S=s,E=s.next;if(Xr(_,S,E)>=0)return!1;const T=_.x,L=S.x,D=E.x,B=_.y,j=S.y,W=E.y,ee=T<L?T<D?T:D:L<D?L:D,re=B<j?B<W?B:W:j<W?j:W,ae=T>L?T>D?T:D:L>D?L:D,ge=B>j?B>W?B:W:j>W?j:W,we=C0(ee,re,i,a,p),Fe=C0(ae,ge,i,a,p);let Me=s.prevZ,De=s.nextZ;for(;Me&&Me.z>=we&&De&&De.z<=Fe;){if(Me.x>=ee&&Me.x<=ae&&Me.y>=re&&Me.y<=ge&&Me!==_&&Me!==E&&td(T,B,L,j,D,W,Me.x,Me.y)&&Xr(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,De.x>=ee&&De.x<=ae&&De.y>=re&&De.y<=ge&&De!==_&&De!==E&&td(T,B,L,j,D,W,De.x,De.y)&&Xr(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Me&&Me.z>=we;){if(Me.x>=ee&&Me.x<=ae&&Me.y>=re&&Me.y<=ge&&Me!==_&&Me!==E&&td(T,B,L,j,D,W,Me.x,Me.y)&&Xr(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;De&&De.z<=Fe;){if(De.x>=ee&&De.x<=ae&&De.y>=re&&De.y<=ge&&De!==_&&De!==E&&td(T,B,L,j,D,W,De.x,De.y)&&Xr(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function iA(s,i){let a=s;do{const p=a.prev,_=a.next.next;!Xm(p,_)&&Ww(p,a,a.next,_)&&Zf(p,_)&&Zf(_,p)&&(i.push(p.i,a.i,_.i),Xf(a),Xf(a.next),a=s=_),a=a.next}while(a!==s);return Qc(a)}function oA(s,i,a,p,_,S){let E=s;do{let T=E.next.next;for(;T!==E.prev;){if(E.i!==T.i&&cA(E,T)){let L=Zw(E,T);return E=Qc(E,E.next),L=Qc(L,L.next),Wf(E,i,a,p,_,S,0),void Wf(L,i,a,p,_,S,0)}T=T.next}E=E.next}while(E!==s)}function sA(s,i){return s.x-i.x}function aA(s,i){const a=function(_,S){let E=S;const T=_.x,L=_.y;let D,B=-1/0;do{if(L<=E.y&&L>=E.next.y&&E.next.y!==E.y){const ae=E.x+(L-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(ae<=T&&ae>B&&(B=ae,D=E.x<E.next.x?E:E.next,ae===T))return D}E=E.next}while(E!==S);if(!D)return null;const j=D,W=D.x,ee=D.y;let re=1/0;E=D;do{if(T>=E.x&&E.x>=W&&T!==E.x&&td(L<ee?T:B,L,W,ee,L<ee?B:T,L,E.x,E.y)){const ae=Math.abs(L-E.y)/(T-E.x);Zf(E,_)&&(ae<re||ae===re&&(E.x>D.x||E.x===D.x&&lA(D,E)))&&(D=E,re=ae)}E=E.next}while(E!==j);return D}(s,i);if(!a)return i;const p=Zw(a,s);return Qc(p,p.next),Qc(a,a.next)}function lA(s,i){return Xr(s.prev,s,i.prev)<0&&Xr(i.next,s,s.next)<0}function C0(s,i,a,p,_){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*_|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function uA(s){let i=s,a=s;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==s);return a}function td(s,i,a,p,_,S,E,T){return(_-E)*(i-T)>=(s-E)*(S-T)&&(s-E)*(p-T)>=(a-E)*(i-T)&&(a-E)*(S-T)>=(_-E)*(p-T)}function cA(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(a,p){let _=a;do{if(_.i!==a.i&&_.next.i!==a.i&&_.i!==p.i&&_.next.i!==p.i&&Ww(_,_.next,a,p))return!0;_=_.next}while(_!==a);return!1}(s,i)&&(Zf(s,i)&&Zf(i,s)&&function(a,p){let _=a,S=!1;const E=(a.x+p.x)/2,T=(a.y+p.y)/2;do _.y>T!=_.next.y>T&&_.next.y!==_.y&&E<(_.next.x-_.x)*(T-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==a);return S}(s,i)&&(Xr(s.prev,s,i.prev)||Xr(s,i.prev,i))||Xm(s,i)&&Xr(s.prev,s,s.next)>0&&Xr(i.prev,i,i.next)>0)}function Xr(s,i,a){return(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)}function Xm(s,i){return s.x===i.x&&s.y===i.y}function Ww(s,i,a,p){const _=Km(Xr(s,i,a)),S=Km(Xr(s,i,p)),E=Km(Xr(a,p,s)),T=Km(Xr(a,p,i));return _!==S&&E!==T||!(_!==0||!Ym(s,a,i))||!(S!==0||!Ym(s,p,i))||!(E!==0||!Ym(a,s,p))||!(T!==0||!Ym(a,i,p))}function Ym(s,i,a){return i.x<=Math.max(s.x,a.x)&&i.x>=Math.min(s.x,a.x)&&i.y<=Math.max(s.y,a.y)&&i.y>=Math.min(s.y,a.y)}function Km(s){return s>0?1:s<0?-1:0}function Zf(s,i){return Xr(s.prev,s,s.next)<0?Xr(s,i,s.next)>=0&&Xr(s,s.prev,i)>=0:Xr(s,i,s.prev)<0||Xr(s,s.next,i)<0}function Zw(s,i){const a=M0(s.i,s.x,s.y),p=M0(i.i,i.x,i.y),_=s.next,S=i.prev;return s.next=i,i.prev=s,a.next=_,_.prev=a,p.next=a,a.prev=p,S.next=p,p.prev=S,p}function Xw(s,i,a,p){const _=M0(s,i,a);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function Xf(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function M0(s,i,a){return{i:s,x:i,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function L0(s,i,a){const p=a.patternDependencies;let _=!1;for(const S of i){const E=S.paint.get(`${s}-pattern`);E.isConstant()||(_=!0);const T=E.constantOr(null);T&&(_=!0,p[T.to]=!0,p[T.from]=!0)}return _}function P0(s,i,a,p,_){const S=_.patternDependencies;for(const E of i){const T=E.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let L=T.evaluate({zoom:p-1},a,{},_.availableImages),D=T.evaluate({zoom:p},a,{},_.availableImages),B=T.evaluate({zoom:p+1},a,{},_.availableImages);L=L&&L.name?L.name:L,D=D&&D.name?D.name:D,B=B&&B.name?B.name:B,S[L]=!0,S[D]=!0,S[B]=!0,a.patterns[E.id]={min:L,mid:D,max:B}}}return a}class A0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Js,this.indexArray=new Ss,this.indexArray2=new Ai,this.programConfigurations=new Yc(i.layers,i.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,p){this.hasPattern=L0("fill",this.layers,a);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),E=[];for(const{feature:T,id:L,index:D,sourceLayerIndex:B}of i){const j=this.layers[0]._featureFilter.needGeometry,W=Jc(T,j);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),W,p))continue;const ee=S?_.evaluate(W,{},p,a.availableImages):void 0,re={id:L,properties:T.properties,type:T.type,sourceLayerIndex:B,index:D,geometry:j?W.geometry:Kc(T),patterns:{},sortKey:ee};E.push(re)}S&&E.sort((T,L)=>T.sortKey-L.sortKey);for(const T of E){const{geometry:L,index:D,sourceLayerIndex:B}=T;if(this.hasPattern){const j=P0("fill",this.layers,T,this.zoom,a);this.patternFeatures.push(j)}else this.addFeature(T,L,D,p,{});a.featureIndex.insert(i[D].feature,L,D,B,this.index)}}update(i,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,p)}addFeatures(i,a,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,a,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,tA),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,p,_,S){for(const E of wu(a,500)){let T=0;for(const ee of E)T+=ee.length;const L=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),D=L.vertexLength,B=[],j=[];for(const ee of E){if(ee.length===0)continue;ee!==E[0]&&j.push(B.length/2);const re=this.segments2.prepareSegment(ee.length,this.layoutVertexArray,this.indexArray2),ae=re.vertexLength;this.layoutVertexArray.emplaceBack(ee[0].x,ee[0].y),this.indexArray2.emplaceBack(ae+ee.length-1,ae),B.push(ee[0].x),B.push(ee[0].y);for(let ge=1;ge<ee.length;ge++)this.layoutVertexArray.emplaceBack(ee[ge].x,ee[ge].y),this.indexArray2.emplaceBack(ae+ge-1,ae+ge),B.push(ee[ge].x),B.push(ee[ge].y);re.vertexLength+=ee.length,re.primitiveLength+=ee.length}const W=qw(B,j);for(let ee=0;ee<W.length;ee+=3)this.indexArray.emplaceBack(D+W[ee],D+W[ee+1],D+W[ee+2]);L.vertexLength+=T,L.primitiveLength+=W.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,_)}}let Yw,Kw;Mt("FillBucket",A0,{omit:["layers","patternFeatures"]});var hA={get paint(){return Kw=Kw||new w({"fill-antialias":new Rt(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Xt(Ve.paint_fill["fill-opacity"]),"fill-color":new Xt(Ve.paint_fill["fill-color"]),"fill-outline-color":new Xt(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Rt(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Rt(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new qh(Ve.paint_fill["fill-pattern"])})},get layout(){return Yw=Yw||new w({"fill-sort-key":new Xt(Ve.layout_fill["fill-sort-key"])})}};class dA extends c{constructor(i){super(i,hA)}recalculate(i,a){super.recalculate(i,a);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new A0(i)}queryRadius(){return Hm(this.paint.get("fill-translate"))}queryIntersectsFeature(i,a,p,_,S,E,T){return Rw(Wm(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),_)}isTileClipped(){return!0}}const fA=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),pA=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:mA}=fA;var ju={},gA=A,Jw=nd;function nd(s,i,a,p,_){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=_,s.readFields(yA,this,i)}function yA(s,i,a){s==1?i.id=a.readVarint():s==2?function(p,_){for(var S=p.readVarint()+p.pos;p.pos<S;){var E=_._keys[p.readVarint()],T=_._values[p.readVarint()];_.properties[E]=T}}(a,i):s==3?i.type=a.readVarint():s==4&&(i._geometry=a.pos)}function vA(s){for(var i,a,p=0,_=0,S=s.length,E=S-1;_<S;E=_++)p+=((a=s[E]).x-(i=s[_]).x)*(i.y+a.y);return p}nd.types=["Unknown","Point","LineString","Polygon"],nd.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,a=s.readVarint()+s.pos,p=1,_=0,S=0,E=0,T=[];s.pos<a;){if(_<=0){var L=s.readVarint();p=7&L,_=L>>3}if(_--,p===1||p===2)S+=s.readSVarint(),E+=s.readSVarint(),p===1&&(i&&T.push(i),i=[]),i.push(new gA(S,E));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&T.push(i),T},nd.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,a=1,p=0,_=0,S=0,E=1/0,T=-1/0,L=1/0,D=-1/0;s.pos<i;){if(p<=0){var B=s.readVarint();a=7&B,p=B>>3}if(p--,a===1||a===2)(_+=s.readSVarint())<E&&(E=_),_>T&&(T=_),(S+=s.readSVarint())<L&&(L=S),S>D&&(D=S);else if(a!==7)throw new Error("unknown command "+a)}return[E,L,T,D]},nd.prototype.toGeoJSON=function(s,i,a){var p,_,S=this.extent*Math.pow(2,a),E=this.extent*s,T=this.extent*i,L=this.loadGeometry(),D=nd.types[this.type];function B(ee){for(var re=0;re<ee.length;re++){var ae=ee[re];ee[re]=[360*(ae.x+E)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+T)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(p=0;p<L.length;p++)j[p]=L[p][0];B(L=j);break;case 2:for(p=0;p<L.length;p++)B(L[p]);break;case 3:for(L=function(ee){var re=ee.length;if(re<=1)return[ee];for(var ae,ge,we=[],Fe=0;Fe<re;Fe++){var Me=vA(ee[Fe]);Me!==0&&(ge===void 0&&(ge=Me<0),ge===Me<0?(ae&&we.push(ae),ae=[ee[Fe]]):ae.push(ee[Fe]))}return ae&&we.push(ae),we}(L),p=0;p<L.length;p++)for(_=0;_<L[p].length;_++)B(L[p][_])}L.length===1?L=L[0]:D="Multi"+D;var W={type:"Feature",geometry:{type:D,coordinates:L},properties:this.properties};return"id"in this&&(W.id=this.id),W};var _A=Jw,Qw=e2;function e2(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(xA,this,i),this.length=this._features.length}function xA(s,i,a){s===15?i.version=a.readVarint():s===1?i.name=a.readString():s===5?i.extent=a.readVarint():s===2?i._features.push(a.pos):s===3?i._keys.push(a.readString()):s===4&&i._values.push(function(p){for(var _=null,S=p.readVarint()+p.pos;p.pos<S;){var E=p.readVarint()>>3;_=E===1?p.readString():E===2?p.readFloat():E===3?p.readDouble():E===4?p.readVarint64():E===5?p.readVarint():E===6?p.readSVarint():E===7?p.readBoolean():null}return _}(a))}e2.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new _A(this._pbf,i,this.extent,this._keys,this._values)};var bA=Qw;function wA(s,i,a){if(s===3){var p=new bA(a,a.readVarint()+a.pos);p.length&&(i[p.name]=p)}}ju.VectorTile=function(s,i){this.layers=s.readFields(wA,{},i)},ju.VectorTileFeature=Jw,ju.VectorTileLayer=Qw;const kA=ju.VectorTileFeature.types,R0=Math.pow(2,13);function Yf(s,i,a,p,_,S,E,T){s.emplaceBack(i,a,2*Math.floor(p*R0)+E,_*R0*2,S*R0*2,Math.round(T))}class N0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Du,this.centroidVertexArray=new $i,this.indexArray=new Ss,this.programConfigurations=new Yc(i.layers,i.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,p){this.features=[],this.hasPattern=L0("fill-extrusion",this.layers,a);for(const{feature:_,id:S,index:E,sourceLayerIndex:T}of i){const L=this.layers[0]._featureFilter.needGeometry,D=Jc(_,L);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),D,p))continue;const B={id:S,sourceLayerIndex:T,index:E,geometry:L?D.geometry:Kc(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(P0("fill-extrusion",this.layers,B,this.zoom,a)):this.addFeature(B,B.geometry,E,p,{}),a.featureIndex.insert(_,B.geometry,E,T,this.index,!0)}}addFeatures(i,a,p){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,a,p)}}update(i,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,mA),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,pA.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,a,p,_,S){for(const E of wu(a,500)){const T={x:0,y:0,vertexCount:0};let L=0;for(const re of E)L+=re.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of E){if(re.length===0||EA(re))continue;let ae=0;for(let ge=0;ge<re.length;ge++){const we=re[ge];if(ge>=1){const Fe=re[ge-1];if(!SA(we,Fe)){D.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Me=we.sub(Fe)._perp()._unit(),De=Fe.dist(we);ae+De>32768&&(ae=0),Yf(this.layoutVertexArray,we.x,we.y,Me.x,Me.y,0,0,ae),Yf(this.layoutVertexArray,we.x,we.y,Me.x,Me.y,0,1,ae),T.x+=2*we.x,T.y+=2*we.y,T.vertexCount+=2,ae+=De,Yf(this.layoutVertexArray,Fe.x,Fe.y,Me.x,Me.y,0,0,ae),Yf(this.layoutVertexArray,Fe.x,Fe.y,Me.x,Me.y,0,1,ae),T.x+=2*Fe.x,T.y+=2*Fe.y,T.vertexCount+=2;const We=D.vertexLength;this.indexArray.emplaceBack(We,We+2,We+1),this.indexArray.emplaceBack(We+1,We+2,We+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+L>bn.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),kA[i.type]!=="Polygon")continue;const B=[],j=[],W=D.vertexLength;for(const re of E)if(re.length!==0){re!==E[0]&&j.push(B.length/2);for(let ae=0;ae<re.length;ae++){const ge=re[ae];Yf(this.layoutVertexArray,ge.x,ge.y,0,0,1,1,0),T.x+=ge.x,T.y+=ge.y,T.vertexCount+=1,B.push(ge.x),B.push(ge.y)}}const ee=qw(B,j);for(let re=0;re<ee.length;re+=3)this.indexArray.emplaceBack(W+ee[re],W+ee[re+2],W+ee[re+1]);D.primitiveLength+=ee.length/3,D.vertexLength+=L;for(let re=0;re<T.vertexCount;re++){const ae=Math.floor(T.x/T.vertexCount),ge=Math.floor(T.y/T.vertexCount);this.centroidVertexArray.emplaceBack(ae,ge)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,_)}}function SA(s,i){return s.x===i.x&&(s.x<0||s.x>ri)||s.y===i.y&&(s.y<0||s.y>ri)}function EA(s){return s.every(i=>i.x<0)||s.every(i=>i.x>ri)||s.every(i=>i.y<0)||s.every(i=>i.y>ri)}let t2;Mt("FillExtrusionBucket",N0,{omit:["layers","features"]});var IA={get paint(){return t2=t2||new w({"fill-extrusion-opacity":new Rt(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rt(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rt(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qh(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rt(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class TA extends c{constructor(i){super(i,IA)}createBucket(i){return new N0(i)}queryRadius(){return Hm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,a,p,_,S,E,T,L){const D=Wm(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),B=this.paint.get("fill-extrusion-height").evaluate(a,p),j=this.paint.get("fill-extrusion-base").evaluate(a,p),W=function(re,ae,ge,we){const Fe=[];for(const Me of re){const De=[Me.x,Me.y,0,1];Zm(De,De,ae),Fe.push(new R(De[0]/De[3],De[1]/De[3]))}return Fe}(D,L),ee=function(re,ae,ge,we){const Fe=[],Me=[],De=we[8]*ae,We=we[9]*ae,ot=we[10]*ae,Et=we[11]*ae,Zt=we[8]*ge,kt=we[9]*ge,xt=we[10]*ge,Ot=we[11]*ge;for(const Pt of re){const Tt=[],Qe=[];for(const Bt of Pt){const zt=Bt.x,tn=Bt.y,rr=we[0]*zt+we[4]*tn+we[12],Jn=we[1]*zt+we[5]*tn+we[13],bi=we[2]*zt+we[6]*tn+we[14],Qs=we[3]*zt+we[7]*tn+we[15],Vi=bi+ot,wi=Qs+Et,So=rr+Zt,Eo=Jn+kt,Io=bi+xt,Ur=Qs+Ot,ki=new R((rr+De)/wi,(Jn+We)/wi);ki.z=Vi/wi,Tt.push(ki);const so=new R(So/Ur,Eo/Ur);so.z=Io/Ur,Qe.push(so)}Fe.push(Tt),Me.push(Qe)}return[Fe,Me]}(_,j,B,L);return function(re,ae,ge){let we=1/0;Rw(ge,ae)&&(we=n2(ge,ae[0]));for(let Fe=0;Fe<ae.length;Fe++){const Me=ae[Fe],De=re[Fe];for(let We=0;We<Me.length-1;We++){const ot=Me[We],Et=[ot,Me[We+1],De[We+1],De[We],ot];Aw(ge,Et)&&(we=Math.min(we,n2(ge,Et)))}}return we!==1/0&&we}(ee[0],ee[1],W)}}function Kf(s,i){return s.x*i.x+s.y*i.y}function n2(s,i){if(s.length===1){let a=0;const p=i[a++];let _;for(;!_||p.equals(_);)if(_=i[a++],!_)return 1/0;for(;a<i.length;a++){const S=i[a],E=s[0],T=_.sub(p),L=S.sub(p),D=E.sub(p),B=Kf(T,T),j=Kf(T,L),W=Kf(L,L),ee=Kf(D,T),re=Kf(D,L),ae=B*W-j*j,ge=(W*ee-j*re)/ae,we=(B*re-j*ee)/ae,Fe=p.z*(1-ge-we)+_.z*ge+S.z*we;if(isFinite(Fe))return Fe}return 1/0}{let a=1/0;for(const p of i)a=Math.min(a,p.z);return a}}const CA=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:MA}=CA,LA=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:PA}=LA,AA=ju.VectorTileFeature.types,RA=Math.cos(Math.PI/180*37.5),r2=Math.pow(2,14)/.5;class z0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Wh,this.layoutVertexArray2=new Ou,this.indexArray=new Ss,this.programConfigurations=new Yc(i.layers,i.zoom),this.segments=new bn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,p){this.hasPattern=L0("line",this.layers,a);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),E=[];for(const{feature:T,id:L,index:D,sourceLayerIndex:B}of i){const j=this.layers[0]._featureFilter.needGeometry,W=Jc(T,j);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),W,p))continue;const ee=S?_.evaluate(W,{},p):void 0,re={id:L,properties:T.properties,type:T.type,sourceLayerIndex:B,index:D,geometry:j?W.geometry:Kc(T),patterns:{},sortKey:ee};E.push(re)}S&&E.sort((T,L)=>T.sortKey-L.sortKey);for(const T of E){const{geometry:L,index:D,sourceLayerIndex:B}=T;if(this.hasPattern){const j=P0("line",this.layers,T,this.zoom,a);this.patternFeatures.push(j)}else this.addFeature(T,L,D,p,{});a.featureIndex.insert(i[D].feature,L,D,B,this.index)}}update(i,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,p)}addFeatures(i,a,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,a,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,PA)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,MA),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,p,_,S){const E=this.layers[0].layout,T=E.get("line-join").evaluate(i,{}),L=E.get("line-cap"),D=E.get("line-miter-limit"),B=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const j of a)this.addLine(j,i,T,L,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,_)}addLine(i,a,p,_,S,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<i.length-1;we++)this.totalDistance+=i[we].dist(i[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=AA[a.type]==="Polygon";let L=i.length;for(;L>=2&&i[L-1].equals(i[L-2]);)L--;let D=0;for(;D<L-1&&i[D].equals(i[D+1]);)D++;if(L<(T?3:2))return;p==="bevel"&&(S=1.05);const B=this.overscaling<=16?15*ri/(512*this.overscaling):0,j=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let W,ee,re,ae,ge;this.e1=this.e2=-1,T&&(W=i[L-2],ge=i[D].sub(W)._unit()._perp());for(let we=D;we<L;we++){if(re=we===L-1?T?i[D+1]:void 0:i[we+1],re&&i[we].equals(re))continue;ge&&(ae=ge),W&&(ee=W),W=i[we],ge=re?re.sub(W)._unit()._perp():ae,ae=ae||ge;let Fe=ae.add(ge);Fe.x===0&&Fe.y===0||Fe._unit();const Me=ae.x*ge.x+ae.y*ge.y,De=Fe.x*ge.x+Fe.y*ge.y,We=De!==0?1/De:1/0,ot=2*Math.sqrt(2-2*De),Et=De<RA&&ee&&re,Zt=ae.x*ge.y-ae.y*ge.x>0;if(Et&&we>D){const Ot=W.dist(ee);if(Ot>2*B){const Pt=W.sub(W.sub(ee)._mult(B/Ot)._round());this.updateDistance(ee,Pt),this.addCurrentVertex(Pt,ae,0,0,j),ee=Pt}}const kt=ee&&re;let xt=kt?p:T?"butt":_;if(kt&&xt==="round"&&(We<E?xt="miter":We<=2&&(xt="fakeround")),xt==="miter"&&We>S&&(xt="bevel"),xt==="bevel"&&(We>2&&(xt="flipbevel"),We<S&&(xt="miter")),ee&&this.updateDistance(ee,W),xt==="miter")Fe._mult(We),this.addCurrentVertex(W,Fe,0,0,j);else if(xt==="flipbevel"){if(We>100)Fe=ge.mult(-1);else{const Ot=We*ae.add(ge).mag()/ae.sub(ge).mag();Fe._perp()._mult(Ot*(Zt?-1:1))}this.addCurrentVertex(W,Fe,0,0,j),this.addCurrentVertex(W,Fe.mult(-1),0,0,j)}else if(xt==="bevel"||xt==="fakeround"){const Ot=-Math.sqrt(We*We-1),Pt=Zt?Ot:0,Tt=Zt?0:Ot;if(ee&&this.addCurrentVertex(W,ae,Pt,Tt,j),xt==="fakeround"){const Qe=Math.round(180*ot/Math.PI/20);for(let Bt=1;Bt<Qe;Bt++){let zt=Bt/Qe;if(zt!==.5){const rr=zt-.5;zt+=zt*rr*(zt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*rr*rr+(.848013+Me*(.215638*Me-1.06021)))}const tn=ge.sub(ae)._mult(zt)._add(ae)._unit()._mult(Zt?-1:1);this.addHalfVertex(W,tn.x,tn.y,!1,Zt,0,j)}}re&&this.addCurrentVertex(W,ge,-Pt,-Tt,j)}else if(xt==="butt")this.addCurrentVertex(W,Fe,0,0,j);else if(xt==="square"){const Ot=ee?1:-1;this.addCurrentVertex(W,Fe,Ot,Ot,j)}else xt==="round"&&(ee&&(this.addCurrentVertex(W,ae,0,0,j),this.addCurrentVertex(W,ae,1,1,j,!0)),re&&(this.addCurrentVertex(W,ge,-1,-1,j,!0),this.addCurrentVertex(W,ge,0,0,j)));if(Et&&we<L-1){const Ot=W.dist(re);if(Ot>2*B){const Pt=W.add(re.sub(W)._mult(B/Ot)._round());this.updateDistance(W,Pt),this.addCurrentVertex(Pt,ge,0,0,j),W=Pt}}}}addCurrentVertex(i,a,p,_,S,E=!1){const T=a.y*_-a.x,L=-a.y-a.x*_;this.addHalfVertex(i,a.x+a.y*p,a.y-a.x*p,E,!1,p,S),this.addHalfVertex(i,T,L,E,!0,-_,S),this.distance>r2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,a,p,_,S,E))}addHalfVertex({x:i,y:a},p,_,S,E,T,L){const D=.5*(this.lineClips?this.scaledDistance*(r2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(S?1:0),(a<<1)+(E?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(T===0?0:T<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),L.primitiveLength++),E?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,a){this.distance+=i.dist(a),this.updateScaledDistance()}}let i2,o2;Mt("LineBucket",z0,{omit:["layers","patternFeatures"]});var s2={get paint(){return o2=o2||new w({"line-opacity":new Xt(Ve.paint_line["line-opacity"]),"line-color":new Xt(Ve.paint_line["line-color"]),"line-translate":new Rt(Ve.paint_line["line-translate"]),"line-translate-anchor":new Rt(Ve.paint_line["line-translate-anchor"]),"line-width":new Xt(Ve.paint_line["line-width"]),"line-gap-width":new Xt(Ve.paint_line["line-gap-width"]),"line-offset":new Xt(Ve.paint_line["line-offset"]),"line-blur":new Xt(Ve.paint_line["line-blur"]),"line-dasharray":new Hh(Ve.paint_line["line-dasharray"]),"line-pattern":new qh(Ve.paint_line["line-pattern"]),"line-gradient":new Uf(Ve.paint_line["line-gradient"])})},get layout(){return i2=i2||new w({"line-cap":new Rt(Ve.layout_line["line-cap"]),"line-join":new Xt(Ve.layout_line["line-join"]),"line-miter-limit":new Rt(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Rt(Ve.layout_line["line-round-limit"]),"line-sort-key":new Xt(Ve.layout_line["line-sort-key"])})}};class NA extends Xt{possiblyEvaluate(i,a){return a=new mr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(i,a)}evaluate(i,a,p,_){return a=pe({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(i,a,p,_)}}let Jm;class zA extends c{constructor(i){super(i,s2),this.gradientVersion=0,Jm||(Jm=new NA(s2.paint.properties["line-width"].specification),Jm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Za,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,a){super.recalculate(i,a),this.paint._values["line-floorwidth"]=Jm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new z0(i)}queryRadius(i){const a=i,p=a2(Gf("line-width",this,a),Gf("line-gap-width",this,a)),_=Gf("line-offset",this,a);return p/2+Math.abs(_)+Hm(this.paint.get("line-translate"))}queryIntersectsFeature(i,a,p,_,S,E,T){const L=Wm(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),D=T/2*a2(this.paint.get("line-width").evaluate(a,p),this.paint.get("line-gap-width").evaluate(a,p)),B=this.paint.get("line-offset").evaluate(a,p);return B&&(_=function(j,W){const ee=[];for(let re=0;re<j.length;re++){const ae=j[re],ge=[];for(let we=0;we<ae.length;we++){const Fe=ae[we-1],Me=ae[we],De=ae[we+1],We=we===0?new R(0,0):Me.sub(Fe)._unit()._perp(),ot=we===ae.length-1?new R(0,0):De.sub(Me)._unit()._perp(),Et=We._add(ot)._unit(),Zt=Et.x*ot.x+Et.y*ot.y;Zt!==0&&Et._mult(1/Zt),ge.push(Et._mult(W)._add(Me))}ee.push(ge)}return ee}(_,B*T)),function(j,W,ee){for(let re=0;re<W.length;re++){const ae=W[re];if(j.length>=3){for(let ge=0;ge<ae.length;ge++)if(Qh(j,ae[ge]))return!0}if(GP(j,ae,ee))return!0}return!1}(L,_,D)}isTileClipped(){return!0}}function a2(s,i){return i>0?i+2*s:s}const DA=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OA=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const FA=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const l2=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),BA=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $A(s,i,a){return s.sections.forEach(p=>{p.text=function(_,S,E){const T=S.layout.get("text-transform").evaluate(E,{});return T==="uppercase"?_=_.toLocaleUpperCase():T==="lowercase"&&(_=_.toLocaleLowerCase()),qo.applyArabicShaping&&(_=qo.applyArabicShaping(_)),_}(p.text,i,a)}),s}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Jf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var fi=24,u2=Kn,c2=function(s,i,a,p,_){var S,E,T=8*_-p-1,L=(1<<T)-1,D=L>>1,B=-7,j=_-1,W=-1,ee=s[i+j];for(j+=W,S=ee&(1<<-B)-1,ee>>=-B,B+=T;B>0;S=256*S+s[i+j],j+=W,B-=8);for(E=S&(1<<-B)-1,S>>=-B,B+=p;B>0;E=256*E+s[i+j],j+=W,B-=8);if(S===0)S=1-D;else{if(S===L)return E?NaN:1/0*(ee?-1:1);E+=Math.pow(2,p),S-=D}return(ee?-1:1)*E*Math.pow(2,S-p)},h2=function(s,i,a,p,_,S){var E,T,L,D=8*S-_-1,B=(1<<D)-1,j=B>>1,W=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,ee=0,re=1,ae=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,E=B):(E=Math.floor(Math.log(i)/Math.LN2),i*(L=Math.pow(2,-E))<1&&(E--,L*=2),(i+=E+j>=1?W/L:W*Math.pow(2,1-j))*L>=2&&(E++,L/=2),E+j>=B?(T=0,E=B):E+j>=1?(T=(i*L-1)*Math.pow(2,_),E+=j):(T=i*Math.pow(2,j-1)*Math.pow(2,_),E=0));_>=8;s[a+ee]=255&T,ee+=re,T/=256,_-=8);for(E=E<<_|T,D+=_;D>0;s[a+ee]=255&E,ee+=re,E/=256,D-=8);s[a+ee-re]|=128*ae};function Kn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var D0=4294967296,d2=1/D0,f2=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Yl(s){return s.type===Kn.Bytes?s.readVarint()+s.pos:s.pos+1}function rd(s,i,a){return a?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function p2(s,i,a){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));a.realloc(p);for(var _=a.pos-1;_>=s;_--)a.buf[_+p]=a.buf[_]}function UA(s,i){for(var a=0;a<s.length;a++)i.writeVarint(s[a])}function jA(s,i){for(var a=0;a<s.length;a++)i.writeSVarint(s[a])}function VA(s,i){for(var a=0;a<s.length;a++)i.writeFloat(s[a])}function GA(s,i){for(var a=0;a<s.length;a++)i.writeDouble(s[a])}function qA(s,i){for(var a=0;a<s.length;a++)i.writeBoolean(s[a])}function HA(s,i){for(var a=0;a<s.length;a++)i.writeFixed32(s[a])}function WA(s,i){for(var a=0;a<s.length;a++)i.writeSFixed32(s[a])}function ZA(s,i){for(var a=0;a<s.length;a++)i.writeFixed64(s[a])}function XA(s,i){for(var a=0;a<s.length;a++)i.writeSFixed64(s[a])}function Qm(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function id(s,i,a){s[a]=i,s[a+1]=i>>>8,s[a+2]=i>>>16,s[a+3]=i>>>24}function m2(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}Kn.prototype={destroy:function(){this.buf=null},readFields:function(s,i,a){for(a=a||this.length;this.pos<a;){var p=this.readVarint(),_=p>>3,S=this.pos;this.type=7&p,s(_,i,this),this.pos===S&&this.skip(p)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=Qm(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=m2(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Qm(this.buf,this.pos)+Qm(this.buf,this.pos+4)*D0;return this.pos+=8,s},readSFixed64:function(){var s=Qm(this.buf,this.pos)+m2(this.buf,this.pos+4)*D0;return this.pos+=8,s},readFloat:function(){var s=c2(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=c2(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,a,p=this.buf;return i=127&(a=p[this.pos++]),a<128?i:(i|=(127&(a=p[this.pos++]))<<7,a<128?i:(i|=(127&(a=p[this.pos++]))<<14,a<128?i:(i|=(127&(a=p[this.pos++]))<<21,a<128?i:function(_,S,E){var T,L,D=E.buf;if(T=(112&(L=D[E.pos++]))>>4,L<128||(T|=(127&(L=D[E.pos++]))<<3,L<128)||(T|=(127&(L=D[E.pos++]))<<10,L<128)||(T|=(127&(L=D[E.pos++]))<<17,L<128)||(T|=(127&(L=D[E.pos++]))<<24,L<128)||(T|=(1&(L=D[E.pos++]))<<31,L<128))return rd(_,T,S);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(a=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&f2?function(a,p,_){return f2.decode(a.subarray(p,_))}(this.buf,i,s):function(a,p,_){for(var S="",E=p;E<_;){var T,L,D,B=a[E],j=null,W=B>239?4:B>223?3:B>191?2:1;if(E+W>_)break;W===1?B<128&&(j=B):W===2?(192&(T=a[E+1]))==128&&(j=(31&B)<<6|63&T)<=127&&(j=null):W===3?(L=a[E+2],(192&(T=a[E+1]))==128&&(192&L)==128&&((j=(15&B)<<12|(63&T)<<6|63&L)<=2047||j>=55296&&j<=57343)&&(j=null)):W===4&&(L=a[E+2],D=a[E+3],(192&(T=a[E+1]))==128&&(192&L)==128&&(192&D)==128&&((j=(15&B)<<18|(63&T)<<12|(63&L)<<6|63&D)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,W=1):j>65535&&(j-=65536,S+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),S+=String.fromCharCode(j),E+=W}return S}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Kn.Bytes)return s.push(this.readVarint(i));var a=Yl(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Kn.Bytes)return s.push(this.readSVarint());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Kn.Bytes)return s.push(this.readBoolean());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Kn.Bytes)return s.push(this.readFloat());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Kn.Bytes)return s.push(this.readDouble());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Kn.Bytes)return s.push(this.readFixed32());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Kn.Bytes)return s.push(this.readSFixed32());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Kn.Bytes)return s.push(this.readFixed64());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Kn.Bytes)return s.push(this.readSFixed64());var i=Yl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(i===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Kn.Fixed32)this.pos+=4;else{if(i!==Kn.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var a=new Uint8Array(i);a.set(this.buf),this.buf=a,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),id(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),id(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),id(this.buf,-1&s,this.pos),id(this.buf,Math.floor(s*d2),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),id(this.buf,-1&s,this.pos),id(this.buf,Math.floor(s*d2),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,a){var p,_;if(i>=0?(p=i%4294967296|0,_=i/4294967296|0):(_=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,_=_+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(S,E,T){T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,T.buf[T.pos]=127&(S>>>=7)}(p,0,a),function(S,E){var T=(7&S)<<4;E.buf[E.pos++]|=T|((S>>>=3)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S)))))}(_,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(p,_,S){for(var E,T,L=0;L<_.length;L++){if((E=_.charCodeAt(L))>55295&&E<57344){if(!T){E>56319||L+1===_.length?(p[S++]=239,p[S++]=191,p[S++]=189):T=E;continue}if(E<56320){p[S++]=239,p[S++]=191,p[S++]=189,T=E;continue}E=T-55296<<10|E-56320|65536,T=null}else T&&(p[S++]=239,p[S++]=191,p[S++]=189,T=null);E<128?p[S++]=E:(E<2048?p[S++]=E>>6|192:(E<65536?p[S++]=E>>12|224:(p[S++]=E>>18|240,p[S++]=E>>12&63|128),p[S++]=E>>6&63|128),p[S++]=63&E|128)}return S}(this.buf,s,this.pos);var a=this.pos-i;a>=128&&p2(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),h2(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),h2(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var a=0;a<i;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,i){this.pos++;var a=this.pos;s(i,this);var p=this.pos-a;p>=128&&p2(a,p,this),this.pos=a-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,i,a){this.writeTag(s,Kn.Bytes),this.writeRawMessage(i,a)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,UA,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,jA,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,qA,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,VA,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,GA,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,HA,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,WA,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,ZA,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,XA,i)},writeBytesField:function(s,i){this.writeTag(s,Kn.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Kn.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Kn.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Kn.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Kn.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Kn.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Kn.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Kn.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Kn.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Kn.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,!!i)}};var O0=M(u2);const F0=3;function YA(s,i,a){s===1&&a.readMessage(KA,i)}function KA(s,i,a){if(s===3){const{id:p,bitmap:_,width:S,height:E,left:T,top:L,advance:D}=a.readMessage(JA,{});i.push({id:p,bitmap:new Hf({width:S+2*F0,height:E+2*F0},_),metrics:{width:S,height:E,left:T,top:L,advance:D}})}}function JA(s,i,a){s===1?i.id=a.readVarint():s===2?i.bitmap=a.readBytes():s===3?i.width=a.readVarint():s===4?i.height=a.readVarint():s===5?i.left=a.readSVarint():s===6?i.top=a.readSVarint():s===7&&(i.advance=a.readVarint())}const g2=F0;function y2(s){let i=0,a=0;for(const E of s)i+=E.w*E.h,a=Math.max(a,E.w);s.sort((E,T)=>T.h-E.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let _=0,S=0;for(const E of s)for(let T=p.length-1;T>=0;T--){const L=p[T];if(!(E.w>L.w||E.h>L.h)){if(E.x=L.x,E.y=L.y,S=Math.max(S,E.y+E.h),_=Math.max(_,E.x+E.w),E.w===L.w&&E.h===L.h){const D=p.pop();T<p.length&&(p[T]=D)}else E.h===L.h?(L.x+=E.w,L.w-=E.w):E.w===L.w?(L.y+=E.h,L.h-=E.h):(p.push({x:L.x+E.w,y:L.y,w:L.w-E.w,h:E.h}),L.y+=E.h,L.h-=E.h);break}}return{w:_,h:S,fill:i/(_*S)||0}}const Wo=1;class B0{constructor(i,{pixelRatio:a,version:p,stretchX:_,stretchY:S,content:E,textFitWidth:T,textFitHeight:L}){this.paddedRect=i,this.pixelRatio=a,this.stretchX=_,this.stretchY=S,this.content=E,this.version=p,this.textFitWidth=T,this.textFitHeight=L}get tl(){return[this.paddedRect.x+Wo,this.paddedRect.y+Wo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Wo,this.paddedRect.y+this.paddedRect.h-Wo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Wo)/this.pixelRatio,(this.paddedRect.h-2*Wo)/this.pixelRatio]}}class v2{constructor(i,a){const p={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(i,p,S),this.addImages(a,_,S);const{w:E,h:T}=y2(S),L=new Es({width:E||1,height:T||1});for(const D in i){const B=i[D],j=p[D].paddedRect;Es.copy(B.data,L,{x:0,y:0},{x:j.x+Wo,y:j.y+Wo},B.data)}for(const D in a){const B=a[D],j=_[D].paddedRect,W=j.x+Wo,ee=j.y+Wo,re=B.data.width,ae=B.data.height;Es.copy(B.data,L,{x:0,y:0},{x:W,y:ee},B.data),Es.copy(B.data,L,{x:0,y:ae-1},{x:W,y:ee-1},{width:re,height:1}),Es.copy(B.data,L,{x:0,y:0},{x:W,y:ee+ae},{width:re,height:1}),Es.copy(B.data,L,{x:re-1,y:0},{x:W-1,y:ee},{width:1,height:ae}),Es.copy(B.data,L,{x:0,y:0},{x:W+re,y:ee},{width:1,height:ae})}this.image=L,this.iconPositions=p,this.patternPositions=_}addImages(i,a,p){for(const _ in i){const S=i[_],E={x:0,y:0,w:S.data.width+2*Wo,h:S.data.height+2*Wo};p.push(E),a[_]=new B0(E,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(i,a){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),a),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),a)}patchUpdatedImage(i,a,p){if(!i||!a||i.version===a.version)return;i.version=a.version;const[_,S]=i.tl;p.update(a.data,void 0,{x:_,y:S})}}var Vu;Mt("ImagePosition",B0),Mt("ImageAtlas",v2),y.ah=void 0,(Vu=y.ah||(y.ah={}))[Vu.none=0]="none",Vu[Vu.horizontal=1]="horizontal",Vu[Vu.vertical=2]="vertical",Vu[Vu.horizontalOnly=3]="horizontalOnly";const Qf=-17;class ep{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const p=new ep;return p.scale=i||1,p.fontStack=a,p}static forImage(i){const a=new ep;return a.imageName=i,a}}class od{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const p=new od;for(let _=0;_<i.sections.length;_++){const S=i.sections[_];S.image?p.addImageSection(S):p.addTextSection(S,a)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let a="";for(let p=0;p<i.length;p++){const _=i.charCodeAt(p+1)||null,S=i.charCodeAt(p-1)||null;a+=_&&Bm(_)&&!Jf[i[p+1]]||S&&Bm(S)&&!Jf[i[p-1]]||!Jf[i[p]]?i[p]:Jf[i[p]]}return a}(this.text)}trim(){let i=0;for(let p=0;p<this.text.length&&tg[this.text.charCodeAt(p)];p++)i++;let a=this.text.length;for(let p=this.text.length-1;p>=0&&p>=i&&tg[this.text.charCodeAt(p)];p--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const p=new od;return p.text=this.text.substring(i,a),p.sectionIndex=this.sectionIndex.slice(i,a),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(ep.forText(i.scale,i.fontStack||a));const p=this.sections.length-1;for(let _=0;_<i.text.length;++_)this.sectionIndex.push(p)}addImageSection(i){const a=i.image?i.image.name:"";if(a.length===0)return void at("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(ep.forImage(a)),this.sectionIndex.push(this.sections.length-1)):at("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function eg(s,i,a,p,_,S,E,T,L,D,B,j,W,ee,re){const ae=od.fromFeature(s,_);let ge;j===y.ah.vertical&&ae.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:Fe}=qo;if(we&&ae.sections.length===1){ge=[];const We=we(ae.toString(),$0(ae,D,S,i,p,ee));for(const ot of We){const Et=new od;Et.text=ot,Et.sections=ae.sections;for(let Zt=0;Zt<ot.length;Zt++)Et.sectionIndex.push(0);ge.push(Et)}}else if(Fe){ge=[];const We=Fe(ae.text,ae.sectionIndex,$0(ae,D,S,i,p,ee));for(const ot of We){const Et=new od;Et.text=ot[0],Et.sectionIndex=ot[1],Et.sections=ae.sections,ge.push(Et)}}else ge=function(We,ot){const Et=[],Zt=We.text;let kt=0;for(const xt of ot)Et.push(We.substring(kt,xt)),kt=xt;return kt<Zt.length&&Et.push(We.substring(kt,Zt.length)),Et}(ae,$0(ae,D,S,i,p,ee));const Me=[],De={positionedLines:Me,text:ae.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(We,ot,Et,Zt,kt,xt,Ot,Pt,Tt,Qe,Bt,zt){let tn=0,rr=Qf,Jn=0,bi=0;const Qs=Pt==="right"?1:Pt==="left"?0:.5;let Vi=0;for(const Ur of kt){Ur.trim();const ki=Ur.getMaxScale(),so=(ki-1)*fi,Gi={positionedGlyphs:[],lineOffset:0};We.positionedLines[Vi]=Gi;const To=Gi.positionedGlyphs;let qi=0;if(!Ur.length()){rr+=xt,++Vi;continue}for(let Zo=0;Zo<Ur.length();Zo++){const Nn=Ur.getSection(Zo),ar=Ur.getSectionIndex(Zo),_r=Ur.getCharCode(Zo);let cs=0,zr=null,ud=null,fl=null,pl=fi;const ea=!(Tt===y.ah.horizontal||!Bt&&!Bf(_r)||Bt&&(tg[_r]||(wi=_r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(wi)))));if(Nn.imageName){const Cs=Zt[Nn.imageName];if(!Cs)continue;fl=Nn.imageName,We.iconsInText=We.iconsInText||!0,ud=Cs.paddedRect;const Ri=Cs.displaySize;Nn.scale=Nn.scale*fi/zt,zr={width:Ri[0],height:Ri[1],left:Wo,top:-g2,advance:ea?Ri[1]:Ri[0]},cs=so+(fi-Ri[1]*Nn.scale),pl=zr.advance;const Kl=ea?Ri[0]*Nn.scale-fi*ki:Ri[1]*Nn.scale-fi*ki;Kl>0&&Kl>qi&&(qi=Kl)}else{const Cs=Et[Nn.fontStack],Ri=Cs&&Cs[_r];if(Ri&&Ri.rect)ud=Ri.rect,zr=Ri.metrics;else{const Kl=ot[Nn.fontStack],sp=Kl&&Kl[_r];if(!sp)continue;zr=sp.metrics}cs=(ki-Nn.scale)*fi}ea?(We.verticalizable=!0,To.push({glyph:_r,imageName:fl,x:tn,y:rr+cs,vertical:ea,scale:Nn.scale,fontStack:Nn.fontStack,sectionIndex:ar,metrics:zr,rect:ud}),tn+=pl*Nn.scale+Qe):(To.push({glyph:_r,imageName:fl,x:tn,y:rr+cs,vertical:ea,scale:Nn.scale,fontStack:Nn.fontStack,sectionIndex:ar,metrics:zr,rect:ud}),tn+=zr.advance*Nn.scale+Qe)}To.length!==0&&(Jn=Math.max(tn-Qe,Jn),nR(To,0,To.length-1,Qs,qi)),tn=0;const Ts=xt*ki+qi;Gi.lineOffset=Math.max(qi,so),rr+=Ts,bi=Math.max(Ts,bi),++Vi}var wi;const So=rr-Qf,{horizontalAlign:Eo,verticalAlign:Io}=U0(Ot);(function(Ur,ki,so,Gi,To,qi,Ts,Zo,Nn){const ar=(ki-so)*To;let _r=0;_r=qi!==Ts?-Zo*Gi-Qf:(-Gi*Nn+.5)*Ts;for(const cs of Ur)for(const zr of cs.positionedGlyphs)zr.x+=ar,zr.y+=_r})(We.positionedLines,Qs,Eo,Io,Jn,bi,xt,So,kt.length),We.top+=-Io*So,We.bottom=We.top+So,We.left+=-Eo*Jn,We.right=We.left+Jn}(De,i,a,p,ge,E,T,L,j,D,W,re),!function(We){for(const ot of We)if(ot.positionedGlyphs.length!==0)return!1;return!0}(Me)&&De}const tg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},QA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},eR={40:!0};function _2(s,i,a,p,_,S){if(i.imageName){const E=p[i.imageName];return E?E.displaySize[0]*i.scale*fi/S+_:0}{const E=a[i.fontStack],T=E&&E[s];return T?T.metrics.advance*i.scale+_:0}}function x2(s,i,a,p){const _=Math.pow(s-i,2);return p?s<i?_/2:2*_:_+Math.abs(a)*a}function tR(s,i,a){let p=0;return s===10&&(p-=1e4),a&&(p+=150),s!==40&&s!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function b2(s,i,a,p,_,S){let E=null,T=x2(i,a,_,S);for(const L of p){const D=x2(i-L.x,a,_,S)+L.badness;D<=T&&(E=L,T=D)}return{index:s,x:i,priorBreak:E,badness:T}}function w2(s){return s?w2(s.priorBreak).concat(s.index):[]}function $0(s,i,a,p,_,S){if(!s)return[];const E=[],T=function(j,W,ee,re,ae,ge){let we=0;for(let Fe=0;Fe<j.length();Fe++){const Me=j.getSection(Fe);we+=_2(j.getCharCode(Fe),Me,re,ae,W,ge)}return we/Math.max(1,Math.ceil(we/ee))}(s,i,a,p,_,S),L=s.text.indexOf("​")>=0;let D=0;for(let j=0;j<s.length();j++){const W=s.getSection(j),ee=s.getCharCode(j);if(tg[ee]||(D+=_2(ee,W,p,_,i,S)),j<s.length()-1){const re=!((B=ee)<11904)&&(!!xn["CJK Compatibility Forms"](B)||!!xn["CJK Compatibility"](B)||!!xn["CJK Strokes"](B)||!!xn["CJK Symbols and Punctuation"](B)||!!xn["Enclosed CJK Letters and Months"](B)||!!xn["Halfwidth and Fullwidth Forms"](B)||!!xn["Ideographic Description Characters"](B)||!!xn["Vertical Forms"](B)||Fm.test(String.fromCodePoint(B)));(QA[ee]||re||W.imageName||j!==s.length()-2&&eR[s.getCharCode(j+1)])&&E.push(b2(j+1,D,T,E,tR(ee,s.getCharCode(j+1),re&&L),!1))}}var B;return w2(b2(s.length(),D,T,E,0,!0))}function U0(s){let i=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function nR(s,i,a,p,_){if(!p&&!_)return;const S=s[a],E=(s[a].x+S.metrics.advance*S.scale)*p;for(let T=i;T<=a;T++)s[T].x-=E,s[T].y+=_}function rR(s,i,a){const{horizontalAlign:p,verticalAlign:_}=U0(a),S=i[0]-s.displaySize[0]*p,E=i[1]-s.displaySize[1]*_;return{image:s,top:E,bottom:E+s.displaySize[1],left:S,right:S+s.displaySize[0]}}function k2(s){var i,a;let p=s.left,_=s.top,S=s.right-p,E=s.bottom-_;const T=(i=s.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",L=(a=s.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",D=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(L==="proportional"){if(T==="stretchOnly"&&S/E<D||T==="proportional"){const B=Math.ceil(E*D);p*=B/S,S=B}}else if(T==="proportional"&&L==="stretchOnly"&&D!==0&&S/E>D){const B=Math.ceil(S/D);_*=B/E,E=B}return{x1:p,y1:_,x2:p+S,y2:_+E}}function S2(s,i,a,p,_,S){const E=s.image;let T;if(E.content){const ge=E.content,we=E.pixelRatio||1;T=[ge[0]/we,ge[1]/we,E.displaySize[0]-ge[2]/we,E.displaySize[1]-ge[3]/we]}const L=i.left*S,D=i.right*S;let B,j,W,ee;a==="width"||a==="both"?(ee=_[0]+L-p[3],j=_[0]+D+p[1]):(ee=_[0]+(L+D-E.displaySize[0])/2,j=ee+E.displaySize[0]);const re=i.top*S,ae=i.bottom*S;return a==="height"||a==="both"?(B=_[1]+re-p[0],W=_[1]+ae+p[2]):(B=_[1]+(re+ae-E.displaySize[1])/2,W=B+E.displaySize[1]),{image:E,top:B,right:j,bottom:W,left:ee,collisionPadding:T}}const tp=255,dl=128,Gu=tp*dl;function E2(s,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new mr(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=a;let S=0;for(;S<p.length&&p[S]<=s;)S++;S=Math.max(0,S-1);let E=S;for(;E<p.length&&p[E]<s+1;)E++;E=Math.min(p.length-1,E);const T=p[S],L=p[E];return a.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:L,interpolationType:_}:{kind:"camera",minZoom:T,maxZoom:L,minSize:a.evaluate(new mr(T)),maxSize:a.evaluate(new mr(L)),interpolationType:_}}}function j0(s,i,a){let p="never";const _=s.get(i);return _?p=_:s.get(a)&&(p="always"),p}const iR=ju.VectorTileFeature.types,oR=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ng(s,i,a,p,_,S,E,T,L,D,B,j,W){const ee=T?Math.min(Gu,Math.round(T[0])):0,re=T?Math.min(Gu,Math.round(T[1])):0;s.emplaceBack(i,a,Math.round(32*p),Math.round(32*_),S,E,(ee<<1)+(L?1:0),re,16*D,16*B,256*j,256*W)}function V0(s,i,a){s.emplaceBack(i.x,i.y,a),s.emplaceBack(i.x,i.y,a),s.emplaceBack(i.x,i.y,a),s.emplaceBack(i.x,i.y,a)}function sR(s){for(const i of s.sections)if(y0(i.text))return!0;return!1}class G0{constructor(i){this.layoutVertexArray=new Zh,this.indexArray=new Ss,this.programConfigurations=i,this.segments=new bn,this.dynamicLayoutVertexArray=new jf,this.opacityVertexArray=new ls,this.hasVisibleVertices=!1,this.placedSymbolArray=new gr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,a,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,DA.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,OA.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,oR,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mt("SymbolBuffers",G0);class q0{constructor(i,a,p){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new p,this.segments=new bn,this.collisionVertexArray=new cl}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,FA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mt("CollisionBuffers",q0);class sd{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(E=>E.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=S0([]),this.placementViewportMatrix=S0([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=E2(this.zoom,a["text-size"]),this.iconSizeData=E2(this.zoom,a["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=j0(p,"text-overlap","text-allow-overlap")!=="never"||j0(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(E=>y.ah[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=i.sourceID}createArrays(){this.text=new G0(new Yc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new G0(new Yc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new yr,this.lineVertexArray=new Bi,this.symbolInstances=new vn,this.textAnchorOffsets=new vr}calculateGlyphDependencies(i,a,p,_,S){for(let E=0;E<i.length;E++)if(a[i.charCodeAt(E)]=!0,(p||_)&&S){const T=Jf[i.charAt(E)];T&&(a[T.charCodeAt(0)]=!0)}}populate(i,a,p){const _=this.layers[0],S=_.layout,E=S.get("text-font"),T=S.get("text-field"),L=S.get("icon-image"),D=(T.value.kind!=="constant"||T.value.value instanceof Ci&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),B=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,j=S.get("symbol-sort-key");if(this.features=[],!D&&!B)return;const W=a.iconDependencies,ee=a.glyphDependencies,re=a.availableImages,ae=new mr(this.zoom);for(const{feature:ge,id:we,index:Fe,sourceLayerIndex:Me}of i){const De=_._featureFilter.needGeometry,We=Jc(ge,De);if(!_._featureFilter.filter(ae,We,p))continue;let ot,Et;if(De||(We.geometry=Kc(ge)),D){const kt=_.getValueAndResolveTokens("text-field",We,p,re),xt=Ci.factory(kt),Ot=this.hasRTLText=this.hasRTLText||sR(xt);(!Ot||qo.getRTLTextPluginStatus()==="unavailable"||Ot&&qo.isParsed())&&(ot=$A(xt,_,We))}if(B){const kt=_.getValueAndResolveTokens("icon-image",We,p,re);Et=kt instanceof ni?kt:ni.fromString(kt)}if(!ot&&!Et)continue;const Zt=this.sortFeaturesByKey?j.evaluate(We,{},p):void 0;if(this.features.push({id:we,text:ot,icon:Et,index:Fe,sourceLayerIndex:Me,geometry:We.geometry,properties:ge.properties,type:iR[ge.type],sortKey:Zt}),Et&&(W[Et.name]=!0),ot){const kt=E.evaluate(We,{},p).join(","),xt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.ah.vertical)>=0;for(const Ot of ot.sections)if(Ot.image)W[Ot.image.name]=!0;else{const Pt=Of(ot.toString()),Tt=Ot.fontStack||kt,Qe=ee[Tt]=ee[Tt]||{};this.calculateGlyphDependencies(Ot.text,Qe,xt,this.allowVerticalPlacement,Pt)}}}S.get("symbol-placement")==="line"&&(this.features=function(ge){const we={},Fe={},Me=[];let De=0;function We(kt){Me.push(ge[kt]),De++}function ot(kt,xt,Ot){const Pt=Fe[kt];return delete Fe[kt],Fe[xt]=Pt,Me[Pt].geometry[0].pop(),Me[Pt].geometry[0]=Me[Pt].geometry[0].concat(Ot[0]),Pt}function Et(kt,xt,Ot){const Pt=we[xt];return delete we[xt],we[kt]=Pt,Me[Pt].geometry[0].shift(),Me[Pt].geometry[0]=Ot[0].concat(Me[Pt].geometry[0]),Pt}function Zt(kt,xt,Ot){const Pt=Ot?xt[0][xt[0].length-1]:xt[0][0];return`${kt}:${Pt.x}:${Pt.y}`}for(let kt=0;kt<ge.length;kt++){const xt=ge[kt],Ot=xt.geometry,Pt=xt.text?xt.text.toString():null;if(!Pt){We(kt);continue}const Tt=Zt(Pt,Ot),Qe=Zt(Pt,Ot,!0);if(Tt in Fe&&Qe in we&&Fe[Tt]!==we[Qe]){const Bt=Et(Tt,Qe,Ot),zt=ot(Tt,Qe,Me[Bt].geometry);delete we[Tt],delete Fe[Qe],Fe[Zt(Pt,Me[zt].geometry,!0)]=zt,Me[Bt].geometry=null}else Tt in Fe?ot(Tt,Qe,Ot):Qe in we?Et(Tt,Qe,Ot):(We(kt),we[Tt]=De-1,Fe[Qe]=De-1)}return Me.filter(kt=>kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ge,we)=>ge.sortKey-we.sortKey)}update(i,a,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,a,this.layers,p),this.icon.programConfigurations.updatePaintArrays(i,a,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const p=this.lineVertexArray.length;if(i.segment!==void 0){let _=i.dist(a[i.segment+1]),S=i.dist(a[i.segment]);const E={};for(let T=i.segment+1;T<a.length;T++)E[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:_},T<a.length-1&&(_+=a[T+1].dist(a[T]));for(let T=i.segment||0;T>=0;T--)E[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:S},T>0&&(S+=a[T-1].dist(a[T]));for(let T=0;T<a.length;T++){const L=E[T];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,a,p,_,S,E,T,L,D,B,j,W){const ee=i.indexArray,re=i.layoutVertexArray,ae=i.segments.prepareSegment(4*a.length,re,ee,this.canOverlap?E.sortKey:void 0),ge=this.glyphOffsetArray.length,we=ae.vertexLength,Fe=this.allowVerticalPlacement&&T===y.ah.vertical?Math.PI/2:0,Me=E.text&&E.text.sections;for(let De=0;De<a.length;De++){const{tl:We,tr:ot,bl:Et,br:Zt,tex:kt,pixelOffsetTL:xt,pixelOffsetBR:Ot,minFontScaleX:Pt,minFontScaleY:Tt,glyphOffset:Qe,isSDF:Bt,sectionIndex:zt}=a[De],tn=ae.vertexLength,rr=Qe[1];ng(re,L.x,L.y,We.x,rr+We.y,kt.x,kt.y,p,Bt,xt.x,xt.y,Pt,Tt),ng(re,L.x,L.y,ot.x,rr+ot.y,kt.x+kt.w,kt.y,p,Bt,Ot.x,xt.y,Pt,Tt),ng(re,L.x,L.y,Et.x,rr+Et.y,kt.x,kt.y+kt.h,p,Bt,xt.x,Ot.y,Pt,Tt),ng(re,L.x,L.y,Zt.x,rr+Zt.y,kt.x+kt.w,kt.y+kt.h,p,Bt,Ot.x,Ot.y,Pt,Tt),V0(i.dynamicLayoutVertexArray,L,Fe),ee.emplaceBack(tn,tn+1,tn+2),ee.emplaceBack(tn+1,tn+2,tn+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qe[0]),De!==a.length-1&&zt===a[De+1].sectionIndex||i.programConfigurations.populatePaintArrays(re.length,E,E.index,{},W,Me&&Me[zt])}i.placedSymbolArray.emplaceBack(L.x,L.y,ge,this.glyphOffsetArray.length-ge,we,D,B,L.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],T,0,!1,0,j)}_addCollisionDebugVertex(i,a,p,_,S,E){return a.emplaceBack(0,0),i.emplaceBack(p.x,p.y,_,S,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(i,a,p,_,S,E,T){const L=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),D=L.vertexLength,B=S.layoutVertexArray,j=S.collisionVertexArray,W=T.anchorX,ee=T.anchorY;this._addCollisionDebugVertex(B,j,E,W,ee,new R(i,a)),this._addCollisionDebugVertex(B,j,E,W,ee,new R(p,a)),this._addCollisionDebugVertex(B,j,E,W,ee,new R(p,_)),this._addCollisionDebugVertex(B,j,E,W,ee,new R(i,_)),L.vertexLength+=4;const re=S.indexArray;re.emplaceBack(D,D+1),re.emplaceBack(D+1,D+2),re.emplaceBack(D+2,D+3),re.emplaceBack(D+3,D),L.primitiveLength+=4}addDebugCollisionBoxes(i,a,p,_){for(let S=i;S<a;S++){const E=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,_?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new q0(us,l2.members,Ai),this.iconCollisionBox=new q0(us,l2.members,Ai);for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(i,a,p,_,S,E,T,L,D){const B={};for(let j=a;j<p;j++){const W=i.get(j);B.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.textFeatureIndex=W.featureIndex;break}for(let j=_;j<S;j++){const W=i.get(j);B.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalTextFeatureIndex=W.featureIndex;break}for(let j=E;j<T;j++){const W=i.get(j);B.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.iconFeatureIndex=W.featureIndex;break}for(let j=L;j<D;j++){const W=i.get(j);B.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalIconFeatureIndex=W.featureIndex;break}return B}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const p=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,a){const p=i.placedSymbolArray.get(a),_=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<_;S+=4)i.indexArray.emplaceBack(S,S+1,S+2),i.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),p=Math.cos(i),_=[],S=[],E=[];for(let T=0;T<this.symbolInstances.length;++T){E.push(T);const L=this.symbolInstances.get(T);_.push(0|Math.round(a*L.anchorX+p*L.anchorY)),S.push(L.featureIndex)}return E.sort((T,L)=>_[T]-_[L]||S[L]-S[T]),E}addToSortKeyRanges(i,a){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===a?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const p=this.symbolInstances.get(a);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((_,S,E)=>{_>=0&&E.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let I2,T2;Mt("SymbolBucket",sd,{omit:["layers","collisionBoxArray","features","compareText"]}),sd.MAX_GLYPHS=65535,sd.addDynamicAttributes=V0;var H0={get paint(){return T2=T2||new w({"icon-opacity":new Xt(Ve.paint_symbol["icon-opacity"]),"icon-color":new Xt(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Xt(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Rt(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rt(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xt(Ve.paint_symbol["text-opacity"]),"text-color":new Xt(Ve.paint_symbol["text-color"],{runtimeType:_i,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Xt(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Xt(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Rt(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Rt(Ve.paint_symbol["text-translate-anchor"])})},get layout(){return I2=I2||new w({"symbol-placement":new Rt(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Rt(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rt(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rt(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rt(Ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rt(Ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rt(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rt(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rt(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Rt(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt(Ve.layout_symbol["icon-image"]),"icon-rotate":new Xt(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Xt(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Rt(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Xt(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rt(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rt(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rt(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Xt(Ve.layout_symbol["text-field"]),"text-font":new Xt(Ve.layout_symbol["text-font"]),"text-size":new Xt(Ve.layout_symbol["text-size"]),"text-max-width":new Xt(Ve.layout_symbol["text-max-width"]),"text-line-height":new Rt(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Xt(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Xt(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rt(Ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Xt(Ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Xt(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Rt(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Rt(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Xt(Ve.layout_symbol["text-rotate"]),"text-padding":new Rt(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Rt(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Xt(Ve.layout_symbol["text-transform"]),"text-offset":new Xt(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Rt(Ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Rt(Ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Rt(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Rt(Ve.layout_symbol["text-optional"])})}};class C2{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:eo,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mt("FormatSectionOverride",C2,{omit:["defaultValue"]});class rg extends c{constructor(i){super(i,H0)}recalculate(i,a){if(super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const S of p)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,a,p,_){const S=this.layout.get(i).evaluate(a,{},p,_),E=this._unevaluatedLayout._values[i];return E.isDataDriven()||x(E.value)||!S?S:function(T,L){return L.replace(/{([^{}]+)}/g,(D,B)=>T&&B in T?String(T[B]):"")}(a.properties,S)}createBucket(i){return new sd(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of H0.paint.overridableProperties){if(!rg.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),p=new C2(a),_=new f(p,a.property.specification);let S=null;S=a.value.kind==="constant"||a.value.kind==="source"?new F("source",_):new U("composite",_,a.value.zoomStops),this.paint._values[i]=new Ks(a.property,S,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,p){return!(!this.layout||a.isDataDriven()||p.isDataDriven())&&rg.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const p=i.get("text-field"),_=H0.paint.properties[a];let S=!1;const E=T=>{for(const L of T)if(_.overrides&&_.overrides.hasOverride(L))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ci)E(p.value.value.sections);else if(p.value.kind==="source"){const T=D=>{S||(D instanceof Fo&&Cr(D.value)===Ii?E(D.value.sections):D instanceof $l?E(D.sections):D.eachChild(T))},L=p.value;L._styleExpression&&T(L._styleExpression.expression)}return S}}let M2;var aR={get paint(){return M2=M2||new w({"background-color":new Rt(Ve.paint_background["background-color"]),"background-pattern":new Hh(Ve.paint_background["background-pattern"]),"background-opacity":new Rt(Ve.paint_background["background-opacity"])})}};class lR extends c{constructor(i){super(i,aR)}}let L2;var uR={get paint(){return L2=L2||new w({"raster-opacity":new Rt(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rt(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rt(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rt(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Rt(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Rt(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Rt(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Rt(Ve.paint_raster["raster-fade-duration"])})}};class cR extends c{constructor(i){super(i,uR)}}class hR extends c{constructor(i){super(i,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class dR{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const W0=63710088e-1;class qu{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qu(_e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,p=this.lat*a,_=i.lat*a,S=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((i.lng-this.lng)*a);return W0*Math.acos(Math.min(S,1))}static convert(i){if(i instanceof qu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new qu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new qu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const P2=2*Math.PI*W0;function A2(s){return P2*Math.cos(s*Math.PI/180)}function R2(s){return(180+s)/360}function N2(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function z2(s,i){return s/A2(i)}function Z0(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class np{constructor(i,a,p=0){this.x=+i,this.y=+a,this.z=+p}static fromLngLat(i,a=0){const p=qu.convert(i);return new np(R2(p.lng),N2(p.lat),z2(a,p.lat))}toLngLat(){return new qu(360*this.x-180,Z0(this.y))}toAltitude(){return this.z*A2(Z0(this.y))}meterInMercatorCoordinateUnits(){return 1/P2*(i=Z0(this.y),1/Math.cos(i*Math.PI/180));var i}}function D2(s,i,a){var p=2*Math.PI*6378137/256/Math.pow(2,a);return[s*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class X0{constructor(i,a,p){if(!function(_,S,E){return!(_<0||_>25||E<0||E>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(i,a,p))throw new Error(`x=${a}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=a,this.y=p,this.key=rp(0,i,i,a,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a,p){const _=(E=this.y,T=this.z,L=D2(256*(S=this.x),256*(E=Math.pow(2,T)-E-1),T),D=D2(256*(S+1),256*(E+1),T),L[0]+","+L[1]+","+D[0]+","+D[1]);var S,E,T,L,D;const B=function(j,W,ee){let re,ae="";for(let ge=j;ge>0;ge--)re=1<<ge-1,ae+=(W&re?1:0)+(ee&re?2:0);return ae}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,_)}isChildOf(i){const a=this.z-i.z;return a>0&&i.x===this.x>>a&&i.y===this.y>>a}getTilePoint(i){const a=Math.pow(2,this.z);return new R((i.x*a-this.x)*ri,(i.y*a-this.y)*ri)}toString(){return`${this.z}/${this.x}/${this.y}`}}class O2{constructor(i,a){this.wrap=i,this.canonical=a,this.key=rp(i,a.z,a.z,a.x,a.y)}}class Is{constructor(i,a,p,_,S){if(i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=a,this.canonical=new X0(p,+_,+S),this.key=rp(a,i,p,_,S)}clone(){return new Is(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-i;return i>this.canonical.z?new Is(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Is(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?rp(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y):rp(this.wrap*+a,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new Is(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new Is(a,this.wrap,a,p,_),new Is(a,this.wrap,a,p+1,_),new Is(a,this.wrap,a,p,_+1),new Is(a,this.wrap,a,p+1,_+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Is(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Is(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new O2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new np(i.x-this.wrap,i.y))}}function rp(s,i,a,p,_){(s*=2)<0&&(s=-1*s-1);const S=1<<a;return(S*S*s+S*_+p).toString(36)+a.toString(36)+i.toString(36)}Mt("CanonicalTileID",X0),Mt("OverscaledTileID",Is,{omit:["posMatrix"]});class F2{constructor(i,a,p,_=1,S=1,E=1,T=0){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void at(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const L=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=E,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<L;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(L,D)]=this.data[this._idx(L-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,L)]=this.data[this._idx(D,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<L;D++)for(let B=0;B<L;B++){const j=this.get(D,B);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(i,a){const p=new Uint8Array(this.data.buffer),_=4*this._idx(i,a);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}unpack(i,a,p){return i*this.redFactor+a*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Es({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,a,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let _=a*this.dim,S=a*this.dim+this.dim,E=p*this.dim,T=p*this.dim+this.dim;switch(a){case-1:_=S-1;break;case 1:S=_+1}switch(p){case-1:E=T-1;break;case 1:T=E+1}const L=-a*this.dim,D=-p*this.dim;for(let B=E;B<T;B++)for(let j=_;j<S;j++)this.data[this._idx(j,B)]=i.data[this._idx(j+L,B+D)]}}Mt("DEMData",F2);class B2{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const p=i[a];this._stringToNumber[p]=a,this._numberToString[a]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class $2{constructor(i,a,p,_,S){this.type="Feature",this._vectorTileFeature=i,i._z=a,i._x=p,i._y=_,this.properties=i.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(i[a]=this[a]);return i}}class U2{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Pu(ri,16,0),this.grid3D=new Pu(ri,16,0),this.featureIndexArray=new io,this.promoteId=a}insert(i,a,p,_,S,E){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,S);const L=E?this.grid3D:this.grid;for(let D=0;D<a.length;D++){const B=a[D],j=[1/0,1/0,-1/0,-1/0];for(let W=0;W<B.length;W++){const ee=B[W];j[0]=Math.min(j[0],ee.x),j[1]=Math.min(j[1],ee.y),j[2]=Math.max(j[2],ee.x),j[3]=Math.max(j[3],ee.y)}j[0]<ri&&j[1]<ri&&j[2]>=0&&j[3]>=0&&L.insert(T,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ju.VectorTile(new O0(this.rawTileData)).layers,this.sourceLayerCoder=new B2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,a,p,_){this.loadVTLayers();const S=i.params||{},E=ri/i.tileSize/i.scale,T=pt(S.filter),L=i.queryGeometry,D=i.queryPadding*E,B=V2(L),j=this.grid.query(B.minX-D,B.minY-D,B.maxX+D,B.maxY+D),W=V2(i.cameraQueryGeometry),ee=this.grid3D.query(W.minX-D,W.minY-D,W.maxX+D,W.maxY+D,(ge,we,Fe,Me)=>function(De,We,ot,Et,Zt){for(const xt of De)if(We<=xt.x&&ot<=xt.y&&Et>=xt.x&&Zt>=xt.y)return!0;const kt=[new R(We,ot),new R(We,Zt),new R(Et,Zt),new R(Et,ot)];if(De.length>2){for(const xt of kt)if(Qh(De,xt))return!0}for(let xt=0;xt<De.length-1;xt++)if(HP(De[xt],De[xt+1],kt))return!0;return!1}(i.cameraQueryGeometry,ge-D,we-D,Fe+D,Me+D));for(const ge of ee)j.push(ge);j.sort(fR);const re={};let ae;for(let ge=0;ge<j.length;ge++){const we=j[ge];if(we===ae)continue;ae=we;const Fe=this.featureIndexArray.get(we);let Me=null;this.loadMatchingFeature(re,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,T,S.layers,S.availableImages,a,p,_,(De,We,ot)=>(Me||(Me=Kc(De)),We.queryIntersectsFeature(L,De,ot,Me,this.z,i.transform,E,i.pixelPosMatrix)))}return re}loadMatchingFeature(i,a,p,_,S,E,T,L,D,B,j){const W=this.bucketLayerIDs[a];if(E&&!function(ge,we){for(let Fe=0;Fe<ge.length;Fe++)if(we.indexOf(ge[Fe])>=0)return!0;return!1}(E,W))return;const ee=this.sourceLayerCoder.decode(p),re=this.vtLayers[ee].feature(_);if(S.needGeometry){const ge=Jc(re,!0);if(!S.filter(new mr(this.tileID.overscaledZ),ge,this.tileID.canonical))return}else if(!S.filter(new mr(this.tileID.overscaledZ),re))return;const ae=this.getId(re,ee);for(let ge=0;ge<W.length;ge++){const we=W[ge];if(E&&E.indexOf(we)<0)continue;const Fe=L[we];if(!Fe)continue;let Me={};ae&&B&&(Me=B.getState(Fe.sourceLayer||"_geojsonTileLayer",ae));const De=pe({},D[we]);De.paint=j2(De.paint,Fe.paint,re,Me,T),De.layout=j2(De.layout,Fe.layout,re,Me,T);const We=!j||j(re,Fe,Me);if(!We)continue;const ot=new $2(re,this.z,this.x,this.y,ae);ot.layer=De;let Et=i[we];Et===void 0&&(Et=i[we]=[]),Et.push({featureIndex:_,feature:ot,intersectionZ:We})}}lookupSymbolFeatures(i,a,p,_,S,E,T,L){const D={};this.loadVTLayers();const B=pt(S);for(const j of i)this.loadMatchingFeature(D,p,_,j,B,E,T,L,a);return D}hasLayer(i){for(const a of this.bucketLayerIDs)for(const p of a)if(i===p)return!0;return!1}getId(i,a){let p=i.id;return this.promoteId&&(p=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof p=="boolean"&&(p=Number(p))),p}}function j2(s,i,a,p,_){return Le(s,(S,E)=>{const T=i instanceof Wc?i.get(E):null;return T&&T.evaluate?T.evaluate(a,p,_):T})}function V2(s){let i=1/0,a=1/0,p=-1/0,_=-1/0;for(const S of s)i=Math.min(i,S.x),a=Math.min(a,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return{minX:i,minY:a,maxX:p,maxY:_}}function fR(s,i){return i-s}function G2(s,i,a,p,_){const S=[];for(let E=0;E<s.length;E++){const T=s[E];let L;for(let D=0;D<T.length-1;D++){let B=T[D],j=T[D+1];B.x<i&&j.x<i||(B.x<i?B=new R(i,B.y+(i-B.x)/(j.x-B.x)*(j.y-B.y))._round():j.x<i&&(j=new R(i,B.y+(i-B.x)/(j.x-B.x)*(j.y-B.y))._round()),B.y<a&&j.y<a||(B.y<a?B=new R(B.x+(a-B.y)/(j.y-B.y)*(j.x-B.x),a)._round():j.y<a&&(j=new R(B.x+(a-B.y)/(j.y-B.y)*(j.x-B.x),a)._round()),B.x>=p&&j.x>=p||(B.x>=p?B=new R(p,B.y+(p-B.x)/(j.x-B.x)*(j.y-B.y))._round():j.x>=p&&(j=new R(p,B.y+(p-B.x)/(j.x-B.x)*(j.y-B.y))._round()),B.y>=_&&j.y>=_||(B.y>=_?B=new R(B.x+(_-B.y)/(j.y-B.y)*(j.x-B.x),_)._round():j.y>=_&&(j=new R(B.x+(_-B.y)/(j.y-B.y)*(j.x-B.x),_)._round()),L&&B.equals(L[L.length-1])||(L=[B],S.push(L)),L.push(j)))))}}return S}Mt("FeatureIndex",U2,{omit:["rawTileData","sourceLayerCoder"]});class Hu extends R{constructor(i,a,p,_){super(i,a),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new Hu(this.x,this.y,this.angle,this.segment)}}function q2(s,i,a,p,_){if(i.segment===void 0||a===0)return!0;let S=i,E=i.segment+1,T=0;for(;T>-a/2;){if(E--,E<0)return!1;T-=s[E].dist(S),S=s[E]}T+=s[E].dist(s[E+1]),E++;const L=[];let D=0;for(;T<a/2;){const B=s[E],j=s[E+1];if(!j)return!1;let W=s[E-1].angleTo(B)-B.angleTo(j);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:T,angleDelta:W}),D+=W;T-L[0].distance>p;)D-=L.shift().angleDelta;if(D>_)return!1;E++,T+=B.dist(j)}return!0}function H2(s){let i=0;for(let a=0;a<s.length-1;a++)i+=s[a].dist(s[a+1]);return i}function W2(s,i,a){return s?.6*i*a:0}function Z2(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function pR(s,i,a,p,_,S){const E=W2(a,_,S),T=Z2(a,p)*S;let L=0;const D=H2(s)/2;for(let B=0;B<s.length-1;B++){const j=s[B],W=s[B+1],ee=j.dist(W);if(L+ee>D){const re=(D-L)/ee,ae=sr.number(j.x,W.x,re),ge=sr.number(j.y,W.y,re),we=new Hu(ae,ge,W.angleTo(j),B);return we._round(),!E||q2(s,we,T,E,i)?we:void 0}L+=ee}}function mR(s,i,a,p,_,S,E,T,L){const D=W2(p,S,E),B=Z2(p,_),j=B*E,W=s[0].x===0||s[0].x===L||s[0].y===0||s[0].y===L;return i-j<i/4&&(i=j+i/4),X2(s,W?i/2*T%i:(B/2+2*S)*E*T%i,i,D,a,j,W,!1,L)}function X2(s,i,a,p,_,S,E,T,L){const D=S/2,B=H2(s);let j=0,W=i-a,ee=[];for(let re=0;re<s.length-1;re++){const ae=s[re],ge=s[re+1],we=ae.dist(ge),Fe=ge.angleTo(ae);for(;W+a<j+we;){W+=a;const Me=(W-j)/we,De=sr.number(ae.x,ge.x,Me),We=sr.number(ae.y,ge.y,Me);if(De>=0&&De<L&&We>=0&&We<L&&W-D>=0&&W+D<=B){const ot=new Hu(De,We,Fe,re);ot._round(),p&&!q2(s,ot,S,p,_)||ee.push(ot)}}j+=we}return T||ee.length||E||(ee=X2(s,j/2,a,p,_,S,E,!0,L)),ee}Mt("Anchor",Hu);const ad=Wo;function Y2(s,i,a,p){const _=[],S=s.image,E=S.pixelRatio,T=S.paddedRect.w-2*ad,L=S.paddedRect.h-2*ad;let D={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const B=S.stretchX||[[0,T]],j=S.stretchY||[[0,L]],W=(Qe,Bt)=>Qe+Bt[1]-Bt[0],ee=B.reduce(W,0),re=j.reduce(W,0),ae=T-ee,ge=L-re;let we=0,Fe=ee,Me=0,De=re,We=0,ot=ae,Et=0,Zt=ge;if(S.content&&p){const Qe=S.content,Bt=Qe[2]-Qe[0],zt=Qe[3]-Qe[1];(S.textFitWidth||S.textFitHeight)&&(D=k2(s)),we=ig(B,0,Qe[0]),Me=ig(j,0,Qe[1]),Fe=ig(B,Qe[0],Qe[2]),De=ig(j,Qe[1],Qe[3]),We=Qe[0]-we,Et=Qe[1]-Me,ot=Bt-Fe,Zt=zt-De}const kt=D.x1,xt=D.y1,Ot=D.x2-kt,Pt=D.y2-xt,Tt=(Qe,Bt,zt,tn)=>{const rr=og(Qe.stretch-we,Fe,Ot,kt),Jn=sg(Qe.fixed-We,ot,Qe.stretch,ee),bi=og(Bt.stretch-Me,De,Pt,xt),Qs=sg(Bt.fixed-Et,Zt,Bt.stretch,re),Vi=og(zt.stretch-we,Fe,Ot,kt),wi=sg(zt.fixed-We,ot,zt.stretch,ee),So=og(tn.stretch-Me,De,Pt,xt),Eo=sg(tn.fixed-Et,Zt,tn.stretch,re),Io=new R(rr,bi),Ur=new R(Vi,bi),ki=new R(Vi,So),so=new R(rr,So),Gi=new R(Jn/E,Qs/E),To=new R(wi/E,Eo/E),qi=i*Math.PI/180;if(qi){const Nn=Math.sin(qi),ar=Math.cos(qi),_r=[ar,-Nn,Nn,ar];Io._matMult(_r),Ur._matMult(_r),so._matMult(_r),ki._matMult(_r)}const Ts=Qe.stretch+Qe.fixed,Zo=Bt.stretch+Bt.fixed;return{tl:Io,tr:Ur,bl:so,br:ki,tex:{x:S.paddedRect.x+ad+Ts,y:S.paddedRect.y+ad+Zo,w:zt.stretch+zt.fixed-Ts,h:tn.stretch+tn.fixed-Zo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gi,pixelOffsetBR:To,minFontScaleX:ot/E/Ot,minFontScaleY:Zt/E/Pt,isSDF:a}};if(p&&(S.stretchX||S.stretchY)){const Qe=K2(B,ae,ee),Bt=K2(j,ge,re);for(let zt=0;zt<Qe.length-1;zt++){const tn=Qe[zt],rr=Qe[zt+1];for(let Jn=0;Jn<Bt.length-1;Jn++)_.push(Tt(tn,Bt[Jn],rr,Bt[Jn+1]))}}else _.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:L+1}));return _}function ig(s,i,a){let p=0;for(const _ of s)p+=Math.max(i,Math.min(a,_[1]))-Math.max(i,Math.min(a,_[0]));return p}function K2(s,i,a){const p=[{fixed:-ad,stretch:0}];for(const[_,S]of s){const E=p[p.length-1];p.push({fixed:_-E.stretch,stretch:E.stretch}),p.push({fixed:_-E.stretch,stretch:E.stretch+(S-_)})}return p.push({fixed:i+ad,stretch:a}),p}function og(s,i,a,p){return s/i*a+p}function sg(s,i,a,p){return s-i*a/p}class ag{constructor(i,a,p,_,S,E,T,L,D,B){var j;if(this.boxStartIndex=i.length,D){let W=E.top,ee=E.bottom;const re=E.collisionPadding;re&&(W-=re[1],ee+=re[3]);let ae=ee-W;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{const W=!((j=E.image)===null||j===void 0)&&j.content&&(E.image.textFitWidth||E.image.textFitHeight)?k2(E):{x1:E.left,y1:E.top,x2:E.right,y2:E.bottom};W.y1=W.y1*T-L[0],W.y2=W.y2*T+L[2],W.x1=W.x1*T-L[3],W.x2=W.x2*T+L[1];const ee=E.collisionPadding;if(ee&&(W.x1-=ee[0]*T,W.y1-=ee[1]*T,W.x2+=ee[2]*T,W.y2+=ee[3]*T),B){const re=new R(W.x1,W.y1),ae=new R(W.x2,W.y1),ge=new R(W.x1,W.y2),we=new R(W.x2,W.y2),Fe=B*Math.PI/180;re._rotate(Fe),ae._rotate(Fe),ge._rotate(Fe),we._rotate(Fe),W.x1=Math.min(re.x,ae.x,ge.x,we.x),W.x2=Math.max(re.x,ae.x,ge.x,we.x),W.y1=Math.min(re.y,ae.y,ge.y,we.y),W.y2=Math.max(re.y,ae.y,ge.y,we.y)}i.emplaceBack(a.x,a.y,W.x1,W.y1,W.x2,W.y2,p,_,S)}this.boxEndIndex=i.length}}class gR{constructor(i=[],a=(p,_)=>p<_?-1:p>_?1:0){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:p}=this,_=a[i];for(;i>0;){const S=i-1>>1,E=a[S];if(p(_,E)>=0)break;a[i]=E,i=S}a[i]=_}_down(i){const{data:a,compare:p}=this,_=this.length>>1,S=a[i];for(;i<_;){let E=1+(i<<1);const T=E+1;if(T<this.length&&p(a[T],a[E])<0&&(E=T),p(a[E],S)>=0)break;a[i]=a[E],i=E}a[i]=S}}function yR(s,i=1,a=!1){let p=1/0,_=1/0,S=-1/0,E=-1/0;const T=s[0];for(let ee=0;ee<T.length;ee++){const re=T[ee];(!ee||re.x<p)&&(p=re.x),(!ee||re.y<_)&&(_=re.y),(!ee||re.x>S)&&(S=re.x),(!ee||re.y>E)&&(E=re.y)}const L=Math.min(S-p,E-_);let D=L/2;const B=new gR([],vR);if(L===0)return new R(p,_);for(let ee=p;ee<S;ee+=L)for(let re=_;re<E;re+=L)B.push(new ld(ee+D,re+D,D,s));let j=function(ee){let re=0,ae=0,ge=0;const we=ee[0];for(let Fe=0,Me=we.length,De=Me-1;Fe<Me;De=Fe++){const We=we[Fe],ot=we[De],Et=We.x*ot.y-ot.x*We.y;ae+=(We.x+ot.x)*Et,ge+=(We.y+ot.y)*Et,re+=3*Et}return new ld(ae/re,ge/re,0,ee)}(s),W=B.length;for(;B.length;){const ee=B.pop();(ee.d>j.d||!j.d)&&(j=ee,a&&console.log("found best %d after %d probes",Math.round(1e4*ee.d)/1e4,W)),ee.max-j.d<=i||(D=ee.h/2,B.push(new ld(ee.p.x-D,ee.p.y-D,D,s)),B.push(new ld(ee.p.x+D,ee.p.y-D,D,s)),B.push(new ld(ee.p.x-D,ee.p.y+D,D,s)),B.push(new ld(ee.p.x+D,ee.p.y+D,D,s)),W+=4)}return a&&(console.log(`num probes: ${W}`),console.log(`best distance: ${j.d}`)),j.p}function vR(s,i){return i.max-s.max}function ld(s,i,a,p){this.p=new R(s,i),this.h=a,this.d=function(_,S){let E=!1,T=1/0;for(let L=0;L<S.length;L++){const D=S[L];for(let B=0,j=D.length,W=j-1;B<j;W=B++){const ee=D[B],re=D[W];ee.y>_.y!=re.y>_.y&&_.x<(re.x-ee.x)*(_.y-ee.y)/(re.y-ee.y)+ee.x&&(E=!E),T=Math.min(T,Nw(_,ee,re))}}return(E?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var ji;y.aq=void 0,(ji=y.aq||(y.aq={}))[ji.center=1]="center",ji[ji.left=2]="left",ji[ji.right=3]="right",ji[ji.top=4]="top",ji[ji.bottom=5]="bottom",ji[ji["top-left"]=6]="top-left",ji[ji["top-right"]=7]="top-right",ji[ji["bottom-left"]=8]="bottom-left",ji[ji["bottom-right"]=9]="bottom-right";const Wu=7,Y0=Number.POSITIVE_INFINITY;function J2(s,i){return i[1]!==Y0?function(a,p,_){let S=0,E=0;switch(p=Math.abs(p),_=Math.abs(_),a){case"top-right":case"top-left":case"top":E=_-Wu;break;case"bottom-right":case"bottom-left":case"bottom":E=-_+Wu}switch(a){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,E]}(s,i[0],i[1]):function(a,p){let _=0,S=0;p<0&&(p=0);const E=p/Math.SQRT2;switch(a){case"top-right":case"top-left":S=E-Wu;break;case"bottom-right":case"bottom-left":S=-E+Wu;break;case"bottom":S=-p+Wu;break;case"top":S=p-Wu}switch(a){case"top-right":case"bottom-right":_=-E;break;case"top-left":case"bottom-left":_=E;break;case"left":_=p;break;case"right":_=-p}return[_,S]}(s,i[0])}function Q2(s,i,a){var p;const _=s.layout,S=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(i,{},a);if(S){const T=S.values,L=[];for(let D=0;D<T.length;D+=2){const B=L[D]=T[D],j=T[D+1].map(W=>W*fi);B.startsWith("top")?j[1]-=Wu:B.startsWith("bottom")&&(j[1]+=Wu),L[D+1]=j}return new Tr(L)}const E=_.get("text-variable-anchor");if(E){let T;T=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(i,{},a)*fi,Y0]:_.get("text-offset").evaluate(i,{},a).map(D=>D*fi);const L=[];for(const D of E)L.push(D,J2(D,T));return new Tr(L)}return null}function K0(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _R(s,i,a,p,_,S,E,T,L,D,B){let j=S.textMaxSize.evaluate(i,{});j===void 0&&(j=E);const W=s.layers[0].layout,ee=W.get("icon-offset").evaluate(i,{},B),re=tk(a.horizontal),ae=E/24,ge=s.tilePixelRatio*ae,we=s.tilePixelRatio*j/24,Fe=s.tilePixelRatio*T,Me=s.tilePixelRatio*W.get("symbol-spacing"),De=W.get("text-padding")*s.tilePixelRatio,We=function(Qe,Bt,zt,tn=1){const rr=Qe.get("icon-padding").evaluate(Bt,{},zt),Jn=rr&&rr.values;return[Jn[0]*tn,Jn[1]*tn,Jn[2]*tn,Jn[3]*tn]}(W,i,B,s.tilePixelRatio),ot=W.get("text-max-angle")/180*Math.PI,Et=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",Zt=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",kt=W.get("symbol-placement"),xt=Me/2,Ot=W.get("icon-text-fit");let Pt;p&&Ot!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(Pt=S2(p,a.vertical,Ot,W.get("icon-text-fit-padding"),ee,ae)),re&&(p=S2(p,re,Ot,W.get("icon-text-fit-padding"),ee,ae)));const Tt=(Qe,Bt)=>{Bt.x<0||Bt.x>=ri||Bt.y<0||Bt.y>=ri||function(zt,tn,rr,Jn,bi,Qs,Vi,wi,So,Eo,Io,Ur,ki,so,Gi,To,qi,Ts,Zo,Nn,ar,_r,cs,zr,ud){const fl=zt.addToLineVertexArray(tn,rr);let pl,ea,Cs,Ri,Kl=0,sp=0,ok=0,sk=0,o_=-1,s_=-1;const Jl={};let ak=Xh("");if(zt.allowVerticalPlacement&&Jn.vertical){const ao=wi.layout.get("text-rotate").evaluate(ar,{},zr)+90;Cs=new ag(So,tn,Eo,Io,Ur,Jn.vertical,ki,so,Gi,ao),Vi&&(Ri=new ag(So,tn,Eo,Io,Ur,Vi,qi,Ts,Gi,ao))}if(bi){const ao=wi.layout.get("icon-rotate").evaluate(ar,{}),Ms=wi.layout.get("icon-text-fit")!=="none",eh=Y2(bi,ao,cs,Ms),Aa=Vi?Y2(Vi,ao,cs,Ms):void 0;ea=new ag(So,tn,Eo,Io,Ur,bi,qi,Ts,!1,ao),Kl=4*eh.length;const th=zt.iconSizeData;let ml=null;th.kind==="source"?(ml=[dl*wi.layout.get("icon-size").evaluate(ar,{})],ml[0]>Gu&&at(`${zt.layerIds[0]}: Value for "icon-size" is >= ${tp}. Reduce your "icon-size".`)):th.kind==="composite"&&(ml=[dl*_r.compositeIconSizes[0].evaluate(ar,{},zr),dl*_r.compositeIconSizes[1].evaluate(ar,{},zr)],(ml[0]>Gu||ml[1]>Gu)&&at(`${zt.layerIds[0]}: Value for "icon-size" is >= ${tp}. Reduce your "icon-size".`)),zt.addSymbols(zt.icon,eh,ml,Nn,Zo,ar,y.ah.none,tn,fl.lineStartIndex,fl.lineLength,-1,zr),o_=zt.icon.placedSymbolArray.length-1,Aa&&(sp=4*Aa.length,zt.addSymbols(zt.icon,Aa,ml,Nn,Zo,ar,y.ah.vertical,tn,fl.lineStartIndex,fl.lineLength,-1,zr),s_=zt.icon.placedSymbolArray.length-1)}const lk=Object.keys(Jn.horizontal);for(const ao of lk){const Ms=Jn.horizontal[ao];if(!pl){ak=Xh(Ms.text);const Aa=wi.layout.get("text-rotate").evaluate(ar,{},zr);pl=new ag(So,tn,Eo,Io,Ur,Ms,ki,so,Gi,Aa)}const eh=Ms.positionedLines.length===1;if(ok+=ek(zt,tn,Ms,Qs,wi,Gi,ar,To,fl,Jn.vertical?y.ah.horizontal:y.ah.horizontalOnly,eh?lk:[ao],Jl,o_,_r,zr),eh)break}Jn.vertical&&(sk+=ek(zt,tn,Jn.vertical,Qs,wi,Gi,ar,To,fl,y.ah.vertical,["vertical"],Jl,s_,_r,zr));const wR=pl?pl.boxStartIndex:zt.collisionBoxArray.length,kR=pl?pl.boxEndIndex:zt.collisionBoxArray.length,SR=Cs?Cs.boxStartIndex:zt.collisionBoxArray.length,ER=Cs?Cs.boxEndIndex:zt.collisionBoxArray.length,IR=ea?ea.boxStartIndex:zt.collisionBoxArray.length,TR=ea?ea.boxEndIndex:zt.collisionBoxArray.length,CR=Ri?Ri.boxStartIndex:zt.collisionBoxArray.length,MR=Ri?Ri.boxEndIndex:zt.collisionBoxArray.length;let Pa=-1;const ug=(ao,Ms)=>ao&&ao.circleDiameter?Math.max(ao.circleDiameter,Ms):Ms;Pa=ug(pl,Pa),Pa=ug(Cs,Pa),Pa=ug(ea,Pa),Pa=ug(Ri,Pa);const uk=Pa>-1?1:0;uk&&(Pa*=ud/fi),zt.glyphOffsetArray.length>=sd.MAX_GLYPHS&&at("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&zt.addToSortKeyRanges(zt.symbolInstances.length,ar.sortKey);const LR=Q2(wi,ar,zr),[PR,AR]=function(ao,Ms){const eh=ao.length,Aa=Ms==null?void 0:Ms.values;if((Aa==null?void 0:Aa.length)>0)for(let th=0;th<Aa.length;th+=2){const ml=Aa[th+1];ao.emplaceBack(y.aq[Aa[th]],ml[0],ml[1])}return[eh,ao.length]}(zt.textAnchorOffsets,LR);zt.symbolInstances.emplaceBack(tn.x,tn.y,Jl.right>=0?Jl.right:-1,Jl.center>=0?Jl.center:-1,Jl.left>=0?Jl.left:-1,Jl.vertical||-1,o_,s_,ak,wR,kR,SR,ER,IR,TR,CR,MR,Eo,ok,sk,Kl,sp,uk,0,ki,Pa,PR,AR)}(s,Bt,Qe,a,p,_,Pt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,ge,[De,De,De,De],Et,L,Fe,We,Zt,ee,i,S,D,B,E)};if(kt==="line")for(const Qe of G2(i.geometry,0,0,ri,ri)){const Bt=mR(Qe,Me,ot,a.vertical||re,p,24,we,s.overscaling,ri);for(const zt of Bt)re&&xR(s,re.text,xt,zt)||Tt(Qe,zt)}else if(kt==="line-center"){for(const Qe of i.geometry)if(Qe.length>1){const Bt=pR(Qe,ot,a.vertical||re,p,24,we);Bt&&Tt(Qe,Bt)}}else if(i.type==="Polygon")for(const Qe of wu(i.geometry,0)){const Bt=yR(Qe,16);Tt(Qe[0],new Hu(Bt.x,Bt.y,0))}else if(i.type==="LineString")for(const Qe of i.geometry)Tt(Qe,new Hu(Qe[0].x,Qe[0].y,0));else if(i.type==="Point")for(const Qe of i.geometry)for(const Bt of Qe)Tt([Bt],new Hu(Bt.x,Bt.y,0))}function ek(s,i,a,p,_,S,E,T,L,D,B,j,W,ee,re){const ae=function(Fe,Me,De,We,ot,Et,Zt,kt){const xt=We.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,Ot=[];for(const Pt of Me.positionedLines)for(const Tt of Pt.positionedGlyphs){if(!Tt.rect)continue;const Qe=Tt.rect||{};let Bt=g2+1,zt=!0,tn=1,rr=0;const Jn=(ot||kt)&&Tt.vertical,bi=Tt.metrics.advance*Tt.scale/2;if(kt&&Me.verticalizable&&(rr=Pt.lineOffset/2-(Tt.imageName?-(fi-Tt.metrics.width*Tt.scale)/2:(Tt.scale-1)*fi)),Tt.imageName){const Nn=Zt[Tt.imageName];zt=Nn.sdf,tn=Nn.pixelRatio,Bt=Wo/tn}const Qs=ot?[Tt.x+bi,Tt.y]:[0,0];let Vi=ot?[0,0]:[Tt.x+bi+De[0],Tt.y+De[1]-rr],wi=[0,0];Jn&&(wi=Vi,Vi=[0,0]);const So=Tt.metrics.isDoubleResolution?2:1,Eo=(Tt.metrics.left-Bt)*Tt.scale-bi+Vi[0],Io=(-Tt.metrics.top-Bt)*Tt.scale+Vi[1],Ur=Eo+Qe.w/So*Tt.scale/tn,ki=Io+Qe.h/So*Tt.scale/tn,so=new R(Eo,Io),Gi=new R(Ur,Io),To=new R(Eo,ki),qi=new R(Ur,ki);if(Jn){const Nn=new R(-bi,bi-Qf),ar=-Math.PI/2,_r=fi/2-bi,cs=new R(5-Qf-_r,-(Tt.imageName?_r:0)),zr=new R(...wi);so._rotateAround(ar,Nn)._add(cs)._add(zr),Gi._rotateAround(ar,Nn)._add(cs)._add(zr),To._rotateAround(ar,Nn)._add(cs)._add(zr),qi._rotateAround(ar,Nn)._add(cs)._add(zr)}if(xt){const Nn=Math.sin(xt),ar=Math.cos(xt),_r=[ar,-Nn,Nn,ar];so._matMult(_r),Gi._matMult(_r),To._matMult(_r),qi._matMult(_r)}const Ts=new R(0,0),Zo=new R(0,0);Ot.push({tl:so,tr:Gi,bl:To,br:qi,tex:Qe,writingMode:Me.writingMode,glyphOffset:Qs,sectionIndex:Tt.sectionIndex,isSDF:zt,pixelOffsetTL:Ts,pixelOffsetBR:Zo,minFontScaleX:0,minFontScaleY:0})}return Ot}(0,a,T,_,S,E,p,s.allowVerticalPlacement),ge=s.textSizeData;let we=null;ge.kind==="source"?(we=[dl*_.layout.get("text-size").evaluate(E,{})],we[0]>Gu&&at(`${s.layerIds[0]}: Value for "text-size" is >= ${tp}. Reduce your "text-size".`)):ge.kind==="composite"&&(we=[dl*ee.compositeTextSizes[0].evaluate(E,{},re),dl*ee.compositeTextSizes[1].evaluate(E,{},re)],(we[0]>Gu||we[1]>Gu)&&at(`${s.layerIds[0]}: Value for "text-size" is >= ${tp}. Reduce your "text-size".`)),s.addSymbols(s.text,ae,we,T,S,E,D,i,L.lineStartIndex,L.lineLength,W,re);for(const Fe of B)j[Fe]=s.text.placedSymbolArray.length-1;return 4*ae.length}function tk(s){for(const i in s)return s[i];return null}function xR(s,i,a,p){const _=s.compareText;if(i in _){const S=_[i];for(let E=S.length-1;E>=0;E--)if(p.dist(S[E])<a)return!0}else _[i]=[];return _[i].push(p),!1}const nk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class J0{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,p]=new Uint8Array(i,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=nk[15&p];if(!S)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new J0(T,E,S,i)}constructor(i,a=64,p=Float64Array,_){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const S=nk.indexOf(this.ArrayType),E=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-T%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+L,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+E+T+L),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+L,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=i)}add(i,a){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=a,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Q0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,a,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:E,nodeSize:T}=this,L=[0,S.length-1,0],D=[];for(;L.length;){const B=L.pop()||0,j=L.pop()||0,W=L.pop()||0;if(j-W<=T){for(let ge=W;ge<=j;ge++){const we=E[2*ge],Fe=E[2*ge+1];we>=i&&we<=p&&Fe>=a&&Fe<=_&&D.push(S[ge])}continue}const ee=W+j>>1,re=E[2*ee],ae=E[2*ee+1];re>=i&&re<=p&&ae>=a&&ae<=_&&D.push(S[ee]),(B===0?i<=re:a<=ae)&&(L.push(W),L.push(ee-1),L.push(1-B)),(B===0?p>=re:_>=ae)&&(L.push(ee+1),L.push(j),L.push(1-B))}return D}within(i,a,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:E}=this,T=[0,_.length-1,0],L=[],D=p*p;for(;T.length;){const B=T.pop()||0,j=T.pop()||0,W=T.pop()||0;if(j-W<=E){for(let ge=W;ge<=j;ge++)ik(S[2*ge],S[2*ge+1],i,a)<=D&&L.push(_[ge]);continue}const ee=W+j>>1,re=S[2*ee],ae=S[2*ee+1];ik(re,ae,i,a)<=D&&L.push(_[ee]),(B===0?i-p<=re:a-p<=ae)&&(T.push(W),T.push(ee-1),T.push(1-B)),(B===0?i+p>=re:a+p>=ae)&&(T.push(ee+1),T.push(j),T.push(1-B))}return L}}function Q0(s,i,a,p,_,S){if(_-p<=a)return;const E=p+_>>1;rk(s,i,E,p,_,S),Q0(s,i,a,p,E-1,1-S),Q0(s,i,a,E+1,_,1-S)}function rk(s,i,a,p,_,S){for(;_>p;){if(_-p>600){const D=_-p+1,B=a-p+1,j=Math.log(D),W=.5*Math.exp(2*j/3),ee=.5*Math.sqrt(j*W*(D-W)/D)*(B-D/2<0?-1:1);rk(s,i,a,Math.max(p,Math.floor(a-B*W/D+ee)),Math.min(_,Math.floor(a+(D-B)*W/D+ee)),S)}const E=i[2*a+S];let T=p,L=_;for(ip(s,i,p,a),i[2*_+S]>E&&ip(s,i,p,_);T<L;){for(ip(s,i,T,L),T++,L--;i[2*T+S]<E;)T++;for(;i[2*L+S]>E;)L--}i[2*p+S]===E?ip(s,i,p,L):(L++,ip(s,i,L,_)),L<=a&&(p=L+1),a<=L&&(_=L-1)}}function ip(s,i,a,p){e_(s,a,p),e_(i,2*a,2*p),e_(i,2*a+1,2*p+1)}function e_(s,i,a){const p=s[i];s[i]=s[a],s[a]=p}function ik(s,i,a,p){const _=s-a,S=i-p;return _*_+S*S}var t_;y.bg=void 0,(t_=y.bg||(y.bg={})).create="create",t_.load="load",t_.fullLoad="fullLoad";let lg=null,op=[];const n_=1e3/60,r_="loadTime",i_="fullLoadTime",bR={mark(s){performance.mark(s)},frame(s){const i=s;lg!=null&&op.push(i-lg),lg=i},clearMetrics(){lg=null,op=[],performance.clearMeasures(r_),performance.clearMeasures(i_);for(const s in y.bg)performance.clearMarks(y.bg[s])},getPerformanceMetrics(){performance.measure(r_,y.bg.create,y.bg.load),performance.measure(i_,y.bg.create,y.bg.fullLoad);const s=performance.getEntriesByName(r_)[0].duration,i=performance.getEntriesByName(i_)[0].duration,a=op.length,p=1/(op.reduce((S,E)=>S+E,0)/a/1e3),_=op.filter(S=>S>n_).reduce((S,E)=>S+(E-n_)/n_,0);return{loadTime:s,fullLoadTime:i,fps:p,percentDroppedFrames:_/(a+_)*100,totalFrames:a}}};y.$=class extends G{},y.A=ed,y.B=d0,y.C=function(s){if(ut==null){const i=s.navigator?s.navigator.userAgent:null;ut=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ut},y.D=Rt,y.E=Jt,y.F=class{constructor(s,i){this.target=s,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new dR(()=>this.process()),this.subscription=function(a,p,_,S){return a.addEventListener(p,_,!1),{unsubscribe:()=>{a.removeEventListener(p,_,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=rt(self)?s:window}registerMessageHandler(s,i){this.messageHandlers[s]=i}sendAsync(s,i){return new Promise((a,p)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:a,reject:p},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];const T={id:_,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},{once:!0});const S=[],E=Object.assign(Object.assign({},s),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Au(s.data,S)});this.target.postMessage(E,{transfer:S})})}receive(s){const i=s.data,a=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[a];const p=this.abortControllers[a];return delete this.abortControllers[a],void(p&&p.abort())}if(rt(self)||i.mustQueue)return this.tasks[a]=i,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,i)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),i=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(s,i)}processTask(s,i){return d(this,void 0,void 0,function*(){if(i.type==="<response>"){const _=this.resolveRejects[s];return delete this.resolveRejects[s],_?void(i.error?_.reject(Ru(i.error)):_.resolve(Ru(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=Ru(i.data),p=new AbortController;this.abortControllers[s]=p;try{const _=yield this.messageHandlers[i.type](i.sourceMapId,a,p);this.completeTask(s,null,_)}catch(_){this.completeTask(s,_)}})}completeTask(s,i,a){const p=[];delete this.abortControllers[s];const _={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Au(i):null,data:Au(a,p)};this.target.postMessage(_,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},y.G=Zn,y.H=function(){var s=new ed(16);return ed!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},y.I=B0,y.J=function(s,i,a){var p,_,S,E,T,L,D,B,j,W,ee,re,ae=a[0],ge=a[1],we=a[2];return i===s?(s[12]=i[0]*ae+i[4]*ge+i[8]*we+i[12],s[13]=i[1]*ae+i[5]*ge+i[9]*we+i[13],s[14]=i[2]*ae+i[6]*ge+i[10]*we+i[14],s[15]=i[3]*ae+i[7]*ge+i[11]*we+i[15]):(_=i[1],S=i[2],E=i[3],T=i[4],L=i[5],D=i[6],B=i[7],j=i[8],W=i[9],ee=i[10],re=i[11],s[0]=p=i[0],s[1]=_,s[2]=S,s[3]=E,s[4]=T,s[5]=L,s[6]=D,s[7]=B,s[8]=j,s[9]=W,s[10]=ee,s[11]=re,s[12]=p*ae+T*ge+j*we+i[12],s[13]=_*ae+L*ge+W*we+i[13],s[14]=S*ae+D*ge+ee*we+i[14],s[15]=E*ae+B*ge+re*we+i[15]),s},y.K=function(s,i,a){var p=a[0],_=a[1],S=a[2];return s[0]=i[0]*p,s[1]=i[1]*p,s[2]=i[2]*p,s[3]=i[3]*p,s[4]=i[4]*_,s[5]=i[5]*_,s[6]=i[6]*_,s[7]=i[7]*_,s[8]=i[8]*S,s[9]=i[9]*S,s[10]=i[10]*S,s[11]=i[11]*S,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},y.L=Fw,y.M=function(s,i){const a={};for(let p=0;p<i.length;p++){const _=i[p];_ in s&&(a[_]=s[_])}return a},y.N=qu,y.O=R2,y.P=R,y.Q=N2,y.R=Es,y.S=Is,y.T=Gh,y.U=Y,y.V=X,y.W=ct,y.X=ri,y.Y=C,y.Z=np,y._=d,y.a=Ct,y.a$=function(s,i){var a=s[0],p=s[1],_=s[2],S=s[3],E=s[4],T=s[5],L=s[6],D=s[7],B=s[8],j=s[9],W=s[10],ee=s[11],re=s[12],ae=s[13],ge=s[14],we=s[15],Fe=i[0],Me=i[1],De=i[2],We=i[3],ot=i[4],Et=i[5],Zt=i[6],kt=i[7],xt=i[8],Ot=i[9],Pt=i[10],Tt=i[11],Qe=i[12],Bt=i[13],zt=i[14],tn=i[15];return Math.abs(a-Fe)<=ko*Math.max(1,Math.abs(a),Math.abs(Fe))&&Math.abs(p-Me)<=ko*Math.max(1,Math.abs(p),Math.abs(Me))&&Math.abs(_-De)<=ko*Math.max(1,Math.abs(_),Math.abs(De))&&Math.abs(S-We)<=ko*Math.max(1,Math.abs(S),Math.abs(We))&&Math.abs(E-ot)<=ko*Math.max(1,Math.abs(E),Math.abs(ot))&&Math.abs(T-Et)<=ko*Math.max(1,Math.abs(T),Math.abs(Et))&&Math.abs(L-Zt)<=ko*Math.max(1,Math.abs(L),Math.abs(Zt))&&Math.abs(D-kt)<=ko*Math.max(1,Math.abs(D),Math.abs(kt))&&Math.abs(B-xt)<=ko*Math.max(1,Math.abs(B),Math.abs(xt))&&Math.abs(j-Ot)<=ko*Math.max(1,Math.abs(j),Math.abs(Ot))&&Math.abs(W-Pt)<=ko*Math.max(1,Math.abs(W),Math.abs(Pt))&&Math.abs(ee-Tt)<=ko*Math.max(1,Math.abs(ee),Math.abs(Tt))&&Math.abs(re-Qe)<=ko*Math.max(1,Math.abs(re),Math.abs(Qe))&&Math.abs(ae-Bt)<=ko*Math.max(1,Math.abs(ae),Math.abs(Bt))&&Math.abs(ge-zt)<=ko*Math.max(1,Math.abs(ge),Math.abs(zt))&&Math.abs(we-tn)<=ko*Math.max(1,Math.abs(we),Math.abs(tn))},y.a0=bn,y.a1=X0,y.a2=He,y.a3=s=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(a=>{i.onloadstart=()=>{a(i)};for(const p of s){const _=window.document.createElement("source");mn(p)||(i.crossOrigin="Anonymous"),_.src=p,i.appendChild(_)}})},y.a4=function(){return Ie++},y.a5=St,y.a6=sd,y.a7=pt,y.a8=Jc,y.a9=$2,y.aA=function(s){if(s.type==="custom")return new hR(s);switch(s.type){case"background":return new lR(s);case"circle":return new XP(s);case"fill":return new dA(s);case"fill-extrusion":return new TA(s);case"heatmap":return new KP(s);case"hillshade":return new QP(s);case"line":return new zA(s);case"raster":return new cR(s);case"symbol":return new rg(s)}},y.aB=Ze,y.aC=function(s,i){if(!s)return[{command:"setStyle",args:[i]}];let a=[];try{if(!Xe(s.version,i.version))return[{command:"setStyle",args:[i]}];Xe(s.center,i.center)||a.push({command:"setCenter",args:[i.center]}),Xe(s.zoom,i.zoom)||a.push({command:"setZoom",args:[i.zoom]}),Xe(s.bearing,i.bearing)||a.push({command:"setBearing",args:[i.bearing]}),Xe(s.pitch,i.pitch)||a.push({command:"setPitch",args:[i.pitch]}),Xe(s.sprite,i.sprite)||a.push({command:"setSprite",args:[i.sprite]}),Xe(s.glyphs,i.glyphs)||a.push({command:"setGlyphs",args:[i.glyphs]}),Xe(s.transition,i.transition)||a.push({command:"setTransition",args:[i.transition]}),Xe(s.light,i.light)||a.push({command:"setLight",args:[i.light]}),Xe(s.terrain,i.terrain)||a.push({command:"setTerrain",args:[i.terrain]}),Xe(s.sky,i.sky)||a.push({command:"setSky",args:[i.sky]}),Xe(s.projection,i.projection)||a.push({command:"setProjection",args:[i.projection]});const p={},_=[];(function(E,T,L,D){let B;for(B in T=T||{},E=E||{})Object.prototype.hasOwnProperty.call(E,B)&&(Object.prototype.hasOwnProperty.call(T,B)||kr(B,L,D));for(B in T)Object.prototype.hasOwnProperty.call(T,B)&&(Object.prototype.hasOwnProperty.call(E,B)?Xe(E[B],T[B])||(E[B].type==="geojson"&&T[B].type==="geojson"&&Wt(E,T,B)?En(L,{command:"setGeoJSONSourceData",args:[B,T[B].data]}):vi(B,T,L,D)):li(B,T,L))})(s.sources,i.sources,_,p);const S=[];s.layers&&s.layers.forEach(E=>{"source"in E&&p[E.source]?a.push({command:"removeLayer",args:[E.id]}):S.push(E)}),a=a.concat(_),function(E,T,L){T=T||[];const D=(E=E||[]).map(qr),B=T.map(qr),j=E.reduce(Qi,{}),W=T.reduce(Qi,{}),ee=D.slice(),re=Object.create(null);let ae,ge,we,Fe,Me;for(let De=0,We=0;De<D.length;De++)ae=D[De],Object.prototype.hasOwnProperty.call(W,ae)?We++:(En(L,{command:"removeLayer",args:[ae]}),ee.splice(ee.indexOf(ae,We),1));for(let De=0,We=0;De<B.length;De++)ae=B[B.length-1-De],ee[ee.length-1-De]!==ae&&(Object.prototype.hasOwnProperty.call(j,ae)?(En(L,{command:"removeLayer",args:[ae]}),ee.splice(ee.lastIndexOf(ae,ee.length-We),1)):We++,Fe=ee[ee.length-De],En(L,{command:"addLayer",args:[W[ae],Fe]}),ee.splice(ee.length-De,0,ae),re[ae]=!0);for(let De=0;De<B.length;De++)if(ae=B[De],ge=j[ae],we=W[ae],!re[ae]&&!Xe(ge,we))if(Xe(ge.source,we.source)&&Xe(ge["source-layer"],we["source-layer"])&&Xe(ge.type,we.type)){for(Me in dr(ge.layout,we.layout,L,ae,null,"setLayoutProperty"),dr(ge.paint,we.paint,L,ae,null,"setPaintProperty"),Xe(ge.filter,we.filter)||En(L,{command:"setFilter",args:[ae,we.filter]}),Xe(ge.minzoom,we.minzoom)&&Xe(ge.maxzoom,we.maxzoom)||En(L,{command:"setLayerZoomRange",args:[ae,we.minzoom,we.maxzoom]}),ge)Object.prototype.hasOwnProperty.call(ge,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?dr(ge[Me],we[Me],L,ae,Me.slice(6),"setPaintProperty"):Xe(ge[Me],we[Me])||En(L,{command:"setLayerProperty",args:[ae,Me,we[Me]]}));for(Me in we)Object.prototype.hasOwnProperty.call(we,Me)&&!Object.prototype.hasOwnProperty.call(ge,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?dr(ge[Me],we[Me],L,ae,Me.slice(6),"setPaintProperty"):Xe(ge[Me],we[Me])||En(L,{command:"setLayerProperty",args:[ae,Me,we[Me]]}))}else En(L,{command:"removeLayer",args:[ae]}),Fe=ee[ee.lastIndexOf(ae)+1],En(L,{command:"addLayer",args:[we,Fe]})}(S,i.layers,a)}catch(p){console.warn("Unable to compute style diff:",p),a=[{command:"setStyle",args:[i]}]}return a},y.aD=function(s){const i=[],a=s.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},y.aE=function s(i,a){if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(let p=0;p<i.length;p++)if(!s(i[p],a[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&a!==null){if(typeof a!="object"||Object.keys(i).length!==Object.keys(a).length)return!1;for(const p in i)if(!s(i[p],a[p]))return!1;return!0}return i===a},y.aF=Le,y.aG=$e,y.aH=class extends Xc{constructor(s,i){super(s,i),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},y.aI=Gm,y.aJ=class extends Xc{constructor(s,i){super(s,i),this.current=UP}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let i=1;i<16;i++)if(s[i]!==this.current[i]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},y.aK=Tw,y.aL=Cw,y.aM=In,y.aN=class extends Xc{constructor(s,i){super(s,i),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},y.aO=class extends Xc{constructor(s,i){super(s,i),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},y.aP=function(s,i,a,p,_,S,E){var T=1/(i-a),L=1/(p-_),D=1/(S-E);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*L,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*D,s[11]=0,s[12]=(i+a)*T,s[13]=(_+p)*L,s[14]=(E+S)*D,s[15]=1,s},y.aQ=ZP,y.aR=class extends Pe{},y.aS=BA,y.aT=class extends Ue{},y.aU=T0,y.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},y.aW=Vw,y.aX=$i,y.aY=Ss,y.aZ=class extends Nt{},y.a_=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]&&s[4]===i[4]&&s[5]===i[5]&&s[6]===i[6]&&s[7]===i[7]&&s[8]===i[8]&&s[9]===i[9]&&s[10]===i[10]&&s[11]===i[11]&&s[12]===i[12]&&s[13]===i[13]&&s[14]===i[14]&&s[15]===i[15]},y.aa=function(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,p,_,S)=>{const E=_||S;return i[p]=!E||E.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i},y.ab=function(s,i){const a=[];for(const p in s)p in i||a.push(p);return a},y.ac=he,y.ad=function(s,i,a){var p=Math.sin(a),_=Math.cos(a),S=i[0],E=i[1],T=i[2],L=i[3],D=i[4],B=i[5],j=i[6],W=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=S*_+D*p,s[1]=E*_+B*p,s[2]=T*_+j*p,s[3]=L*_+W*p,s[4]=D*_-S*p,s[5]=B*_-E*p,s[6]=j*_-T*p,s[7]=W*_-L*p,s},y.ae=function(s){var i=new ed(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},y.af=Zm,y.ag=function(s,i){let a=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:E}=s,T=_?he(ui.interpolationFactor(_,i,S,E),0,1):0;s.kind==="camera"?p=sr.number(s.minSize,s.maxSize,T):a=T}return{uSizeT:a,uSize:p}},y.ai=function(s,{uSize:i,uSizeT:a},{lowerSize:p,upperSize:_}){return s.kind==="source"?p/dl:s.kind==="composite"?sr.number(p/dl,_/dl,a):i},y.aj=V0,y.ak=function(s,i,a,p){const _=i.y-s.y,S=i.x-s.x,E=p.y-a.y,T=p.x-a.x,L=E*S-T*_;if(L===0)return null;const D=(T*(s.y-a.y)-E*(s.x-a.x))/L;return new R(s.x+D*S,s.y+D*_)},y.al=G2,y.am=Aw,y.an=S0,y.ao=function(s){let i=1/0,a=1/0,p=-1/0,_=-1/0;for(const S of s)i=Math.min(i,S.x),a=Math.min(a,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return[i,a,p,_]},y.ap=fi,y.ar=j0,y.as=function(s,i){var a=i[0],p=i[1],_=i[2],S=i[3],E=i[4],T=i[5],L=i[6],D=i[7],B=i[8],j=i[9],W=i[10],ee=i[11],re=i[12],ae=i[13],ge=i[14],we=i[15],Fe=a*T-p*E,Me=a*L-_*E,De=a*D-S*E,We=p*L-_*T,ot=p*D-S*T,Et=_*D-S*L,Zt=B*ae-j*re,kt=B*ge-W*re,xt=B*we-ee*re,Ot=j*ge-W*ae,Pt=j*we-ee*ae,Tt=W*we-ee*ge,Qe=Fe*Tt-Me*Pt+De*Ot+We*xt-ot*kt+Et*Zt;return Qe?(s[0]=(T*Tt-L*Pt+D*Ot)*(Qe=1/Qe),s[1]=(_*Pt-p*Tt-S*Ot)*Qe,s[2]=(ae*Et-ge*ot+we*We)*Qe,s[3]=(W*ot-j*Et-ee*We)*Qe,s[4]=(L*xt-E*Tt-D*kt)*Qe,s[5]=(a*Tt-_*xt+S*kt)*Qe,s[6]=(ge*De-re*Et-we*Me)*Qe,s[7]=(B*Et-W*De+ee*Me)*Qe,s[8]=(E*Pt-T*xt+D*Zt)*Qe,s[9]=(p*xt-a*Pt-S*Zt)*Qe,s[10]=(re*ot-ae*De+we*Fe)*Qe,s[11]=(j*De-B*ot-ee*Fe)*Qe,s[12]=(T*kt-E*Ot-L*Zt)*Qe,s[13]=(a*Ot-p*kt+_*Zt)*Qe,s[14]=(ae*Me-re*We-ge*Fe)*Qe,s[15]=(B*We-j*Me+W*Fe)*Qe,s):null},y.at=K0,y.au=U0,y.av=J0,y.aw=function(){const s={},i=Ve.$version;for(const a in Ve.$root){const p=Ve.$root[a];if(p.required){let _=null;_=a==="version"?i:p.type==="array"?[]:{},_!=null&&(s[a]=_)}}return s},y.ax=Df,y.ay=Be,y.az=function(s){s=s.slice();const i=Object.create(null);for(let a=0;a<s.length;a++)i[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=Ln(s[a],i[s[a].ref]));return s},y.b=wt,y.b0=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},y.b1=function(s,i,a){return s[0]=i[0]*a[0],s[1]=i[1]*a[1],s[2]=i[2]*a[2],s[3]=i[3]*a[3],s},y.b2=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3]*i[3]},y.b3=_e,y.b4=O2,y.b5=z2,y.b6=function(s,i,a,p,_){var S,E=1/Math.tan(i/2);return s[0]=E/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,_!=null&&_!==1/0?(s[10]=(_+p)*(S=1/(p-_)),s[14]=2*_*p*S):(s[10]=-1,s[14]=-2*p),s},y.b7=function(s,i,a){var p=Math.sin(a),_=Math.cos(a),S=i[4],E=i[5],T=i[6],L=i[7],D=i[8],B=i[9],j=i[10],W=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=S*_+D*p,s[5]=E*_+B*p,s[6]=T*_+j*p,s[7]=L*_+W*p,s[8]=D*_-S*p,s[9]=B*_-E*p,s[10]=j*_-T*p,s[11]=W*_-L*p,s},y.b8=Q,y.b9=ie,y.bA=u2,y.bB=function(s){return s.message===Ut},y.bC=I,y.bD=qo,y.ba=function(s){return s*Math.PI/180},y.bb=function(s,i){const{x:a,y:p}=np.fromLngLat(i);return!(s<0||s>25||p<0||p>=1||a<0||a>=1)},y.bc=function(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},y.bd=class extends ${},y.be=W0,y.bf=bR,y.bh=nr,y.bi=function(s,i){Ct.REGISTERED_PROTOCOLS[s]=i},y.bj=function(s){delete Ct.REGISTERED_PROTOCOLS[s]},y.bk=function(s,i){const a={};for(let _=0;_<s.length;_++){const S=i&&i[s[_].id]||bo(s[_]);i&&(i[s[_].id]=S);let E=a[S];E||(E=a[S]=[]),E.push(s[_])}const p=[];for(const _ in a)p.push(a[_]);return p},y.bl=Mt,y.bm=B2,y.bn=U2,y.bo=v2,y.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=ri/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const i=s.bucket.layers[0],a=i.layout,p=i._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new mr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=s.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new mr(D),s.canonical),p["text-size"].possiblyEvaluate(new mr(B),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=s.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new mr(D),s.canonical),p["icon-size"].possiblyEvaluate(new mr(B),s.canonical)]}const S=a.get("text-line-height")*fi,E=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",T=a.get("text-keep-upright"),L=a.get("text-size");for(const D of s.bucket.features){const B=a.get("text-font").evaluate(D,{},s.canonical).join(","),j=L.evaluate(D,{},s.canonical),W=_.layoutTextSize.evaluate(D,{},s.canonical),ee=_.layoutIconSize.evaluate(D,{},s.canonical),re={horizontal:{},vertical:void 0},ae=D.text;let ge,we=[0,0];if(ae){const De=ae.toString(),We=a.get("text-letter-spacing").evaluate(D,{},s.canonical)*fi,ot=f0(De)?We:0,Et=a.get("text-anchor").evaluate(D,{},s.canonical),Zt=Q2(i,D,s.canonical);if(!Zt){const Pt=a.get("text-radial-offset").evaluate(D,{},s.canonical);we=Pt?J2(Et,[Pt*fi,Y0]):a.get("text-offset").evaluate(D,{},s.canonical).map(Tt=>Tt*fi)}let kt=E?"center":a.get("text-justify").evaluate(D,{},s.canonical);const xt=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(D,{},s.canonical)*fi:1/0,Ot=()=>{s.bucket.allowVerticalPlacement&&Of(De)&&(re.vertical=eg(ae,s.glyphMap,s.glyphPositions,s.imagePositions,B,xt,S,Et,"left",ot,we,y.ah.vertical,!0,W,j))};if(!E&&Zt){const Pt=new Set;if(kt==="auto")for(let Qe=0;Qe<Zt.values.length;Qe+=2)Pt.add(K0(Zt.values[Qe]));else Pt.add(kt);let Tt=!1;for(const Qe of Pt)if(!re.horizontal[Qe])if(Tt)re.horizontal[Qe]=re.horizontal[0];else{const Bt=eg(ae,s.glyphMap,s.glyphPositions,s.imagePositions,B,xt,S,"center",Qe,ot,we,y.ah.horizontal,!1,W,j);Bt&&(re.horizontal[Qe]=Bt,Tt=Bt.positionedLines.length===1)}Ot()}else{kt==="auto"&&(kt=K0(Et));const Pt=eg(ae,s.glyphMap,s.glyphPositions,s.imagePositions,B,xt,S,Et,kt,ot,we,y.ah.horizontal,!1,W,j);Pt&&(re.horizontal[kt]=Pt),Ot(),Of(De)&&E&&T&&(re.vertical=eg(ae,s.glyphMap,s.glyphPositions,s.imagePositions,B,xt,S,Et,kt,ot,we,y.ah.vertical,!1,W,j))}}let Fe=!1;if(D.icon&&D.icon.name){const De=s.imageMap[D.icon.name];De&&(ge=rR(s.imagePositions[D.icon.name],a.get("icon-offset").evaluate(D,{},s.canonical),a.get("icon-anchor").evaluate(D,{},s.canonical)),Fe=!!De.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Fe:s.bucket.sdfIcons!==Fe&&at("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Me=tk(re.horizontal)||re.vertical;s.bucket.iconsInText=!!Me&&Me.iconsInText,(Me||ge)&&_R(s.bucket,D,re,ge,s.imageMap,_,W,ee,we,Fe,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},y.bq=z0,y.br=A0,y.bs=N0,y.bt=ju,y.bu=O0,y.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},y.bw=function(s,i,a,p,_){return d(this,void 0,void 0,function*(){if(X())try{return yield ct(s,i,a,p,_)}catch{}return function(S,E,T,L,D){const B=S.width,j=S.height;Je&&At||(Je=new OffscreenCanvas(B,j),At=Je.getContext("2d",{willReadFrequently:!0})),Je.width=B,Je.height=j,At.drawImage(S,0,0,B,j);const W=At.getImageData(E,T,L,D);return At.clearRect(0,0,B,j),W.data}(s,i,a,p,_)})},y.bx=F2,y.by=M,y.bz=A,y.c=Sn,y.d=s=>d(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(i)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),y.e=pe,y.f=s=>new Promise((i,a)=>{const p=new Image;p.onload=()=>{i(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=Ge})},p.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(s)],{type:"image/png"});p.src=s.byteLength?URL.createObjectURL(_):Ge}),y.g=yn,y.h=(s,i)=>hr(pe(s,{type:"json"}),i),y.i=rt,y.j=gn,y.k=Vt,y.l=(s,i)=>hr(pe(s,{type:"arrayBuffer"}),i),y.m=hr,y.n=function(s){return new O0(s).readFields(YA,[])},y.o=Hf,y.p=y2,y.q=w,y.r=h0,y.s=mn,y.t=Nf,y.u=Wl,y.v=Ve,y.w=at,y.x=function([s,i,a]){return i+=90,i*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(i)*Math.sin(a),y:s*Math.sin(i)*Math.sin(a),z:s*Math.cos(a)}},y.y=sr,y.z=mr}),u("worker",["./shared"],function(y){class d{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,K){for(const oe of J){this._layerConfigs[oe.id]=oe;const ce=this._layers[oe.id]=y.aA(oe);ce._featureFilter=y.a7(ce.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of K)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const se=y.bk(Object.values(this._layerConfigs),this.keyCache);for(const oe of se){const ce=oe.map(je=>this._layers[je.id]),Te=ce[0];if(Te.visibility==="none")continue;const Ae=Te.source||"";let be=this.familiesBySource[Ae];be||(be=this.familiesBySource[Ae]={});const Oe=Te.sourceLayer||"_geojsonTileLayer";let Ke=be[Oe];Ke||(Ke=be[Oe]=[]),Ke.push(ce)}}}class M{constructor(J){const K={},se=[];for(const Ae in J){const be=J[Ae],Oe=K[Ae]={};for(const Ke in be){const je=be[+Ke];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;const dt={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};se.push(dt),Oe[Ke]={rect:dt,metrics:je.metrics}}}const{w:oe,h:ce}=y.p(se),Te=new y.o({width:oe||1,height:ce||1});for(const Ae in J){const be=J[Ae];for(const Oe in be){const Ke=be[+Oe];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;const je=K[Ae][Oe].rect;y.o.copy(Ke.bitmap,Te,{x:0,y:0},{x:je.x+1,y:je.y+1},Ke.bitmap)}}this.image=Te,this.positions=K}}y.bl("GlyphAtlas",M);class A{constructor(J){this.tileID=new y.S(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,K,se,oe){return y._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new y.a5;const ce=new y.bm(Object.keys(J.layers).sort()),Te=new y.bn(this.tileID,this.promoteId);Te.bucketLayerIDs=[];const Ae={},be={featureIndex:Te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:se},Oe=K.familiesBySource[this.source];for(const rn in Oe){const Pn=J.layers[rn];if(!Pn)continue;Pn.version===1&&y.w(`Vector tile source "${this.source}" layer "${rn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gn=ce.encode(rn),Ir=[];for(let wn=0;wn<Pn.length;wn++){const Ti=Pn.feature(wn),Ha=Te.getId(Ti,rn);Ir.push({feature:Ti,id:Ha,index:wn,sourceLayerIndex:Gn})}for(const wn of Oe[rn]){const Ti=wn[0];Ti.source!==this.source&&y.w(`layer.source = ${Ti.source} does not equal this.source = ${this.source}`),Ti.minzoom&&this.zoom<Math.floor(Ti.minzoom)||Ti.maxzoom&&this.zoom>=Ti.maxzoom||Ti.visibility!=="none"&&(O(wn,this.zoom,se),(Ae[Ti.id]=Ti.createBucket({index:Te.bucketLayerIDs.length,layers:wn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gn,sourceID:this.source})).populate(Ir,be,this.tileID.canonical),Te.bucketLayerIDs.push(wn.map(Ha=>Ha.id)))}}const Ke=y.aF(be.glyphDependencies,rn=>Object.keys(rn).map(Number));this.inFlightDependencies.forEach(rn=>rn==null?void 0:rn.abort()),this.inFlightDependencies=[];let je=Promise.resolve({});if(Object.keys(Ke).length){const rn=new AbortController;this.inFlightDependencies.push(rn),je=oe.sendAsync({type:"GG",data:{stacks:Ke,source:this.source,tileID:this.tileID,type:"glyphs"}},rn)}const dt=Object.keys(be.iconDependencies);let Lt=Promise.resolve({});if(dt.length){const rn=new AbortController;this.inFlightDependencies.push(rn),Lt=oe.sendAsync({type:"GI",data:{icons:dt,source:this.source,tileID:this.tileID,type:"icons"}},rn)}const Ft=Object.keys(be.patternDependencies);let _n=Promise.resolve({});if(Ft.length){const rn=new AbortController;this.inFlightDependencies.push(rn),_n=oe.sendAsync({type:"GI",data:{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"}},rn)}const[sn,an,fn]=yield Promise.all([je,Lt,_n]),fr=new M(sn),Un=new y.bo(an,fn);for(const rn in Ae){const Pn=Ae[rn];Pn instanceof y.a6?(O(Pn.layers,this.zoom,se),y.bp({bucket:Pn,glyphMap:sn,glyphPositions:fr.positions,imageMap:an,imagePositions:Un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Pn.hasPattern&&(Pn instanceof y.bq||Pn instanceof y.br||Pn instanceof y.bs)&&(O(Pn.layers,this.zoom,se),Pn.addFeatures(be,this.tileID.canonical,Un.patternPositions))}return this.status="done",{buckets:Object.values(Ae).filter(rn=>!rn.isEmpty()),featureIndex:Te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fr.image,imageAtlas:Un,glyphMap:this.returnDependencies?sn:null,iconMap:this.returnDependencies?an:null,glyphPositions:this.returnDependencies?fr.positions:null}})}}function O(ve,J,K){const se=new y.z(J);for(const oe of ve)oe.recalculate(se,K)}class R{constructor(J,K,se){this.actor=J,this.layerIndex=K,this.availableImages=se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,K){return y._(this,void 0,void 0,function*(){const se=yield y.l(J.request,K);try{return{vectorTile:new y.bt.VectorTile(new y.bu(se.data)),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(oe){const ce=new Uint8Array(se.data);let Te=`Unable to parse the tile at ${J.request.url}, `;throw Te+=ce[0]===31&&ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(Te)}})}loadTile(J){return y._(this,void 0,void 0,function*(){const K=J.uid,se=!!(J&&J.request&&J.request.collectResourceTiming)&&new y.bv(J.request),oe=new A(J);this.loading[K]=oe;const ce=new AbortController;oe.abort=ce;try{const Te=yield this.loadVectorTile(J,ce);if(delete this.loading[K],!Te)return null;const Ae=Te.rawData,be={};Te.expires&&(be.expires=Te.expires),Te.cacheControl&&(be.cacheControl=Te.cacheControl);const Oe={};if(se){const je=se.finish();je&&(Oe.resourceTiming=JSON.parse(JSON.stringify(je)))}oe.vectorTile=Te.vectorTile;const Ke=oe.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[K]=oe,this.fetching[K]={rawTileData:Ae,cacheControl:be,resourceTiming:Oe};try{const je=yield Ke;return y.e({rawTileData:Ae.slice(0)},je,be,Oe)}finally{delete this.fetching[K]}}catch(Te){throw delete this.loading[K],oe.status="done",this.loaded[K]=oe,Te}})}reloadTile(J){return y._(this,void 0,void 0,function*(){const K=J.uid;if(!this.loaded||!this.loaded[K])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const se=this.loaded[K];if(se.showCollisionBoxes=J.showCollisionBoxes,se.status==="parsing"){const oe=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor);let ce;if(this.fetching[K]){const{rawTileData:Te,cacheControl:Ae,resourceTiming:be}=this.fetching[K];delete this.fetching[K],ce=y.e({rawTileData:Te.slice(0)},oe,Ae,be)}else ce=oe;return ce}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(J){return y._(this,void 0,void 0,function*(){const K=this.loading,se=J.uid;K&&K[se]&&K[se].abort&&(K[se].abort.abort(),delete K[se])})}removeTile(J){return y._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class N{constructor(){this.loaded={}}loadTile(J){return y._(this,void 0,void 0,function*(){const{uid:K,encoding:se,rawImageData:oe,redFactor:ce,greenFactor:Te,blueFactor:Ae,baseShift:be}=J,Oe=oe.width+2,Ke=oe.height+2,je=y.b(oe)?new y.R({width:Oe,height:Ke},yield y.bw(oe,-1,-1,Oe,Ke)):oe,dt=new y.bx(K,je,se,ce,Te,Ae,be);return this.loaded=this.loaded||{},this.loaded[K]=dt,dt})}removeTile(J){const K=this.loaded,se=J.uid;K&&K[se]&&delete K[se]}}function V(ve,J){if(ve.length!==0){H(ve[0],J);for(var K=1;K<ve.length;K++)H(ve[K],!J)}}function H(ve,J){for(var K=0,se=0,oe=0,ce=ve.length,Te=ce-1;oe<ce;Te=oe++){var Ae=(ve[oe][0]-ve[Te][0])*(ve[Te][1]+ve[oe][1]),be=K+Ae;se+=Math.abs(K)>=Math.abs(Ae)?K-be+Ae:Ae-be+K,K=be}K+se>=0!=!!J&&ve.reverse()}var ne=y.by(function ve(J,K){var se,oe=J&&J.type;if(oe==="FeatureCollection")for(se=0;se<J.features.length;se++)ve(J.features[se],K);else if(oe==="GeometryCollection")for(se=0;se<J.geometries.length;se++)ve(J.geometries[se],K);else if(oe==="Feature")ve(J.geometry,K);else if(oe==="Polygon")V(J.coordinates,K);else if(oe==="MultiPolygon")for(se=0;se<J.coordinates.length;se++)V(J.coordinates[se],K);return J});const de=y.bt.VectorTileFeature.prototype.toGeoJSON;var Y={exports:{}},X=y.bz,Q=y.bt.VectorTileFeature,ie=he;function he(ve,J){this.options=J||{},this.features=ve,this.length=ve.length}function _e(ve,J){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=J||4096}he.prototype.feature=function(ve){return new _e(this.features[ve],this.options.extent)},_e.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var J=0;J<ve.length;J++){for(var K=ve[J],se=[],oe=0;oe<K.length;oe++)se.push(new X(K[oe][0],K[oe][1]));this.geometry.push(se)}return this.geometry},_e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,J=1/0,K=-1/0,se=1/0,oe=-1/0,ce=0;ce<ve.length;ce++)for(var Te=ve[ce],Ae=0;Ae<Te.length;Ae++){var be=Te[Ae];J=Math.min(J,be.x),K=Math.max(K,be.x),se=Math.min(se,be.y),oe=Math.max(oe,be.y)}return[J,se,K,oe]},_e.prototype.toGeoJSON=Q.prototype.toGeoJSON;var pe=y.bA,Ie=ie;function Le(ve){var J=new pe;return function(K,se){for(var oe in K.layers)se.writeMessage(3,$e,K.layers[oe])}(ve,J),J.finish()}function $e(ve,J){var K;J.writeVarintField(15,ve.version||1),J.writeStringField(1,ve.name||""),J.writeVarintField(5,ve.extent||4096);var se={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<ve.length;K++)se.feature=ve.feature(K),J.writeMessage(2,Ze,se);var oe=se.keys;for(K=0;K<oe.length;K++)J.writeStringField(3,oe[K]);var ce=se.values;for(K=0;K<ce.length;K++)J.writeMessage(4,ut,ce[K])}function Ze(ve,J){var K=ve.feature;K.id!==void 0&&J.writeVarintField(1,K.id),J.writeMessage(2,et,ve),J.writeVarintField(3,K.type),J.writeMessage(4,rt,K)}function et(ve,J){var K=ve.feature,se=ve.keys,oe=ve.values,ce=ve.keycache,Te=ve.valuecache;for(var Ae in K.properties){var be=K.properties[Ae],Oe=ce[Ae];if(be!==null){Oe===void 0&&(se.push(Ae),ce[Ae]=Oe=se.length-1),J.writeVarint(Oe);var Ke=typeof be;Ke!=="string"&&Ke!=="boolean"&&Ke!=="number"&&(be=JSON.stringify(be));var je=Ke+":"+be,dt=Te[je];dt===void 0&&(oe.push(be),Te[je]=dt=oe.length-1),J.writeVarint(dt)}}}function at(ve,J){return(J<<3)+(7&ve)}function Ne(ve){return ve<<1^ve>>31}function rt(ve,J){for(var K=ve.loadGeometry(),se=ve.type,oe=0,ce=0,Te=K.length,Ae=0;Ae<Te;Ae++){var be=K[Ae],Oe=1;se===1&&(Oe=be.length),J.writeVarint(at(1,Oe));for(var Ke=se===3?be.length-1:be.length,je=0;je<Ke;je++){je===1&&se!==1&&J.writeVarint(at(2,Ke-1));var dt=be[je].x-oe,Lt=be[je].y-ce;J.writeVarint(Ne(dt)),J.writeVarint(Ne(Lt)),oe+=dt,ce+=Lt}se===3&&J.writeVarint(at(7,1))}}function ut(ve,J){var K=typeof ve;K==="string"?J.writeStringField(1,ve):K==="boolean"?J.writeBooleanField(7,ve):K==="number"&&(ve%1!=0?J.writeDoubleField(3,ve):ve<0?J.writeSVarintField(6,ve):J.writeVarintField(5,ve))}Y.exports=Le,Y.exports.fromVectorTileJs=Le,Y.exports.fromGeojsonVt=function(ve,J){J=J||{};var K={};for(var se in ve)K[se]=new Ie(ve[se].features,J),K[se].name=se,K[se].version=J.version,K[se].extent=J.extent;return Le({layers:K})},Y.exports.GeoJSONWrapper=Ie;var wt=y.by(Y.exports);const Ge={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ve=>ve},ct=Math.fround||(Je=new Float32Array(1),ve=>(Je[0]=+ve,Je[0]));var Je;const At=3,Ut=5,Sn=6;class Ct{constructor(J){this.options=Object.assign(Object.create(Ge),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:K,minZoom:se,maxZoom:oe}=this.options;K&&console.time("total time");const ce=`prepare ${J.length} points`;K&&console.time(ce),this.points=J;const Te=[];for(let be=0;be<J.length;be++){const Oe=J[be];if(!Oe.geometry)continue;const[Ke,je]=Oe.geometry.coordinates,dt=ct(nr(Ke)),Lt=ct(Be(je));Te.push(dt,Lt,1/0,be,-1,1),this.options.reduce&&Te.push(0)}let Ae=this.trees[oe+1]=this._createTree(Te);K&&console.timeEnd(ce);for(let be=oe;be>=se;be--){const Oe=+Date.now();Ae=this.trees[be]=this._createTree(this._cluster(Ae,be)),K&&console.log("z%d: %d clusters in %dms",be,Ae.numItems,+Date.now()-Oe)}return K&&console.timeEnd("total time"),this}getClusters(J,K){let se=((J[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,J[1]));let ce=J[2]===180?180:((J[2]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)se=-180,ce=180;else if(se>ce){const je=this.getClusters([se,oe,180,Te],K),dt=this.getClusters([-180,oe,ce,Te],K);return je.concat(dt)}const Ae=this.trees[this._limitZoom(K)],be=Ae.range(nr(se),Be(Te),nr(ce),Be(oe)),Oe=Ae.data,Ke=[];for(const je of be){const dt=this.stride*je;Ke.push(Oe[dt+Ut]>1?yn(Oe,dt,this.clusterProps):this.points[Oe[dt+At]])}return Ke}getChildren(J){const K=this._getOriginId(J),se=this._getOriginZoom(J),oe="No cluster with the specified id.",ce=this.trees[se];if(!ce)throw new Error(oe);const Te=ce.data;if(K*this.stride>=Te.length)throw new Error(oe);const Ae=this.options.radius/(this.options.extent*Math.pow(2,se-1)),be=ce.within(Te[K*this.stride],Te[K*this.stride+1],Ae),Oe=[];for(const Ke of be){const je=Ke*this.stride;Te[je+4]===J&&Oe.push(Te[je+Ut]>1?yn(Te,je,this.clusterProps):this.points[Te[je+At]])}if(Oe.length===0)throw new Error(oe);return Oe}getLeaves(J,K,se){const oe=[];return this._appendLeaves(oe,J,K=K||10,se=se||0,0),oe}getTile(J,K,se){const oe=this.trees[this._limitZoom(J)],ce=Math.pow(2,J),{extent:Te,radius:Ae}=this.options,be=Ae/Te,Oe=(se-be)/ce,Ke=(se+1+be)/ce,je={features:[]};return this._addTileFeatures(oe.range((K-be)/ce,Oe,(K+1+be)/ce,Ke),oe.data,K,se,ce,je),K===0&&this._addTileFeatures(oe.range(1-be/ce,Oe,1,Ke),oe.data,ce,se,ce,je),K===ce-1&&this._addTileFeatures(oe.range(0,Oe,be/ce,Ke),oe.data,-1,se,ce,je),je.features.length?je:null}getClusterExpansionZoom(J){let K=this._getOriginZoom(J)-1;for(;K<=this.options.maxZoom;){const se=this.getChildren(J);if(K++,se.length!==1)break;J=se[0].properties.cluster_id}return K}_appendLeaves(J,K,se,oe,ce){const Te=this.getChildren(K);for(const Ae of Te){const be=Ae.properties;if(be&&be.cluster?ce+be.point_count<=oe?ce+=be.point_count:ce=this._appendLeaves(J,be.cluster_id,se,oe,ce):ce<oe?ce++:J.push(Ae),J.length===se)break}return ce}_createTree(J){const K=new y.av(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<J.length;se+=this.stride)K.add(J[se],J[se+1]);return K.finish(),K.data=J,K}_addTileFeatures(J,K,se,oe,ce,Te){for(const Ae of J){const be=Ae*this.stride,Oe=K[be+Ut]>1;let Ke,je,dt;if(Oe)Ke=Zn(K,be,this.clusterProps),je=K[be],dt=K[be+1];else{const _n=this.points[K[be+At]];Ke=_n.properties;const[sn,an]=_n.geometry.coordinates;je=nr(sn),dt=Be(an)}const Lt={type:1,geometry:[[Math.round(this.options.extent*(je*ce-se)),Math.round(this.options.extent*(dt*ce-oe))]],tags:Ke};let Ft;Ft=Oe||this.options.generateId?K[be+At]:this.points[K[be+At]].id,Ft!==void 0&&(Lt.id=Ft),Te.features.push(Lt)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,K){const{radius:se,extent:oe,reduce:ce,minPoints:Te}=this.options,Ae=se/(oe*Math.pow(2,K)),be=J.data,Oe=[],Ke=this.stride;for(let je=0;je<be.length;je+=Ke){if(be[je+2]<=K)continue;be[je+2]=K;const dt=be[je],Lt=be[je+1],Ft=J.within(be[je],be[je+1],Ae),_n=be[je+Ut];let sn=_n;for(const an of Ft){const fn=an*Ke;be[fn+2]>K&&(sn+=be[fn+Ut])}if(sn>_n&&sn>=Te){let an,fn=dt*_n,fr=Lt*_n,Un=-1;const rn=((je/Ke|0)<<5)+(K+1)+this.points.length;for(const Pn of Ft){const Gn=Pn*Ke;if(be[Gn+2]<=K)continue;be[Gn+2]=K;const Ir=be[Gn+Ut];fn+=be[Gn]*Ir,fr+=be[Gn+1]*Ir,be[Gn+4]=rn,ce&&(an||(an=this._map(be,je,!0),Un=this.clusterProps.length,this.clusterProps.push(an)),ce(an,this._map(be,Gn)))}be[je+4]=rn,Oe.push(fn/sn,fr/sn,1/0,rn,-1,sn),ce&&Oe.push(Un)}else{for(let an=0;an<Ke;an++)Oe.push(be[je+an]);if(sn>1)for(const an of Ft){const fn=an*Ke;if(!(be[fn+2]<=K)){be[fn+2]=K;for(let fr=0;fr<Ke;fr++)Oe.push(be[fn+fr])}}}}return Oe}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,K,se){if(J[K+Ut]>1){const Te=this.clusterProps[J[K+Sn]];return se?Object.assign({},Te):Te}const oe=this.points[J[K+At]].properties,ce=this.options.map(oe);return se&&ce===oe?Object.assign({},ce):ce}}function yn(ve,J,K){return{type:"Feature",id:ve[J+At],properties:Zn(ve,J,K),geometry:{type:"Point",coordinates:[(se=ve[J],360*(se-.5)),hr(ve[J+1])]}};var se}function Zn(ve,J,K){const se=ve[J+Ut],oe=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,ce=ve[J+Sn],Te=ce===-1?{}:Object.assign({},K[ce]);return Object.assign(Te,{cluster:!0,cluster_id:ve[J+At],point_count:se,point_count_abbreviated:oe})}function nr(ve){return ve/360+.5}function Be(ve){const J=Math.sin(ve*Math.PI/180),K=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return K<0?0:K>1?1:K}function hr(ve){const J=(180-360*ve)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function mn(ve,J,K,se){let oe=se;const ce=J+(K-J>>1);let Te,Ae=K-J;const be=ve[J],Oe=ve[J+1],Ke=ve[K],je=ve[K+1];for(let dt=J+3;dt<K;dt+=3){const Lt=Dt(ve[dt],ve[dt+1],be,Oe,Ke,je);if(Lt>oe)Te=dt,oe=Lt;else if(Lt===oe){const Ft=Math.abs(dt-ce);Ft<Ae&&(Te=dt,Ae=Ft)}}oe>se&&(Te-J>3&&mn(ve,J,Te,se),ve[Te+2]=oe,K-Te>3&&mn(ve,Te,K,se))}function Dt(ve,J,K,se,oe,ce){let Te=oe-K,Ae=ce-se;if(Te!==0||Ae!==0){const be=((ve-K)*Te+(J-se)*Ae)/(Te*Te+Ae*Ae);be>1?(K=oe,se=ce):be>0&&(K+=Te*be,se+=Ae*be)}return Te=ve-K,Ae=J-se,Te*Te+Ae*Ae}function xe(ve,J,K,se){const oe={id:ve??null,type:J,geometry:K,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")Vt(oe,K);else if(J==="Polygon")Vt(oe,K[0]);else if(J==="MultiLineString")for(const ce of K)Vt(oe,ce);else if(J==="MultiPolygon")for(const ce of K)Vt(oe,ce[0]);return oe}function Vt(ve,J){for(let K=0;K<J.length;K+=3)ve.minX=Math.min(ve.minX,J[K]),ve.minY=Math.min(ve.minY,J[K+1]),ve.maxX=Math.max(ve.maxX,J[K]),ve.maxY=Math.max(ve.maxY,J[K+1])}function gn(ve,J,K,se){if(!J.geometry)return;const oe=J.geometry.coordinates;if(oe&&oe.length===0)return;const ce=J.geometry.type,Te=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2);let Ae=[],be=J.id;if(K.promoteId?be=J.properties[K.promoteId]:K.generateId&&(be=se||0),ce==="Point")Jt(oe,Ae);else if(ce==="MultiPoint")for(const Oe of oe)Jt(Oe,Ae);else if(ce==="LineString")Ve(oe,Ae,Te,!1);else if(ce==="MultiLineString"){if(K.lineMetrics){for(const Oe of oe)Ae=[],Ve(Oe,Ae,Te,!1),ve.push(xe(be,"LineString",Ae,J.properties));return}Er(oe,Ae,Te,!1)}else if(ce==="Polygon")Er(oe,Ae,Te,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(const Oe of J.geometry.geometries)gn(ve,{id:be,geometry:Oe,properties:J.properties},K,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Oe of oe){const Ke=[];Er(Oe,Ke,Te,!0),Ae.push(Ke)}}ve.push(xe(be,ce,Ae,J.properties))}function Jt(ve,J){J.push(Ln(ve[0]),Xe(ve[1]),0)}function Ve(ve,J,K,se){let oe,ce,Te=0;for(let be=0;be<ve.length;be++){const Oe=Ln(ve[be][0]),Ke=Xe(ve[be][1]);J.push(Oe,Ke,0),be>0&&(Te+=se?(oe*Ke-Oe*ce)/2:Math.sqrt(Math.pow(Oe-oe,2)+Math.pow(Ke-ce,2))),oe=Oe,ce=Ke}const Ae=J.length-3;J[2]=1,mn(J,0,Ae,K),J[Ae+2]=1,J.size=Math.abs(Te),J.start=0,J.end=J.size}function Er(ve,J,K,se){for(let oe=0;oe<ve.length;oe++){const ce=[];Ve(ve[oe],ce,K,se),J.push(ce)}}function Ln(ve){return ve/360+.5}function Xe(ve){const J=Math.sin(ve*Math.PI/180),K=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return K<0?0:K>1?1:K}function En(ve,J,K,se,oe,ce,Te,Ae){if(se/=J,ce>=(K/=J)&&Te<se)return ve;if(Te<K||ce>=se)return null;const be=[];for(const Oe of ve){const Ke=Oe.geometry;let je=Oe.type;const dt=oe===0?Oe.minX:Oe.minY,Lt=oe===0?Oe.maxX:Oe.maxY;if(dt>=K&&Lt<se){be.push(Oe);continue}if(Lt<K||dt>=se)continue;let Ft=[];if(je==="Point"||je==="MultiPoint")li(Ke,Ft,K,se,oe);else if(je==="LineString")kr(Ke,Ft,K,se,oe,!1,Ae.lineMetrics);else if(je==="MultiLineString")Wt(Ke,Ft,K,se,oe,!1);else if(je==="Polygon")Wt(Ke,Ft,K,se,oe,!0);else if(je==="MultiPolygon")for(const _n of Ke){const sn=[];Wt(_n,sn,K,se,oe,!0),sn.length&&Ft.push(sn)}if(Ft.length){if(Ae.lineMetrics&&je==="LineString"){for(const _n of Ft)be.push(xe(Oe.id,je,_n,Oe.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(Ft.length===1?(je="LineString",Ft=Ft[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=Ft.length===3?"Point":"MultiPoint"),be.push(xe(Oe.id,je,Ft,Oe.tags))}}return be.length?be:null}function li(ve,J,K,se,oe){for(let ce=0;ce<ve.length;ce+=3){const Te=ve[ce+oe];Te>=K&&Te<=se&&dr(J,ve[ce],ve[ce+1],ve[ce+2])}}function kr(ve,J,K,se,oe,ce,Te){let Ae=vi(ve);const be=oe===0?qr:Qi;let Oe,Ke,je=ve.start;for(let sn=0;sn<ve.length-3;sn+=3){const an=ve[sn],fn=ve[sn+1],fr=ve[sn+2],Un=ve[sn+3],rn=ve[sn+4],Pn=oe===0?an:fn,Gn=oe===0?Un:rn;let Ir=!1;Te&&(Oe=Math.sqrt(Math.pow(an-Un,2)+Math.pow(fn-rn,2))),Pn<K?Gn>K&&(Ke=be(Ae,an,fn,Un,rn,K),Te&&(Ae.start=je+Oe*Ke)):Pn>se?Gn<se&&(Ke=be(Ae,an,fn,Un,rn,se),Te&&(Ae.start=je+Oe*Ke)):dr(Ae,an,fn,fr),Gn<K&&Pn>=K&&(Ke=be(Ae,an,fn,Un,rn,K),Ir=!0),Gn>se&&Pn<=se&&(Ke=be(Ae,an,fn,Un,rn,se),Ir=!0),!ce&&Ir&&(Te&&(Ae.end=je+Oe*Ke),J.push(Ae),Ae=vi(ve)),Te&&(je+=Oe)}let dt=ve.length-3;const Lt=ve[dt],Ft=ve[dt+1],_n=oe===0?Lt:Ft;_n>=K&&_n<=se&&dr(Ae,Lt,Ft,ve[dt+2]),dt=Ae.length-3,ce&&dt>=3&&(Ae[dt]!==Ae[0]||Ae[dt+1]!==Ae[1])&&dr(Ae,Ae[0],Ae[1],Ae[2]),Ae.length&&J.push(Ae)}function vi(ve){const J=[];return J.size=ve.size,J.start=ve.start,J.end=ve.end,J}function Wt(ve,J,K,se,oe,ce){for(const Te of ve)kr(Te,J,K,se,oe,ce,!1)}function dr(ve,J,K,se){ve.push(J,K,se)}function qr(ve,J,K,se,oe,ce){const Te=(ce-J)/(se-J);return dr(ve,ce,K+(oe-K)*Te,1),Te}function Qi(ve,J,K,se,oe,ce){const Te=(ce-K)/(oe-K);return dr(ve,J+(se-J)*Te,ce,1),Te}function He(ve,J){const K=[];for(let se=0;se<ve.length;se++){const oe=ve[se],ce=oe.type;let Te;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")Te=Gt(oe.geometry,J);else if(ce==="MultiLineString"||ce==="Polygon"){Te=[];for(const Ae of oe.geometry)Te.push(Gt(Ae,J))}else if(ce==="MultiPolygon"){Te=[];for(const Ae of oe.geometry){const be=[];for(const Oe of Ae)be.push(Gt(Oe,J));Te.push(be)}}K.push(xe(oe.id,ce,Te,oe.tags))}return K}function Gt(ve,J){const K=[];K.size=ve.size,ve.start!==void 0&&(K.start=ve.start,K.end=ve.end);for(let se=0;se<ve.length;se+=3)K.push(ve[se]+J,ve[se+1],ve[se+2]);return K}function Kt(ve,J){if(ve.transformed)return ve;const K=1<<ve.z,se=ve.x,oe=ve.y;for(const ce of ve.features){const Te=ce.geometry,Ae=ce.type;if(ce.geometry=[],Ae===1)for(let be=0;be<Te.length;be+=2)ce.geometry.push(jt(Te[be],Te[be+1],J,K,se,oe));else for(let be=0;be<Te.length;be++){const Oe=[];for(let Ke=0;Ke<Te[be].length;Ke+=2)Oe.push(jt(Te[be][Ke],Te[be][Ke+1],J,K,se,oe));ce.geometry.push(Oe)}}return ve.transformed=!0,ve}function jt(ve,J,K,se,oe,ce){return[Math.round(K*(ve*se-oe)),Math.round(K*(J*se-ce))]}function eo(ve,J,K,se,oe){const ce=J===oe.maxZoom?0:oe.tolerance/((1<<J)*oe.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:ve.length,source:null,x:K,y:se,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ae of ve)lt(Te,Ae,ce,oe);return Te}function lt(ve,J,K,se){const oe=J.geometry,ce=J.type,Te=[];if(ve.minX=Math.min(ve.minX,J.minX),ve.minY=Math.min(ve.minY,J.minY),ve.maxX=Math.max(ve.maxX,J.maxX),ve.maxY=Math.max(ve.maxY,J.maxY),ce==="Point"||ce==="MultiPoint")for(let Ae=0;Ae<oe.length;Ae+=3)Te.push(oe[Ae],oe[Ae+1]),ve.numPoints++,ve.numSimplified++;else if(ce==="LineString")on(Te,oe,ve,K,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(let Ae=0;Ae<oe.length;Ae++)on(Te,oe[Ae],ve,K,ce==="Polygon",Ae===0);else if(ce==="MultiPolygon")for(let Ae=0;Ae<oe.length;Ae++){const be=oe[Ae];for(let Oe=0;Oe<be.length;Oe++)on(Te,be[Oe],ve,K,!0,Oe===0)}if(Te.length){let Ae=J.tags||null;if(ce==="LineString"&&se.lineMetrics){Ae={};for(const Oe in J.tags)Ae[Oe]=J.tags[Oe];Ae.mapbox_clip_start=oe.start/oe.size,Ae.mapbox_clip_end=oe.end/oe.size}const be={geometry:Te,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:Ae};J.id!==null&&(be.id=J.id),ve.features.push(be)}}function on(ve,J,K,se,oe,ce){const Te=se*se;if(se>0&&J.size<(oe?Te:se))return void(K.numPoints+=J.length/3);const Ae=[];for(let be=0;be<J.length;be+=3)(se===0||J[be+2]>Te)&&(K.numSimplified++,Ae.push(J[be],J[be+1])),K.numPoints++;oe&&function(be,Oe){let Ke=0;for(let je=0,dt=be.length,Lt=dt-2;je<dt;Lt=je,je+=2)Ke+=(be[je]-be[Lt])*(be[je+1]+be[Lt+1]);if(Ke>0===Oe)for(let je=0,dt=be.length;je<dt/2;je+=2){const Lt=be[je],Ft=be[je+1];be[je]=be[dt-2-je],be[je+1]=be[dt-1-je],be[dt-2-je]=Lt,be[dt-1-je]=Ft}}(Ae,ce),ve.push(Ae)}const st={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class _i{constructor(J,K){const se=(K=this.options=function(ce,Te){for(const Ae in Te)ce[Ae]=Te[Ae];return ce}(Object.create(st),K)).debug;if(se&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=function(ce,Te){const Ae=[];if(ce.type==="FeatureCollection")for(let be=0;be<ce.features.length;be++)gn(Ae,ce.features[be],Te,be);else gn(Ae,ce.type==="Feature"?ce:{geometry:ce},Te);return Ae}(J,K);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(ce,Te){const Ae=Te.buffer/Te.extent;let be=ce;const Oe=En(ce,1,-1-Ae,Ae,0,-1,2,Te),Ke=En(ce,1,1-Ae,2+Ae,0,-1,2,Te);return(Oe||Ke)&&(be=En(ce,1,-Ae,1+Ae,0,-1,2,Te)||[],Oe&&(be=He(Oe,1).concat(be)),Ke&&(be=be.concat(He(Ke,-1)))),be}(oe,K),oe.length&&this.splitTile(oe,0,0,0),se&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,K,se,oe,ce,Te,Ae){const be=[J,K,se,oe],Oe=this.options,Ke=Oe.debug;for(;be.length;){oe=be.pop(),se=be.pop(),K=be.pop(),J=be.pop();const je=1<<K,dt=to(K,se,oe);let Lt=this.tiles[dt];if(!Lt&&(Ke>1&&console.time("creation"),Lt=this.tiles[dt]=eo(J,K,se,oe,Oe),this.tileCoords.push({z:K,x:se,y:oe}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,se,oe,Lt.numFeatures,Lt.numPoints,Lt.numSimplified),console.timeEnd("creation"));const Ir=`z${K}`;this.stats[Ir]=(this.stats[Ir]||0)+1,this.total++}if(Lt.source=J,ce==null){if(K===Oe.indexMaxZoom||Lt.numPoints<=Oe.indexMaxPoints)continue}else{if(K===Oe.maxZoom||K===ce)continue;if(ce!=null){const Ir=ce-K;if(se!==Te>>Ir||oe!==Ae>>Ir)continue}}if(Lt.source=null,J.length===0)continue;Ke>1&&console.time("clipping");const Ft=.5*Oe.buffer/Oe.extent,_n=.5-Ft,sn=.5+Ft,an=1+Ft;let fn=null,fr=null,Un=null,rn=null,Pn=En(J,je,se-Ft,se+sn,0,Lt.minX,Lt.maxX,Oe),Gn=En(J,je,se+_n,se+an,0,Lt.minX,Lt.maxX,Oe);J=null,Pn&&(fn=En(Pn,je,oe-Ft,oe+sn,1,Lt.minY,Lt.maxY,Oe),fr=En(Pn,je,oe+_n,oe+an,1,Lt.minY,Lt.maxY,Oe),Pn=null),Gn&&(Un=En(Gn,je,oe-Ft,oe+sn,1,Lt.minY,Lt.maxY,Oe),rn=En(Gn,je,oe+_n,oe+an,1,Lt.minY,Lt.maxY,Oe),Gn=null),Ke>1&&console.timeEnd("clipping"),be.push(fn||[],K+1,2*se,2*oe),be.push(fr||[],K+1,2*se,2*oe+1),be.push(Un||[],K+1,2*se+1,2*oe),be.push(rn||[],K+1,2*se+1,2*oe+1)}}getTile(J,K,se){J=+J,K=+K,se=+se;const oe=this.options,{extent:ce,debug:Te}=oe;if(J<0||J>24)return null;const Ae=1<<J,be=to(J,K=K+Ae&Ae-1,se);if(this.tiles[be])return Kt(this.tiles[be],ce);Te>1&&console.log("drilling down to z%d-%d-%d",J,K,se);let Oe,Ke=J,je=K,dt=se;for(;!Oe&&Ke>0;)Ke--,je>>=1,dt>>=1,Oe=this.tiles[to(Ke,je,dt)];return Oe&&Oe.source?(Te>1&&(console.log("found parent tile z%d-%d-%d",Ke,je,dt),console.time("drilling down")),this.splitTile(Oe.source,Ke,je,dt,J,K,se),Te>1&&console.timeEnd("drilling down"),this.tiles[be]?Kt(this.tiles[be],ce):null):null}}function to(ve,J,K){return 32*((1<<ve)*K+J)+ve}function Qt(ve,J){return J?ve.properties[J]:ve.id}function Sr(ve,J){if(ve==null)return!0;if(ve.type==="Feature")return Qt(ve,J)!=null;if(ve.type==="FeatureCollection"){const K=new Set;for(const se of ve.features){const oe=Qt(se,J);if(oe==null||K.has(oe))return!1;K.add(oe)}return!0}return!1}function Ii(ve,J){const K=new Map;if(ve!=null)if(ve.type==="Feature")K.set(Qt(ve,J),ve);else for(const se of ve.features)K.set(Qt(se,J),se);return K}class Hr extends R{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,K){return y._(this,void 0,void 0,function*(){const se=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!oe)return null;const ce=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=y.X,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(be){this._feature=be,this.extent=y.X,this.type=be.type,this.properties=be.tags,"id"in be&&!isNaN(be.id)&&(this.id=parseInt(be.id,10))}loadGeometry(){if(this._feature.type===1){const be=[];for(const Oe of this._feature.geometry)be.push([new y.P(Oe[0],Oe[1])]);return be}{const be=[];for(const Oe of this._feature.geometry){const Ke=[];for(const je of Oe)Ke.push(new y.P(je[0],je[1]));be.push(Ke)}return be}}toGeoJSON(be,Oe,Ke){return de.call(this,be,Oe,Ke)}}(this._features[Ae])}}(oe.features);let Te=wt(ce);return Te.byteOffset===0&&Te.byteLength===Te.buffer.byteLength||(Te=new Uint8Array(Te)),{vectorTile:ce,rawData:Te.buffer}})}loadData(J){return y._(this,void 0,void 0,function*(){var K;(K=this._pendingRequest)===null||K===void 0||K.abort();const se=!!(J&&J.request&&J.request.collectResourceTiming)&&new y.bv(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new Ct(function({superclusterOptions:Te,clusterProperties:Ae}){if(!Ae||!Te)return Te;const be={},Oe={},Ke={accumulated:null,zoom:0},je={properties:null},dt=Object.keys(Ae);for(const Lt of dt){const[Ft,_n]=Ae[Lt],sn=y.bC(_n),an=y.bC(typeof Ft=="string"?[Ft,["accumulated"],["get",Lt]]:Ft);be[Lt]=sn.value,Oe[Lt]=an.value}return Te.map=Lt=>{je.properties=Lt;const Ft={};for(const _n of dt)Ft[_n]=be[_n].evaluate(Ke,je);return Ft},Te.reduce=(Lt,Ft)=>{je.properties=Ft;for(const _n of dt)Ke.accumulated=Lt[_n],Lt[_n]=Oe[_n].evaluate(Ke,je)},Te}(J)).load((yield this._pendingData).features):(oe=yield this._pendingData,new _i(oe,J.geojsonVtOptions)),this.loaded={};const ce={};if(se){const Te=se.finish();Te&&(ce.resourceTiming={},ce.resourceTiming[J.source]=JSON.parse(JSON.stringify(Te)))}return ce}catch(ce){if(delete this._pendingRequest,y.bB(ce))return{abandoned:!0};throw ce}var oe})}getData(){return y._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){const K=this.loaded;return K&&K[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,K){return y._(this,void 0,void 0,function*(){let se=yield this.loadGeoJSON(J,K);if(delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(ne(se,!0),J.filter){const oe=y.bC(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));se={type:"FeatureCollection",features:se.features.filter(Te=>oe.value.evaluate({zoom:0},Te))}}return se})}loadGeoJSON(J,K){return y._(this,void 0,void 0,function*(){const{promoteId:se}=J;if(J.request){const oe=yield y.h(J.request,K);return this._dataUpdateable=Sr(oe.data,se)?Ii(oe.data,se):void 0,oe.data}if(typeof J.data=="string")try{const oe=JSON.parse(J.data);return this._dataUpdateable=Sr(oe,se)?Ii(oe,se):void 0,oe}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(oe,ce,Te){var Ae,be,Oe,Ke;if(ce.removeAll&&oe.clear(),ce.remove)for(const je of ce.remove)oe.delete(je);if(ce.add)for(const je of ce.add){const dt=Qt(je,Te);dt!=null&&oe.set(dt,je)}if(ce.update)for(const je of ce.update){let dt=oe.get(je.id);if(dt==null)continue;const Lt=!je.removeAllProperties&&(((Ae=je.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0||((be=je.addOrUpdateProperties)===null||be===void 0?void 0:be.length)>0);if((je.newGeometry||je.removeAllProperties||Lt)&&(dt=Object.assign({},dt),oe.set(je.id,dt),Lt&&(dt.properties=Object.assign({},dt.properties))),je.newGeometry&&(dt.geometry=je.newGeometry),je.removeAllProperties)dt.properties={};else if(((Oe=je.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(const Ft of je.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,Ft)&&delete dt.properties[Ft];if(((Ke=je.addOrUpdateProperties)===null||Ke===void 0?void 0:Ke.length)>0)for(const{key:Ft,value:_n}of je.addOrUpdateProperties)dt.properties[Ft]=_n}}(this._dataUpdateable,J.dataDiff,se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return y._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class no{constructor(J){this.self=J,this.actor=new y.F(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(K,se)=>{if(this.externalWorkerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.externalWorkerSourceTypes[K]=se},this.self.addProtocol=y.bi,this.self.removeProtocol=y.bj,this.self.registerRTLTextPlugin=K=>{if(y.bD.isParsed())throw new Error("RTL text plugin already registered.");y.bD.setMethods(K)},this.actor.registerMessageHandler("LDT",(K,se)=>this._getDEMWorkerSource(K,se.source).loadTile(se)),this.actor.registerMessageHandler("RDT",(K,se)=>y._(this,void 0,void 0,function*(){this._getDEMWorkerSource(K,se.source).removeTile(se)})),this.actor.registerMessageHandler("GCEZ",(K,se)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterExpansionZoom(se)})),this.actor.registerMessageHandler("GCC",(K,se)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterChildren(se)})),this.actor.registerMessageHandler("GCL",(K,se)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterLeaves(se)})),this.actor.registerMessageHandler("LD",(K,se)=>this._getWorkerSource(K,se.type,se.source).loadData(se)),this.actor.registerMessageHandler("GD",(K,se)=>this._getWorkerSource(K,se.type,se.source).getData()),this.actor.registerMessageHandler("LT",(K,se)=>this._getWorkerSource(K,se.type,se.source).loadTile(se)),this.actor.registerMessageHandler("RT",(K,se)=>this._getWorkerSource(K,se.type,se.source).reloadTile(se)),this.actor.registerMessageHandler("AT",(K,se)=>this._getWorkerSource(K,se.type,se.source).abortTile(se)),this.actor.registerMessageHandler("RMT",(K,se)=>this._getWorkerSource(K,se.type,se.source).removeTile(se)),this.actor.registerMessageHandler("RS",(K,se)=>y._(this,void 0,void 0,function*(){if(!this.workerSources[K]||!this.workerSources[K][se.type]||!this.workerSources[K][se.type][se.source])return;const oe=this.workerSources[K][se.type][se.source];delete this.workerSources[K][se.type][se.source],oe.removeSource!==void 0&&oe.removeSource(se)})),this.actor.registerMessageHandler("RM",K=>y._(this,void 0,void 0,function*(){delete this.layerIndexes[K],delete this.availableImages[K],delete this.workerSources[K],delete this.demWorkerSources[K]})),this.actor.registerMessageHandler("SR",(K,se)=>y._(this,void 0,void 0,function*(){this.referrer=se})),this.actor.registerMessageHandler("SRPS",(K,se)=>this._syncRTLPluginState(K,se)),this.actor.registerMessageHandler("IS",(K,se)=>y._(this,void 0,void 0,function*(){this.self.importScripts(se)})),this.actor.registerMessageHandler("SI",(K,se)=>this._setImages(K,se)),this.actor.registerMessageHandler("UL",(K,se)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(K).update(se.layers,se.removedIds)})),this.actor.registerMessageHandler("SL",(K,se)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(K).replace(se)}))}_setImages(J,K){return y._(this,void 0,void 0,function*(){this.availableImages[J]=K;for(const se in this.workerSources[J]){const oe=this.workerSources[J][se];for(const ce in oe)oe[ce].availableImages=K}})}_syncRTLPluginState(J,K){return y._(this,void 0,void 0,function*(){if(y.bD.isParsed())return y.bD.getState();if(K.pluginStatus!=="loading")return y.bD.setState(K),K;const se=K.pluginURL;if(this.self.importScripts(se),y.bD.isParsed()){const oe={pluginStatus:"loaded",pluginURL:se};return y.bD.setState(oe),oe}throw y.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${se}`)})}_getAvailableImages(J){let K=this.availableImages[J];return K||(K=[]),K}_getLayerIndex(J){let K=this.layerIndexes[J];return K||(K=this.layerIndexes[J]=new d),K}_getWorkerSource(J,K,se){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][K]||(this.workerSources[J][K]={}),!this.workerSources[J][K][se]){const oe={sendAsync:(ce,Te)=>(ce.targetMapId=J,this.actor.sendAsync(ce,Te))};switch(K){case"vector":this.workerSources[J][K][se]=new R(oe,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][K][se]=new Hr(oe,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][K][se]=new this.externalWorkerSourceTypes[K](oe,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][K][se]}_getDEMWorkerSource(J,K){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][K]||(this.demWorkerSources[J][K]=new N),this.demWorkerSources[J][K]}}return y.i(self)&&(self.worker=new no(self)),no}),u("index",["exports","./shared"],function(y,d){var M="4.7.0";let A,O;const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:w=>new Promise((r,c)=>{const g=requestAnimationFrame(r);w.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),c(d.c())})}),getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(A||(A=document.createElement("a")),A.href=w,A.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class N{static testProp(r){if(!N.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in N.docStyle)return r[c];return r[0]}static create(r,c,g){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),g&&g.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(r,c){r.style[N.transformProp]=c}static addEventListener(r,c,g,v={}){r.addEventListener(c,g,"passive"in v?v:v.capture)}static removeEventListener(r,c,g,v={}){r.removeEventListener(c,g,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,g){const v=c.boundingClientRect;return new d.P((g.clientX-v.left)/c.x-r.clientLeft,(g.clientY-v.top)/c.y-r.clientTop)}static mousePos(r,c){const g=N.getScale(r);return N.getPoint(r,g,c)}static touchPos(r,c){const g=[],v=N.getScale(r);for(let b=0;b<c.length;b++)g.push(N.getPoint(r,v,c[b]));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(w){!de&&ne&&(Y?X(w):H=w)}};let H,ne,de=!1,Y=!1;function X(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,ne),w.isContextLost())return;V.supported=!0}catch{}w.deleteTexture(r),de=!0}var Q;typeof document<"u"&&(ne=document.createElement("img"),ne.onload=()=>{H&&X(H),H=null,Y=!0},ne.onerror=()=>{de=!0,H=null},ne.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let r,c,g,v;w.resetRequestQueue=()=>{r=[],c=0,g=0,v={}},w.addThrottleControl=z=>{const $=g++;return v[$]=z,$},w.removeThrottleControl=z=>{delete v[z],C()},w.getImage=(z,$,G=!0)=>new Promise((q,te)=>{V.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),d.e(z,{type:"image"}),r.push({abortController:$,requestParameters:z,supportImageRefresh:G,state:"queued",onError:ue=>{te(ue)},onSuccess:ue=>{q(ue)}}),C()});const b=z=>d._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:$,supportImageRefresh:G,onError:q,onSuccess:te,abortController:ue}=z,fe=G===!1&&!d.i(self)&&!d.g($.url)&&(!$.headers||Object.keys($.headers).reduce((Se,Ce)=>Se&&Ce==="accept",!0));c++;const ye=fe?P($,ue):d.m($,ue);try{const Se=yield ye;delete z.abortController,z.state="completed",Se.data instanceof HTMLImageElement||d.b(Se.data)?te(Se):Se.data&&te({data:yield(ke=Se.data,typeof createImageBitmap=="function"?d.d(ke):d.f(ke)),cacheControl:Se.cacheControl,expires:Se.expires})}catch(Se){delete z.abortController,q(Se)}finally{c--,C()}var ke}),C=()=>{const z=(()=>{for(const $ of Object.keys(v))if(v[$]())return!0;return!1})()?d.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=c;$<z&&r.length>0;$++){const G=r.shift();G.abortController.signal.aborted?$--:b(G)}},P=(z,$)=>new Promise((G,q)=>{const te=new Image,ue=z.url,fe=z.credentials;fe&&fe==="include"?te.crossOrigin="use-credentials":(fe&&fe==="same-origin"||!d.s(ue))&&(te.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{te.src="",q(d.c())}),te.fetchPriority="high",te.onload=()=>{te.onerror=te.onload=null,G({data:te})},te.onerror=()=>{te.onerror=te.onload=null,$.signal.aborted||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},te.src=ue})}(Q||(Q={})),Q.resetRequestQueue();class ie{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function he(w){var r=new d.A(3);return r[0]=w[0],r[1]=w[1],r[2]=w[2],r}var _e,pe=function(w,r,c){return w[0]=r[0]-c[0],w[1]=r[1]-c[1],w[2]=r[2]-c[2],w};_e=new d.A(3),d.A!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0);var Ie=function(w){var r=w[0],c=w[1];return r*r+c*c};function Le(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:g,url:v}of w){const b=`${g}${v}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:g,url:v}))}}return r}function $e(w,r,c){const g=w.split("?");return g[0]+=`${r}${c}`,g.join("?")}(function(){var w=new d.A(2);d.A!=Float32Array&&(w[0]=0,w[1]=0)})();class Ze{constructor(r,c,g,v){this.context=r,this.format=g,this.texture=r.gl.createTexture(),this.update(c,v)}update(r,c,g){const{width:v,height:b}=r,C=!(this.size&&this.size[0]===v&&this.size[1]===b||g),{context:P}=this,{gl:z}=P;if(this.useMipmap=!!(c&&c.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!c||c.premultiply!==!1)),C)this.size=[v,b],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||d.b(r)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,r):z.texImage2D(z.TEXTURE_2D,0,this.format,v,b,0,this.format,z.UNSIGNED_BYTE,r.data);else{const{x:$,y:G}=g||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||d.b(r)?z.texSubImage2D(z.TEXTURE_2D,0,$,G,z.RGBA,z.UNSIGNED_BYTE,r):z.texSubImage2D(z.TEXTURE_2D,0,$,G,v,b,z.RGBA,z.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(r,c,g){const{context:v}=this,{gl:b}=v;b.bindTexture(b.TEXTURE_2D,this.texture),g!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=b.LINEAR),r!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,r),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g||r),this.filter=r),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function et(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class at extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:g}of this.requestors)g(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const g=c.spriteData;c.data=new d.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let g=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "content" value`))),g=!1),g}_validateStretch(r,c){if(!r)return!0;let g=0;for(const v of r){if(v[0]<g||v[1]<v[0]||c<v[1])return!1;g=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const g=c.spriteData,v=g&&g.width||c.data.width,b=g&&g.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||b<r[1]||r[2]<0||v<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,g=!0){const v=this.getImage(r);if(g&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,g)=>{let v=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const g of r){let v=this.getImage(g);v||(this.fire(new d.k("styleimagemissing",{id:g})),v=this.getImage(g)),v?c[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:d.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],g=this.getImage(r);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new d.I(v,g);this.patterns[r]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ze(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:g}=d.p(r),v=this.atlasImage;v.resize({width:c||1,height:g||1});for(const b in this.patterns){const{bin:C}=this.patterns[b],P=C.x+1,z=C.y+1,$=this.getImage(b).data,G=$.width,q=$.height;d.R.copy($,v,{x:0,y:0},{x:P,y:z},{width:G,height:q}),d.R.copy($,v,{x:0,y:q-1},{x:P,y:z-1},{width:G,height:1}),d.R.copy($,v,{x:0,y:0},{x:P,y:z+q},{width:G,height:1}),d.R.copy($,v,{x:G-1,y:0},{x:P-1,y:z},{width:1,height:q}),d.R.copy($,v,{x:0,y:0},{x:P+G,y:z},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const g=this.getImage(c);g||d.w(`Image with ID: "${c}" was not found`),et(g)&&this.updateImage(c,g)}}}const Ne=1e20;function rt(w,r,c,g,v,b,C,P,z){for(let $=r;$<r+g;$++)ut(w,c*b+$,b,v,C,P,z);for(let $=c;$<c+v;$++)ut(w,$*b+r,1,g,C,P,z)}function ut(w,r,c,g,v,b,C){b[0]=0,C[0]=-Ne,C[1]=Ne,v[0]=w[r];for(let P=1,z=0,$=0;P<g;P++){v[P]=w[r+P*c];const G=P*P;do{const q=b[z];$=(v[P]-v[q]+G-q*q)/(P-q)/2}while($<=C[z]&&--z>-1);z++,b[z]=P,C[z]=$,C[z+1]=Ne}for(let P=0,z=0;P<g;P++){for(;C[z+1]<P;)z++;const $=b[z],G=P-$;w[r+P*c]=v[$]+G*G}}class wt{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return d._(this,void 0,void 0,function*(){const c=[];for(const b in r)for(const C of r[b])c.push(this._getAndCacheGlyphsPromise(b,C));const g=yield Promise.all(c),v={};for(const{stack:b,id:C,glyph:P}of g)v[b]||(v[b]={}),v[b][C]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return v})}_getAndCacheGlyphsPromise(r,c){return d._(this,void 0,void 0,function*(){let g=this.entries[r];g||(g=this.entries[r]={glyphs:{},requests:{},ranges:{}});let v=g.glyphs[c];if(v!==void 0)return{stack:r,id:c,glyph:v};if(v=this._tinySDF(g,r,c),v)return g.glyphs[c]=v,{stack:r,id:c,glyph:v};const b=Math.floor(c/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[b])return{stack:r,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[b]){const P=wt.loadGlyphRange(r,b,this.url,this.requestManager);g.requests[b]=P}const C=yield g.requests[b];for(const P in C)this._doesCharSupportLocalGlyph(+P)||(g.glyphs[+P]=C[+P]);return g.ranges[b]=!0,{stack:r,id:c,glyph:C[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,c,g){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(g))return;let b=r.tinySDF;if(!b){let P="400";/bold/i.test(c)?P="900":/medium/i.test(c)?P="500":/light/i.test(c)&&(P="200"),b=r.tinySDF=new wt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:P})}const C=b.draw(String.fromCharCode(g));return{id:g,bitmap:new d.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}wt.loadGlyphRange=function(w,r,c,g){return d._(this,void 0,void 0,function*(){const v=256*r,b=v+255,C=g.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${v}-${b}`),"Glyphs"),P=yield d.l(C,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${r}, ${v}-${b}`);const z={};for(const $ of d.n(P.data))z[$.id]=$;return z})},wt.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:g=.25,fontFamily:v="sans-serif",fontWeight:b="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=g,this.radius=c;const P=this.size=w+4*r,z=this._createCanvas(P),$=this.ctx=z.getContext("2d",{willReadFrequently:!0});$.font=`${C} ${b} ${w}px ${v}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:g,actualBoundingBoxLeft:v,actualBoundingBoxRight:b}=this.ctx.measureText(w),C=Math.ceil(c),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-v))),z=Math.min(this.size-this.buffer,C+Math.ceil(g)),$=P+2*this.buffer,G=z+2*this.buffer,q=Math.max($*G,0),te=new Uint8ClampedArray(q),ue={data:te,width:$,height:G,glyphWidth:P,glyphHeight:z,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(P===0||z===0)return ue;const{ctx:fe,buffer:ye,gridInner:ke,gridOuter:Se}=this;fe.clearRect(ye,ye,P,z),fe.fillText(w,ye,ye+C);const Ce=fe.getImageData(ye,ye,P,z);Se.fill(Ne,0,q),ke.fill(0,0,q);for(let me=0;me<z;me++)for(let Pe=0;Pe<P;Pe++){const ze=Ce.data[4*(me*P+Pe)+3]/255;if(ze===0)continue;const Ue=(me+ye)*$+Pe+ye;if(ze===1)Se[Ue]=0,ke[Ue]=Ne;else{const nt=.5-ze;Se[Ue]=nt>0?nt*nt:0,ke[Ue]=nt<0?nt*nt:0}}rt(Se,0,0,$,G,$,this.f,this.v,this.z),rt(ke,ye,ye,P,z,$,this.f,this.v,this.z);for(let me=0;me<q;me++){const Pe=Math.sqrt(Se[me])-Math.sqrt(ke[me]);te[me]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return ue}};class Ge{constructor(){this.specification=d.v.light.position}possiblyEvaluate(r,c){return d.x(r.expression.evaluate(c))}interpolate(r,c,g){return{x:d.y.number(r.x,c.x,g),y:d.y.number(r.y,c.y,g),z:d.y.number(r.z,c.z,g)}}}let ct;class Je extends d.E{constructor(r){super(),ct=ct||new d.q({anchor:new d.D(d.v.light.anchor),position:new Ge,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(ct),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(d.r,r,c))for(const g in r){const v=r[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,g){return(!g||g.validate!==!1)&&d.t(this,r.call(d.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:d.v}))}}const At=new d.q({"sky-color":new d.D(d.v.sky["sky-color"]),"horizon-color":new d.D(d.v.sky["horizon-color"]),"fog-color":new d.D(d.v.sky["fog-color"]),"fog-ground-blend":new d.D(d.v.sky["fog-ground-blend"]),"horizon-fog-blend":new d.D(d.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new d.D(d.v.sky["sky-horizon-blend"]),"atmosphere-blend":new d.D(d.v.sky["atmosphere-blend"])});class Ut extends d.E{constructor(r){super(),this._transitionable=new d.T(At),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new d.z(0))}setSky(r,c={}){if(!this._validate(d.B,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in r){const v=r[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,g={}){return(g==null?void 0:g.validate)!==!1&&d.t(this,r.call(d.u,d.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Sn{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const g=r.join(",")+String(c);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(r,c)),this.dashEntry[g]}getDashRanges(r,c,g){const v=[];let b=r.length%2==1?-r[r.length-1]*g:0,C=r[0]*g,P=!0;v.push({left:b,right:C,isDash:P,zeroLength:r[0]===0});let z=r[0];for(let $=1;$<r.length;$++){P=!P;const G=r[$];b=z*g,z+=G,C=z*g,v.push({left:b,right:C,isDash:P,zeroLength:G===0})}return v}addRoundDash(r,c,g){const v=c/2;for(let b=-g;b<=g;b++){const C=this.width*(this.nextRow+g+b);let P=0,z=r[P];for(let $=0;$<this.width;$++){$/z.right>1&&(z=r[++P]);const G=Math.abs($-z.left),q=Math.abs($-z.right),te=Math.min(G,q);let ue;const fe=b/g*(v+1);if(z.isDash){const ye=v-Math.abs(fe);ue=Math.sqrt(te*te+ye*ye)}else ue=v-Math.sqrt(te*te+fe*fe);this.data[C+$]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(r){for(let P=r.length-1;P>=0;--P){const z=r[P],$=r[P+1];z.zeroLength?r.splice(P,1):$&&$.isDash===z.isDash&&($.left=z.left,r.splice(P,1))}const c=r[0],g=r[r.length-1];c.isDash===g.isDash&&(c.left=g.left-this.width,g.right=c.right+this.width);const v=this.width*this.nextRow;let b=0,C=r[b];for(let P=0;P<this.width;P++){P/C.right>1&&(C=r[++b]);const z=Math.abs(P-C.left),$=Math.abs(P-C.right),G=Math.min(z,$);this.data[v+P]=Math.max(0,Math.min(255,(C.isDash?G:-G)+128))}}addDash(r,c){const g=c?7:0,v=2*g+1;if(this.nextRow+v>this.height)return d.w("LineAtlas out of space"),null;let b=0;for(let P=0;P<r.length;P++)b+=r[P];if(b!==0){const P=this.width/b,z=this.getDashRanges(r,this.width,P);c?this.addRoundDash(z,P,g):this.addRegularDash(z)}const C={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:b};return this.nextRow+=v,this.dirty=!0,C}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ct="maplibre_preloaded_worker_pool";class yn{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<yn.workerCount;)this.workers.push(new Worker(d.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ct]}numActive(){return Object.keys(this.active).length}}const Zn=Math.floor(R.hardwareConcurrency/2);let nr,Be;function hr(){return nr||(nr=new yn),nr}yn.workerCount=d.C(globalThis)?Math.max(Math.min(Zn,3),1):1;class mn{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const g=this.workerPool.acquire(c);for(let v=0;v<g.length;v++){const b=new d.F(g[v],c);b.name=`Worker ${v}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const g=[];for(const v of this.actors)g.push(v.sendAsync({type:r,data:c}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const g of this.actors)g.registerMessageHandler(r,c)}}function Dt(){return Be||(Be=new mn(hr(),d.G),Be.registerMessageHandler("GR",(w,r,c)=>d.m(r,c))),Be}function xe(w,r){const c=d.H();return d.J(c,c,[1,1,0]),d.K(c,c,[.5*w.width,.5*w.height,1]),d.L(c,c,w.calculatePosMatrix(r.toUnwrapped()))}function Vt(w,r,c,g,v,b){const C=function(q,te,ue){if(q)for(const fe of q){const ye=te[fe];if(ye&&ye.source===ue&&ye.type==="fill-extrusion")return!0}else for(const fe in te){const ye=te[fe];if(ye.source===ue&&ye.type==="fill-extrusion")return!0}return!1}(v&&v.layers,r,w.id),P=b.maxPitchScaleFactor(),z=w.tilesIn(g,P,C);z.sort(gn);const $=[];for(const q of z)$.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,c,w._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,v,b,P,xe(w.transform,q.tileID))});const G=function(q){const te={},ue={};for(const fe of q){const ye=fe.queryResults,ke=fe.wrappedTileID,Se=ue[ke]=ue[ke]||{};for(const Ce in ye){const me=ye[Ce],Pe=Se[Ce]=Se[Ce]||{},ze=te[Ce]=te[Ce]||[];for(const Ue of me)Pe[Ue.featureIndex]||(Pe[Ue.featureIndex]=!0,ze.push(Ue))}}return te}($);for(const q in G)G[q].forEach(te=>{const ue=te.feature,fe=w.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=fe});return G}function gn(w,r){const c=w.tileID,g=r.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function Jt(w,r,c){return d._(this,void 0,void 0,function*(){let g=w;if(w.url?g=(yield d.h(r.transformRequest(w.url,"Source"),c)).data:yield R.frameAsync(c),!g)return null;const v=d.M(d.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(v.vectorLayerIds=g.vector_layers.map(b=>b.id)),v})}class Ve{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof d.N?new d.N(r.lng,r.lat):d.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof d.N?new d.N(r.lng,r.lat):d.N.convert(r),this}extend(r){const c=this._sw,g=this._ne;let v,b;if(r instanceof d.N)v=r,b=r;else{if(!(r instanceof Ve))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ve.convert(r)):this.extend(d.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(d.N.convert(r)):this;if(v=r._sw,b=r._ne,!v||!b)return this}return c||g?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new d.N(v.lng,v.lat),this._ne=new d.N(b.lng,b.lat)),this}getCenter(){return new d.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.N(this.getWest(),this.getNorth())}getSouthEast(){return new d.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:g}=d.N.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&v}static convert(r){return r instanceof Ve?r:r&&new Ve(r)}static fromLngLat(r,c=0){const g=360*c/40075017,v=g/Math.cos(Math.PI/180*r.lat);return new Ve(new d.N(r.lng-v,r.lat-g),new d.N(r.lng+v,r.lat+g))}adjustAntiMeridian(){const r=new d.N(this._sw.lng,this._sw.lat),c=new d.N(this._ne.lng,this._ne.lat);return new Ve(r,r.lng>c.lng?new d.N(c.lng+360,c.lat):c)}}class Er{constructor(r,c,g){this.bounds=Ve.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=g||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),g=Math.floor(d.O(this.bounds.getWest())*c),v=Math.floor(d.Q(this.bounds.getNorth())*c),b=Math.ceil(d.O(this.bounds.getEast())*c),C=Math.ceil(d.Q(this.bounds.getSouth())*c);return r.x>=g&&r.x<b&&r.y>=v&&r.y<C}}class Ln extends d.E{constructor(r,c,g,v){if(super(),this.id=r,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.M(c,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Jt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(d.e(this,r),r.bounds&&(this.tileBounds=new Er(r.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new d.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return d.e({},this._options)}loadTile(r){return d._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((b,C)=>{r.reloadPromise={resolve:b,reject:C}})}else r.actor=this.dispatcher.getActor(),v="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:v,data:g},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const g=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(g.resolve).catch(g.reject)}}abortTile(r){return d._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return d._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Xe extends d.E{constructor(r,c,g,v){super(),this.id=r,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},c),d.e(this,d.M(c,["url","scheme","tileSize"]))}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Jt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(d.e(this,r),r.bounds&&(this.tileBounds=new Er(r.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new d.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return d.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return d._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const g=yield Q.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const v=this.map.painter.context,b=v.gl,C=g.data;r.texture=this.map.painter.getTileTexture(C.width),r.texture?r.texture.update(C,{useMipmap:!0}):(r.texture=new Ze(v,C,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}abortTile(r){return d._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return d._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class En extends Xe{constructor(r,c,g,v){super(r,c,g,v),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return d._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const v=yield Q.getImage(g,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(v&&v.data){const b=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&r.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const C=d.b(b)&&d.U()?b:yield this.readImageNow(b),P={type:this.type,uid:r.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const z=yield r.actor.sendAsync({type:"LDT",data:P});r.dem=z,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(v){if(delete r.abortController,r.aborted)r.state="unloaded";else if(v)throw r.state="errored",v}})}readImageNow(r){return d._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&d.V()){const c=r.width+2,g=r.height+2;try{return new d.R({width:c,height:g},yield d.W(r,-1,-1,c,g))}catch{}}return R.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,g=Math.pow(2,c.z),v=(c.x-1+g)%g,b=c.x===0?r.wrap-1:r.wrap,C=(c.x+1+g)%g,P=c.x+1===g?r.wrap+1:r.wrap,z={};return z[new d.S(r.overscaledZ,b,c.z,v,c.y).key]={backfilled:!1},z[new d.S(r.overscaledZ,P,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(z[new d.S(r.overscaledZ,b,c.z,v,c.y-1).key]={backfilled:!1},z[new d.S(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},z[new d.S(r.overscaledZ,P,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<g&&(z[new d.S(r.overscaledZ,b,c.z,v,c.y+1).key]={backfilled:!1},z[new d.S(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},z[new d.S(r.overscaledZ,P,c.z,C,c.y+1).key]={backfilled:!1}),z}unloadTile(r){return d._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class li extends d.E{constructor(r,c,g,v){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(v),this._data=c.data,this._options=d.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=d.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&d.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=d.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:d.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:d.X,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return d._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return d._(this,void 0,void 0,function*(){const r=d.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:g}})}_updateWorkerData(r){return d._(this,void 0,void 0,function*(){const c=d.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(R.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let v=null;g.resourceTiming&&g.resourceTiming[this.id]&&(v=g.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&d.e(b,{resourceTiming:v}),this.fire(new d.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new d.k("dataabort",{dataType:"source"}));this.fire(new d.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(r){return d._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:g},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(v,this.map.painter,c==="RT")})}abortTile(r){return d._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return d._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return d.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var kr=d.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class vi extends d.E{constructor(r,c,g,v){super(),this.id=r,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(r){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new d.j(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(d.Z.fromLngLat);this.tileID=function(v){let b=1/0,C=1/0,P=-1/0,z=-1/0;for(const te of v)b=Math.min(b,te.x),C=Math.min(C,te.y),P=Math.max(P,te.x),z=Math.max(z,te.y);const $=Math.max(P-b,z-C),G=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),q=Math.pow(2,G);return new d.a1(G,Math.floor((b+P)/2*q),Math.floor((C+z)/2*q))}(c),this.minzoom=this.maxzoom=this.tileID.z;const g=c.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new d.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,d.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,d.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,d.X,d.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ze(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return d._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Wt extends vi{constructor(r,c,g,v){super(r,c,g,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield d.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new d.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new d.j(new d.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Ze(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class dr extends vi{constructor(r,c,g,v){super(r,c,g,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(C=>typeof C!="number"))||this.fire(new d.j(new d.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.a2(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new d.j(new d.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return d._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,g=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ze(c,this.canvas,g.RGBA,{premultiply:!0});let v=!1;for(const b in this.tiles){const C=this.tiles[b];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,v=!0)}v&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const qr={},Qi=w=>{switch(w){case"geojson":return li;case"image":return vi;case"raster":return Xe;case"raster-dem":return En;case"vector":return Ln;case"video":return Wt;case"canvas":return dr}return qr[w]},He="RTLPluginLoaded";class Gt extends d.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Dt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return d._(this,arguments,void 0,function*(c,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=R.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return d._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new d.k(He))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Kt=null;function jt(){return Kt||(Kt=new Gt),Kt}class eo{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=d.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(v,b){const C={};if(!b)return C;for(const P of v){const z=P.layerIds.map($=>b.getLayer($)).filter(Boolean);if(z.length!==0){P.layers=z,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map($=>z.filter(G=>G.id===$)[0]));for(const $ of z)C[$.id]=P}}return C}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof d.a6){if(this.hasSymbolBuckets=!0,!g)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof d.a6&&b.hasRTLText){this.hasRTLText=!0,jt().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new d.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const g in this.buckets){const v=this.buckets[g];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ze(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ze(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,g,v,b,C,P,z,$,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:b,scale:C,tileSize:this.tileSize,pixelPosMatrix:G,transform:z,params:P,queryPadding:this.queryPadding*$},r,c,g):{}}querySourceFeatures(r,c){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const v=g.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",C=v._geojsonTileLayer||v[b];if(!C)return;const P=d.a7(c&&c.filter),{z,x:$,y:G}=this.tileID.canonical,q={z,x:$,y:G};for(let te=0;te<C.length;te++){const ue=C.feature(te);if(P.needGeometry){const ke=d.a8(ue,!0);if(!P.filter(new d.z(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!P.filter(new d.z(this.tileID.overscaledZ),ue))continue;const fe=g.getId(ue,b),ye=new d.a9(ue,z,$,G,fe);ye.tile=q,r.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const g=d.aa(r.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const g=Date.now();let v=!1;if(this.expirationTime>g)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const b=this.expirationTime-c;b?this.expirationTime=g+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const b=this.buckets[v],C=b.layers[0].sourceLayer||"_geojsonTileLayer",P=g[C],z=r[C];if(!P||!z||Object.keys(z).length===0)continue;b.update(z,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=c&&c.style&&c.style.getLayer(v);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=R.now()+r}setDependencies(r,c){const g={};for(const v of c)g[v]=!0;this.dependencies[r]=g}hasDependency(r,c){for(const g of r){const v=this.dependencies[g];if(v){for(const b of c)if(v[b])return!0}}return!1}}class lt{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,g){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:c,timeout:void 0};if(g!==void 0&&(b.timeout=setTimeout(()=>{this.remove(r,b)},g)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const g=r.wrapped().key,v=c===void 0?0:this.data[g].indexOf(c),b=this.data[g][v];return this.data[g].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(b.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const g in this.data)for(const v of this.data[g])r(v.value)||c.push(v);for(const g of c)this.remove(g.value.tileID,g)}}class on{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,g){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},d.e(this.stateChanges[r][v],g),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==v&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const b in this.state[r][v])g[b]||(this.deletedStates[r][v][b]=null)}else for(const b in g)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][b]===null&&delete this.deletedStates[r][v][b]}removeFeatureState(r,c,g){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},g&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][g]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(g in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][g]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const g=String(c),v=d.e({},(this.state[r]||{})[g],(this.stateChanges[r]||{})[g]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const C in b)delete v[C]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const g={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const C in this.stateChanges[v])this.state[v][C]||(this.state[v][C]={}),d.e(this.state[v][C],this.stateChanges[v][C]),b[C]=this.state[v][C];g[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const C in this.state[v])b[C]={},this.state[v][C]={};else for(const C in this.deletedStates[v]){if(this.deletedStates[v][C]===null)this.state[v][C]={};else for(const P of Object.keys(this.deletedStates[v][C]))delete this.state[v][C][P];b[C]=this.state[v][C]}g[v]=g[v]||{},d.e(g[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const v in r)r[v].setFeatureState(g,c)}}class st extends d.E{constructor(r,c,g){super(),this.id=r,this.dispatcher=g,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,b,C,P)=>{const z=new(Qi(b.type))(v,b,C,P);if(z.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${z.id}`);return z})(r,c,g,this),this._tiles={},this._cache=new lt(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new on,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,g){return d._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,g)}catch(v){r.state="errored",v.status!==404?this._source.fire(new d.j(v,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new d.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const g=this._tiles[c];g.upload(r),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(_i).map(r=>r.key)}getRenderableIds(r){const c=[];for(const g in this._tiles)this._isIdRenderable(g,r)&&c.push(this._tiles[g]);return r?c.sort((g,v)=>{const b=g.tileID,C=v.tileID,P=new d.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),z=new d.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-C.overscaledZ||z.y-P.y||z.x-P.x}).map(g=>g.tileID.key):c.map(g=>g.tileID).sort(_i).map(g=>g.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){return d._(this,void 0,void 0,function*(){const g=this._tiles[r];g&&(g.state!=="loading"&&(g.state=c),yield this._loadTile(g,r,c))})}_tileLoaded(r,c,g){r.timeAdded=R.now(),g==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const b=c[v];if(r.neighboringTiles&&r.neighboringTiles[b]){const C=this.getTileByID(b);g(r,C),g(C,r)}}function g(v,b){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let C=b.tileID.canonical.x-v.tileID.canonical.x;const P=b.tileID.canonical.y-v.tileID.canonical.y,z=Math.pow(2,v.tileID.canonical.z),$=b.tileID.key;C===0&&P===0||Math.abs(P)>1||(Math.abs(C)>1&&(Math.abs(C+z)===1?C+=z:Math.abs(C-z)===1&&(C-=z)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,C,P),v.neighboringTiles&&v.neighboringTiles[$]&&(v.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,g,v){for(const b in this._tiles){let C=this._tiles[b];if(v[b]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>g)continue;let P=C.tileID;for(;C&&C.tileID.overscaledZ>c+1;){const $=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[$.key],C&&C.hasData()&&(P=$)}let z=P;for(;z.overscaledZ>c;)if(z=z.scaledTo(z.overscaledZ-1),r[z.key]){v[P.key]=P;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const g=this._loadedParentTiles[r.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=r.overscaledZ-1;g>=c;g--){const v=r.scaledTo(g),b=this._getLoadedTile(v);if(b)return b}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,g=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*g*(this._maxTileCacheZoomLevels===null?d.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const g={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),g[b.tileID.key]=b}this._tiles=g;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(r,c,g,v,b,C){const P={},z={},$=Object.keys(r),G=R.now();for(const q of $){const te=r[q],ue=this._tiles[q];if(!ue||ue.fadeEndTime!==0&&ue.fadeEndTime<=G)continue;const fe=this.findLoadedParent(te,c),ye=this.findLoadedSibling(te),ke=fe||ye||null;ke&&(this._addTile(ke.tileID),P[ke.tileID.key]=ke.tileID),z[q]=te}this._retainLoadedChildren(z,v,g,r);for(const q in P)r[q]||(this._coveredTiles[q]=!0,r[q]=P[q]);if(C){const q={},te={};for(const ue of b)this._tiles[ue.key].hasData()?q[ue.key]=ue:te[ue.key]=ue;for(const ue in te){const fe=te[ue].children(this._source.maxzoom);this._tiles[fe[0].key]&&this._tiles[fe[1].key]&&this._tiles[fe[2].key]&&this._tiles[fe[3].key]&&(q[fe[0].key]=r[fe[0].key]=fe[0],q[fe[1].key]=r[fe[1].key]=fe[1],q[fe[2].key]=r[fe[2].key]=fe[2],q[fe[3].key]=r[fe[3].key]=fe[3],delete te[ue])}for(const ue in te){const fe=te[ue],ye=this.findLoadedParent(fe,this._source.minzoom),ke=this.findLoadedSibling(fe),Se=ye||ke||null;if(Se){q[Se.tileID.key]=r[Se.tileID.key]=Se.tileID;for(const Ce in q)q[Ce].isChildOf(Se.tileID)&&delete q[Ce]}}for(const ue in this._tiles)q[ue]||(this._coveredTiles[ue]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let g;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new d.S(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(g=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(g=g.filter(G=>this._source.hasTile(G)))):g=[];const v=r.coveringZoomLevel(this._source),b=Math.max(v-st.maxOverzooming,this._source.minzoom),C=Math.max(v+st.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const q of g)if(q.canonical.z>this._source.minzoom){const te=q.scaledTo(q.canonical.z-1);G[te.key]=te;const ue=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));G[ue.key]=ue}g=g.concat(Object.values(G))}const P=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(g,v);to(this._source.type)&&this._updateCoveredAndRetainedTiles(z,b,C,v,g,c);for(const G in z)this._tiles[G].clearFadeHold();const $=d.ab(this._tiles,z);for(const G of $){const q=this._tiles[G];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var g;const v={},b={},C=Math.max(c-st.maxOverzooming,this._source.minzoom),P=Math.max(c+st.maxUnderzooming,this._source.minzoom),z={};for(const $ of r){const G=this._addTile($);v[$.key]=$,G.hasData()||c<this._source.maxzoom&&(z[$.key]=$)}this._retainLoadedChildren(z,c,P,v);for(const $ of r){let G=this._tiles[$.key];if(G.hasData())continue;if(c+1>this._source.maxzoom){const te=$.children(this._source.maxzoom)[0],ue=this.getTile(te);if(ue&&ue.hasData()){v[te.key]=te;continue}}else{const te=$.children(this._source.maxzoom);if(v[te[0].key]&&v[te[1].key]&&v[te[2].key]&&v[te[3].key])continue}let q=G.wasRequested();for(let te=$.overscaledZ-1;te>=C;--te){const ue=$.scaledTo(te);if(b[ue.key])break;if(b[ue.key]=!0,G=this.getTile(ue),!G&&q&&(G=this._addTile(ue)),G){const fe=G.hasData();if((fe||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||q)&&(v[ue.key]=ue),q=G.wasRequested(),fe)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let g,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){g=this._loadedParentTiles[v.key];break}c.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(g=this._getLoadedTile(b),g)break;v=b}for(const b of c)this._loadedParentTiles[b]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,g=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=g}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const g=c;return c||(c=new eo(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,g||this._source.fire(new d.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const g=c.getExpiryTimeout();g&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},g))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,g){const v=[],b=this.transform;if(!b)return v;const C=g?b.getCameraQueryGeometry(r):r,P=r.map(fe=>b.pointCoordinate(fe,this.terrain)),z=C.map(fe=>b.pointCoordinate(fe,this.terrain)),$=this.getIds();let G=1/0,q=1/0,te=-1/0,ue=-1/0;for(const fe of z)G=Math.min(G,fe.x),q=Math.min(q,fe.y),te=Math.max(te,fe.x),ue=Math.max(ue,fe.y);for(let fe=0;fe<$.length;fe++){const ye=this._tiles[$[fe]];if(ye.holdingForFade())continue;const ke=ye.tileID,Se=Math.pow(2,b.zoom-ye.tileID.overscaledZ),Ce=c*ye.queryPadding*d.X/ye.tileSize/Se,me=[ke.getTilePoint(new d.Z(G,q)),ke.getTilePoint(new d.Z(te,ue))];if(me[0].x-Ce<d.X&&me[0].y-Ce<d.X&&me[1].x+Ce>=0&&me[1].y+Ce>=0){const Pe=P.map(Ue=>ke.getTilePoint(Ue)),ze=z.map(Ue=>ke.getTilePoint(Ue));v.push({tile:ye,tileID:ke,queryGeometry:Pe,cameraQueryGeometry:ze,scale:Se})}}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(g=>this._tiles[g].tileID);for(const g of c)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(to(this._source.type)){const r=R.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,g){this._state.updateState(r=r||"_geojsonTileLayer",c,g)}removeFeatureState(r,c,g){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,g)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,g){const v=this._tiles[r];v&&v.setDependencies(c,g)}reloadTilesForDependencies(r,c){for(const g in this._tiles)this._tiles[g].hasDependency(r,c)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(r,c))}}function _i(w,r){const c=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*r.wrap)-+(r.wrap<0);return w.overscaledZ-r.overscaledZ||g-c||r.canonical.y-w.canonical.y||r.canonical.x-w.canonical.x}function to(w){return w==="raster"||w==="image"||w==="video"}st.maxOverzooming=10,st.maxUnderzooming=3;class Qt{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=d.ac(r,0,1);let c=1,g=this._distances[c];const v=r*this.paddedLength+this.padding;for(;g<v&&c<this._distances.length;)g=this._distances[++c];const b=c-1,C=this._distances[b],P=g-C,z=P>0?(v-C)/P:0;return this.points[b].mult(1-z).add(this.points[c].mult(z))}}function Sr(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class Ii{constructor(r,c,g){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/g),this.yCellCount=Math.ceil(c/g);for(let C=0;C<this.xCellCount*this.yCellCount;C++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,g,v,b){this._forEachCell(c,g,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(r,c,g,v){this._forEachCell(c-v,g-v,c+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(g),this.circles.push(v)}_insertBoxCell(r,c,g,v,b,C){this.boxCells[b].push(C)}_insertCircleCell(r,c,g,v,b,C){this.circleCells[b].push(C)}_query(r,c,g,v,b,C,P){if(g<0||r>this.width||v<0||c>this.height)return[];const z=[];if(r<=0&&c<=0&&this.width<=g&&this.height<=v){if(b)return[{key:null,x1:r,y1:c,x2:g,y2:v}];for(let $=0;$<this.boxKeys.length;$++)z.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const G=this.circles[3*$],q=this.circles[3*$+1],te=this.circles[3*$+2];z.push({key:this.circleKeys[$],x1:G-te,y1:q-te,x2:G+te,y2:q+te})}}else this._forEachCell(r,c,g,v,this._queryCell,z,{hitTest:b,overlapMode:C,seenUids:{box:{},circle:{}}},P);return z}query(r,c,g,v){return this._query(r,c,g,v,!1,null)}hitTest(r,c,g,v,b,C){return this._query(r,c,g,v,!0,b,C).length>0}hitTestCircle(r,c,g,v,b){const C=r-g,P=r+g,z=c-g,$=c+g;if(P<0||C>this.width||$<0||z>this.height)return!1;const G=[];return this._forEachCell(C,z,P,$,this._queryCellCircle,G,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:g},seenUids:{box:{},circle:{}}},b),G.length>0}_queryCell(r,c,g,v,b,C,P,z){const{seenUids:$,hitTest:G,overlapMode:q}=P,te=this.boxCells[b];if(te!==null){const fe=this.bboxes;for(const ye of te)if(!$.box[ye]){$.box[ye]=!0;const ke=4*ye,Se=this.boxKeys[ye];if(r<=fe[ke+2]&&c<=fe[ke+3]&&g>=fe[ke+0]&&v>=fe[ke+1]&&(!z||z(Se))&&(!G||!Sr(q,Se.overlapMode))&&(C.push({key:Se,x1:fe[ke],y1:fe[ke+1],x2:fe[ke+2],y2:fe[ke+3]}),G))return!0}}const ue=this.circleCells[b];if(ue!==null){const fe=this.circles;for(const ye of ue)if(!$.circle[ye]){$.circle[ye]=!0;const ke=3*ye,Se=this.circleKeys[ye];if(this._circleAndRectCollide(fe[ke],fe[ke+1],fe[ke+2],r,c,g,v)&&(!z||z(Se))&&(!G||!Sr(q,Se.overlapMode))){const Ce=fe[ke],me=fe[ke+1],Pe=fe[ke+2];if(C.push({key:Se,x1:Ce-Pe,y1:me-Pe,x2:Ce+Pe,y2:me+Pe}),G)return!0}}}return!1}_queryCellCircle(r,c,g,v,b,C,P,z){const{circle:$,seenUids:G,overlapMode:q}=P,te=this.boxCells[b];if(te!==null){const fe=this.bboxes;for(const ye of te)if(!G.box[ye]){G.box[ye]=!0;const ke=4*ye,Se=this.boxKeys[ye];if(this._circleAndRectCollide($.x,$.y,$.radius,fe[ke+0],fe[ke+1],fe[ke+2],fe[ke+3])&&(!z||z(Se))&&!Sr(q,Se.overlapMode))return C.push(!0),!0}}const ue=this.circleCells[b];if(ue!==null){const fe=this.circles;for(const ye of ue)if(!G.circle[ye]){G.circle[ye]=!0;const ke=3*ye,Se=this.circleKeys[ye];if(this._circlesCollide(fe[ke],fe[ke+1],fe[ke+2],$.x,$.y,$.radius)&&(!z||z(Se))&&!Sr(q,Se.overlapMode))return C.push(!0),!0}}}_forEachCell(r,c,g,v,b,C,P,z){const $=this._convertToXCellCoord(r),G=this._convertToYCellCoord(c),q=this._convertToXCellCoord(g),te=this._convertToYCellCoord(v);for(let ue=$;ue<=q;ue++)for(let fe=G;fe<=te;fe++)if(b.call(this,r,c,g,v,this.xCellCount*fe+ue,C,P,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,g,v,b,C){const P=v-r,z=b-c,$=g+C;return $*$>P*P+z*z}_circleAndRectCollide(r,c,g,v,b,C,P){const z=(C-v)/2,$=Math.abs(r-(v+z));if($>z+g)return!1;const G=(P-b)/2,q=Math.abs(c-(b+G));if(q>G+g)return!1;if($<=z||q<=G)return!0;const te=$-z,ue=q-G;return te*te+ue*ue<=g*g}}function Hr(w,r,c,g,v){const b=d.H();return r?(d.K(b,b,[1/v,1/v,1]),c||d.ad(b,b,g.angle)):d.L(b,g.labelPlaneMatrix,w),b}function no(w,r,c,g,v){if(r){const b=d.ae(w);return d.K(b,b,[v,v,1]),c||d.ad(b,b,-g.angle),b}return g.glCoordMatrix}function ve(w,r,c,g){let v;g?(v=[w,r,g(w,r),1],d.af(v,v,c)):(v=[w,r,0,1],_n(v,v,c));const b=v[3];return{point:new d.P(v[0]/b,v[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function J(w,r){return .5+w/r*.5}function K(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function se(w,r,c,g,v,b,C,P,z,$,G,q,te,ue,fe){const ye=g?w.textSizeData:w.iconSizeData,ke=d.ag(ye,c.transform.zoom),Se=[256/c.width*2+1,256/c.height*2+1],Ce=g?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Ce.clear();const me=w.lineVertexArray,Pe=g?w.text.placedSymbolArray:w.icon.placedSymbolArray,ze=c.transform.width/c.transform.height;let Ue=!1;for(let nt=0;nt<Pe.length;nt++){const ht=Pe.get(nt);if(ht.hidden||ht.writingMode===d.ah.vertical&&!Ue){Ft(ht.numGlyphs,Ce);continue}Ue=!1;const bt=ve(ht.anchorX,ht.anchorY,r,fe);if(!K(bt.point,Se)){Ft(ht.numGlyphs,Ce);continue}const It=J(c.transform.cameraToCenterDistance,bt.signedDistanceFromCamera),vt=d.ai(ye,ke,ht),yt=C?vt/It:vt*It,Nt={getElevation:fe,labelPlaneMatrix:v,lineVertexArray:me,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new d.P(ht.anchorX,ht.anchorY),unwrappedTileID:G,width:q,height:te,translation:ue},nn=Te(Nt,ht,yt,!1,P,r,b,w.glyphOffsetArray,Ce,ze,z);Ue=nn.useVertical,(nn.notEnoughRoom||Ue||nn.needsFlipping&&Te(Nt,ht,yt,!0,P,r,b,w.glyphOffsetArray,Ce,ze,z).notEnoughRoom)&&Ft(ht.numGlyphs,Ce)}g?w.text.dynamicLayoutVertexBuffer.updateData(Ce):w.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function oe(w,r,c,g,v,b,C,P){const z=b.glyphStartIndex+b.numGlyphs,$=b.lineStartIndex,G=b.lineStartIndex+b.lineLength,q=r.getoffsetX(b.glyphStartIndex),te=r.getoffsetX(z-1),ue=dt(w*q,c,g,v,b.segment,$,G,P,C);if(!ue)return null;const fe=dt(w*te,c,g,v,b.segment,$,G,P,C);return fe?P.projectionCache.anyProjectionOccluded?null:{first:ue,last:fe}:null}function ce(w,r,c,g){return w===d.ah.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*g?{useVertical:!0}:(w===d.ah.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Te(w,r,c,g,v,b,C,P,z,$,G){const q=c/24,te=r.lineOffsetX*q,ue=r.lineOffsetY*q;let fe;if(r.numGlyphs>1){const ye=r.glyphStartIndex+r.numGlyphs,ke=r.lineStartIndex,Se=r.lineStartIndex+r.lineLength,Ce=oe(q,P,te,ue,g,r,G,w);if(!Ce)return{notEnoughRoom:!0};const me=ve(Ce.first.point.x,Ce.first.point.y,C,w.getElevation).point,Pe=ve(Ce.last.point.x,Ce.last.point.y,C,w.getElevation).point;if(v&&!g){const ze=ce(r.writingMode,me,Pe,$);if(ze)return ze}fe=[Ce.first];for(let ze=r.glyphStartIndex+1;ze<ye-1;ze++)fe.push(dt(q*P.getoffsetX(ze),te,ue,g,r.segment,ke,Se,w,G));fe.push(Ce.last)}else{if(v&&!g){const ke=ve(w.tileAnchorPoint.x,w.tileAnchorPoint.y,b,w.getElevation).point,Se=r.lineStartIndex+r.segment+1,Ce=new d.P(w.lineVertexArray.getx(Se),w.lineVertexArray.gety(Se)),me=ve(Ce.x,Ce.y,b,w.getElevation),Pe=me.signedDistanceFromCamera>0?me.point:function(Ue,nt,ht,bt,It,vt){return Ae(Ue,nt,ht,1,It,vt)}(w.tileAnchorPoint,Ce,ke,0,b,w),ze=ce(r.writingMode,ke,Pe,$);if(ze)return ze}const ye=dt(q*P.getoffsetX(r.glyphStartIndex),te,ue,g,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,w,G);if(!ye||w.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};fe=[ye]}for(const ye of fe)d.aj(z,ye.point,ye.angle);return{}}function Ae(w,r,c,g,v,b){const C=w.add(w.sub(r)._unit()),P=v!==void 0?ve(C.x,C.y,v,b.getElevation).point:Oe(C.x,C.y,b).point,z=c.sub(P);return c.add(z._mult(g/z.mag()))}function be(w,r,c){const g=r.projectionCache;if(g.projections[w])return g.projections[w];const v=new d.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),b=Oe(v.x,v.y,r);if(b.signedDistanceFromCamera>0)return g.projections[w]=b.point,g.anyProjectionOccluded=g.anyProjectionOccluded||b.isOccluded,b.point;const C=w-c.direction;return function(P,z,$,G,q){return Ae(P,z,$,G,void 0,q)}(c.distanceFromAnchor===0?r.tileAnchorPoint:new d.P(r.lineVertexArray.getx(C),r.lineVertexArray.gety(C)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function Oe(w,r,c){const g=w+c.translation[0],v=r+c.translation[1];let b;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(b=c.projection.projectTileCoordinates(g,v,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height):(b=ve(g,v,c.labelPlaneMatrix,c.getElevation),b.isOccluded=!1),b}function Ke(w,r,c){return w._unit()._perp()._mult(r*c)}function je(w,r,c,g,v,b,C,P,z){if(P.projectionCache.offsets[w])return P.projectionCache.offsets[w];const $=c.add(r);if(w+z.direction<g||w+z.direction>=v)return P.projectionCache.offsets[w]=$,$;const G=be(w+z.direction,P,z),q=Ke(G.sub(c),C,z.direction),te=c.add(q),ue=G.add(q);return P.projectionCache.offsets[w]=d.ak(b,$,te,ue)||$,P.projectionCache.offsets[w]}function dt(w,r,c,g,v,b,C,P,z){const $=g?w-r:w+r;let G=$>0?1:-1,q=0;g&&(G*=-1,q=Math.PI),G<0&&(q+=Math.PI);let te,ue=G>0?b+v:b+v+1;P.projectionCache.cachedAnchorPoint?te=P.projectionCache.cachedAnchorPoint:(te=Oe(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=te);let fe,ye,ke=te,Se=te,Ce=0,me=0;const Pe=Math.abs($),ze=[];let Ue;for(;Ce+me<=Pe;){if(ue+=G,ue<b||ue>=C)return null;Ce+=me,Se=ke,ye=fe;const bt={absOffsetX:Pe,direction:G,distanceFromAnchor:Ce,previousVertex:Se};if(ke=be(ue,P,bt),c===0)ze.push(Se),Ue=ke.sub(Se);else{let It;const vt=ke.sub(Se);It=vt.mag()===0?Ke(be(ue+G,P,bt).sub(ke),c,G):Ke(vt,c,G),ye||(ye=Se.add(It)),fe=je(ue,It,ke,b,C,ye,c,P,bt),ze.push(ye),Ue=fe.sub(ye)}me=Ue.mag()}const nt=Ue._mult((Pe-Ce)/me)._add(ye||Se),ht=q+Math.atan2(ke.y-Se.y,ke.x-Se.x);return ze.push(nt),{point:nt,angle:z?ht:0,path:ze}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ft(w,r){for(let c=0;c<w;c++){const g=r.length;r.resize(g+4),r.float32.set(Lt,3*g)}}function _n(w,r,c){const g=r[0],v=r[1];return w[0]=c[0]*g+c[4]*v+c[12],w[1]=c[1]*g+c[5]*v+c[13],w[3]=c[3]*g+c[7]*v+c[15],w}const sn=100;class an{constructor(r,c,g=new Ii(r.width+200,r.height+200,25),v=new Ii(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=c,this.grid=g,this.ignoredGrid=v,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+sn,this.screenBottomBoundary=r.height+sn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,g,v,b,C,P,z,$,G,q){const te=r.anchorPointX+z[0],ue=r.anchorPointY+z[1],fe=this.projectAndGetPerspectiveRatio(v,te,ue,b,G),ye=g*fe.perspectiveRatio;let ke;if(C||P)ke=this._projectCollisionBox(r,ye,v,b,C,P,z,fe,G,q);else{const ze=fe.point.x+(q?q.x*ye:0),Ue=fe.point.y+(q?q.y*ye:0);ke={allPointsOccluded:!1,box:[ze+r.x1*ye,Ue+r.y1*ye,ze+r.x2*ye,Ue+r.y2*ye]}}const[Se,Ce,me,Pe]=ke.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?ke.allPointsOccluded:this.mapProjection.isOccluded(te,ue,b))||fe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Se,Ce,me,Pe)||c!=="always"&&this.grid.hitTest(Se,Ce,me,Pe,c,$)?{box:[Se,Ce,me,Pe],placeable:!1,offscreen:!1}:{box:[Se,Ce,me,Pe],placeable:!0,offscreen:this.isOffscreen(Se,Ce,me,Pe)}}placeCollisionCircles(r,c,g,v,b,C,P,z,$,G,q,te,ue,fe,ye,ke){const Se=[],Ce=new d.P(c.anchorX,c.anchorY),me=this.getPerspectiveRatio(C,Ce.x,Ce.y,P,ke),Pe=(q?b/me:b*me)/d.ap,ze={getElevation:ke,labelPlaneMatrix:z,lineVertexArray:g,pitchWithMap:q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ce,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:ye},Ue=oe(Pe,v,c.lineOffsetX*Pe,c.lineOffsetY*Pe,!1,c,!1,ze);let nt=!1,ht=!1,bt=!0;if(Ue){const It=.5*ue*me+fe,vt=new d.P(-100,-100),yt=new d.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new Qt,nn=Ue.first,_t=Ue.last;let St=[];for(let hn=nn.path.length-1;hn>=1;hn--)St.push(nn.path[hn]);for(let hn=1;hn<_t.path.length;hn++)St.push(_t.path[hn]);const en=2.5*It;if($){const hn=this.projectPathToScreenSpace(St,ze,$);St=hn.some(vn=>vn.signedDistanceFromCamera<=0)?[]:hn.map(vn=>vn.point)}let gr=[];if(St.length>0){const hn=St[0].clone(),vn=St[0].clone();for(let yr=1;yr<St.length;yr++)hn.x=Math.min(hn.x,St[yr].x),hn.y=Math.min(hn.y,St[yr].y),vn.x=Math.max(vn.x,St[yr].x),vn.y=Math.max(vn.y,St[yr].y);gr=hn.x>=vt.x&&vn.x<=yt.x&&hn.y>=vt.y&&vn.y<=yt.y?[St]:vn.x<vt.x||hn.x>yt.x||vn.y<vt.y||hn.y>yt.y?[]:d.al([St],vt.x,vt.y,yt.x,yt.y)}for(const hn of gr){Nt.reset(hn,.25*It);let vn=0;vn=Nt.length<=.5*It?1:Math.ceil(Nt.paddedLength/en)+1;for(let yr=0;yr<vn;yr++){const Bi=yr/Math.max(vn-1,1),ks=Nt.lerp(Bi),vr=ks.x+sn,wo=ks.y+sn;Se.push(vr,wo,It,0);const io=vr-It,$i=wo-It,oo=vr+It,Js=wo+It;if(bt=bt&&this.isOffscreen(io,$i,oo,Js),ht=ht||this.isInsideGrid(io,$i,oo,Js),r!=="always"&&this.grid.hitTestCircle(vr,wo,It,r,te)&&(nt=!0,!G))return{circles:[],offscreen:!1,collisionDetected:nt}}}}return{circles:!G&&nt||!ht||me<this.perspectiveRatioCutoff?[]:Se,offscreen:bt,collisionDetected:nt}}projectPathToScreenSpace(r,c,g){return r.map(v=>ve(v.x,v.y,g,c.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let g=1/0,v=1/0,b=-1/0,C=-1/0;for(const G of r){const q=new d.P(G.x+sn,G.y+sn);g=Math.min(g,q.x),v=Math.min(v,q.y),b=Math.max(b,q.x),C=Math.max(C,q.y),c.push(q)}const P=this.grid.query(g,v,b,C).concat(this.ignoredGrid.query(g,v,b,C)),z={},$={};for(const G of P){const q=G.key;if(z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]={}),z[q.bucketInstanceId][q.featureIndex])continue;const te=[new d.P(G.x1,G.y1),new d.P(G.x2,G.y1),new d.P(G.x2,G.y2),new d.P(G.x1,G.y2)];d.am(c,te)&&(z[q.bucketInstanceId][q.featureIndex]=!0,$[q.bucketInstanceId]===void 0&&($[q.bucketInstanceId]=[]),$[q.bucketInstanceId].push(q.featureIndex))}return $}insertCollisionBox(r,c,g,v,b,C){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:C,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,g,v,b,C){const P=g?this.ignoredGrid:this.grid,z={bucketInstanceId:v,featureIndex:b,collisionGroupID:C,overlapMode:c};for(let $=0;$<r.length;$+=4)P.insertCircle(z,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,c,g,v,b){let C;b?(C=[c,g,b(c,g),1],d.af(C,C,r)):(C=[c,g,0,1],_n(C,C,r));const P=C[3];return{point:new d.P((C[0]/P+1)/2*this.transform.width+sn,(-C[1]/P+1)/2*this.transform.height+sn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}getPerspectiveRatio(r,c,g,v,b){const C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,g,v,b):ve(c,g,r,b);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(r,c,g,v){return g<sn||r>=this.screenRightBoundary||v<sn||c>this.screenBottomBoundary}isInsideGrid(r,c,g,v){return g>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=d.an([]);return d.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,g,v,b,C,P,z,$,G){let q=new d.P(1,0),te=new d.P(0,1);const ue=new d.P(r.anchorPointX+P[0],r.anchorPointY+P[1]);if(C&&!b){const bt=this.projectAndGetPerspectiveRatio(g,ue.x+1,ue.y,v,$).point.sub(z.point).unit(),It=Math.atan(bt.y/bt.x)+(bt.x<0?Math.PI:0),vt=Math.sin(It),yt=Math.cos(It);q=new d.P(yt,vt),te=new d.P(-vt,yt)}else if(!C&&b){const bt=-this.transform.angle,It=Math.sin(bt),vt=Math.cos(bt);q=new d.P(vt,It),te=new d.P(-It,vt)}let fe=z.point,ye=c;if(b){fe=ue;const bt=this.transform.zoom-Math.floor(this.transform.zoom);ye=Math.pow(2,-bt),ye*=this.mapProjection.getPitchedTextCorrection(this.transform,ue,v),G||(ye*=d.ac(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}G&&(fe=fe.add(q.mult(G.x*ye)).add(te.mult(G.y*ye)));const ke=r.x1*ye,Se=r.x2*ye,Ce=(ke+Se)/2,me=r.y1*ye,Pe=r.y2*ye,ze=(me+Pe)/2,Ue=[{offsetX:ke,offsetY:me},{offsetX:Ce,offsetY:me},{offsetX:Se,offsetY:me},{offsetX:Se,offsetY:ze},{offsetX:Se,offsetY:Pe},{offsetX:Ce,offsetY:Pe},{offsetX:ke,offsetY:Pe},{offsetX:ke,offsetY:ze}];let nt=[];for(const{offsetX:bt,offsetY:It}of Ue)nt.push(new d.P(fe.x+q.x*bt+te.x*It,fe.y+q.y*bt+te.y*It));let ht=!1;if(b){const bt=nt.map(It=>this.projectAndGetPerspectiveRatio(g,It.x,It.y,v,$));ht=bt.some(It=>!It.isOccluded),nt=bt.map(It=>It.point)}else ht=!0;return{box:d.ao(nt),allPointsOccluded:!ht}}}function fn(w,r,c){return r*(d.X/(w.tileSize*Math.pow(2,c-w.tileID.overscaledZ)))}class fr{constructor(r,c,g,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Un{constructor(r,c,g,v,b){this.text=new fr(r?r.text:null,c,g,b),this.icon=new fr(r?r.icon:null,c,v,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class rn{constructor(r,c,g){this.text=r,this.icon=c,this.skipFade=g}}class Pn{constructor(){this.invProjMatrix=d.H(),this.viewportMatrix=d.H(),this.circles=[]}}class Gn{constructor(r,c,g,v,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=b}}class Ir{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[r]}}function wn(w,r,c,g,v){const{horizontalAlign:b,verticalAlign:C}=d.au(w);return new d.P(-(b-.5)*r+g[0]*v,-(C-.5)*c+g[1]*v)}class Ti{constructor(r,c,g,v,b,C){this.transform=r.clone(),this.terrain=g,this.collisionIndex=new an(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Ir(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(g,v)=>c.getElevation(r,g,v):null}getBucketParts(r,c,g,v){const b=g.getBucket(c),C=g.latestFeatureIndex;if(!b||!C||c.id!==b.layerIds[0])return;const P=g.collisionBoxArray,z=b.layers[0].layout,$=b.layers[0].paint,G=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),q=g.tileSize/d.X,te=g.tileID.toUnwrapped(),ue=this.transform.calculatePosMatrix(te),fe=z.get("text-pitch-alignment")==="map",ye=z.get("text-rotation-alignment")==="map",ke=fn(g,1,this.transform.zoom),Se=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("text-translate"),$.get("text-translate-anchor")),Ce=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("icon-translate"),$.get("icon-translate-anchor")),me=Hr(ue,fe,ye,this.transform,ke);let Pe=null;if(fe){const Ue=no(ue,fe,ye,this.transform,ke);Pe=d.L([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[b.bucketInstanceId]=new Gn(b.bucketInstanceId,C,b.sourceLayerIndex,b.index,g.tileID);const ze={bucket:b,layout:z,translationText:Se,translationIcon:Ce,posMatrix:ue,unwrappedTileID:te,textLabelPlaneMatrix:me,labelToScreenMatrix:Pe,scale:G,textPixelRatio:q,holdingForFade:g.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:d.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const Ue of b.sortKeyRanges){const{sortKey:nt,symbolInstanceStart:ht,symbolInstanceEnd:bt}=Ue;r.push({sortKey:nt,symbolInstanceStart:ht,symbolInstanceEnd:bt,parameters:ze})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(r,c,g,v,b,C,P,z,$,G,q,te,ue,fe,ye,ke,Se,Ce,me){const Pe=d.aq[r.textAnchor],ze=[r.textOffset0,r.textOffset1],Ue=wn(Pe,g,v,ze,b),nt=this.collisionIndex.placeCollisionBox(c,te,z,$,G,P,C,ke,q.predicate,me,Ue);if((!Ce||this.collisionIndex.placeCollisionBox(Ce,te,z,$,G,P,C,Se,q.predicate,me,Ue).placeable)&&nt.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ue.crossTileID]={textOffset:ze,width:g,height:v,anchor:Pe,textBoxScale:b,prevAnchor:ht},this.markUsedJustification(fe,Pe,ue,ye),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,ye,ue),this.placedOrientations[ue.crossTileID]=ye),{shift:Ue,placedGlyphBoxes:nt}}}placeLayerBucketPart(r,c,g){const{bucket:v,layout:b,translationText:C,translationIcon:P,posMatrix:z,unwrappedTileID:$,textLabelPlaneMatrix:G,labelToScreenMatrix:q,textPixelRatio:te,holdingForFade:ue,collisionBoxArray:fe,partiallyEvaluatedTextSize:ye,collisionGroup:ke}=r.parameters,Se=b.get("text-optional"),Ce=b.get("icon-optional"),me=d.ar(b,"text-overlap","text-allow-overlap"),Pe=me==="always",ze=d.ar(b,"icon-overlap","icon-allow-overlap"),Ue=ze==="always",nt=b.get("text-rotation-alignment")==="map",ht=b.get("text-pitch-alignment")==="map",bt=b.get("icon-text-fit")!=="none",It=b.get("symbol-z-order")==="viewport-y",vt=Pe&&(Ue||!v.hasIconData()||Ce),yt=Ue&&(Pe||!v.hasTextData()||Se);!v.collisionArrays&&fe&&v.deserializeCollisionBoxes(fe);const Nt=this._getTerrainElevationFunc(this.retainedQueryData[v.bucketInstanceId].tileID),nn=(_t,St,en)=>{var gr,hn;if(c[_t.crossTileID])return;if(ue)return void(this.placements[_t.crossTileID]=new rn(!1,!1,!1));let vn=!1,yr=!1,Bi=!0,ks=null,vr={box:null,placeable:!1,offscreen:null},wo={box:null,placeable:!1,offscreen:null},io=null,$i=null,oo=null,Js=0,Du=0,Wh=0;St.textFeatureIndex?Js=St.textFeatureIndex:_t.useRuntimeCollisionCircles&&(Js=_t.featureIndex),St.verticalTextFeatureIndex&&(Du=St.verticalTextFeatureIndex);const Ou=St.textBox;if(Ou){const ls=Ai=>{let Ui=d.ah.horizontal;if(v.allowVerticalPlacement&&!Ai&&this.prevPlacement){const Ho=this.prevPlacement.placedOrientations[_t.crossTileID];Ho&&(this.placedOrientations[_t.crossTileID]=Ho,Ui=Ho,this.markUsedOrientation(v,Ui,_t))}return Ui},us=(Ai,Ui)=>{if(v.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&St.verticalTextBox){for(const Ho of v.writingModes)if(Ho===d.ah.vertical?(vr=Ui(),wo=vr):vr=Ai(),vr&&vr.placeable)break}else vr=Ai()},cl=_t.textAnchorOffsetStartIndex,Ss=_t.textAnchorOffsetEndIndex;if(Ss===cl){const Ai=(Ui,Ho)=>{const bn=this.collisionIndex.placeCollisionBox(Ui,me,te,z,$,ht,nt,C,ke.predicate,Nt);return bn&&bn.placeable&&(this.markUsedOrientation(v,Ho,_t),this.placedOrientations[_t.crossTileID]=Ho),bn};us(()=>Ai(Ou,d.ah.horizontal),()=>{const Ui=St.verticalTextBox;return v.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&Ui?Ai(Ui,d.ah.vertical):{box:null,offscreen:null}}),ls(vr&&vr.placeable)}else{let Ai=d.aq[(hn=(gr=this.prevPlacement)===null||gr===void 0?void 0:gr.variableOffsets[_t.crossTileID])===null||hn===void 0?void 0:hn.anchor];const Ui=(bn,Zl,Fu)=>{const Bu=bn.x2-bn.x1,Um=bn.y2-bn.y1,v0=_t.textBoxScale,jm=bt&&ze==="never"?Zl:null;let hl=null,Vm=me==="never"?1:2,Xh="never";Ai&&Vm++;for(let Zc=0;Zc<Vm;Zc++){for(let Yh=cl;Yh<Ss;Yh++){const Kh=v.textAnchorOffsets.get(Yh);if(Ai&&Kh.textAnchor!==Ai)continue;const $u=this.attemptAnchorPlacement(Kh,bn,Bu,Um,v0,nt,ht,te,z,$,ke,Xh,_t,v,Fu,C,P,jm,Nt);if($u&&(hl=$u.placedGlyphBoxes,hl&&hl.placeable))return vn=!0,ks=$u.shift,hl}Ai?Ai=null:Xh=me}return g&&!hl&&(hl={box:this.collisionIndex.placeCollisionBox(Ou,"always",te,z,$,ht,nt,C,ke.predicate,Nt,new d.P(0,0)).box,offscreen:!1,placeable:!1}),hl};us(()=>Ui(Ou,St.iconBox,d.ah.horizontal),()=>{const bn=St.verticalTextBox;return v.allowVerticalPlacement&&(!vr||!vr.placeable)&&_t.numVerticalGlyphVertices>0&&bn?Ui(bn,St.verticalIconBox,d.ah.vertical):{box:null,occluded:!0,offscreen:null}}),vr&&(vn=vr.placeable,Bi=vr.offscreen);const Ho=ls(vr&&vr.placeable);if(!vn&&this.prevPlacement){const bn=this.prevPlacement.variableOffsets[_t.crossTileID];bn&&(this.variableOffsets[_t.crossTileID]=bn,this.markUsedJustification(v,bn.anchor,_t,Ho))}}}if(io=vr,vn=io&&io.placeable,Bi=io&&io.offscreen,_t.useRuntimeCollisionCircles){const ls=v.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex),us=d.ai(v.textSizeData,ye,ls),cl=b.get("text-padding");$i=this.collisionIndex.placeCollisionCircles(me,ls,v.lineVertexArray,v.glyphOffsetArray,us,z,$,G,q,g,ht,ke.predicate,_t.collisionCircleDiameter,cl,C,Nt),$i.circles.length&&$i.collisionDetected&&!g&&d.w("Collisions detected, but collision boxes are not shown"),vn=Pe||$i.circles.length>0&&!$i.collisionDetected,Bi=Bi&&$i.offscreen}if(St.iconFeatureIndex&&(Wh=St.iconFeatureIndex),St.iconBox){const ls=us=>this.collisionIndex.placeCollisionBox(us,ze,te,z,$,ht,nt,P,ke.predicate,Nt,bt&&ks?ks:void 0);wo&&wo.placeable&&St.verticalIconBox?(oo=ls(St.verticalIconBox),yr=oo.placeable):(oo=ls(St.iconBox),yr=oo.placeable),Bi=Bi&&oo.offscreen}const as=Se||_t.numHorizontalGlyphVertices===0&&_t.numVerticalGlyphVertices===0,Zh=Ce||_t.numIconVertices===0;as||Zh?Zh?as||(yr=yr&&vn):vn=yr&&vn:yr=vn=yr&&vn;const jf=yr&&oo.placeable;if(vn&&io.placeable&&this.collisionIndex.insertCollisionBox(io.box,me,b.get("text-ignore-placement"),v.bucketInstanceId,wo&&wo.placeable&&Du?Du:Js,ke.ID),jf&&this.collisionIndex.insertCollisionBox(oo.box,ze,b.get("icon-ignore-placement"),v.bucketInstanceId,Wh,ke.ID),$i&&vn&&this.collisionIndex.insertCollisionCircles($i.circles,me,b.get("text-ignore-placement"),v.bucketInstanceId,Js,ke.ID),g&&this.storeCollisionData(v.bucketInstanceId,en,St,io,oo,$i),_t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_t.crossTileID]=new rn(vn||vt,yr||yt,Bi||v.justReloaded),c[_t.crossTileID]=!0};if(It){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _t=v.getSortedSymbolIndexes(this.transform.angle);for(let St=_t.length-1;St>=0;--St){const en=_t[St];nn(v.symbolInstances.get(en),v.collisionArrays[en],en)}}else for(let _t=r.symbolInstanceStart;_t<r.symbolInstanceEnd;_t++)nn(v.symbolInstances.get(_t),v.collisionArrays[_t],_t);if(g&&v.bucketInstanceId in this.collisionCircleArrays){const _t=this.collisionCircleArrays[v.bucketInstanceId];d.as(_t.invProjMatrix,z),_t.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}storeCollisionData(r,c,g,v,b,C){if(g.textBox||g.iconBox){let P,z;this.collisionBoxArrays.has(r)?P=this.collisionBoxArrays.get(r):(P=new Map,this.collisionBoxArrays.set(r,P)),P.has(c)?z=P.get(c):(z={text:null,icon:null},P.set(c,z)),g.textBox&&(z.text=v.box),g.iconBox&&(z.icon=b.box)}if(C){let P=this.collisionCircleArrays[r];P===void 0&&(P=this.collisionCircleArrays[r]=new Pn);for(let z=0;z<C.circles.length;z+=4)P.circles.push(C.circles[z+0]),P.circles.push(C.circles[z+1]),P.circles.push(C.circles[z+2]),P.circles.push(C.collisionDetected?1:0)}}markUsedJustification(r,c,g,v){let b;b=v===d.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[d.at(c)];const C=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const P of C)P>=0&&(r.text.placedSymbolArray.get(P).crossTileID=b>=0&&P!==b?0:g.crossTileID)}markUsedOrientation(r,c,g){const v=c===d.ah.horizontal||c===d.ah.horizontalOnly?c:0,b=c===d.ah.vertical?c:0,C=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const P of C)r.text.placedSymbolArray.get(P).placedOrientation=v;g.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},C=c?c.variableOffsets:{},P=c?c.placedOrientations:{};for(const z in this.placements){const $=this.placements[z],G=b[z];G?(this.opacities[z]=new Un(G,v,$.text,$.icon),g=g||$.text!==G.text.placed||$.icon!==G.icon.placed):(this.opacities[z]=new Un(null,v,$.text,$.icon,$.skipFade),g=g||$.text||$.icon)}for(const z in b){const $=b[z];if(!this.opacities[z]){const G=new Un($,v,!1,!1);G.isHidden()||(this.opacities[z]=G,g=g||$.text.placed||$.icon.placed)}}for(const z in C)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=C[z]);for(const z in P)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=P[z]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const g={};for(const v of c){const b=v.getBucket(r);b&&v.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,v.tileID,g,v.collisionBoxArray)}}updateBucketOpacities(r,c,g,v){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],C=b.layout,P=new Un(null,0,!1,!1,!0),z=C.get("text-allow-overlap"),$=C.get("icon-allow-overlap"),G=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=C.get("text-rotation-alignment")==="map",te=C.get("text-pitch-alignment")==="map",ue=C.get("icon-text-fit")!=="none",fe=new Un(null,0,z&&($||!r.hasIconData()||C.get("icon-optional")),$&&(z||!r.hasTextData()||C.get("text-optional")),!0);!r.collisionArrays&&v&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(v);const ye=(Se,Ce,me)=>{for(let Pe=0;Pe<Ce/4;Pe++)Se.opacityVertexArray.emplaceBack(me);Se.hasVisibleVertices=Se.hasVisibleVertices||me!==Vs},ke=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Se=0;Se<r.symbolInstances.length;Se++){const Ce=r.symbolInstances.get(Se),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:Pe,crossTileID:ze}=Ce;let Ue=this.opacities[ze];g[ze]?Ue=P:Ue||(Ue=fe,this.opacities[ze]=Ue),g[ze]=!0;const nt=Ce.numIconVertices>0,ht=this.placedOrientations[Ce.crossTileID],bt=ht===d.ah.vertical,It=ht===d.ah.horizontal||ht===d.ah.horizontalOnly;if(me>0||Pe>0){const yt=ni(Ue.text);ye(r.text,me,bt?Vs:yt),ye(r.text,Pe,It?Vs:yt);const Nt=Ue.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(St=>{St>=0&&(r.text.placedSymbolArray.get(St).hidden=Nt||bt?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=Nt||It?1:0);const nn=this.variableOffsets[Ce.crossTileID];nn&&this.markUsedJustification(r,nn.anchor,Ce,ht);const _t=this.placedOrientations[Ce.crossTileID];_t&&(this.markUsedJustification(r,"left",Ce,_t),this.markUsedOrientation(r,_t,Ce))}if(nt){const yt=ni(Ue.icon),Nt=!(ue&&Ce.verticalPlacedIconSymbolIndex&&bt);Ce.placedIconSymbolIndex>=0&&(ye(r.icon,Ce.numIconVertices,Nt?yt:Vs),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(ye(r.icon,Ce.numVerticalIconVertices,Nt?Vs:yt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}const vt=ke&&ke.has(Se)?ke.get(Se):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const yt=r.collisionArrays[Se];if(yt){let Nt=new d.P(0,0);if(yt.textBox||yt.verticalTextBox){let nn=!0;if(G){const _t=this.variableOffsets[ze];_t?(Nt=wn(_t.anchor,_t.width,_t.height,_t.textOffset,_t.textBoxScale),q&&Nt._rotate(te?this.transform.angle:-this.transform.angle)):nn=!1}if(yt.textBox||yt.verticalTextBox){let _t;yt.textBox&&(_t=bt),yt.verticalTextBox&&(_t=It),Ha(r.textCollisionBox.collisionVertexArray,Ue.text.placed,!nn||_t,vt.text,Nt.x,Nt.y)}}if(yt.iconBox||yt.verticalIconBox){const nn=!!(!It&&yt.verticalIconBox);let _t;yt.iconBox&&(_t=nn),yt.verticalIconBox&&(_t=!nn),Ha(r.iconCollisionBox.collisionVertexArray,Ue.icon.placed,_t,vt.icon,ue?Nt.x:0,ue?Nt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Se.invProjMatrix,r.placementViewportMatrix=Se.viewportMatrix,r.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>r}setStale(){this.stale=!0}}function Ha(w,r,c,g,v,b){g&&g.length!==0||(g=[0,0,0,0]);const C=g[0]-sn,P=g[1]-sn,z=g[2]-sn,$=g[3]-sn;w.emplaceBack(r?1:0,c?1:0,v||0,b||0,C,P),w.emplaceBack(r?1:0,c?1:0,v||0,b||0,z,P),w.emplaceBack(r?1:0,c?1:0,v||0,b||0,z,$),w.emplaceBack(r?1:0,c?1:0,v||0,b||0,C,$)}const In=Math.pow(2,25),ka=Math.pow(2,24),Pl=Math.pow(2,17),Ci=Math.pow(2,16),Fi=Math.pow(2,9),yf=Math.pow(2,8),Tr=Math.pow(2,1);function ni(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*In+r*ka+c*Pl+r*Ci+c*Fi+r*yf+c*Tr+r}const Vs=0;function mo(){return{isOccluded:(w,r,c)=>!1,getPitchedTextCorrection:(w,r,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(w,r,c,g){throw new Error("Not implemented.")},translatePosition:(w,r,c,g)=>function(v,b,C,P,z=!1){if(!C[0]&&!C[1])return[0,0];const $=z?P==="map"?v.angle:0:P==="viewport"?-v.angle:0;if($){const G=Math.sin($),q=Math.cos($);C=[C[0]*q-C[1]*G,C[0]*G+C[1]*q]}return[z?C[0]:fn(b,C[0],v.zoom),z?C[1]:fn(b,C[1],v.zoom)]}(w,r,c,g),getCircleRadiusCorrection:w=>1}}class Cr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,g,v,b){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(C,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((P,z)=>P.sortKey-z.sortKey));this._currentPartIndex<C.length;)if(c.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,b())return!0;return!1}}class Al{constructor(r,c,g,v,b,C,P,z){this.placement=new Ti(r,mo(),c,C,P,z),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,g){const v=R.now(),b=()=>!this._forceFullPlacement&&R.now()-v>2;for(;this._currentPlacementIndex>=0;){const C=c[r[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=P)&&(!C.maxzoom||C.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Cr(C)),this._inProgressLayer.continuePlacement(g[C.source],this.placement,this._showCollisionBoxes,C,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Fo=512/d.X/2;class Rr{constructor(r,c,g){this.tileID=r,this.bucketInstanceId=g,this._symbolsByKey={};const v=new Map;for(let b=0;b<c.length;b++){const C=c.get(b),P=C.key,z=v.get(P);z?z.push(C):v.set(P,[C])}for(const[b,C]of v){const P={positions:C.map(z=>({x:Math.floor(z.anchorX*Fo),y:Math.floor(z.anchorY*Fo)})),crossTileIDs:C.map(z=>z.crossTileID)};if(P.positions.length>128){const z=new d.av(P.positions.length,16,Uint16Array);for(const{x:$,y:G}of P.positions)z.add($,G);z.finish(),delete P.positions,P.index=z}this._symbolsByKey[b]=P}}getScaledCoordinates(r,c){const{x:g,y:v,z:b}=this.tileID.canonical,{x:C,y:P,z}=c.canonical,$=Fo/Math.pow(2,z-b),G=(P*d.X+r.anchorY)*$,q=v*d.X*Fo;return{x:Math.floor((C*d.X+r.anchorX)*$-g*d.X*Fo),y:Math.floor(G-q)}}findMatches(r,c,g){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const C=r.get(b);if(C.crossTileID)continue;const P=this._symbolsByKey[C.key];if(!P)continue;const z=this.getScaledCoordinates(C,c);if(P.index){const $=P.index.range(z.x-v,z.y-v,z.x+v,z.y+v).sort();for(const G of $){const q=P.crossTileIDs[G];if(!g[q]){g[q]=!0,C.crossTileID=q;break}}}else if(P.positions)for(let $=0;$<P.positions.length;$++){const G=P.positions[$],q=P.crossTileIDs[$];if(Math.abs(G.x-z.x)<=v&&Math.abs(G.y-z.y)<=v&&!g[q]){g[q]=!0,C.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Rl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class go{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const g in this.indexes){const v=this.indexes[g],b={};for(const C in v){const P=v[C];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),b[P.tileID.key]=P}this.indexes[g]=b}this.lng=r}addBucket(r,c,g){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const C=this.indexes[b];if(Number(b)>r.overscaledZ)for(const P in C){const z=C[P];z.tileID.isChildOf(r)&&z.findMatches(c.symbolInstances,r,v)}else{const P=C[r.scaledTo(Number(b)).key];P&&P.findMatches(c.symbolInstances,r,v)}}for(let b=0;b<c.symbolInstances.length;b++){const C=c.symbolInstances.get(b);C.crossTileID||(C.crossTileID=g.generate(),v[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Rr(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const g of c.getCrossTileIDsLists())for(const v of g)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const g in this.indexes){const v=this.indexes[g];for(const b in v)r[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[b]),delete v[b],c=!0)}return c}}class Wa{constructor(){this.layerIndexes={},this.crossTileIDs=new Rl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,g){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new go);let b=!1;const C={};v.handleWrapJump(g);for(const P of c){const z=P.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(P.tileID,z,this.crossTileIDs)&&(b=!0),C[z.bucketInstanceId]=!0)}return v.removeStaleBuckets(C)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach(g=>{c[g]=!0});for(const g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}const Wr=(w,r)=>d.t(w,r&&r.filter(c=>c.identifier!=="source.canvas")),Gs=d.aw();class Nl extends d.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const v=this.sourceCaches[g].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[g].reload()}},this.map=r,this.dispatcher=new mn(hr(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,v)=>this.getGlyphs(g,v)),this.dispatcher.registerMessageHandler("GI",(g,v)=>this.getImages(g,v)),this.imageManager=new at,this.imageManager.setEventedParent(this),this.glyphManager=new wt(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Sn(256,512),this.crossTileSymbolIndex=new Wa,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",d.ay()),jt().on(He,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.sourceCaches[g.sourceId];if(!v)return;const b=v.getSource();if(b&&b.vectorLayerIds)for(const C in this._layers){const P=this._layers[C];P.source===b.id&&this._validateLayer(P)}})}loadURL(r,c={},g){this.fire(new d.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;d.h(v,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,c,g)}).catch(C=>{this._loadStyleRequest=null,C&&!b.signal.aborted&&this.fire(new d.j(C))})}loadJSON(r,c={},g){this.fire(new d.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,g)}).catch(()=>{})}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(Gs,{validate:!1})}_load(r,c,g){var v;const b=c.transformStyle?c.transformStyle(g,r):r;if(!c.validate||!Wr(this,d.u(b))){this._loaded=!0,this.stylesheet=b;for(const C in b.sources)this.addSource(C,b.sources[C],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Je(this.stylesheet.light),this.sky=new Ut(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const r=d.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const g=d.aA(c);g.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=g}}_loadSprite(r,c=!1,g=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,C,P,z){return d._(this,void 0,void 0,function*(){const $=Le(b),G=P>1?"@2x":"",q={},te={};for(const{id:ue,url:fe}of $){const ye=C.transformRequest($e(fe,G,".json"),"SpriteJSON");q[ue]=d.h(ye,z);const ke=C.transformRequest($e(fe,G,".png"),"SpriteImage");te[ue]=Q.getImage(ke,z)}return yield Promise.all([...Object.values(q),...Object.values(te)]),function(ue,fe){return d._(this,void 0,void 0,function*(){const ye={};for(const ke in ue){ye[ke]={};const Se=R.getImageCanvasContext((yield fe[ke]).data),Ce=(yield ue[ke]).data;for(const me in Ce){const{width:Pe,height:ze,x:Ue,y:nt,sdf:ht,pixelRatio:bt,stretchX:It,stretchY:vt,content:yt,textFitWidth:Nt,textFitHeight:nn}=Ce[me];ye[ke][me]={data:null,pixelRatio:bt,sdf:ht,stretchX:It,stretchY:vt,content:yt,textFitWidth:Nt,textFitHeight:nn,spriteData:{width:Pe,height:ze,x:Ue,y:nt,context:Se}}}}return ye})}(q,te)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const C in b){this._spritesImagesIds[C]=[];const P=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(z=>!(z in b)):[];for(const z of P)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in b[C]){const $=C==="default"?z:`${C}:${z}`;this._spritesImagesIds[C].push($),$ in this.imageManager.images?this.imageManager.updateImage($,b[C][z],!1):this.imageManager.addImage($,b[C][z]),c&&(this._changedImages[$]=!0)}}}).catch(b=>{this._spriteRequest=null,v=b,this.fire(new d.j(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),g&&g(v)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const g=r.sourceLayer;if(!g)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(g)===-1)&&this.fire(new d.j(new Error(`Source layer "${g}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const g=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?d.aB(g):g);const v=[];for(const b of r)if(g[b]){const C=c?d.aB(g[b]):g[b];v.push(C)}return v}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const g of c){const v=this._layers[g];v.type!=="custom"&&(r[g]=v.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const C in this._updatedSources){const P=this._updatedSources[C];if(P==="reload")this._reloadSource(C);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const g={};for(const v in this.sourceCaches){const b=this.sourceCaches[v];g[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const v in g){const b=this.sourceCaches[v];!!g[v]!=!!b.used&&b.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,c&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var g;this._checkLoaded();const v=this.serialize();if(r=c.transformStyle?c.transformStyle(v,r):r,((g=c.validate)===null||g===void 0||g)&&Wr(this,d.u(r)))return!1;(r=d.aB(r)).layers=d.az(r.layers);const b=d.aC(v,r),C=this._getOperationsToPerform(b);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const P of C.operations)P();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],g=[];for(const v of r)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":c.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":c.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,v.args));break;case"setSky":c.push(()=>this.setSky.apply(this,v.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setTransition":c.push(()=>{});break;default:g.push(v.command)}return{operations:c,unimplemented:g}}addImage(r,c){if(this.getImage(r))return this.fire(new d.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new d.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,g={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(d.u.source,`sources.${r}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new st(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r})),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===r)return this.fire(new d.j(new Error(`Source "${r}" cannot be removed while layer "${g}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const g=this.sourceCaches[r].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,g={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new d.j(new Error(`Layer "${v}" already exists on this map.`)));let b;if(r.type==="custom"){if(Wr(this,d.aD(r)))return;b=d.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=d.aB(r),r=d.e(r,{source:v})),this._validate(d.u.layer,`layers.${v}`,r,{arrayIndex:-1},g))return;b=d.aA(r),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}const C=c?this._order.indexOf(c):this._order.length;if(c&&C===-1)this.fire(new d.j(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(C,0,v),this._layerOrderChanged=!0,this._layers[v]=b,this._removedLayers[v]&&b.source&&b.type!=="custom"){const P=this._removedLayers[v];delete this._removedLayers[v],P.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new d.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const g=this._order.indexOf(r);this._order.splice(g,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new d.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const g=this._order.indexOf(r);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,g){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===g||(c!=null&&(v.minzoom=c),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,g={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!d.aE(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(d.u.filter,`layers.${v.id}.filter`,c,null,g)||(v.filter=d.aB(c),this._updateLayer(v)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return d.aB(this.getLayer(r).filter)}setLayoutProperty(r,c,g,v={}){this._checkLoaded();const b=this.getLayer(r);b?d.aE(b.getLayoutProperty(c),g)||(b.setLayoutProperty(c,g,v),this._updateLayer(b)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const g=this.getLayer(r);if(g)return g.getLayoutProperty(c);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,g,v={}){this._checkLoaded();const b=this.getLayer(r);b?d.aE(b.getPaintProperty(c),g)||(b.setPaintProperty(c,g,v)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new d.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const g=r.source,v=r.sourceLayer,b=this.sourceCaches[g];if(b===void 0)return void this.fire(new d.j(new Error(`The source '${g}' does not exist in the map's style.`)));const C=b.getSource().type;C==="geojson"&&v?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||v?(r.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(v,r.id,c)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const g=r.source,v=this.sourceCaches[g];if(v===void 0)return void this.fire(new d.j(new Error(`The source '${g}' does not exist in the map's style.`)));const b=v.getSource().type,C=b==="vector"?r.sourceLayer:void 0;b!=="vector"||C?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(C,r.id,c):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,g=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||g?(r.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(g,r.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=d.aF(this.sourceCaches,b=>b.serialize()),c=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,v=this.stylesheet;return d.aG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:r,layers:c,terrain:g},b=>b!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=C=>this._layers[C].type==="fill-extrusion",g={},v=[];for(let C=this._order.length-1;C>=0;C--){const P=this._order[C];if(c(P)){g[P]=C;for(const z of r){const $=z[P];if($)for(const G of $)v.push(G)}}}v.sort((C,P)=>P.intersectionZ-C.intersectionZ);const b=[];for(let C=this._order.length-1;C>=0;C--){const P=this._order[C];if(c(P))for(let z=v.length-1;z>=0;z--){const $=v[z].feature;if(g[$.layer.id]<C)break;b.push($),v.pop()}else for(const z of r){const $=z[P];if($)for(const G of $)b.push(G.feature)}}return b}queryRenderedFeatures(r,c,g){c&&c.filter&&this._validate(d.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const z=this._layers[P];if(!z)return this.fire(new d.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];v[z.source]=!0}}const b=[];c.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const P in this.sourceCaches)c.layers&&!v[P]||b.push(Vt(this.sourceCaches[P],this._layers,C,r,c,g));return this.placement&&b.push(function(P,z,$,G,q,te,ue){const fe={},ye=te.queryRenderedSymbols(G),ke=[];for(const Se of Object.keys(ye).map(Number))ke.push(ue[Se]);ke.sort(gn);for(const Se of ke){const Ce=Se.featureIndex.lookupSymbolFeatures(ye[Se.bucketInstanceId],z,Se.bucketIndex,Se.sourceLayerIndex,q.filter,q.layers,q.availableImages,P);for(const me in Ce){const Pe=fe[me]=fe[me]||[],ze=Ce[me];ze.sort((Ue,nt)=>{const ht=Se.featureSortOrder;if(ht){const bt=ht.indexOf(Ue.featureIndex);return ht.indexOf(nt.featureIndex)-bt}return nt.featureIndex-Ue.featureIndex});for(const Ue of ze)Pe.push(Ue)}}for(const Se in fe)fe[Se].forEach(Ce=>{const me=Ce.feature,Pe=$[P[Se].source].getFeatureState(me.layer["source-layer"],me.id);me.source=me.layer.source,me.layer["source-layer"]&&(me.sourceLayer=me.layer["source-layer"]),me.state=Pe});return fe}(this._layers,C,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c&&c.filter&&this._validate(d.u.filter,"querySourceFeatures.filter",c.filter,null,c);const g=this.sourceCaches[r];return g?function(v,b){const C=v.getRenderableIds().map($=>v.getTileByID($)),P=[],z={};for(let $=0;$<C.length;$++){const G=C[$],q=G.tileID.canonical.key;z[q]||(z[q]=!0,G.querySourceFeatures(P,b))}return P}(g,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const C in r)if(!d.aE(r[C],g[C])){v=!0;break}if(!v)return;const b={now:R.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){const g=this.getSky();let v=!1;if(!r&&!g)return;if(r&&!g)v=!0;else if(!r&&g)v=!0;else for(const C in r)if(!d.aE(r[C],g[C])){v=!0;break}if(!v)return;const b={now:R.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_validate(r,c,g,v,b={}){return(!b||b.validate!==!1)&&Wr(this,r.call(d.u,d.e({key:c,style:this.serialize(),value:g,styleSpec:d.v},v)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),jt().off(He,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const g=this.sourceCaches[c];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,g,v,b=!1){let C=!1,P=!1;const z={};for(const $ of this._order){const G=this._layers[$];if(G.type!=="symbol")continue;if(!z[G.source]){const te=this.sourceCaches[G.source];z[G.source]=te.getRenderableIds(!0).map(ue=>te.getTileByID(ue)).sort((ue,fe)=>fe.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(fe.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(G,z[G.source],r.center.lng);C=C||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.now(),r.zoom))&&(this.pauseablePlacement=new Al(r,this.map.terrain,this._order,b,c,g,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R.now()),P=!0),C&&this.pauseablePlacement.placement.setStale()),P||C)for(const $ of this._order){const G=this._layers[$];G.type==="symbol"&&this.placement.updateLayerOpacities(G,z[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return d._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),g})}getGlyphs(r,c){return d._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(d.u.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,g={},v){this._checkLoaded();const b=[{id:r,url:c}],C=[...Le(this.stylesheet.sprite),...b];this._validate(d.u.sprite,"sprite",C,null,g)||(this.stylesheet.sprite=C,this._loadSprite(b,!0,v))}removeSprite(r){this._checkLoaded();const c=Le(this.stylesheet.sprite);if(c.find(g=>g.id===r)){if(this._spritesImagesIds[r])for(const g of this._spritesImagesIds[r])this.imageManager.removeImage(g),this._changedImages[g]=!0;c.splice(c.findIndex(g=>g.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Le(this.stylesheet.sprite)}setSprite(r,c={},g){this._checkLoaded(),r&&this._validate(d.u.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,g):(this._unloadSprite(),g&&g(null)))}}var yo=d.Y([{name:"a_pos",type:"Int16",components:2}]);const qs={prelude:Tn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Tn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Tn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Tn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Tn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Tn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Tn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Tn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Tn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Tn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Tn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Tn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Tn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Tn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Tn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Tn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Tn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Tn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Tn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Tn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Tn(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=r.match(/attribute ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=b?b.concat(v):v,P={};return{fragmentSource:w=w.replace(c,(z,$,G,q,te)=>(P[te]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${te}
varying ${G} ${q} ${te};
#else
uniform ${G} ${q} u_${te};
#endif
`:`
#ifdef HAS_UNIFORM_u_${te}
    ${G} ${q} ${te} = u_${te};
#endif
`)),vertexSource:r=r.replace(c,(z,$,G,q,te)=>{const ue=q==="float"?"vec2":"vec4",fe=te.match(/color/)?"color":ue;return P[te]?$==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
attribute ${G} ${ue} a_${te};
varying ${G} ${q} ${te};
#else
uniform ${G} ${q} u_${te};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = a_${te};
#else
    ${G} ${q} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = unpack_mix_${fe}(a_${te}, u_${te}_t);
#else
    ${G} ${q} ${te} = u_${te};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
attribute ${G} ${ue} a_${te};
#else
uniform ${G} ${q} u_${te};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${G} ${q} ${te} = a_${te};
#else
    ${G} ${q} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${G} ${q} ${te} = unpack_mix_${fe}(a_${te}, u_${te}_t);
#else
    ${G} ${q} ${te} = u_${te};
#endif
`}),staticAttributes:g,staticUniforms:C}}class Mc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,g,v,b,C,P,z,$){this.context=r;let G=this.boundPaintVertexBuffers.length!==v.length;for(let q=0;!G&&q<v.length;q++)this.boundPaintVertexBuffers[q]!==v[q]&&(G=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||G||this.boundIndexBuffer!==b||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==$?this.freshBind(c,g,v,b,C,P,z,$):(r.bindVertexArray.set(this.vao),P&&P.bind(),b&&b.dynamicDraw&&b.bind(),z&&z.bind(),$&&$.bind())}freshBind(r,c,g,v,b,C,P,z){const $=r.numAttributes,G=this.context,q=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=z,c.enableAttributes(q,r);for(const te of g)te.enableAttributes(q,r);C&&C.enableAttributes(q,r),P&&P.enableAttributes(q,r),z&&z.enableAttributes(q,r),c.bind(),c.setVertexAttribPointers(q,r,b);for(const te of g)te.bind(),te.setVertexAttribPointers(q,r,b);C&&(C.bind(),C.setVertexAttribPointers(q,r,b)),v&&v.bind(),P&&(P.bind(),P.setVertexAttribPointers(q,r,b)),z&&(z.bind(),z.setVertexAttribPointers(q,r,b)),G.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Lc=(w,r,c,g,v)=>({u_matrix:w,u_texture:0,u_ele_delta:r,u_fog_matrix:c,u_fog_color:g?g.properties.get("fog-color"):d.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(v):0,u_horizon_color:g?g.properties.get("horizon-color"):d.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function Sa(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const g=w[c].split(" ");r.push(g.pop())}return r}class Ea{constructor(r,c,g,v,b,C){const P=r.gl;this.program=P.createProgram();const z=Sa(c.staticAttributes),$=g?g.getBinderAttributes():[],G=z.concat($),q=qs.prelude.staticUniforms?Sa(qs.prelude.staticUniforms):[],te=c.staticUniforms?Sa(c.staticUniforms):[],ue=g?g.getBinderUniforms():[],fe=q.concat(te).concat(ue),ye=[];for(const Ue of fe)ye.indexOf(Ue)<0&&ye.push(Ue);const ke=g?g.defines():[];b&&ke.push("#define OVERDRAW_INSPECTOR;"),C&&ke.push("#define TERRAIN3D;");const Se=ke.concat(qs.prelude.fragmentSource,c.fragmentSource).join(`
`),Ce=ke.concat(qs.prelude.vertexSource,c.vertexSource).join(`
`),me=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(me,Se),P.compileShader(me),!P.getShaderParameter(me,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(me)}`);P.attachShader(this.program,me);const Pe=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Pe,Ce),P.compileShader(Pe),!P.getShaderParameter(Pe,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(Pe)}`);P.attachShader(this.program,Pe),this.attributes={};const ze={};this.numAttributes=G.length;for(let Ue=0;Ue<this.numAttributes;Ue++)G[Ue]&&(P.bindAttribLocation(this.program,Ue,G[Ue]),this.attributes[G[Ue]]=Ue);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(Pe),P.deleteShader(me);for(let Ue=0;Ue<ye.length;Ue++){const nt=ye[Ue];if(nt&&!ze[nt]){const ht=P.getUniformLocation(this.program,nt);ht&&(ze[nt]=ht)}}this.fixedUniforms=v(r,ze),this.terrainUniforms=((Ue,nt)=>({u_depth:new d.aH(Ue,nt.u_depth),u_terrain:new d.aH(Ue,nt.u_terrain),u_terrain_dim:new d.aI(Ue,nt.u_terrain_dim),u_terrain_matrix:new d.aJ(Ue,nt.u_terrain_matrix),u_terrain_unpack:new d.aK(Ue,nt.u_terrain_unpack),u_terrain_exaggeration:new d.aI(Ue,nt.u_terrain_exaggeration)}))(r,ze),this.binderUniforms=g?g.getUniforms(r,ze):[]}draw(r,c,g,v,b,C,P,z,$,G,q,te,ue,fe,ye,ke,Se,Ce){const me=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(g),r.setStencilMode(v),r.setColorMode(b),r.setCullFace(C),z){r.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,z.depthTexture),r.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,z.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(z[ze])}for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(P[ze]);ye&&ye.setUniforms(r,this.binderUniforms,ue,{zoom:fe});let Pe=0;switch(c){case me.LINES:Pe=2;break;case me.TRIANGLES:Pe=3;break;case me.LINE_STRIP:Pe=1}for(const ze of te.get()){const Ue=ze.vaos||(ze.vaos={});(Ue[$]||(Ue[$]=new Mc)).bind(r,this,G,ye?ye.getPaintVertexBuffers():[],q,ze.vertexOffset,ke,Se,Ce),me.drawElements(c,ze.primitiveLength*Pe,me.UNSIGNED_SHORT,ze.primitiveOffset*Pe*2)}}}function zl(w,r,c){const g=1/fn(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,C=b*(c.tileID.canonical.x+c.tileID.wrap*v),P=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[C>>16,P>>16],u_pixel_coord_lower:[65535&C,65535&P]}}const Dl=(w,r,c,g)=>{const v=r.style.light,b=v.properties.get("position"),C=[b.x,b.y,b.z],P=function(){var $=new d.A(9);return d.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();v.properties.get("anchor")==="viewport"&&function($,G){var q=Math.sin(G),te=Math.cos(G);$[0]=te,$[1]=q,$[2]=0,$[3]=-q,$[4]=te,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(P,-r.transform.angle),function($,G,q){var te=G[0],ue=G[1],fe=G[2];$[0]=te*q[0]+ue*q[3]+fe*q[6],$[1]=te*q[1]+ue*q[4]+fe*q[7],$[2]=te*q[2]+ue*q[5]+fe*q[8]}(C,C,P);const z=v.properties.get("color");return{u_matrix:w,u_lightpos:C,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+c,u_opacity:g}},Ol=(w,r,c,g,v,b,C)=>d.e(Dl(w,r,c,g),zl(b,r,C),{u_height_factor:-Math.pow(2,v.overscaledZ)/C.tileSize/8}),Za=w=>({u_matrix:w}),yu=(w,r,c,g)=>d.e(Za(w),zl(c,r,g)),pr=(w,r)=>({u_matrix:w,u_world:r}),Hs=(w,r,c,g,v)=>d.e(yu(w,r,c,g),{u_world:v}),vf=(w,r,c,g)=>{const v=w.transform;let b,C;if(g.paint.get("circle-pitch-alignment")==="map"){const P=fn(c,1,v.zoom);b=!0,C=[P,P]}else b=!1,C=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(r.posMatrix,c,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:C}},_s=(w,r,c)=>({u_matrix:w,u_inv_matrix:r,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),xi=(w,r,c=1)=>({u_matrix:w,u_color:r,u_overlay:0,u_overlay_scale:c}),sr=w=>({u_matrix:w}),ui=(w,r,c,g)=>({u_matrix:w,u_extrude_scale:fn(r,1,c),u_intensity:g}),vu=(w,r,c,g)=>{const v=d.H();d.aP(v,0,w.width,w.height,0,0,1);const b=w.context.gl;return{u_matrix:v,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:g,u_opacity:r.paint.get("heatmap-opacity")}};function _u(w,r){const c=Math.pow(2,r.canonical.z),g=r.canonical.y;return[new d.Z(0,g/c).toLngLat().lat,new d.Z(0,(g+1)/c).toLngLat().lat]}const Fl=(w,r,c,g)=>{const v=w.transform;return{u_matrix:Bo(w,r,c,g),u_ratio:1/fn(r,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Bl=(w,r,c,g,v)=>d.e(Fl(w,r,c,v),{u_image:0,u_image_height:g}),Xa=(w,r,c,g,v)=>{const b=w.transform,C=An(r,b);return{u_matrix:Bo(w,r,c,v),u_texsize:r.imageAtlasTexture.size,u_ratio:1/fn(r,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[C,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Mh=(w,r,c,g,v,b)=>{const C=w.lineAtlas,P=An(r,w.transform),z=c.layout.get("line-cap")==="round",$=C.getDash(g.from,z),G=C.getDash(g.to,z),q=$.width*v.fromScale,te=G.width*v.toScale;return d.e(Fl(w,r,c,b),{u_patternscale_a:[P/q,-$.height/2],u_patternscale_b:[P/te,-G.height/2],u_sdfgamma:C.width/(256*Math.min(q,te)*w.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:G.y,u_mix:v.t})};function An(w,r){return 1/fn(w,1,r.tileZoom)}function Bo(w,r,c,g){return w.translatePosMatrix(g?g.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Pc=(w,r,c,g,v)=>{return{u_matrix:w,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(C=v.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(b=v.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Lh(v.paint.get("raster-hue-rotate"))};var b,C};function Lh(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Ya=(w,r,c,g,v,b,C,P,z,$,G,q,te,ue)=>{const fe=C.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:fe.width/fe.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:z,u_coord_matrix:$,u_is_text:+q,u_pitch_with_map:+g,u_is_along_line:v,u_is_variable_anchor:b,u_texsize:te,u_texture:0,u_translation:G,u_pitched_scale:ue}},Ka=(w,r,c,g,v,b,C,P,z,$,G,q,te,ue,fe)=>{const ye=C.transform;return d.e(Ya(w,r,c,g,v,b,C,P,z,$,G,q,te,fe),{u_gamma_scale:g?Math.cos(ye._pitch)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+ue})},ci=(w,r,c,g,v,b,C,P,z,$,G,q,te,ue)=>d.e(Ka(w,r,c,g,v,b,C,P,z,$,G,!0,q,!0,ue),{u_texsize_icon:te,u_texture_icon:1}),$l=(w,r,c)=>({u_matrix:w,u_opacity:r,u_color:c}),Ul=(w,r,c,g,v,b)=>d.e(function(C,P,z,$){const G=z.imageManager.getPattern(C.from.toString()),q=z.imageManager.getPattern(C.to.toString()),{width:te,height:ue}=z.imageManager.getPixelSize(),fe=Math.pow(2,$.tileID.overscaledZ),ye=$.tileSize*Math.pow(2,z.transform.tileZoom)/fe,ke=ye*($.tileID.canonical.x+$.tileID.wrap*fe),Se=ye*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[te,ue],u_mix:P.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/fn($,1,z.transform.tileZoom),u_pixel_coord_upper:[ke>>16,Se>>16],u_pixel_coord_lower:[65535&ke,65535&Se]}}(g,b,c,v),{u_matrix:w,u_opacity:r}),xu={fillExtrusion:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_lightpos:new d.aN(w,r.u_lightpos),u_lightintensity:new d.aI(w,r.u_lightintensity),u_lightcolor:new d.aN(w,r.u_lightcolor),u_vertical_gradient:new d.aI(w,r.u_vertical_gradient),u_opacity:new d.aI(w,r.u_opacity)}),fillExtrusionPattern:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_lightpos:new d.aN(w,r.u_lightpos),u_lightintensity:new d.aI(w,r.u_lightintensity),u_lightcolor:new d.aN(w,r.u_lightcolor),u_vertical_gradient:new d.aI(w,r.u_vertical_gradient),u_height_factor:new d.aI(w,r.u_height_factor),u_image:new d.aH(w,r.u_image),u_texsize:new d.aO(w,r.u_texsize),u_pixel_coord_upper:new d.aO(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(w,r.u_pixel_coord_lower),u_scale:new d.aN(w,r.u_scale),u_fade:new d.aI(w,r.u_fade),u_opacity:new d.aI(w,r.u_opacity)}),fill:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix)}),fillPattern:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_image:new d.aH(w,r.u_image),u_texsize:new d.aO(w,r.u_texsize),u_pixel_coord_upper:new d.aO(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(w,r.u_pixel_coord_lower),u_scale:new d.aN(w,r.u_scale),u_fade:new d.aI(w,r.u_fade)}),fillOutline:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_world:new d.aO(w,r.u_world)}),fillOutlinePattern:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_world:new d.aO(w,r.u_world),u_image:new d.aH(w,r.u_image),u_texsize:new d.aO(w,r.u_texsize),u_pixel_coord_upper:new d.aO(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(w,r.u_pixel_coord_lower),u_scale:new d.aN(w,r.u_scale),u_fade:new d.aI(w,r.u_fade)}),circle:(w,r)=>({u_camera_to_center_distance:new d.aI(w,r.u_camera_to_center_distance),u_scale_with_map:new d.aH(w,r.u_scale_with_map),u_pitch_with_map:new d.aH(w,r.u_pitch_with_map),u_extrude_scale:new d.aO(w,r.u_extrude_scale),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_matrix:new d.aJ(w,r.u_matrix)}),collisionBox:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_pixel_extrude_scale:new d.aO(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_inv_matrix:new d.aJ(w,r.u_inv_matrix),u_camera_to_center_distance:new d.aI(w,r.u_camera_to_center_distance),u_viewport_size:new d.aO(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new d.aL(w,r.u_color),u_matrix:new d.aJ(w,r.u_matrix),u_overlay:new d.aH(w,r.u_overlay),u_overlay_scale:new d.aI(w,r.u_overlay_scale)}),clippingMask:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix)}),heatmap:(w,r)=>({u_extrude_scale:new d.aI(w,r.u_extrude_scale),u_intensity:new d.aI(w,r.u_intensity),u_matrix:new d.aJ(w,r.u_matrix)}),heatmapTexture:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_world:new d.aO(w,r.u_world),u_image:new d.aH(w,r.u_image),u_color_ramp:new d.aH(w,r.u_color_ramp),u_opacity:new d.aI(w,r.u_opacity)}),hillshade:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_image:new d.aH(w,r.u_image),u_latrange:new d.aO(w,r.u_latrange),u_light:new d.aO(w,r.u_light),u_shadow:new d.aL(w,r.u_shadow),u_highlight:new d.aL(w,r.u_highlight),u_accent:new d.aL(w,r.u_accent)}),hillshadePrepare:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_image:new d.aH(w,r.u_image),u_dimension:new d.aO(w,r.u_dimension),u_zoom:new d.aI(w,r.u_zoom),u_unpack:new d.aK(w,r.u_unpack)}),line:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_ratio:new d.aI(w,r.u_ratio),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_units_to_pixels:new d.aO(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_ratio:new d.aI(w,r.u_ratio),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_units_to_pixels:new d.aO(w,r.u_units_to_pixels),u_image:new d.aH(w,r.u_image),u_image_height:new d.aI(w,r.u_image_height)}),linePattern:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_texsize:new d.aO(w,r.u_texsize),u_ratio:new d.aI(w,r.u_ratio),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_image:new d.aH(w,r.u_image),u_units_to_pixels:new d.aO(w,r.u_units_to_pixels),u_scale:new d.aN(w,r.u_scale),u_fade:new d.aI(w,r.u_fade)}),lineSDF:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_ratio:new d.aI(w,r.u_ratio),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_units_to_pixels:new d.aO(w,r.u_units_to_pixels),u_patternscale_a:new d.aO(w,r.u_patternscale_a),u_patternscale_b:new d.aO(w,r.u_patternscale_b),u_sdfgamma:new d.aI(w,r.u_sdfgamma),u_image:new d.aH(w,r.u_image),u_tex_y_a:new d.aI(w,r.u_tex_y_a),u_tex_y_b:new d.aI(w,r.u_tex_y_b),u_mix:new d.aI(w,r.u_mix)}),raster:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_tl_parent:new d.aO(w,r.u_tl_parent),u_scale_parent:new d.aI(w,r.u_scale_parent),u_buffer_scale:new d.aI(w,r.u_buffer_scale),u_fade_t:new d.aI(w,r.u_fade_t),u_opacity:new d.aI(w,r.u_opacity),u_image0:new d.aH(w,r.u_image0),u_image1:new d.aH(w,r.u_image1),u_brightness_low:new d.aI(w,r.u_brightness_low),u_brightness_high:new d.aI(w,r.u_brightness_high),u_saturation_factor:new d.aI(w,r.u_saturation_factor),u_contrast_factor:new d.aI(w,r.u_contrast_factor),u_spin_weights:new d.aN(w,r.u_spin_weights)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new d.aH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(w,r.u_is_size_feature_constant),u_size_t:new d.aI(w,r.u_size_t),u_size:new d.aI(w,r.u_size),u_camera_to_center_distance:new d.aI(w,r.u_camera_to_center_distance),u_pitch:new d.aI(w,r.u_pitch),u_rotate_symbol:new d.aH(w,r.u_rotate_symbol),u_aspect_ratio:new d.aI(w,r.u_aspect_ratio),u_fade_change:new d.aI(w,r.u_fade_change),u_matrix:new d.aJ(w,r.u_matrix),u_label_plane_matrix:new d.aJ(w,r.u_label_plane_matrix),u_coord_matrix:new d.aJ(w,r.u_coord_matrix),u_is_text:new d.aH(w,r.u_is_text),u_pitch_with_map:new d.aH(w,r.u_pitch_with_map),u_is_along_line:new d.aH(w,r.u_is_along_line),u_is_variable_anchor:new d.aH(w,r.u_is_variable_anchor),u_texsize:new d.aO(w,r.u_texsize),u_texture:new d.aH(w,r.u_texture),u_translation:new d.aO(w,r.u_translation),u_pitched_scale:new d.aI(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new d.aH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(w,r.u_is_size_feature_constant),u_size_t:new d.aI(w,r.u_size_t),u_size:new d.aI(w,r.u_size),u_camera_to_center_distance:new d.aI(w,r.u_camera_to_center_distance),u_pitch:new d.aI(w,r.u_pitch),u_rotate_symbol:new d.aH(w,r.u_rotate_symbol),u_aspect_ratio:new d.aI(w,r.u_aspect_ratio),u_fade_change:new d.aI(w,r.u_fade_change),u_matrix:new d.aJ(w,r.u_matrix),u_label_plane_matrix:new d.aJ(w,r.u_label_plane_matrix),u_coord_matrix:new d.aJ(w,r.u_coord_matrix),u_is_text:new d.aH(w,r.u_is_text),u_pitch_with_map:new d.aH(w,r.u_pitch_with_map),u_is_along_line:new d.aH(w,r.u_is_along_line),u_is_variable_anchor:new d.aH(w,r.u_is_variable_anchor),u_texsize:new d.aO(w,r.u_texsize),u_texture:new d.aH(w,r.u_texture),u_gamma_scale:new d.aI(w,r.u_gamma_scale),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_is_halo:new d.aH(w,r.u_is_halo),u_translation:new d.aO(w,r.u_translation),u_pitched_scale:new d.aI(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new d.aH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(w,r.u_is_size_feature_constant),u_size_t:new d.aI(w,r.u_size_t),u_size:new d.aI(w,r.u_size),u_camera_to_center_distance:new d.aI(w,r.u_camera_to_center_distance),u_pitch:new d.aI(w,r.u_pitch),u_rotate_symbol:new d.aH(w,r.u_rotate_symbol),u_aspect_ratio:new d.aI(w,r.u_aspect_ratio),u_fade_change:new d.aI(w,r.u_fade_change),u_matrix:new d.aJ(w,r.u_matrix),u_label_plane_matrix:new d.aJ(w,r.u_label_plane_matrix),u_coord_matrix:new d.aJ(w,r.u_coord_matrix),u_is_text:new d.aH(w,r.u_is_text),u_pitch_with_map:new d.aH(w,r.u_pitch_with_map),u_is_along_line:new d.aH(w,r.u_is_along_line),u_is_variable_anchor:new d.aH(w,r.u_is_variable_anchor),u_texsize:new d.aO(w,r.u_texsize),u_texsize_icon:new d.aO(w,r.u_texsize_icon),u_texture:new d.aH(w,r.u_texture),u_texture_icon:new d.aH(w,r.u_texture_icon),u_gamma_scale:new d.aI(w,r.u_gamma_scale),u_device_pixel_ratio:new d.aI(w,r.u_device_pixel_ratio),u_is_halo:new d.aH(w,r.u_is_halo),u_translation:new d.aO(w,r.u_translation),u_pitched_scale:new d.aI(w,r.u_pitched_scale)}),background:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_opacity:new d.aI(w,r.u_opacity),u_color:new d.aL(w,r.u_color)}),backgroundPattern:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_opacity:new d.aI(w,r.u_opacity),u_image:new d.aH(w,r.u_image),u_pattern_tl_a:new d.aO(w,r.u_pattern_tl_a),u_pattern_br_a:new d.aO(w,r.u_pattern_br_a),u_pattern_tl_b:new d.aO(w,r.u_pattern_tl_b),u_pattern_br_b:new d.aO(w,r.u_pattern_br_b),u_texsize:new d.aO(w,r.u_texsize),u_mix:new d.aI(w,r.u_mix),u_pattern_size_a:new d.aO(w,r.u_pattern_size_a),u_pattern_size_b:new d.aO(w,r.u_pattern_size_b),u_scale_a:new d.aI(w,r.u_scale_a),u_scale_b:new d.aI(w,r.u_scale_b),u_pixel_coord_upper:new d.aO(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aI(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_texture:new d.aH(w,r.u_texture),u_ele_delta:new d.aI(w,r.u_ele_delta),u_fog_matrix:new d.aJ(w,r.u_fog_matrix),u_fog_color:new d.aL(w,r.u_fog_color),u_fog_ground_blend:new d.aI(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new d.aI(w,r.u_fog_ground_blend_opacity),u_horizon_color:new d.aL(w,r.u_horizon_color),u_horizon_fog_blend:new d.aI(w,r.u_horizon_fog_blend)}),terrainDepth:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_ele_delta:new d.aI(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_matrix:new d.aJ(w,r.u_matrix),u_texture:new d.aH(w,r.u_texture),u_terrain_coords_id:new d.aI(w,r.u_terrain_coords_id),u_ele_delta:new d.aI(w,r.u_ele_delta)}),sky:(w,r)=>({u_sky_color:new d.aL(w,r.u_sky_color),u_horizon_color:new d.aL(w,r.u_horizon_color),u_horizon:new d.aI(w,r.u_horizon),u_sky_horizon_blend:new d.aI(w,r.u_sky_horizon_blend)})};class $o{constructor(r,c,g){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _f={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bu{constructor(r,c,g,v){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let g=0;g<this.attributes.length;g++){const v=c.attributes[this.attributes[g].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,g){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],C=c.attributes[b.name];C!==void 0&&r.vertexAttribPointer(C,b.components,r[_f[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mi=new WeakMap;function Uo(w){var r;if(Mi.has(w))return Mi.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Mi.set(w,c),c}}class Rn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Li extends Rn{getDefault(){return d.aM.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ja extends Rn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Qa extends Rn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class el extends Rn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ac extends Rn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class tl extends Rn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ph extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class vo extends Rn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Rc extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ah extends Rn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Rh extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Nh extends Rn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Ia extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class zh extends Rn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class xf extends Rn{getDefault(){return d.aM.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Dh extends Rn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class jo extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class ro extends Rn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class wu extends Rn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Oh extends Rn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class bf extends Rn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ku extends Rn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Nc extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Su extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Eu extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class _o extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class jl extends Rn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Nr extends Rn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const g=this.gl;Uo(g)?g.bindVertexArray(r):(c=g.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Ta extends Rn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class zc extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Iu extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Vl extends Rn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Tu extends Vl{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class xs extends Vl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dc extends Vl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wf{constructor(r,c,g,v,b){this.context=r,this.width=c,this.height=g;const C=r.gl,P=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Tu(r,P),v)this.depthAttachment=b?new Dc(r,P):new xs(r,P);else if(b)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const g=this.depthAttachment.get();g&&r.deleteRenderbuffer(g)}r.deleteFramebuffer(this.framebuffer)}}class Mr{constructor(r,c,g){this.blendFunction=r,this.blendColor=c,this.mask=g}}Mr.Replace=[1,0],Mr.disabled=new Mr(Mr.Replace,d.aM.transparent,[!1,!1,!1,!1]),Mr.unblended=new Mr(Mr.Replace,d.aM.transparent,[!0,!0,!0,!0]),Mr.alphaBlended=new Mr([1,771],d.aM.transparent,[!0,!0,!0,!0]);class kf{constructor(r){var c,g;if(this.gl=r,this.clearColor=new Li(this),this.clearDepth=new Ja(this),this.clearStencil=new Qa(this),this.colorMask=new el(this),this.depthMask=new Ac(this),this.stencilMask=new tl(this),this.stencilFunc=new Ph(this),this.stencilOp=new vo(this),this.stencilTest=new Rc(this),this.depthRange=new Ah(this),this.depthTest=new Rh(this),this.depthFunc=new Nh(this),this.blend=new Ia(this),this.blendFunc=new zh(this),this.blendColor=new xf(this),this.blendEquation=new Dh(this),this.cullFace=new jo(this),this.cullFaceSide=new ro(this),this.frontFace=new wu(this),this.program=new Oh(this),this.activeTexture=new bf(this),this.viewport=new ku(this),this.bindFramebuffer=new Nc(this),this.bindRenderbuffer=new Su(this),this.bindTexture=new Eu(this),this.bindVertexBuffer=new _o(this),this.bindElementBuffer=new jl(this),this.bindVertexArray=new Nr(this),this.pixelStoreUnpack=new Ta(this),this.pixelStoreUnpackPremultiplyAlpha=new zc(this),this.pixelStoreUnpackFlipY=new Iu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Uo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(g=r.RGB16F)!==null&&g!==void 0?g:v==null?void 0:v.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new $o(this,r,c)}createVertexBuffer(r,c,g){return new bu(this,r,c,g)}createRenderbuffer(r,c,g){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,r,c,g),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,g,v){return new wf(this,r,c,g,v)}clear({color:r,depth:c,stencil:g}){const v=this.gl;let b=0;r&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){d.aE(r.blendFunction,Mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Uo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Uo(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class pn{constructor(r,c,g){this.func=r,this.mask=c,this.range=g}}pn.ReadOnly=!1,pn.ReadWrite=!0,pn.disabled=new pn(519,pn.ReadOnly,[0,1]);const Cu=7680;class Xn{constructor(r,c,g,v,b,C){this.test=r,this.ref=c,this.mask=g,this.fail=v,this.depthFail=b,this.pass=C}}Xn.disabled=new Xn({func:519,mask:0},0,0,Cu,Cu,Cu);class jn{constructor(r,c,g){this.enable=r,this.mode=c,this.frontFace=g}}let Ws;function Gl(w,r,c,g,v){const b=w.context,C=b.gl,P=w.useProgram("collisionBox"),z=[];let $=0,G=0;for(let Se=0;Se<g.length;Se++){const Ce=g[Se],me=r.getTile(Ce).getBucket(c);if(!me)continue;const Pe=v?me.textCollisionBox:me.iconCollisionBox,ze=me.collisionCircleArray;if(ze.length>0){const Ue=d.H();d.aQ(Ue,me.placementInvProjMatrix,w.transform.glCoordMatrix),d.aQ(Ue,Ue,me.placementViewportMatrix),z.push({circleArray:ze,circleOffset:G,transform:Ce.posMatrix,invTransform:Ue,coord:Ce}),$+=ze.length/4,G=$}Pe&&P.draw(b,C.LINES,pn.disabled,Xn.disabled,w.colorModeForRenderPass(),jn.disabled,{u_matrix:Ce.posMatrix,u_pixel_extrude_scale:[1/(q=w.transform).width,1/q.height]},w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ce),c.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,w.transform.zoom,null,null,Pe.collisionVertexBuffer)}var q;if(!v||!z.length)return;const te=w.useProgram("collisionCircle"),ue=new d.aR;ue.resize(4*$),ue._trim();let fe=0;for(const Se of z)for(let Ce=0;Ce<Se.circleArray.length/4;Ce++){const me=4*Ce,Pe=Se.circleArray[me+0],ze=Se.circleArray[me+1],Ue=Se.circleArray[me+2],nt=Se.circleArray[me+3];ue.emplace(fe++,Pe,ze,Ue,nt,0),ue.emplace(fe++,Pe,ze,Ue,nt,1),ue.emplace(fe++,Pe,ze,Ue,nt,2),ue.emplace(fe++,Pe,ze,Ue,nt,3)}(!Ws||Ws.length<2*$)&&(Ws=function(Se){const Ce=2*Se,me=new d.aT;me.resize(Ce),me._trim();for(let Pe=0;Pe<Ce;Pe++){const ze=6*Pe;me.uint16[ze+0]=4*Pe+0,me.uint16[ze+1]=4*Pe+1,me.uint16[ze+2]=4*Pe+2,me.uint16[ze+3]=4*Pe+2,me.uint16[ze+4]=4*Pe+3,me.uint16[ze+5]=4*Pe+0}return me}($));const ye=b.createIndexBuffer(Ws,!0),ke=b.createVertexBuffer(ue,d.aS.members,!0);for(const Se of z){const Ce=_s(Se.transform,Se.invTransform,w.transform);te.draw(b,C.TRIANGLES,pn.disabled,Xn.disabled,w.colorModeForRenderPass(),jn.disabled,Ce,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Se.coord),c.id,ke,ye,d.a0.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,w.transform.zoom,null,null,null)}ke.destroy(),ye.destroy()}jn.disabled=new jn(!1,1029,2305),jn.backCCW=new jn(!0,1029,2305);const nl=d.an(new Float32Array(16));function Oc(w,r,c,g,v,b){const{horizontalAlign:C,verticalAlign:P}=d.au(w);return new d.P((-(C-.5)*r/v+g[0])*b,(-(P-.5)*c/v+g[1])*b)}function Ca(w,r,c,g,v,b){const C=r.tileAnchorPoint.add(new d.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let P=g.mult(b);c||(P=P.rotate(-v));const z=C.add(P);return ve(z.x,z.y,r.labelPlaneMatrix,r.getElevation).point}if(c){const P=Oe(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),z=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return w.add(g.rotate(z))}return w.add(g)}function rl(w,r,c,g,v,b,C,P,z,$,G,q,te,ue){const fe=w.text.placedSymbolArray,ye=w.text.dynamicLayoutVertexArray,ke=w.icon.dynamicLayoutVertexArray,Se={};ye.clear();for(let Ce=0;Ce<fe.length;Ce++){const me=fe.get(Ce),Pe=me.hidden||!me.crossTileID||w.allowVerticalPlacement&&!me.placedOrientation?null:g[me.crossTileID];if(Pe){const ze=new d.P(me.anchorX,me.anchorY),Ue={getElevation:ue,width:v.width,height:v.height,labelPlaneMatrix:b,lineVertexArray:null,pitchWithMap:c,projection:G,projectionCache:null,tileAnchorPoint:ze,translation:q,unwrappedTileID:te},nt=c?ve(ze.x,ze.y,C,ue):Oe(ze.x,ze.y,Ue),ht=J(v.cameraToCenterDistance,nt.signedDistanceFromCamera);let bt=d.ai(w.textSizeData,z,me)*ht/d.ap;c&&(bt*=w.tilePixelRatio/P);const{width:It,height:vt,anchor:yt,textOffset:Nt,textBoxScale:nn}=Pe,_t=Oc(yt,It,vt,Nt,nn,bt),St=G.getPitchedTextCorrection(v,ze.add(new d.P(q[0],q[1])),te),en=Ca(nt.point,Ue,r,_t,v.angle,St),gr=w.allowVerticalPlacement&&me.placedOrientation===d.ah.vertical?Math.PI/2:0;for(let hn=0;hn<me.numGlyphs;hn++)d.aj(ye,en,gr);$&&me.associatedIconIndex>=0&&(Se[me.associatedIconIndex]={shiftedAnchor:en,angle:gr})}else Ft(me.numGlyphs,ye)}if($){ke.clear();const Ce=w.icon.placedSymbolArray;for(let me=0;me<Ce.length;me++){const Pe=Ce.get(me);if(Pe.hidden)Ft(Pe.numGlyphs,ke);else{const ze=Se[me];if(ze)for(let Ue=0;Ue<Pe.numGlyphs;Ue++)d.aj(ke,ze.shiftedAnchor,ze.angle);else Ft(Pe.numGlyphs,ke)}}w.icon.dynamicLayoutVertexBuffer.updateData(ke)}w.text.dynamicLayoutVertexBuffer.updateData(ye)}function xo(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Fc(w,r,c,g,v,b,C,P,z,$,G,q){const te=w.context,ue=te.gl,fe=w.transform,ye=mo(),ke=P==="map",Se=z==="map",Ce=P!=="viewport"&&c.layout.get("symbol-placement")!=="point",me=ke&&!Se&&!Ce,Pe=!Se&&Ce,ze=!c.layout.get("symbol-sort-key").isConstant();let Ue=!1;const nt=w.depthModeForSublayer(0,pn.ReadOnly),ht=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),bt=[],It=ye.getCircleRadiusCorrection(fe);for(const vt of g){const yt=r.getTile(vt),Nt=yt.getBucket(c);if(!Nt)continue;const nn=v?Nt.text:Nt.icon;if(!nn||!nn.segments.get().length||!nn.hasVisibleVertices)continue;const _t=nn.programConfigurations.get(c.id),St=v||Nt.sdfIcons,en=v?Nt.textSizeData:Nt.iconSizeData,gr=Se||fe.pitch!==0,hn=w.useProgram(xo(St,v,Nt),_t),vn=d.ag(en,fe.zoom),yr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(vt);let Bi,ks,vr,wo,io=[0,0],$i=null;if(v)ks=yt.glyphAtlasTexture,vr=ue.LINEAR,Bi=yt.glyphAtlasTexture.size,Nt.iconsInText&&(io=yt.imageAtlasTexture.size,$i=yt.imageAtlasTexture,wo=gr||w.options.rotating||w.options.zooming||en.kind==="composite"||en.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const bn=c.layout.get("icon-size").constantOr(0)!==1||Nt.iconsNeedLinear;ks=yt.imageAtlasTexture,vr=St||w.options.rotating||w.options.zooming||bn||gr?ue.LINEAR:ue.NEAREST,Bi=yt.imageAtlasTexture.size}const oo=fn(yt,1,w.transform.zoom),Js=Pe?vt.posMatrix:nl,Du=Hr(Js,Se,ke,w.transform,oo),Wh=no(Js,Se,ke,w.transform,oo),Ou=no(vt.posMatrix,Se,ke,w.transform,oo),as=ye.translatePosition(w.transform,yt,b,C),Zh=ht&&Nt.hasTextData(),jf=c.layout.get("icon-text-fit")!=="none"&&Zh&&Nt.hasIconData();if(Ce){const bn=w.style.map.terrain?(Fu,Bu)=>w.style.map.terrain.getElevation(vt,Fu,Bu):null,Zl=c.layout.get("text-rotation-alignment")==="map";se(Nt,vt.posMatrix,w,v,Du,Ou,Se,$,Zl,ye,vt.toUnwrapped(),fe.width,fe.height,as,bn)}const ls=vt.posMatrix,us=v&&ht||jf,cl=Ce||us?nl:Du,Ss=Wh,Ai=St&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ui;Ui=St?Nt.iconsInText?ci(en.kind,vn,me,Se,Ce,us,w,ls,cl,Ss,as,Bi,io,It):Ka(en.kind,vn,me,Se,Ce,us,w,ls,cl,Ss,as,v,Bi,!0,It):Ya(en.kind,vn,me,Se,Ce,us,w,ls,cl,Ss,as,v,Bi,It);const Ho={program:hn,buffers:nn,uniformValues:Ui,atlasTexture:ks,atlasTextureIcon:$i,atlasInterpolation:vr,atlasInterpolationIcon:wo,isSDF:St,hasHalo:Ai};if(ze&&Nt.canOverlap){Ue=!0;const bn=nn.segments.get();for(const Zl of bn)bt.push({segments:new d.a0([Zl]),sortKey:Zl.sortKey,state:Ho,terrainData:yr})}else bt.push({segments:nn.segments,sortKey:0,state:Ho,terrainData:yr})}Ue&&bt.sort((vt,yt)=>vt.sortKey-yt.sortKey);for(const vt of bt){const yt=vt.state;if(te.activeTexture.set(ue.TEXTURE0),yt.atlasTexture.bind(yt.atlasInterpolation,ue.CLAMP_TO_EDGE),yt.atlasTextureIcon&&(te.activeTexture.set(ue.TEXTURE1),yt.atlasTextureIcon&&yt.atlasTextureIcon.bind(yt.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),yt.isSDF){const Nt=yt.uniformValues;yt.hasHalo&&(Nt.u_is_halo=1,Bc(yt.buffers,vt.segments,c,w,yt.program,nt,G,q,Nt,vt.terrainData)),Nt.u_is_halo=0}Bc(yt.buffers,vt.segments,c,w,yt.program,nt,G,q,yt.uniformValues,vt.terrainData)}}function Bc(w,r,c,g,v,b,C,P,z,$){const G=g.context;v.draw(G,G.gl.TRIANGLES,b,C,P,jn.disabled,z,$,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,g.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function $c(w,r,c,g){const v=w.context,b=v.gl,C=Xn.disabled,P=new Mr([b.ONE,b.ONE],d.aM.transparent,[!0,!0,!0,!0]),z=r.getBucket(c);if(!z)return;const $=g.key;let G=c.heatmapFbos.get($);G||(G=il(v,r.tileSize,r.tileSize),c.heatmapFbos.set($,G)),v.bindFramebuffer.set(G.framebuffer),v.viewport.set([0,0,r.tileSize,r.tileSize]),v.clear({color:d.aM.transparent});const q=z.programConfigurations.get(c.id),te=w.useProgram("heatmap",q),ue=w.style.map.terrain.getTerrainData(g);te.draw(v,b.TRIANGLES,pn.disabled,C,P,jn.disabled,ui(g.posMatrix,r,w.transform.zoom,c.paint.get("heatmap-intensity")),ue,c.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,c.paint,w.transform.zoom,q)}function Zs(w,r,c){const g=w.context,v=g.gl;g.setColorMode(w.colorModeForRenderPass());const b=ol(g,r),C=c.key,P=r.heatmapFbos.get(C);P&&(g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,P.colorAttachment.get()),g.activeTexture.set(v.TEXTURE1),b.bind(v.LINEAR,v.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(g,v.TRIANGLES,pn.disabled,Xn.disabled,w.colorModeForRenderPass(),jn.disabled,vu(w,r,0,1),null,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,w.transform.zoom),P.destroy(),r.heatmapFbos.delete(C))}function il(w,r,c){var g,v;const b=w.gl,C=b.createTexture();b.bindTexture(b.TEXTURE_2D,C),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const P=(g=w.HALF_FLOAT)!==null&&g!==void 0?g:b.UNSIGNED_BYTE,z=(v=w.RGBA16F)!==null&&v!==void 0?v:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,z,r,c,0,b.RGBA,P,null);const $=w.createFramebuffer(r,c,!1,!1);return $.colorAttachment.set(C),$}function ol(w,r){return r.colorRampTexture||(r.colorRampTexture=new Ze(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function sl(w,r,c,g,v){if(!c||!g||!g.imageAtlas)return;const b=g.imageAtlas.patternPositions;let C=b[c.to.toString()],P=b[c.from.toString()];if(!C&&P&&(C=P),!P&&C&&(P=C),!C||!P){const z=v.getPaintProperty(r);C=b[z],P=b[z]}C&&P&&w.setConstantPatternPositions(C,P)}function al(w,r,c,g,v,b,C){const P=w.context.gl,z="fill-pattern",$=c.paint.get(z),G=$&&$.constantOr(1),q=c.getCrossfadeParameters();let te,ue,fe,ye,ke;C?(ue=G&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=P.LINES):(ue=G?"fillPattern":"fill",te=P.TRIANGLES);const Se=$.constantOr(null);for(const Ce of g){const me=r.getTile(Ce);if(G&&!me.patternsLoaded())continue;const Pe=me.getBucket(c);if(!Pe)continue;const ze=Pe.programConfigurations.get(c.id),Ue=w.useProgram(ue,ze),nt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ce);G&&(w.context.activeTexture.set(P.TEXTURE0),me.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ze.updatePaintBuffers(q)),sl(ze,z,Se,me,c);const ht=nt?Ce:null,bt=w.translatePosMatrix(ht?ht.posMatrix:Ce.posMatrix,me,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(C){ye=Pe.indexBuffer2,ke=Pe.segments2;const It=[P.drawingBufferWidth,P.drawingBufferHeight];fe=ue==="fillOutlinePattern"&&G?Hs(bt,w,q,me,It):pr(bt,It)}else ye=Pe.indexBuffer,ke=Pe.segments,fe=G?yu(bt,w,q,me):Za(bt);Ue.draw(w.context,te,v,w.stencilModeForClipping(Ce),b,jn.disabled,fe,nt,c.id,Pe.layoutVertexBuffer,ye,ke,c.paint,w.transform.zoom,ze)}}function ll(w,r,c,g,v,b,C){const P=w.context,z=P.gl,$="fill-extrusion-pattern",G=c.paint.get($),q=G.constantOr(1),te=c.getCrossfadeParameters(),ue=c.paint.get("fill-extrusion-opacity"),fe=G.constantOr(null);for(const ye of g){const ke=r.getTile(ye),Se=ke.getBucket(c);if(!Se)continue;const Ce=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),me=Se.programConfigurations.get(c.id),Pe=w.useProgram(q?"fillExtrusionPattern":"fillExtrusion",me);q&&(w.context.activeTexture.set(z.TEXTURE0),ke.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),me.updatePaintBuffers(te)),sl(me,$,fe,ke,c);const ze=w.translatePosMatrix(ye.posMatrix,ke,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ue=c.paint.get("fill-extrusion-vertical-gradient"),nt=q?Ol(ze,w,Ue,ue,ye,te,ke):Dl(ze,w,Ue,ue);Pe.draw(P,P.gl.TRIANGLES,v,b,C,jn.backCCW,nt,Ce,c.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,c.paint,w.transform.zoom,me,w.style.map.terrain&&Se.centroidVertexBuffer)}}function ul(w,r,c,g,v,b,C){const P=w.context,z=P.gl,$=c.fbo;if(!$)return;const G=w.useProgram("hillshade"),q=w.style.map.terrain&&w.style.map.terrain.getTerrainData(r);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$.colorAttachment.get()),G.draw(P,z.TRIANGLES,v,b,C,jn.disabled,((te,ue,fe,ye)=>{const ke=fe.paint.get("hillshade-shadow-color"),Se=fe.paint.get("hillshade-highlight-color"),Ce=fe.paint.get("hillshade-accent-color");let me=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=te.transform.angle);const Pe=!te.options.moving;return{u_matrix:ye?ye.posMatrix:te.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:_u(0,ue.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),me],u_shadow:ke,u_highlight:Se,u_accent:Ce}})(w,c,g,q?r:null),q,g.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function Ma(w,r,c,g,v,b){const C=w.context,P=C.gl,z=r.dem;if(z&&z.data){const $=z.dim,G=z.stride,q=z.getPixels();if(C.activeTexture.set(P.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||w.getTileTexture(G),r.demTexture){const ue=r.demTexture;ue.update(q,{premultiply:!1}),ue.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else r.demTexture=new Ze(C,q,P.RGBA,{premultiply:!1}),r.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);C.activeTexture.set(P.TEXTURE0);let te=r.fbo;if(!te){const ue=new Ze(C,{width:$,height:$,data:null},P.RGBA);ue.bind(P.LINEAR,P.CLAMP_TO_EDGE),te=r.fbo=C.createFramebuffer($,$,!0,!1),te.colorAttachment.set(ue.texture)}C.bindFramebuffer.set(te.framebuffer),C.viewport.set([0,0,$,$]),w.useProgram("hillshadePrepare").draw(C,P.TRIANGLES,g,v,b,jn.disabled,((ue,fe)=>{const ye=fe.stride,ke=d.H();return d.aP(ke,0,d.X,-d.X,0,0,1),d.J(ke,ke,[0,-d.X,0]),{u_matrix:ke,u_image:1,u_dimension:[ye,ye],u_zoom:ue.overscaledZ,u_unpack:fe.getUnpackVector()}})(r.tileID,z),null,c.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Uc(w,r,c,g,v,b){const C=g.paint.get("raster-fade-duration");if(!b&&C>0){const P=R.now(),z=(P-w.timeAdded)/C,$=r?(P-r.timeAdded)/C:-1,G=c.getSource(),q=v.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),te=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(w.tileID.overscaledZ-q),ue=te&&w.refreshedUponExpiration?1:d.ac(te?z:1-$,0,1);return w.refreshedUponExpiration&&z>=1&&(w.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}const jc=new d.aM(1,0,0,1),kn=new d.aM(0,1,0,1),bs=new d.aM(0,0,1,1),Sf=new d.aM(1,0,1,1),Vc=new d.aM(0,1,1,1);function hi(w,r,c,g){k(w,0,r+c/2,w.transform.width,c,g)}function Vo(w,r,c,g){k(w,r-c/2,0,c,w.transform.height,g)}function k(w,r,c,g,v,b){const C=w.context,P=C.gl;P.enable(P.SCISSOR_TEST),P.scissor(r*w.pixelRatio,c*w.pixelRatio,g*w.pixelRatio,v*w.pixelRatio),C.clear({color:b}),P.disable(P.SCISSOR_TEST)}function l(w,r,c){const g=w.context,v=g.gl,b=c.posMatrix,C=w.useProgram("debug"),P=pn.disabled,z=Xn.disabled,$=w.colorModeForRenderPass(),G="$debug",q=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);g.activeTexture.set(v.TEXTURE0);const te=r.getTileByID(c.key).latestRawTileData,ue=Math.floor((te&&te.byteLength||0)/1024),fe=r.getTile(c).tileSize,ye=512/Math.min(fe,512)*(c.overscaledZ/w.transform.zoom)*.5;let ke=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ke+=` => ${c.overscaledZ}`),function(Se,Ce){Se.initDebugOverlayCanvas();const me=Se.debugOverlayCanvas,Pe=Se.context.gl,ze=Se.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,me.width,me.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Ce,5,5),ze.strokeText(Ce,5,5),Se.debugOverlayTexture.update(me),Se.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(w,`${ke} ${ue}kB`),C.draw(g,v.TRIANGLES,P,z,Mr.alphaBlended,jn.disabled,xi(b,d.aM.transparent,ye),null,G,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),C.draw(g,v.LINE_STRIP,P,z,$,jn.disabled,xi(b,d.aM.red),q,G,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function h(w,r,c){const g=w.context,v=g.gl,b=w.colorModeForRenderPass(),C=new pn(v.LEQUAL,pn.ReadWrite,w.depthRangeFor3D),P=w.useProgram("terrain"),z=r.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,w.width,w.height]);for(const $ of c){const G=w.renderToTexture.getTexture($),q=r.getTerrainData($.tileID);g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,G.texture);const te=w.transform.calculatePosMatrix($.tileID.toUnwrapped()),ue=r.getMeshFrameDelta(w.transform.zoom),fe=w.transform.calculateFogMatrix($.tileID.toUnwrapped()),ye=Lc(te,ue,fe,w.style.sky,w.transform.pitch);P.draw(g,v.TRIANGLES,C,Xn.disabled,b,jn.backCCW,ye,q,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class f{constructor(r,c,g){this.vertexBuffer=r,this.indexBuffer=c,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class x{constructor(r,c){this.context=new kf(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wa}resize(r,c,g){if(this.width=Math.floor(r*g),this.height=Math.floor(c*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new d.aX;c.emplaceBack(0,0),c.emplaceBack(d.X,0),c.emplaceBack(0,d.X),c.emplaceBack(d.X,d.X),this.tileExtentBuffer=r.createVertexBuffer(c,yo.members),this.tileExtentSegments=d.a0.simpleSegment(0,0,4,2);const g=new d.aX;g.emplaceBack(0,0),g.emplaceBack(d.X,0),g.emplaceBack(0,d.X),g.emplaceBack(d.X,d.X),this.debugBuffer=r.createVertexBuffer(g,yo.members),this.debugSegments=d.a0.simpleSegment(0,0,4,5);const v=new d.$;v.emplaceBack(0,0,0,0),v.emplaceBack(d.X,0,d.X,0),v.emplaceBack(0,d.X,0,d.X),v.emplaceBack(d.X,d.X,d.X,d.X),this.rasterBoundsBuffer=r.createVertexBuffer(v,kr.members),this.rasterBoundsSegments=d.a0.simpleSegment(0,0,4,2);const b=new d.aX;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(b,yo.members),this.viewportSegments=d.a0.simpleSegment(0,0,4,2);const C=new d.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const P=new d.aY;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(P);const z=this.context.gl;this.stencilClearMode=new Xn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=d.H();d.aP(g,0,this.width,this.height,0,0,1),d.K(g,g,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,pn.disabled,this.stencilClearMode,Mr.disabled,jn.disabled,sr(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const g=this.context,v=g.gl;this.nextStencilID+c.length>256&&this.clearStencil(),g.setColorMode(Mr.disabled),g.setDepthMode(pn.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of c){const P=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);b.draw(g,v.TRIANGLES,pn.disabled,new Xn({func:v.ALWAYS,mask:0},P,255,v.KEEP,v.KEEP,v.REPLACE),Mr.disabled,jn.disabled,sr(C.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Xn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Xn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,g=r.sort((C,P)=>P.overscaledZ-C.overscaledZ),v=g[g.length-1].overscaledZ,b=g[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const C={};for(let P=0;P<b;P++)C[P+v]=new Xn({func:c.GEQUAL,mask:255},P+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[C,g]}return[{[v]:Xn.disabled},g]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Mr([r.CONSTANT_COLOR,r.ONE],new d.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mr.unblended:Mr.alphaBlended}depthModeForSublayer(r,c,g){if(!this.opaquePassEnabledForLayer())return pn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new pn(g||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(R.now()),this.imageManager.beginFrame();const g=this.style._order,v=this.style.sourceCaches,b={},C={},P={};for(const z in v){const $=v[z];$.used&&$.prepare(this.context),b[z]=$.getVisibleCoordinates(),C[z]=b[z].slice().reverse(),P[z]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<g.length;z++)if(this.style._layers[g[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of g){const $=this.style._layers[z];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const G=C[$.source];($.type==="custom"||G.length)&&this.renderLayer(this,v[$.source],$,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?d.aM.black:d.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(z,$){const G=z.context,q=G.gl,te=((Se,Ce,me)=>({u_sky_color:Se.properties.get("sky-color"),u_horizon_color:Se.properties.get("horizon-color"),u_horizon:(Ce.height/2+Ce.getHorizon())*me,u_sky_horizon_blend:Se.properties.get("sky-horizon-blend")*Ce.height/2*me}))($,z.style.map.transform,z.pixelRatio),ue=new pn(q.LEQUAL,pn.ReadWrite,[0,1]),fe=Xn.disabled,ye=z.colorModeForRenderPass(),ke=z.useProgram("sky");if(!$.mesh){const Se=new d.aX;Se.emplaceBack(-1,-1),Se.emplaceBack(1,-1),Se.emplaceBack(1,1),Se.emplaceBack(-1,1);const Ce=new d.aY;Ce.emplaceBack(0,1,2),Ce.emplaceBack(0,2,3),$.mesh=new f(G.createVertexBuffer(Se,yo.members),G.createIndexBuffer(Ce),d.a0.simpleSegment(0,0,Se.length,Ce.length))}ke.draw(G,q.TRIANGLES,ue,fe,ye,jn.disabled,te,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[g[this.currentLayer]],$=v[z.source],G=b[z.source];this._renderTileClippingMasks(z,G),this.renderLayer(this,$,z,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const z=this.style._layers[g[this.currentLayer]],$=v[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const G=(z.type==="symbol"?P:C)[z.source];this._renderTileClippingMasks(z,b[z.source]),this.renderLayer(this,$,z,G)}if(this.options.showTileBoundaries){const z=function($,G){let q=null;const te=Object.values($._layers).flatMap(ke=>ke.source&&!ke.isHidden(G)?[$.sourceCaches[ke.source]]:[]),ue=te.filter(ke=>ke.getSource().type==="vector"),fe=te.filter(ke=>ke.getSource().type!=="vector"),ye=ke=>{(!q||q.getSource().maxzoom<ke.getSource().maxzoom)&&(q=ke)};return ue.forEach(ke=>ye(ke)),q||fe.forEach(ke=>ye(ke)),q}(this.style,this.transform.zoom);z&&function($,G,q){for(let te=0;te<q.length;te++)l($,G,q[te])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const $=z.transform.padding;hi(z,z.transform.height-($.top||0),3,jc),hi(z,$.bottom||0,3,kn),Vo(z,$.left||0,3,bs),Vo(z,z.transform.width-($.right||0),3,Sf);const G=z.transform.centerPoint;(function(q,te,ue,fe){k(q,te-1,ue-10,2,20,fe),k(q,te-10,ue-1,20,2,fe)})(z,G.x,z.transform.height-G.y,Vc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=r?!d.a_(c,g):!d.a$(c,g)),v||(v=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),v&&(d.b0(c,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,C){const P=b.context,z=P.gl,$=Mr.unblended,G=new pn(z.LEQUAL,pn.ReadWrite,[0,1]),q=C.getTerrainMesh(),te=C.sourceCache.getRenderableTiles(),ue=b.useProgram("terrainDepth");P.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),P.clear({color:d.aM.transparent,depth:1});for(const fe of te){const ye=C.getTerrainData(fe.tileID),ke={u_matrix:b.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(b.transform.zoom)};ue.draw(P,z.TRIANGLES,G,Xn.disabled,$,jn.backCCW,ke,ye,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,C){const P=b.context,z=P.gl,$=Mr.unblended,G=new pn(z.LEQUAL,pn.ReadWrite,[0,1]),q=C.getTerrainMesh(),te=C.getCoordsTexture(),ue=C.sourceCache.getRenderableTiles(),fe=b.useProgram("terrainCoords");P.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),P.clear({color:d.aM.transparent,depth:1}),C.coordsIndex=[];for(const ye of ue){const ke=C.getTerrainData(ye.tileID);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,te.texture);const Se={u_matrix:b.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(b.transform.zoom)};fe.draw(P,z.TRIANGLES,G,Xn.disabled,$,jn.backCCW,Se,ke,"terrain",q.vertexBuffer,q.indexBuffer,q.segments),C.coordsIndex.push(ye.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(r,c,g,v){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(v||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(b,C,P,z,$){if(b.renderPass!=="translucent")return;const G=Xn.disabled,q=b.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(te,ue,fe,ye,ke,Se,Ce,me,Pe){const ze=ue.transform,Ue=mo(),nt=ke==="map",ht=Se==="map";for(const bt of te){const It=ye.getTile(bt),vt=It.getBucket(fe);if(!vt||!vt.text||!vt.text.segments.get().length)continue;const yt=d.ag(vt.textSizeData,ze.zoom),Nt=fn(It,1,ue.transform.zoom),nn=Hr(bt.posMatrix,ht,nt,ue.transform,Nt),_t=fe.layout.get("icon-text-fit")!=="none"&&vt.hasIconData();if(yt){const St=Math.pow(2,ze.zoom-It.tileID.overscaledZ),en=ue.style.map.terrain?(hn,vn)=>ue.style.map.terrain.getElevation(bt,hn,vn):null,gr=Ue.translatePosition(ze,It,Ce,me);rl(vt,nt,ht,Pe,ze,nn,bt.posMatrix,St,yt,_t,Ue,gr,bt.toUnwrapped(),en)}}}(z,b,P,C,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),$),P.paint.get("icon-opacity").constantOr(1)!==0&&Fc(b,C,P,z,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),G,q),P.paint.get("text-opacity").constantOr(1)!==0&&Fc(b,C,P,z,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),G,q),C.map.showCollisionBoxes&&(Gl(b,C,P,z,!0),Gl(b,C,P,z,!1))})(r,c,g,v,this.style.placement.variableOffsets);break;case"circle":(function(b,C,P,z){if(b.renderPass!=="translucent")return;const $=P.paint.get("circle-opacity"),G=P.paint.get("circle-stroke-width"),q=P.paint.get("circle-stroke-opacity"),te=!P.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(G.constantOr(1)===0||q.constantOr(1)===0))return;const ue=b.context,fe=ue.gl,ye=b.depthModeForSublayer(0,pn.ReadOnly),ke=Xn.disabled,Se=b.colorModeForRenderPass(),Ce=[];for(let me=0;me<z.length;me++){const Pe=z[me],ze=C.getTile(Pe),Ue=ze.getBucket(P);if(!Ue)continue;const nt=Ue.programConfigurations.get(P.id),ht=b.useProgram("circle",nt),bt=Ue.layoutVertexBuffer,It=Ue.indexBuffer,vt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Pe),yt={programConfiguration:nt,program:ht,layoutVertexBuffer:bt,indexBuffer:It,uniformValues:vf(b,Pe,ze,P),terrainData:vt};if(te){const Nt=Ue.segments.get();for(const nn of Nt)Ce.push({segments:new d.a0([nn]),sortKey:nn.sortKey,state:yt})}else Ce.push({segments:Ue.segments,sortKey:0,state:yt})}te&&Ce.sort((me,Pe)=>me.sortKey-Pe.sortKey);for(const me of Ce){const{programConfiguration:Pe,program:ze,layoutVertexBuffer:Ue,indexBuffer:nt,uniformValues:ht,terrainData:bt}=me.state;ze.draw(ue,fe.TRIANGLES,ye,ke,Se,jn.disabled,ht,bt,P.id,Ue,nt,me.segments,P.paint,b.transform.zoom,Pe)}})(r,c,g,v);break;case"heatmap":(function(b,C,P,z){if(P.paint.get("heatmap-opacity")===0)return;const $=b.context;if(b.style.map.terrain){for(const G of z){const q=C.getTile(G);C.hasRenderableParent(G)||(b.renderPass==="offscreen"?$c(b,q,P,G):b.renderPass==="translucent"&&Zs(b,P,G))}$.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(G,q,te,ue){const fe=G.context,ye=fe.gl,ke=Xn.disabled,Se=new Mr([ye.ONE,ye.ONE],d.aM.transparent,[!0,!0,!0,!0]);(function(Ce,me,Pe){const ze=Ce.gl;Ce.activeTexture.set(ze.TEXTURE1),Ce.viewport.set([0,0,me.width/4,me.height/4]);let Ue=Pe.heatmapFbos.get(d.aU);Ue?(ze.bindTexture(ze.TEXTURE_2D,Ue.colorAttachment.get()),Ce.bindFramebuffer.set(Ue.framebuffer)):(Ue=il(Ce,me.width/4,me.height/4),Pe.heatmapFbos.set(d.aU,Ue))})(fe,G,te),fe.clear({color:d.aM.transparent});for(let Ce=0;Ce<ue.length;Ce++){const me=ue[Ce];if(q.hasRenderableParent(me))continue;const Pe=q.getTile(me),ze=Pe.getBucket(te);if(!ze)continue;const Ue=ze.programConfigurations.get(te.id),nt=G.useProgram("heatmap",Ue),{zoom:ht}=G.transform;nt.draw(fe,ye.TRIANGLES,pn.disabled,ke,Se,jn.disabled,ui(me.posMatrix,Pe,ht,te.paint.get("heatmap-intensity")),null,te.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,te.paint,G.transform.zoom,Ue)}fe.viewport.set([0,0,G.width,G.height])}(b,C,P,z):b.renderPass==="translucent"&&function(G,q){const te=G.context,ue=te.gl;te.setColorMode(G.colorModeForRenderPass());const fe=q.heatmapFbos.get(d.aU);fe&&(te.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,fe.colorAttachment.get()),te.activeTexture.set(ue.TEXTURE1),ol(te,q).bind(ue.LINEAR,ue.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(te,ue.TRIANGLES,pn.disabled,Xn.disabled,G.colorModeForRenderPass(),jn.disabled,vu(G,q,0,1),null,q.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,q.paint,G.transform.zoom))}(b,P)})(r,c,g,v);break;case"line":(function(b,C,P,z){if(b.renderPass!=="translucent")return;const $=P.paint.get("line-opacity"),G=P.paint.get("line-width");if($.constantOr(1)===0||G.constantOr(1)===0)return;const q=b.depthModeForSublayer(0,pn.ReadOnly),te=b.colorModeForRenderPass(),ue=P.paint.get("line-dasharray"),fe=P.paint.get("line-pattern"),ye=fe.constantOr(1),ke=P.paint.get("line-gradient"),Se=P.getCrossfadeParameters(),Ce=ye?"linePattern":ue?"lineSDF":ke?"lineGradient":"line",me=b.context,Pe=me.gl;let ze=!0;for(const Ue of z){const nt=C.getTile(Ue);if(ye&&!nt.patternsLoaded())continue;const ht=nt.getBucket(P);if(!ht)continue;const bt=ht.programConfigurations.get(P.id),It=b.context.program.get(),vt=b.useProgram(Ce,bt),yt=ze||vt.program!==It,Nt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue),nn=fe.constantOr(null);if(nn&&nt.imageAtlas){const en=nt.imageAtlas,gr=en.patternPositions[nn.to.toString()],hn=en.patternPositions[nn.from.toString()];gr&&hn&&bt.setConstantPatternPositions(gr,hn)}const _t=Nt?Ue:null,St=ye?Xa(b,nt,P,Se,_t):ue?Mh(b,nt,P,ue,Se,_t):ke?Bl(b,nt,P,ht.lineClipsArray.length,_t):Fl(b,nt,P,_t);if(ye)me.activeTexture.set(Pe.TEXTURE0),nt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),bt.updatePaintBuffers(Se);else if(ue&&(yt||b.lineAtlas.dirty))me.activeTexture.set(Pe.TEXTURE0),b.lineAtlas.bind(me);else if(ke){const en=ht.gradients[P.id];let gr=en.texture;if(P.gradientVersion!==en.version){let hn=256;if(P.stepInterpolant){const vn=C.getSource().maxzoom,yr=Ue.canonical.z===vn?Math.ceil(1<<b.transform.maxZoom-Ue.canonical.z):1;hn=d.ac(d.aV(ht.maxLineLength/d.X*1024*yr),256,me.maxTextureSize)}en.gradient=d.aW({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:hn,image:en.gradient||void 0,clips:ht.lineClipsArray}),en.texture?en.texture.update(en.gradient):en.texture=new Ze(me,en.gradient,Pe.RGBA),en.version=P.gradientVersion,gr=en.texture}me.activeTexture.set(Pe.TEXTURE0),gr.bind(P.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}vt.draw(me,Pe.TRIANGLES,q,b.stencilModeForClipping(Ue),te,jn.disabled,St,Nt,P.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,P.paint,b.transform.zoom,bt,ht.layoutVertexBuffer2),ze=!1}})(r,c,g,v);break;case"fill":(function(b,C,P,z){const $=P.paint.get("fill-color"),G=P.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const q=b.colorModeForRenderPass(),te=P.paint.get("fill-pattern"),ue=b.opaquePassEnabledForLayer()&&!te.constantOr(1)&&$.constantOr(d.aM.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===ue){const fe=b.depthModeForSublayer(1,b.renderPass==="opaque"?pn.ReadWrite:pn.ReadOnly);al(b,C,P,z,fe,q,!1)}if(b.renderPass==="translucent"&&P.paint.get("fill-antialias")){const fe=b.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,pn.ReadOnly);al(b,C,P,z,fe,q,!0)}})(r,c,g,v);break;case"fill-extrusion":(function(b,C,P,z){const $=P.paint.get("fill-extrusion-opacity");if($!==0&&b.renderPass==="translucent"){const G=new pn(b.context.gl.LEQUAL,pn.ReadWrite,b.depthRangeFor3D);if($!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))ll(b,C,P,z,G,Xn.disabled,Mr.disabled),ll(b,C,P,z,G,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const q=b.colorModeForRenderPass();ll(b,C,P,z,G,Xn.disabled,q)}}})(r,c,g,v);break;case"hillshade":(function(b,C,P,z){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const $=b.context,G=b.depthModeForSublayer(0,pn.ReadOnly),q=b.colorModeForRenderPass(),[te,ue]=b.renderPass==="translucent"?b.stencilConfigForOverlap(z):[{},z];for(const fe of ue){const ye=C.getTile(fe);ye.needsHillshadePrepare!==void 0&&ye.needsHillshadePrepare&&b.renderPass==="offscreen"?Ma(b,ye,P,G,Xn.disabled,q):b.renderPass==="translucent"&&ul(b,fe,ye,P,G,te[fe.overscaledZ],q)}$.viewport.set([0,0,b.width,b.height])})(r,c,g,v);break;case"raster":(function(b,C,P,z){if(b.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!z.length)return;const $=b.context,G=$.gl,q=C.getSource(),te=b.useProgram("raster"),ue=b.colorModeForRenderPass(),[fe,ye]=q instanceof vi?[{},z]:b.stencilConfigForOverlap(z),ke=ye[ye.length-1].overscaledZ,Se=!b.options.moving;for(const Ce of ye){const me=b.depthModeForSublayer(Ce.overscaledZ-ke,P.paint.get("raster-opacity")===1?pn.ReadWrite:pn.ReadOnly,G.LESS),Pe=C.getTile(Ce);Pe.registerFadeDuration(P.paint.get("raster-fade-duration"));const ze=C.findLoadedParent(Ce,0),Ue=C.findLoadedSibling(Ce),nt=Uc(Pe,ze||Ue||null,C,P,b.transform,b.style.map.terrain);let ht,bt;const It=P.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;$.activeTexture.set(G.TEXTURE0),Pe.texture.bind(It,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(G.TEXTURE1),ze?(ze.texture.bind(It,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),ht=Math.pow(2,ze.tileID.overscaledZ-Pe.tileID.overscaledZ),bt=[Pe.tileID.canonical.x*ht%1,Pe.tileID.canonical.y*ht%1]):Pe.texture.bind(It,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const vt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ce),yt=vt?Ce:null,Nt=yt?yt.posMatrix:b.transform.calculatePosMatrix(Ce.toUnwrapped(),Se),nn=Pc(Nt,bt||[0,0],ht||1,nt,P);q instanceof vi?te.draw($,G.TRIANGLES,me,Xn.disabled,ue,jn.disabled,nn,vt,P.id,q.boundsBuffer,b.quadTriangleIndexBuffer,q.boundsSegments):te.draw($,G.TRIANGLES,me,fe[Ce.overscaledZ],ue,jn.disabled,nn,vt,P.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(r,c,g,v);break;case"background":(function(b,C,P,z){const $=P.paint.get("background-color"),G=P.paint.get("background-opacity");if(G===0)return;const q=b.context,te=q.gl,ue=b.transform,fe=ue.tileSize,ye=P.paint.get("background-pattern");if(b.isPatternMissing(ye))return;const ke=!ye&&$.a===1&&G===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ke)return;const Se=Xn.disabled,Ce=b.depthModeForSublayer(0,ke==="opaque"?pn.ReadWrite:pn.ReadOnly),me=b.colorModeForRenderPass(),Pe=b.useProgram(ye?"backgroundPattern":"background"),ze=z||ue.coveringTiles({tileSize:fe,terrain:b.style.map.terrain});ye&&(q.activeTexture.set(te.TEXTURE0),b.imageManager.bind(b.context));const Ue=P.getCrossfadeParameters();for(const nt of ze){const ht=z?nt.posMatrix:b.transform.calculatePosMatrix(nt.toUnwrapped()),bt=ye?Ul(ht,G,b,ye,{tileID:nt,tileSize:fe},Ue):$l(ht,G,$),It=b.style.map.terrain&&b.style.map.terrain.getTerrainData(nt);Pe.draw(q,te.TRIANGLES,Ce,Se,me,jn.disabled,bt,It,P.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(r,0,g,v);break;case"custom":(function(b,C,P){const z=b.context,$=P.implementation;if(b.renderPass==="offscreen"){const G=$.prerender;G&&(b.setCustomLayerDefaults(),z.setColorMode(b.colorModeForRenderPass()),G.call($,z.gl,b.transform.customLayerMatrix()),z.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),z.setColorMode(b.colorModeForRenderPass()),z.setStencilMode(Xn.disabled);const G=$.renderingMode==="3d"?new pn(b.context.gl.LEQUAL,pn.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,pn.ReadOnly);z.setDepthMode(G),$.render(z.gl,b.transform.customLayerMatrix(),{farZ:b.transform.farZ,nearZ:b.transform.nearZ,fov:b.transform._fov,modelViewProjectionMatrix:b.transform.modelViewProjectionMatrix,projectionMatrix:b.transform.projectionMatrix}),z.setDirty(),b.setBaseState(),z.bindFramebuffer.set(null)}})(r,0,g)}}translatePosMatrix(r,c,g,v,b){if(!g[0]&&!g[1])return r;const C=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(C){const $=Math.sin(C),G=Math.cos(C);g=[g[0]*G-g[1]*$,g[0]*$+g[1]*G]}const P=[b?g[0]:fn(c,g[0],this.transform.zoom),b?g[1]:fn(c,g[1],this.transform.zoom),0],z=new Float32Array(16);return d.J(z,r,P),z}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),g=this.imageManager.getPattern(r.to.toString());return!c||!g}useProgram(r,c){this.cache=this.cache||{};const g=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Ea(this.context,qs[r],c,xu[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ze(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class I{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,g){const v=Math.pow(2,g),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const z=1/(P=d.af([],P,r))[3]/c*v;return d.b1(P,P,[z,z,1/P[3],z])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const z=function(te,ue){var fe=ue[0],ye=ue[1],ke=ue[2],Se=fe*fe+ye*ye+ke*ke;return Se>0&&(Se=1/Math.sqrt(Se)),te[0]=ue[0]*Se,te[1]=ue[1]*Se,te[2]=ue[2]*Se,te}([],function(te,ue,fe){var ye=ue[0],ke=ue[1],Se=ue[2],Ce=fe[0],me=fe[1],Pe=fe[2];return te[0]=ke*Pe-Se*me,te[1]=Se*Ce-ye*Pe,te[2]=ye*me-ke*Ce,te}([],pe([],b[P[0]],b[P[1]]),pe([],b[P[2]],b[P[1]]))),$=-((G=z)[0]*(q=b[P[1]])[0]+G[1]*q[1]+G[2]*q[2]);var G,q;return z.concat($)});return new I(b,C)}}class F{constructor(r,c){this.min=r,this.max=c,this.center=function(g,v,b){return g[0]=.5*v[0],g[1]=.5*v[1],g[2]=.5*v[2],g}([],function(g,v,b){return g[0]=v[0]+b[0],g[1]=v[1]+b[1],g[2]=v[2]+b[2],g}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],g=he(this.min),v=he(this.max);for(let b=0;b<c.length;b++)g[b]=c[b]?this.min[b]:this.center[b],v[b]=c[b]?this.center[b]:this.max[b];return v[2]=this.max[2],new F(g,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let v=0;v<r.planes.length;v++){const b=r.planes[v];let C=0;for(let P=0;P<c.length;P++)d.b2(b,c[P])>=0&&C++;if(C===0)return 0;C!==c.length&&(g=!1)}if(g)return 2;for(let v=0;v<3;v++){let b=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let P=0;P<r.points.length;P++){const z=r.points[P][v]-this.min[v];b=Math.min(b,z),C=Math.max(C,z)}if(C<0||b>this.max[v]-this.min[v])return 0}return 1}}class U{constructor(r=0,c=0,g=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=g,this.right=v}interpolate(r,c,g){return c.top!=null&&r.top!=null&&(this.top=d.y.number(r.top,c.top,g)),c.bottom!=null&&r.bottom!=null&&(this.bottom=d.y.number(r.bottom,c.bottom,g)),c.left!=null&&r.left!=null&&(this.left=d.y.number(r.left,c.left,g)),c.right!=null&&r.right!=null&&(this.right=d.y.number(r.right,c.right,g)),this}getCenter(r,c){const g=d.ac((this.left+r-this.right)/2,0,r),v=d.ac((this.top+c-this.bottom)/2,0,c);return new d.P(g,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new U(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Z=85.051129;class le{constructor(r,c,g,v,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=g??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new U,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new le(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-d.b3(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var g=new d.A(4);return d.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,v,b){var C=v[0],P=v[1],z=v[2],$=v[3],G=Math.sin(b),q=Math.cos(b);g[0]=C*q+z*G,g[1]=P*q+$*G,g[2]=C*-G+z*q,g[3]=P*-G+$*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=d.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,g){this._unmodified=!1,this._edgeInsets.interpolate(r,c,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new d.b4(0,r)];if(this._renderWorldCopies){const g=this.pointCoordinate(new d.P(0,0)),v=this.pointCoordinate(new d.P(this.width,0)),b=this.pointCoordinate(new d.P(this.width,this.height)),C=this.pointCoordinate(new d.P(0,this.height)),P=Math.floor(Math.min(g.x,v.x,b.x,C.x)),z=Math.floor(Math.max(g.x,v.x,b.x,C.x)),$=1;for(let G=P-$;G<=z+$;G++)G!==0&&c.push(new d.b4(G,r))}return c}coveringTiles(r){var c,g;let v=this.coveringZoomLevel(r);const b=v;if(r.minzoom!==void 0&&v<r.minzoom)return[];r.maxzoom!==void 0&&v>r.maxzoom&&(v=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),P=d.Z.fromLngLat(this.center),z=Math.pow(2,v),$=[z*C.x,z*C.y,0],G=[z*P.x,z*P.y,0],q=I.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,v);let te=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(te=v);const ue=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,fe=me=>({aabb:new F([me*z,0,0],[(me+1)*z,z,0]),zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),ye=[],ke=[],Se=v,Ce=r.reparseOverscaled?b:v;if(this._renderWorldCopies)for(let me=1;me<=3;me++)ye.push(fe(-me)),ye.push(fe(me));for(ye.push(fe(0));ye.length>0;){const me=ye.pop(),Pe=me.x,ze=me.y;let Ue=me.fullyVisible;if(!Ue){const vt=me.aabb.intersects(q);if(vt===0)continue;Ue=vt===2}const nt=r.terrain?$:G,ht=me.aabb.distanceX(nt),bt=me.aabb.distanceY(nt),It=Math.max(Math.abs(ht),Math.abs(bt));if(me.zoom===Se||It>ue+(1<<Se-me.zoom)-2&&me.zoom>=te){const vt=Se-me.zoom,yt=$[0]-.5-(Pe<<vt),Nt=$[1]-.5-(ze<<vt);ke.push({tileID:new d.S(me.zoom===Se?Ce:me.zoom,me.wrap,me.zoom,Pe,ze),distanceSq:Ie([G[0]-.5-Pe,G[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(yt*yt+Nt*Nt)})}else for(let vt=0;vt<4;vt++){const yt=(Pe<<1)+vt%2,Nt=(ze<<1)+(vt>>1),nn=me.zoom+1;let _t=me.aabb.quadrant(vt);if(r.terrain){const St=new d.S(nn,me.wrap,nn,yt,Nt),en=r.terrain.getMinMaxElevation(St),gr=(c=en.minElevation)!==null&&c!==void 0?c:this.elevation,hn=(g=en.maxElevation)!==null&&g!==void 0?g:this.elevation;_t=new F([_t.min[0],_t.min[1],gr],[_t.max[0],_t.max[1],hn])}ye.push({aabb:_t,zoom:nn,x:yt,y:Nt,wrap:me.wrap,fullyVisible:Ue})}}return ke.sort((me,Pe)=>me.distanceSq-Pe.distanceSq).map(me=>me.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=d.ac(r.lat,-85.051129,Z);return new d.P(d.O(r.lng)*this.worldSize,d.Q(c)*this.worldSize)}unproject(r){return new d.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,v=this.pointLocation(this.centerPoint,r),b=r.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-b))return;const C=g+c-b,P=Math.cos(this._pitch)*this.cameraToCenterDistance/C/d.b5(1,v.lat),z=this.scaleZoom(P/this.tileSize);this._elevation=b,this._center=v,this.zoom=z}setLocationAtPoint(r,c){const g=this.pointCoordinate(c),v=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(r),C=new d.Z(b.x-(g.x-v.x),b.y-(g.y-v.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return d.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const te=c.pointCoordinate(r);if(te!=null)return te}const g=[r.x,r.y,0,1],v=[r.x,r.y,1,1];d.af(g,g,this.pixelMatrixInverse),d.af(v,v,this.pixelMatrixInverse);const b=g[3],C=v[3],P=g[1]/b,z=v[1]/C,$=g[2]/b,G=v[2]/C,q=$===G?0:(0-$)/(G-$);return new d.Z(d.y.number(g[0]/b,v[0]/C,q)/this.worldSize,d.y.number(P,z,q)/this.worldSize)}coordinatePoint(r,c=0,g=this.pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return d.af(v,v,g),new d.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Ve().extend(this.pointLocation(new d.P(0,r))).extend(this.pointLocation(new d.P(this.width,r))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ve([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Z])}calculateTileMatrix(r){const c=r.canonical,g=this.worldSize/this.zoomScale(c.z),v=c.x+Math.pow(2,c.z)*r.wrap,b=d.an(new Float64Array(16));return d.J(b,b,[v*g,c.y*g,0]),d.K(b,b,[g/d.X,g/d.X,1]),b}calculatePosMatrix(r,c=!1){const g=r.key,v=c?this._alignedPosMatrixCache:this._posMatrixCache;if(v[g])return v[g];const b=this.calculateTileMatrix(r);return d.L(b,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,b),v[g]=new Float32Array(b),v[g]}calculateFogMatrix(r){const c=r.key,g=this._fogMatrixCache;if(g[c])return g[c];const v=this.calculateTileMatrix(r);return d.L(v,this.fogMatrix,v),g[c]=new Float32Array(v),g[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,c){c=d.ac(+c,this.minZoom,this.maxZoom);const g={center:new d.N(r.lng,r.lat),zoom:c};let v=this.lngRange;if(!this._renderWorldCopies&&v===null){const me=179.9999999999;v=[-me,me]}const b=this.tileSize*this.zoomScale(g.zoom);let C=0,P=b,z=0,$=b,G=0,q=0;const{x:te,y:ue}=this.size;if(this.latRange){const me=this.latRange;C=d.Q(me[1])*b,P=d.Q(me[0])*b,P-C<ue&&(G=ue/(P-C))}v&&(z=d.b3(d.O(v[0])*b,0,b),$=d.b3(d.O(v[1])*b,0,b),$<z&&($+=b),$-z<te&&(q=te/($-z)));const{x:fe,y:ye}=this.project.call({worldSize:b},r);let ke,Se;const Ce=Math.max(q||0,G||0);if(Ce){const me=new d.P(q?($+z)/2:fe,G?(P+C)/2:ye);return g.center=this.unproject.call({worldSize:b},me).wrap(),g.zoom+=this.scaleZoom(Ce),g}if(this.latRange){const me=ue/2;ye-me<C&&(Se=C+me),ye+me>P&&(Se=P-me)}if(v){const me=(z+$)/2;let Pe=fe;this._renderWorldCopies&&(Pe=d.b3(fe,me-b/2,me+b/2));const ze=te/2;Pe-ze<z&&(ke=z+ze),Pe+ze>$&&(ke=$-ze)}if(ke!==void 0||Se!==void 0){const me=new d.P(ke??fe,Se??ye);g.center=this.unproject.call({worldSize:b},me).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=g,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b5(1,this.center.lat)*this.worldSize;let v=d.an(new Float64Array(16));d.K(v,v,[this.width/2,-this.height/2,1]),d.J(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=d.an(new Float64Array(16)),d.K(v,v,[1,-1,1]),d.J(v,v,[-1,-1,0]),d.K(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),P=b-C*this._pixelPerMeter/Math.cos(this._pitch),z=C<0?P:b,$=Math.PI/2+this._pitch,G=this._fov*(.5+r.y/this.height),q=Math.sin(G)*z/Math.sin(d.ac(Math.PI-$-G,.01,Math.PI-.01)),te=this.getHorizon(),ue=2*Math.atan(te/this.cameraToCenterDistance)*(.5+r.y/(2*te)),fe=Math.sin(ue)*z/Math.sin(d.ac(Math.PI-$-ue,.01,Math.PI-.01)),ye=Math.min(q,fe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ye+z),this.nearZ=this.height/50,v=new Float64Array(16),d.b6(v,this._fov,this.width/this.height,this.nearZ,this.farZ),v[8]=2*-r.x/this.width,v[9]=2*r.y/this.height,this.projectionMatrix=d.ae(v),d.K(v,v,[1,-1,1]),d.J(v,v,[0,0,-this.cameraToCenterDistance]),d.b7(v,v,this._pitch),d.ad(v,v,this.angle),d.J(v,v,[-c,-g,0]),this.mercatorMatrix=d.K([],v,[this.worldSize,this.worldSize,this.worldSize]),d.K(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.L(new Float64Array(16),this.labelPlaneMatrix,v),d.J(v,v,[0,0,-this.elevation]),this.modelViewProjectionMatrix=v,this.invModelViewProjectionMatrix=d.as([],v),this.fogMatrix=new Float64Array(16),d.b6(this.fogMatrix,this._fov,this.width/this.height,b,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,d.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),d.b7(this.fogMatrix,this.fogMatrix,this._pitch),d.ad(this.fogMatrix,this.fogMatrix,this.angle),d.J(this.fogMatrix,this.fogMatrix,[-c,-g,0]),d.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=d.L(new Float64Array(16),this.labelPlaneMatrix,v);const ke=this.width%2/2,Se=this.height%2/2,Ce=Math.cos(this.angle),me=Math.sin(this.angle),Pe=c-Math.round(c)+Ce*ke+me*Se,ze=g-Math.round(g)+Ce*Se+me*ke,Ue=new Float64Array(v);if(d.J(Ue,Ue,[Pe>.5?Pe-1:Pe,ze>.5?ze-1:ze,0]),this.alignedModelViewProjectionMatrix=Ue,v=d.as(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new d.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return d.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let g=c.x,v=c.y,b=c.x,C=c.y;for(const P of r)g=Math.min(g,P.x),v=Math.min(v,P.y),b=Math.max(b,P.x),C=Math.max(C,P.y);return[new d.P(g,v),new d.P(b,v),new d.P(b,C),new d.P(g,C),new d.P(g,v)]}}lngLatToCameraDepth(r,c){const g=this.locationCoordinate(r),v=[g.x*this.worldSize,g.y*this.worldSize,c,1];return d.af(v,v,this.modelViewProjectionMatrix),v[2]/v[3]}}function Ee(w,r){let c,g=!1,v=null,b=null;const C=()=>{v=null,g&&(w.apply(b,c),v=setTimeout(C,r),g=!1)};return(...P)=>(g=!0,b=this,c=P,v||C(),v)}class Re{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let g;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(g=v)}),(g&&g[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const g=c.join("/");let v=g;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${g}`);let b=window.location.hash.replace(v,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let C=window.location.href.replace(/(#.+)?$/,b);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Ee(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),C=Math.round(c.lng*b)/b,P=Math.round(c.lat*b)/b,z=this._map.getBearing(),$=this._map.getPitch();let G="";if(G+=r?`/${C}/${P}/${g}`:`${g}/${P}/${C}`,(z||$)&&(G+="/"+Math.round(10*z)/10),$&&(G+=`/${Math.round($)}`),this._hashName){const q=this._hashName;let te=!1;const ue=window.location.hash.slice(1).split("&").map(fe=>{const ye=fe.split("=")[0];return ye===q?(te=!0,`${ye}=${G}`):fe}).filter(fe=>fe);return te||ue.push(`${q}=${G}`),`#${ue.join("&")}`}return`#${G}`}}const Ye={linearity:.3,easing:d.b8(0,0,.3,1)},pt=d.e({deceleration:2500,maxSpeed:1400},Ye),ft=d.e({deceleration:20,maxSpeed:1400},Ye),qt=d.e({deceleration:1e3,maxSpeed:360},Ye),Yt=d.e({deceleration:1e3,maxSpeed:90},Ye);class ln{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=R.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const b=Yn(c.pan.mag(),g,d.e({},pt,r||{}));v.offset=c.pan.mult(b.amount/c.pan.mag()),v.center=this._map.transform.center,Cn(v,b)}if(c.zoom){const b=Yn(c.zoom,g,ft);v.zoom=this._map.transform.zoom+b.amount,Cn(v,b)}if(c.bearing){const b=Yn(c.bearing,g,qt);v.bearing=this._map.transform.bearing+d.ac(b.amount,-179,179),Cn(v,b)}if(c.pitch){const b=Yn(c.pitch,g,Yt);v.pitch=this._map.transform.pitch+b.amount,Cn(v,b)}if(v.zoom||v.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),d.e(v,{noMoveStart:!0})}}function Cn(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function Yn(w,r,c){const{maxSpeed:g,linearity:v,deceleration:b}=c,C=d.ac(w*v/(r/1e3),-g,g),P=Math.abs(C)/(b*v);return{easing:c.easing,duration:1e3*P,amount:C*(P/2)}}class zn extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g,v={}){const b=N.mousePos(c.getCanvas(),g),C=c.unproject(b);super(r,d.e({point:b,lngLat:C,originalEvent:g},v)),this._defaultPrevented=!1,this.target=c}}class Zr extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g){const v=r==="touchend"?g.changedTouches:g.touches,b=N.touchPos(c.getCanvasContainer(),v),C=b.map(z=>c.unproject(z)),P=b.reduce((z,$,G,q)=>z.add($.div(q.length)),new d.P(0,0));super(r,{points:b,point:P,lngLats:C,lngLat:c.unproject(P),originalEvent:g}),this._defaultPrevented=!1}}class bo extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g){super(r,{originalEvent:g}),this._defaultPrevented=!1}}class rs{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new bo(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new zn(r.type,this._map,r))}mouseup(r){this._map.fire(new zn(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new zn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new zn(r.type,this._map,r))}mouseover(r){this._map.fire(new zn(r.type,this._map,r))}mouseout(r){this._map.fire(new zn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Zr(r.type,this._map,r))}touchmove(r){this._map.fire(new Zr(r.type,this._map,r))}touchend(r){this._map.fire(new Zr(r.type,this._map,r))}touchcancel(r){this._map.fire(new Zr(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new zn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new zn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pi{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(d.P.convert(r),this._map.terrain)}}class di{constructor(r,c){this._map=r,this._tr=new Pi(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(N.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const g=c;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=g,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(v.x,g.x),C=Math.max(v.x,g.x),P=Math.min(v.y,g.y),z=Math.max(v.y,g.y);N.setTransform(this._box,`translate(${b}px,${P}px)`),this._box.style.width=C-b+"px",this._box.style.height=z-P+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const g=this._startPos,v=c;if(this.reset(),N.suppressClick(),g.x!==v.x||g.y!==v.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(g,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new d.k(r,{originalEvent:c}))}}function is(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let g=0;g<w.length;g++)c[w[g].identifier]=r[g];return c}class Mu{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const b=new d.P(0,0);for(const C of v)b._add(C);return b.div(v.length)}(c),this.touches=is(g,c)))}touchmove(r,c,g){if(this.aborted||!this.centroid)return;const v=is(g,c);for(const b in this.touches){const C=v[b];(!C||C.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,g){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class ql{constructor(r){this.singleTap=new Mu(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,g){this.singleTap.touchstart(r,c,g)}touchmove(r,c,g){this.singleTap.touchmove(r,c,g)}touchend(r,c,g){const v=this.singleTap.touchend(r,c,g);if(v){const b=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(v)<30;if(b&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Xs{constructor(r){this._tr=new Pi(r),this._zoomIn=new ql({numTouches:1,numTaps:2}),this._zoomOut=new ql({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,g){this._zoomIn.touchstart(r,c,g),this._zoomOut.touchstart(r,c,g)}touchmove(r,c,g){this._zoomIn.touchmove(r,c,g),this._zoomOut.touchmove(r,c,g)}touchend(r,c,g){const v=this._zoomIn.touchend(r,c,g),b=this._zoomOut.touchend(r,c,g),C=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(v)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Go{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=c.length?c[0]:c;return!this._moved&&v.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(g,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&N.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ef={0:1,2:2};class Fh{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=N.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,g){const v=Ef[g];return c.buttons===void 0||(c.buttons&v)!==v}(r,this._eventButton)}isValidEndEvent(r){return N.mouseButton(r)===this._eventButton}}class If{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Bh=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}},Tf=({enable:w,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const g=new Fh({checkCorrectEvent:v=>N.mouseButton(v)===0&&v.ctrlKey||N.mouseButton(v)===2});return new Go({clickTolerance:r,move:(v,b)=>({bearingDelta:(b.x-v.x)*c}),moveStateManager:g,enable:w,assignEvents:Bh})},Cf=({enable:w,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const g=new Fh({checkCorrectEvent:v=>N.mouseButton(v)===0&&v.ctrlKey||N.mouseButton(v)===2});return new Go({clickTolerance:r,move:(v,b)=>({pitchDelta:(b.y-v.y)*c}),moveStateManager:g,enable:w,assignEvents:Bh})};class Hl{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,g){return this._calculateTransform(r,c,g)}touchmove(r,c,g){if(this._active){if(!this._shouldBePrevented(g.length))return r.preventDefault(),this._calculateTransform(r,c,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,g){this._calculateTransform(r,c,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,g){g.length>0&&(this._active=!0);const v=is(g,c),b=new d.P(0,0),C=new d.P(0,0);let P=0;for(const $ in v){const G=v[$],q=this._touches[$];q&&(b._add(G),C._add(G.sub(q)),P++,v[$]=G)}if(this._touches=v,this._shouldBePrevented(P)||!C.mag())return;const z=C.div(P);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(P),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $h{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,g){if(!this._firstTwoTouches)return;r.preventDefault();const[v,b]=this._firstTwoTouches,C=Gc(g,c,v),P=Gc(g,c,b);if(!C||!P)return;const z=this._aroundCenter?null:C.add(P).div(2);return this._move([C,P],z,r)}touchend(r,c,g){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,C=Gc(g,c,v),P=Gc(g,c,b);C&&P||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Gc(w,r,c){for(let g=0;g<w.length;g++)if(w[g].identifier===c)return r[g]}function Mf(w,r){return Math.log(w/r)/Math.LN2}class Lf extends $h{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const g=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Mf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mf(this._distance,g),pinchAround:c}}}function Pf(w,r){return 180*w.angleWith(r)/Math.PI}class Af extends $h{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,g){const v=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pf(this._vector,v),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,g=Pf(r,this._startVector);return Math.abs(g)<c}}function Uh(w){return Math.abs(w.y)>Math.abs(w.x)}class Lu extends $h{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,g){super.touchstart(r,c,g),this._currentTouchCount=g.length}_start(r){this._lastPoints=r,Uh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,b,g.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,g){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,b=c.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const C=r.y>0==c.y>0;return Uh(r)&&Uh(c)&&C}}const Nm={panStep:100,bearingStep:15,pitchStep:10};class os{constructor(r){this._tr=new Pi(r);const c=Nm;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,g=0,v=0,b=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?g=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?g=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:P=>{const z=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Ys,zoom:c?Math.round(z.zoom)+c*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+g*this._bearingStep,pitch:z.pitch+v*this._pitchStep,offset:[-b*this._panStep,-C*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ys(w){return w*(2-w)}const Rf=4.000244140625;class ws{constructor(r,c){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=r,this._tr=new Pi(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const g=R.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%Rf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=N.mousePos(this._map.getCanvas(),r),g=this._tr;this._around=c.y>g.transform.height/2-g.transform.getHorizon()?d.N.convert(this._aroundCenter?g.center:g.unproject(c)):d.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Rf?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&$!==0&&($=1/$);const G=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(G*$))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,g=this._startZoom,v=this._easing;let b,C=!1;const P=R.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&v&&P){const z=Math.min(P/200,1),$=v(z);b=d.y.number(g,c,$),z<1?this._frameId||(this._frameId=!0):C=!0}else b=c,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=d.b9;if(this._prevEase){const g=this._prevEase,v=(R.now()-g.start)/g.duration,b=g.easing(v+.01)-g.easing(v),C=.27/Math.sqrt(b*b+1e-4)*.01,P=Math.sqrt(.0729-C*C);c=d.b8(C,P,.25,1)}return this._prevEase={start:R.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wl{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class h0{constructor(r){this._tr=new Pi(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class d0{constructor(){this._tap=new ql({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,g){if(!this._swipePoint)if(this._tapTime){const v=c[0],b=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(v)<30;b&&C?g.length>0&&(this._swipePoint=v,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(r,c,g)}touchmove(r,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=c[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,g)}touchend(r,c,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const v=this._tap.touchend(r,c,g);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zm{constructor(r,c,g){this._el=r,this._mousePan=c,this._touchPan=g}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Dm{constructor(r,c,g){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Nf{constructor(r,c,g,v){this._el=r,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Pu{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=g,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new d.k("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ss=w=>w.zoom||w.drag||w.pitch||w.rotate;class Mt extends d.k{}function jh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class zf{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,b)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=v.type==="renderFrame"?void 0:v,P={needsRenderFrame:!1},z={},$={},G=v.touches,q=G?this._getMapTouches(G):void 0,te=q?N.touchPos(this._map.getCanvas(),q):N.mousePos(this._map.getCanvas(),v);for(const{handlerName:ye,handler:ke,allowed:Se}of this._handlers){if(!ke.isEnabled())continue;let Ce;this._blockedByActive($,Se,ye)?ke.reset():ke[b||v.type]&&(Ce=ke[b||v.type](v,te,q),this.mergeHandlerResult(P,z,Ce,ye,C),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||ke.isActive())&&($[ye]=ke)}const ue={};for(const ye in this._previousActiveHandlers)$[ye]||(ue[ye]=C);this._previousActiveHandlers=$,(Object.keys(ue).length||jh(P))&&(this._changes.push([P,z,ue]),this._triggerRenderFrame()),(Object.keys($).length||jh(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:fe}=P;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ln(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,C]of this._listeners)N.addEventListener(v,b,v===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,c,g]of this._listeners)N.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(r){const c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new rs(c,r));const v=c.boxZoom=new di(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const b=c.cooperativeGestures=new Pu(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const C=new Xs(c),P=new h0(c);c.doubleClickZoom=new Wl(P,C),this._add("tapZoom",C),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const z=new d0;this._add("tapDragZoom",z);const $=c.touchPitch=new Lu(c);this._add("touchPitch",$),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const G=Tf(r),q=Cf(r);c.dragRotate=new Dm(r,G,q),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const te=(({enable:Ce,clickTolerance:me})=>{const Pe=new Fh({checkCorrectEvent:ze=>N.mouseButton(ze)===0&&!ze.ctrlKey});return new Go({clickTolerance:me,move:(ze,Ue)=>({around:Ue,panDelta:Ue.sub(ze)}),activateOnStart:!0,moveStateManager:Pe,enable:Ce,assignEvents:Bh})})(r),ue=new Hl(r,c);c.dragPan=new zm(g,te,ue),this._add("mousePan",te),this._add("touchPan",ue,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const fe=new Af,ye=new Lf;c.touchZoomRotate=new Nf(g,ye,fe,z),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const ke=c.scrollZoom=new ws(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ke,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const Se=c.keyboard=new os(c);this._add("keyboard",Se),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new qn(c))}_add(r,c,g){this._handlers.push({handlerName:r,handler:c,allowed:g}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ss(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,g){for(const v in r)if(v!==g&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const g of r)this._el.contains(g.target)&&c.push(g);return c}mergeHandlerResult(r,c,g,v,b){if(!g)return;d.e(r,g);const C={handlerName:v,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(c.zoom=C),g.panDelta!==void 0&&(c.drag=C),g.pitchDelta!==void 0&&(c.pitch=C),g.bearingDelta!==void 0&&(c.rotate=C)}_applyChanges(){const r={},c={},g={};for(const[v,b,C]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new d.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),d.e(c,b),d.e(g,C);this._updateMapTransform(r,c,g),this._changes=[]}_updateMapTransform(r,c,g){const v=this._map,b=v._getTransformForUpdate(),C=v.terrain;if(!(jh(r)||C&&this._terrainMovement))return this._fireEvents(c,g,!0);let{panDelta:P,zoomDelta:z,bearingDelta:$,pitchDelta:G,around:q,pinchAround:te}=r;te!==void 0&&(q=te),v._stop(!0),q=q||v.transform.centerPoint;const ue=b.pointLocation(P?q.sub(P):q);$&&(b.bearing+=$),G&&(b.pitch+=G),z&&(b.zoom+=z),C?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(P)):b.setLocationAtPoint(ue,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(ue,q)):b.setLocationAtPoint(ue,q),v._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,g,!0)}_fireEvents(r,c,g){const v=ss(this._eventsInProgress),b=ss(r),C={};for(const q in r){const{originalEvent:te}=r[q];this._eventsInProgress[q]||(C[`${q}start`]=te),this._eventsInProgress[q]=r[q]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const q in C)this._fireEvent(q,C[q]);b&&this._fireEvent("move",b.originalEvent);for(const q in r){const{originalEvent:te}=r[q];this._fireEvent(q,te)}const P={};let z;for(const q in this._eventsInProgress){const{handlerName:te,originalEvent:ue}=this._eventsInProgress[q];this._handlersById[te].isActive()||(delete this._eventsInProgress[q],z=c[te]||ue,P[`${q}end`]=z)}for(const q in P)this._fireEvent(q,P[q]);const $=ss(this._eventsInProgress),G=(v||b)&&!$;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const q=this._map._getTransformForUpdate();q.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(q)}if(g&&G){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;!q||!q.essential&&R.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:z})),te(this._map.getBearing())&&this._map.resetNorth()):(te(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new d.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Mt("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Om extends d.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const g=Math.min((R.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new d.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,g){return r=d.P.convert(r).mult(-1),this.panTo(this.transform.center,d.e({offset:r},c),g)}panTo(r,c,g){return this.easeTo(d.e({center:r},c),g)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,g){return this.easeTo(d.e({zoom:r},c),g)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,g){return this.easeTo(d.e({bearing:r},c),g)}resetNorth(r,c){return this.rotateTo(0,d.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=Ve.convert(r).adjustAntiMeridian();const g=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),g,c)}_cameraForBoxAndBearing(r,c,g,v){const b={top:0,bottom:0,right:0,left:0};if(typeof(v=d.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const vt=v.padding;v.padding={top:vt,bottom:vt,right:vt,left:vt}}v.padding=d.e(b,v.padding);const C=this.transform,P=C.padding,z=new Ve(r,c),$=C.project(z.getNorthWest()),G=C.project(z.getNorthEast()),q=C.project(z.getSouthEast()),te=C.project(z.getSouthWest()),ue=d.ba(-g),fe=$.rotate(ue),ye=G.rotate(ue),ke=q.rotate(ue),Se=te.rotate(ue),Ce=new d.P(Math.max(fe.x,ye.x,Se.x,ke.x),Math.max(fe.y,ye.y,Se.y,ke.y)),me=new d.P(Math.min(fe.x,ye.x,Se.x,ke.x),Math.min(fe.y,ye.y,Se.y,ke.y)),Pe=Ce.sub(me),ze=(C.width-(P.left+P.right+v.padding.left+v.padding.right))/Pe.x,Ue=(C.height-(P.top+P.bottom+v.padding.top+v.padding.bottom))/Pe.y;if(Ue<0||ze<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const nt=Math.min(C.scaleZoom(C.scale*Math.min(ze,Ue)),v.maxZoom),ht=d.P.convert(v.offset),bt=new d.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(d.ba(g)),It=ht.add(bt).mult(C.scale/C.zoomScale(nt));return{center:C.unproject($.add(q).div(2).sub(It)),zoom:nt,bearing:g}}fitBounds(r,c,g){return this._fitInternal(this.cameraForBounds(r,c),c,g)}fitScreenCoordinates(r,c,g,v,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(r)),this.transform.pointLocation(d.P.convert(c)),g,v),v,b)}_fitInternal(r,c,g){return r?(delete(c=d.e(r,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this}jumpTo(r,c){this.stop();const g=this._getTransformForUpdate();let v=!1,b=!1,C=!1;return"zoom"in r&&g.zoom!==+r.zoom&&(v=!0,g.zoom=+r.zoom),r.center!==void 0&&(g.center=d.N.convert(r.center)),"bearing"in r&&g.bearing!==+r.bearing&&(b=!0,g.bearing=+r.bearing),"pitch"in r&&g.pitch!==+r.pitch&&(C=!0,g.pitch=+r.pitch),r.padding==null||g.isPaddingEqual(r.padding)||(g.padding=r.padding),this._applyUpdatedTransform(g),this.fire(new d.k("movestart",c)).fire(new d.k("move",c)),v&&this.fire(new d.k("zoomstart",c)).fire(new d.k("zoom",c)).fire(new d.k("zoomend",c)),b&&this.fire(new d.k("rotatestart",c)).fire(new d.k("rotate",c)).fire(new d.k("rotateend",c)),C&&this.fire(new d.k("pitchstart",c)).fire(new d.k("pitch",c)).fire(new d.k("pitchend",c)),this.fire(new d.k("moveend",c))}calculateCameraOptionsFromTo(r,c,g,v=0){const b=d.Z.fromLngLat(r,c),C=d.Z.fromLngLat(g,v),P=C.x-b.x,z=C.y-b.y,$=C.z-b.z,G=Math.hypot(P,z,$);if(G===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(P,z),te=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),ue=180*Math.atan2(P,-z)/Math.PI;let fe=180*Math.acos(q/G)/Math.PI;return fe=$<0?90-fe:90+fe,{center:C.toLngLat(),zoom:te,pitch:fe,bearing:ue}}easeTo(r,c){var g;this._stop(!1,r.easeId),((r=d.e({offset:[0,0],duration:500,easing:d.b9},r)).animate===!1||!r.essential&&R.prefersReducedMotion)&&(r.duration=0);const v=this._getTransformForUpdate(),b=v.zoom,C=v.bearing,P=v.pitch,z=v.padding,$="bearing"in r?this._normalizeBearing(r.bearing,C):C,G="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:v.padding,te=d.P.convert(r.offset);let ue=v.centerPoint.add(te);const fe=v.pointLocation(ue),{center:ye,zoom:ke}=v.getConstrained(d.N.convert(r.center||fe),(g=r.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(ye,v);const Se=v.project(fe),Ce=v.project(ye).sub(Se),me=v.zoomScale(ke-b);let Pe,ze;r.around&&(Pe=d.N.convert(r.around),ze=v.locationPoint(Pe));const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ke!==b,this._rotating=this._rotating||C!==$,this._pitching=this._pitching||G!==P,this._padding=!v.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,Ue),this.terrain&&this._prepareElevation(ye),this._ease(nt=>{if(this._zooming&&(v.zoom=d.y.number(b,ke,nt)),this._rotating&&(v.bearing=d.y.number(C,$,nt)),this._pitching&&(v.pitch=d.y.number(P,G,nt)),this._padding&&(v.interpolatePadding(z,q,nt),ue=v.centerPoint.add(te)),this.terrain&&!r.freezeElevation&&this._updateElevation(nt),Pe)v.setLocationAtPoint(Pe,ze);else{const ht=v.zoomScale(v.zoom-b),bt=ke>b?Math.min(2,me):Math.max(.5,me),It=Math.pow(bt,1-nt),vt=v.unproject(Se.add(Ce.mult(nt*It)).mult(ht));v.setLocationAtPoint(v.renderWorldCopies?vt.wrap():vt,ue)}this._applyUpdatedTransform(v),this._fireMoveEvents(c)},nt=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,nt)},r),this}_prepareEase(r,c,g={}){this._moving=!0,c||g.moving||this.fire(new d.k("movestart",r)),this._zooming&&!g.zooming&&this.fire(new d.k("zoomstart",r)),this._rotating&&!g.rotating&&this.fire(new d.k("rotatestart",r)),this._pitching&&!g.pitching&&this.fire(new d.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(g-(c-(g*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=d.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const c=r.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(c.lngLat,r.zoom);if(c.altitude<g){const v=this.calculateCameraOptionsFromTo(c.lngLat,g,r.center,r.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(this.terrain&&c.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&c.push(v=>this.transformCameraUpdate(v)),!c.length)return;const g=r.clone();for(const v of c){const b=g.clone(),{center:C,zoom:P,pitch:z,bearing:$,elevation:G}=v(b);C&&(b.center=C),P!==void 0&&(b.zoom=P),z!==void 0&&(b.pitch=z),$!==void 0&&(b.bearing=$),G!==void 0&&(b.elevation=G),g.apply(b)}this.transform.apply(g)}_fireMoveEvents(r){this.fire(new d.k("move",r)),this._zooming&&this.fire(new d.k("zoom",r)),this._rotating&&this.fire(new d.k("rotate",r)),this._pitching&&this.fire(new d.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const g=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new d.k("zoomend",r)),v&&this.fire(new d.k("rotateend",r)),b&&this.fire(new d.k("pitchend",r)),this.fire(new d.k("moveend",r))}flyTo(r,c){var g;if(!r.essential&&R.prefersReducedMotion){const St=d.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(St,c)}this.stop(),r=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.b9},r);const v=this._getTransformForUpdate(),b=v.zoom,C=v.bearing,P=v.pitch,z=v.padding,$="bearing"in r?this._normalizeBearing(r.bearing,C):C,G="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:v.padding,te=d.P.convert(r.offset);let ue=v.centerPoint.add(te);const fe=v.pointLocation(ue),{center:ye,zoom:ke}=v.getConstrained(d.N.convert(r.center||fe),(g=r.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(ye,v);const Se=v.zoomScale(ke-b),Ce=v.project(fe),me=v.project(ye).sub(Ce);let Pe=r.curve;const ze=Math.max(v.width,v.height),Ue=ze/Se,nt=me.mag();if("minZoom"in r){const St=d.ac(Math.min(r.minZoom,b,ke),v.minZoom,v.maxZoom),en=ze/v.zoomScale(St-b);Pe=Math.sqrt(en/nt*2)}const ht=Pe*Pe;function bt(St){const en=(Ue*Ue-ze*ze+(St?-1:1)*ht*ht*nt*nt)/(2*(St?Ue:ze)*ht*nt);return Math.log(Math.sqrt(en*en+1)-en)}function It(St){return(Math.exp(St)-Math.exp(-St))/2}function vt(St){return(Math.exp(St)+Math.exp(-St))/2}const yt=bt(!1);let Nt=function(St){return vt(yt)/vt(yt+Pe*St)},nn=function(St){return ze*((vt(yt)*(It(en=yt+Pe*St)/vt(en))-It(yt))/ht)/nt;var en},_t=(bt(!0)-yt)/Pe;if(Math.abs(nt)<1e-6||!isFinite(_t)){if(Math.abs(ze-Ue)<1e-6)return this.easeTo(r,c);const St=Ue<ze?-1:1;_t=Math.abs(Math.log(Ue/ze))/Pe,nn=()=>0,Nt=en=>Math.exp(St*Pe*en)}return r.duration="duration"in r?+r.duration:1e3*_t/("screenSpeed"in r?+r.screenSpeed/Pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=C!==$,this._pitching=G!==P,this._padding=!v.isPaddingEqual(q),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ye),this._ease(St=>{const en=St*_t,gr=1/Nt(en);v.zoom=St===1?ke:b+v.scaleZoom(gr),this._rotating&&(v.bearing=d.y.number(C,$,St)),this._pitching&&(v.pitch=d.y.number(P,G,St)),this._padding&&(v.interpolatePadding(z,q,St),ue=v.centerPoint.add(te)),this.terrain&&!r.freezeElevation&&this._updateElevation(St);const hn=St===1?ye:v.unproject(Ce.add(me.mult(nn(en))).mult(gr));v.setLocationAtPoint(v.renderWorldCopies?hn.wrap():hn,ue),this._applyUpdatedTransform(v),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return r||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(r,c,g){g.animate===!1||g.duration===0?(r(1),c()):(this._easeStart=R.now(),this._easeOptions=g,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=d.b3(r,-180,180);const g=Math.abs(r-c);return Math.abs(r-360-c)<g&&(r-=360),Math.abs(r+360-c)<g&&(r+=360),r}_normalizeCenter(r,c){if(!c.renderWorldCopies||c.lngRange)return;const g=r.lng-c.center.lng;r.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(d.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Au={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ru{constructor(r=Au){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const g=this._map._getUIString(`AttributionControl.${c}`);r.title=g,r.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const b=c[v];if(b.used||b.usedForTerrain){const C=b.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(v=>String(v).trim()),r.sort((v,b)=>v.length-b.length),r=r.filter((v,b)=>{for(let C=b+1;C<r.length;C++)if(r[C].indexOf(v)>=0)return!1;return!0});const g=r.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,r.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Df{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const g=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const c=N.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class xn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(const v of g)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const g of c)if(!g.cancelled&&(g.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Of=d.Y([{name:"a_pos3d",type:"Int16",components:3}]);class f0 extends d.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const g={};for(const v of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))g[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),d.aP(v.posMatrix,0,d.X,0,d.X,0,1),this._tiles[v.key]=new eo(v,this.tileSize));for(const v in this._tiles)g[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const g=this._tiles[c];(!r||g.tileID.equals(r)||g.tileID.isChildOf(r)||r.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const g of this._renderableTilesKeys){const v=this._tiles[g].tileID;if(v.canonical.equals(r.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16),d.aP(b.posMatrix,0,d.X,0,d.X,0,1),c[g]=b}else if(v.canonical.isChildOf(r.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16);const C=v.canonical.z-r.canonical.z,P=v.canonical.x-(v.canonical.x>>C<<C),z=v.canonical.y-(v.canonical.y>>C<<C),$=d.X>>C;d.aP(b.posMatrix,0,$,0,$,0,1),d.J(b.posMatrix,b.posMatrix,[-P*$,-z*$,0]),c[g]=b}else if(r.canonical.isChildOf(v.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16);const C=r.canonical.z-v.canonical.z,P=r.canonical.x-(r.canonical.x>>C<<C),z=r.canonical.y-(r.canonical.y>>C<<C),$=d.X>>C;d.aP(b.posMatrix,0,d.X,0,d.X,0,1),d.J(b.posMatrix,b.posMatrix,[P*$,z*$,0]),d.K(b.posMatrix,b.posMatrix,[1/2**C,1/2**C,0]),c[g]=b}}return c}getSourceTile(r,c){const g=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>g.maxzoom&&(v=g.maxzoom),v<g.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!b||!b.dem)&&c)for(;v>=g.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(r.scaledTo(v--).key);return b}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class Ff{constructor(r,c,g){this.painter=r,this.sourceCache=new f0(c),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,g,v=d.X){var b;if(!(c>=0&&c<v&&g>=0&&g<v))return 0;const C=this.getTerrainData(r),P=(b=C.tile)===null||b===void 0?void 0:b.dem;if(!P)return 0;const z=function(fe,ye,ke){var Se=ye[0],Ce=ye[1];return fe[0]=ke[0]*Se+ke[4]*Ce+ke[12],fe[1]=ke[1]*Se+ke[5]*Ce+ke[13],fe}([],[c/v*d.X,g/v*d.X],C.u_terrain_matrix),$=[z[0]*P.dim,z[1]*P.dim],G=Math.floor($[0]),q=Math.floor($[1]),te=$[0]-G,ue=$[1]-q;return P.get(G,q)*(1-te)*(1-ue)+P.get(G+1,q)*te*(1-ue)+P.get(G,q+1)*(1-te)*ue+P.get(G+1,q+1)*te*ue}getElevationForLngLatZoom(r,c){if(!d.bb(c,r.wrap()))return 0;const{tileID:g,mercatorX:v,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(g,v%d.X,b%d.X,d.X)}getElevation(r,c,g,v=d.X){return this.getDEMElevation(r,c,g,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,b=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ze(v,b,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ze(v,new d.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.an([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Ze(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const g=c&&c+c.tileID.key+r.key;if(g&&!this._demMatrixCache[g]){const v=this.sourceCache.sourceCache._source.maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?b=r.canonical.z-v:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>b<<b),P=r.canonical.y-(r.canonical.y>>b<<b),z=d.bc(new Float64Array(16),[1/(d.X<<b),1/(d.X<<b),0]);d.J(z,z,[C*d.X,P*d.X,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,g=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ze(c.context,{width:g,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ze(c.context,{width:g,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(g,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,g,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,C=0;b<this._coordsTextureSize;b++)for(let P=0;P<this._coordsTextureSize;P++,C+=4)c[C+0]=255&P,c[C+1]=255&b,c[C+2]=P>>8<<4|b>>8,c[C+3]=0;const g=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new Ze(r,g,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),g=this.painter.context,v=g.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(b,P-C-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null);const z=c[0]+(c[2]>>4<<8),$=c[1]+((15&c[2])<<8),G=this.coordsIndex[255-c[3]],q=G&&this.sourceCache.getTileByID(G);if(!q)return null;const te=this._coordsTextureSize,ue=(1<<q.tileID.canonical.z)*te;return new d.Z((q.tileID.canonical.x*te+z)/ue+q.tileID.wrap,(q.tileID.canonical.y*te+$)/ue,this.getElevation(q.tileID,z,$,te))}depthAtPoint(r){const c=new Uint8Array(4),g=this.painter.context,v=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new d.bd,g=new d.aY,v=this.meshSize,b=d.X/v,C=v*v;for(let q=0;q<=v;q++)for(let te=0;te<=v;te++)c.emplaceBack(te*b,q*b,0);for(let q=0;q<C;q+=v+1)for(let te=0;te<v;te++)g.emplaceBack(te+q,v+te+q+1,v+te+q+2),g.emplaceBack(te+q,v+te+q+2,te+q+1);const P=c.length,z=P+2*(v+1);for(const q of[0,1])for(let te=0;te<=v;te++)for(const ue of[0,1])c.emplaceBack(te*b,q*d.X,ue);for(let q=0;q<2*v;q+=2)g.emplaceBack(z+q,z+q+1,z+q+3),g.emplaceBack(z+q,z+q+3,z+q+2),g.emplaceBack(P+q,P+q+3,P+q+1),g.emplaceBack(P+q,P+q+2,P+q+3);const $=c.length,G=$+2*(v+1);for(const q of[0,1])for(let te=0;te<=v;te++)for(const ue of[0,1])c.emplaceBack(q*d.X,te*b,ue);for(let q=0;q<2*v;q+=2)g.emplaceBack($+q,$+q+1,$+q+3),g.emplaceBack($+q,$+q+3,$+q+2),g.emplaceBack(G+q,G+q+3,G+q+1),g.emplaceBack(G+q,G+q+2,G+q+3);return this._mesh=new f(r.createVertexBuffer(c,Of.members),r.createIndexBuffer(g),d.a0.simpleSegment(0,0,c.length,g.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*d.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var g;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(g=this.getMinMaxElevation(v).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,g={minElevation:null,maxElevation:null};return c&&c.dem&&(g.minElevation=c.dem.min*this.exaggeration,g.maxElevation=c.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(r,c){const g=d.Z.fromLngLat(r.wrap()),v=(1<<c)*d.X,b=g.x*v,C=g.y*v,P=Math.floor(b/d.X),z=Math.floor(C/d.X);return{tileID:new d.S(c,0,c,P,z),mercatorX:b,mercatorY:C}}}class p0{constructor(r,c,g){this._context=r,this._size=c,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new Ze(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(g.texture),{id:r,fbo:c,texture:g,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Nu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Fm{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new p0(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(g=>!r._layers[g].isHidden(c)),this._coordsDescendingInv={};for(const g in r.sourceCaches){this._coordsDescendingInv[g]={};const v=r.sourceCaches[g].getVisibleCoordinates();for(const b of v){const C=this.terrain.sourceCache.getTerrainCoords(b);for(const P in C)this._coordsDescendingInv[g][P]||(this._coordsDescendingInv[g][P]=[]),this._coordsDescendingInv[g][P].push(C[P])}}this._coordsDescendingInvStr={};for(const g of r._order){const v=r._layers[g],b=v.source;if(Nu[v.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const C in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][C]=this._coordsDescendingInv[b][C].map(P=>P.key).sort().join()}}for(const g of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[v][g.tileID.key];b&&b!==g.rttCoords[v]&&(g.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,g=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Nu[c]&&(this._prevType&&Nu[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!v))return!0;if(Nu[this._prevType]||Nu[c]&&v){this._prevType=c;const b=this._stacks.length-1,C=this._stacks[b]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(h(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[b]){const $=this.pool.getObjectForId(P.rtt[b].id);if($.stamp===P.rtt[b].stamp){this.pool.useObject($);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),P.rtt[b]={id:z.id,stamp:z.stamp},g.context.bindFramebuffer.set(z.fbo.framebuffer),g.context.clear({color:d.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let $=0;$<C.length;$++){const G=g.style._layers[C[$]],q=G.source?this._coordsDescendingInv[G.source][P.tileID.key]:[P.tileID];g.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),g._renderTileClippingMasks(G,q),g.renderLayer(g,g.style.sourceCaches[G.source],G,q),G.source&&(P.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][P.tileID.key])}}return h(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Nu[c]}return!1}}const Bf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bm=M,m0={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Au,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},$f=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},g0={showCompass:!0,showZoom:!0,visualizePitch:!1};class y0{constructor(r,c,g=!1){this.mousedown=C=>{this.startMouse(d.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),N.mousePos(this.element,C)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,N.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=r.dragRotate._mouseRotate.getClickTolerance(),b=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Tf({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:P,bearingDegreesPerPixelMoved:z=.8})=>{const $=new If;return new Go({clickTolerance:P,move:(G,q)=>({bearingDelta:(q.x-G.x)*z}),moveStateManager:$,enable:C,assignEvents:$f})})({clickTolerance:v,enable:!0}),this.map=r,g&&(this.mousePitch=Cf({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:P,pitchDegreesPerPixelMoved:z=-.5})=>{const $=new If;return new Go({clickTolerance:P,move:(G,q)=>({pitchDelta:(q.y-G.y)*z}),moveStateManager:$,enable:C,assignEvents:$f})})({clickTolerance:b,enable:!0})),N.addEventListener(c,"mousedown",this.mousedown),N.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),N.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),N.disableDrag()}moveMouse(r,c){const g=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(r,c)||{};if(v&&g.setBearing(g.getBearing()+v),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(r,c)||{};b&&g.setPitch(g.getPitch()+b)}}moveTouch(r,c){const g=this.map,{bearingDelta:v}=this.touchRotate.dragMove(r,c)||{};if(v&&g.setBearing(g.getBearing()+v),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(r,c)||{};b&&g.setPitch(g.getPitch()+b)}}off(){const r=this.element;N.removeEventListener(r,"mousedown",this.mousedown),N.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let qo;function mr(w,r,c){const g=new d.N(w.lng,w.lat);if(w=new d.N(w.lng,w.lat),r){const v=new d.N(w.lng-360,w.lat),b=new d.N(w.lng+360,w.lat),C=c.locationPoint(w).distSqr(r);c.locationPoint(v).distSqr(r)<C?w=v:c.locationPoint(b).distSqr(r)<C&&(w=b)}for(;Math.abs(w.lng-c.center.lng)>180;){const v=c.locationPoint(w);if(v.x>=0&&v.y>=0&&v.x<=c.width&&v.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==g.lng&&c.locationPoint(w).y>c.height/2-c.getHorizon()?w:g}const zu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Vh(w,r,c){const g=w.classList;for(const v in zu)g.remove(`maplibregl-${c}-anchor-${v}`);g.add(`maplibregl-${c}-anchor-${r}`)}class Gh extends d.E{constructor(r){if(super(),this._onKeyPress=c=>{const g=c.code,v=c.charCode||c.keyCode;g!=="Space"&&g!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const g=c.originalEvent.target,v=this._element;this._popup&&(g===v||v.contains(g))&&this.togglePopup()},this._update=c=>{var g;if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?mr(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${zu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${b}`),R.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=d.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const c=N.createNS("http://www.w3.org/2000/svg","svg"),g=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${g}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${g}`);const b=N.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const C=N.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const P=N.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Se of z){const Ce=N.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",Se.rx),Ce.setAttributeNS(null,"ry",Se.ry),P.appendChild(Ce)}const $=N.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const G=N.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(G);const q=N.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const te=N.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(te);const ue=N.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const fe=N.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=N.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const ke=N.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),fe.appendChild(ye),fe.appendChild(ke),C.appendChild(P),C.appendChild($),C.appendChild(q),C.appendChild(ue),C.appendChild(fe),c.appendChild(C),c.setAttributeNS(null,"height",g*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=d.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Vh(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=d.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,g;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,b=v.terrain.depthAtPoint(this._pos),C=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,C)-b<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/v.transform._pixelPerMeter,z=Math.sin(v.getPitch()*Math.PI/180)*P,$=v.terrain.depthAtPoint(new d.P(this._pos.x,this._pos.y-this._offset.y)),G=v.transform.lngLatToCameraDepth(this._lngLat,C+z)-$>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=d.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return r===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const $m={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let qc=0,Hc=!1;const Ks={maxWidth:100,unit:"metric"};function Wc(w,r,c){const g=c&&c.maxWidth||100,v=w._container.clientHeight/2,b=w.unproject([0,v]),C=w.unproject([g,v]),P=b.distanceTo(C);if(c&&c.unit==="imperial"){const z=3.2808*P;z>5280?Rt(r,g,z/5280,w._getUIString("ScaleControl.Miles")):Rt(r,g,z,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Rt(r,g,P/1852,w._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Rt(r,g,P/1e3,w._getUIString("ScaleControl.Kilometers")):Rt(r,g,P,w._getUIString("ScaleControl.Meters"))}function Rt(w,r,c,g){const v=function(b){const C=Math.pow(10,`${Math.floor(b)}`.length-1);let P=b/C;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(z){const $=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*$)/$}(P),C*P}(c);w.style.width=r*(v/c)+"px",w.innerHTML=`${v}&nbsp;${g}`}const Xt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},qh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hh(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,w),"top-left":new d.P(r,r),"top-right":new d.P(-r,r),bottom:new d.P(0,-w),"bottom-left":new d.P(r,-r),"bottom-right":new d.P(-r,-r),left:new d.P(w,0),right:new d.P(-w,0)}}if(w instanceof d.P||Array.isArray(w)){const r=d.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:d.P.convert(w.center||[0,0]),top:d.P.convert(w.top||[0,0]),"top-left":d.P.convert(w["top-left"]||[0,0]),"top-right":d.P.convert(w["top-right"]||[0,0]),bottom:d.P.convert(w.bottom||[0,0]),"bottom-left":d.P.convert(w["bottom-left"]||[0,0]),"bottom-right":d.P.convert(w["bottom-right"]||[0,0]),left:d.P.convert(w.left||[0,0]),right:d.P.convert(w.right||[0,0])}}return Hh(new d.P(0,0))}const Uf=M;y.AJAXError=d.bh,y.Evented=d.E,y.LngLat=d.N,y.MercatorCoordinate=d.Z,y.Point=d.P,y.addProtocol=d.bi,y.config=d.a,y.removeProtocol=d.bj,y.AttributionControl=Ru,y.BoxZoomHandler=di,y.CanvasSource=dr,y.CooperativeGesturesHandler=Pu,y.DoubleClickZoomHandler=Wl,y.DragPanHandler=zm,y.DragRotateHandler=Dm,y.EdgeInsets=U,y.FullscreenControl=class extends d.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},y.GeoJSONSource=li,y.GeolocateControl=class extends d.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new d.N(r.coords.longitude,r.coords.latitude),g=r.coords.accuracy,v=this._map.getBearing(),b=d.e({bearing:v},this.options.fitBoundsOptions),C=Ve.fromLngLat(c,g);this._map.fitBounds(C,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new d.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Hc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Gh({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")),this.fire(new d.k("userlocationlostfocus")))})}},this.options=d.e({},$m,w)}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return d._(this,arguments,void 0,function*(r=!1){if(qo!==void 0&&!r)return qo;if(window.navigator.permissions===void 0)return qo=!!window.navigator.geolocation,qo;try{qo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{qo=!!window.navigator.geolocation}return qo})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,qc=0,Hc=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),r=w.getSouthEast(),c=w.getNorthEast(),g=r.distanceTo(c),v=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qc--,Hc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart")),this.fire(new d.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qc++,qc>1?(w={maximumAge:6e5,timeout:0},Hc=!0):(w=this.options.positionOptions,Hc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},y.Hash=Re,y.ImageSource=vi,y.KeyboardHandler=os,y.LngLatBounds=Ve,y.LogoControl=Df,y.Map=class extends Om{constructor(w){d.bf.mark(d.bg.create);const r=Object.assign(Object.assign({},m0),w);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new le(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new xn,this._controls=[],this._mapId=d.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new d.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Bf),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Q.addThrottleControl(()=>this.isMoving()),this._requestManager=new ie(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const g=Ee(v=>{this._trackResize&&!this._removed&&(this.resize(v),this.redraw())},50);this._resizeObserver=new ResizeObserver(v=>{c?g(v):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new zf(this,r),this._hash=r.hash&&new Re(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,d.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new Ru(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Df,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new d.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new d.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new d.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const g=this._controlPositions[r];return r.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,r,c,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,r,c,g)}resize(w){var r;const c=this._containerDimensions(),g=c[0],v=c[1],b=this._getClampedPixelRatio(g,v);if(this._resizeCanvas(g,v,b),this.painter.resize(g,v,b),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const z=this._getClampedPixelRatio(g,v);this._resizeCanvas(g,v,z),this.painter.resize(g,v,z)}this.transform.resize(g,v),(r=this._requestedCameraState)===null||r===void 0||r.resize(g,v);const C=!this._moving;return C&&(this.stop(),this.fire(new d.k("movestart",w)).fire(new d.k("move",w))),this.fire(new d.k("resize",w)),C&&this.fire(new d.k("moveend",w)),this}_getClampedPixelRatio(w,r){const{0:c,1:g}=this._maxCanvasSize,v=this.getPixelRatio(),b=w*v,C=r*v;return Math.min(b>c?c/b:1,C>g?g/C:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Ve.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}project(w){return this.transform.locationPoint(d.N.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(d.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const C=r.filter(z=>this.getLayer(z)),P=C.length!==0?this.queryRenderedFeatures(b.point,{layers:C}):[];P.length?g||(g=!0,c.call(this,new zn(w,this,b.originalEvent,{features:P}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layers:r,listener:c,delegates:{mousemove:C=>{const P=r.filter(z=>this.getLayer(z));(P.length!==0?this.queryRenderedFeatures(C.point,{layers:P}):[]).length?g=!0:g&&(g=!1,c.call(this,new zn(w,this,C.originalEvent)))},mouseout:C=>{g&&(g=!1,c.call(this,new zn(w,this,C.originalEvent)))}}}}{const g=v=>{const b=r.filter(P=>this.getLayer(P)),C=b.length!==0?this.queryRenderedFeatures(v.point,{layers:b}):[];C.length&&(v.features=C,c.call(this,v),delete v.features)};return{layers:r,listener:c,delegates:{[w]:g}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const g=this._delegatedListeners[w];for(let v=0;v<g.length;v++){const b=g[v];if(b.listener===c&&b.layers.length===r.length&&b.layers.every(C=>r.includes(C))){for(const C in b.delegates)this.off(C,b.delegates[C]);return void g.splice(v,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const g=this._createDelegatedListener(w,typeof r=="string"?[r]:r,c);this._saveDelegatedListener(w,g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(w,r,c){if(c===void 0)return super.once(w,r);const g=typeof r=="string"?[r]:r,v=this._createDelegatedListener(w,g,c);for(const b in v.delegates){const C=v.delegates[b];v.delegates[b]=(...P)=>{this._removeDelegatedListener(w,g,c),C(...P)}}this._saveDelegatedListener(w,v);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const g=w instanceof d.P||Array.isArray(w),v=g?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(g?{}:w)||{},v instanceof d.P||typeof v[0]=="number")c=[d.P.convert(v)];else{const b=d.P.convert(v[0]),C=d.P.convert(v[1]);c=[b,new d.P(C.x,b.y),C,new d.P(b.x,C.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Nl(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,c):this.style.loadJSON(w,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Nl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");d.h(c,new AbortController).then(g=>{this._updateDiff(g.data,r)}).catch(g=>{g&&this.fire(new d.j(g))})}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){d.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.sourceCaches[w];if(r!==void 0)return r.loaded();this.fire(new d.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.sourceCaches[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const g=this.style._layers[c];g.type==="hillshade"&&g.source===w.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ff(this.painter,r,w),this.painter.renderToTexture=new Fm(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const r in w){const c=w[r]._tiles;for(const g in c){const v=c[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,r,c={}){const{pixelRatio:g=1,sdf:v=!1,stretchX:b,stretchY:C,content:P,textFitWidth:z,textFitHeight:$}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||d.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:q,data:te}=r,ue=r;return this.style.addImage(w,{data:new d.R({width:G,height:q},new Uint8Array(te)),pixelRatio:g,stretchX:b,stretchY:C,content:P,textFitWidth:z,textFitHeight:$,sdf:v,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,w),this}}{const{width:G,height:q,data:te}=R.getImageData(r);this.style.addImage(w,{data:new d.R({width:G,height:q},te),pixelRatio:g,stretchX:b,stretchY:C,content:P,textFitWidth:z,textFitHeight:$,sdf:v,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=r instanceof HTMLImageElement||d.b(r)?R.getImageData(r):r,{width:v,height:b,data:C}=g;if(v===void 0||b===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||b!==c.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(r instanceof HTMLImageElement||d.b(r));return c.data.replace(C,P),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Q.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,g={}){return this.style.setPaintProperty(w,r,c,g),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,g={}){return this.style.setLayoutProperty(w,r,c,g),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,g=>{g||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,c=>{c||this._update(!0)}),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w){return this._lazyInitEmptyStyle(),this.style.setSky(w),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=N.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),g=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],g);const v=this._controlContainer=N.create("div","maplibregl-control-container",w),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=N.create("div",`maplibregl-ctrl-${C} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{r={requestedAttributes:w},g&&(r.statusMessage=g.statusMessage,r.type=g.type)},{once:!0});const c=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!c){const g="Failed to initialize WebGL";throw r?(r.message=g,new Error(JSON.stringify(r))):new Error(g)}this.painter=new x(c,this.transform),V.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,b=R.now();this.style.zoomHistory.update(v,b);const C=new d.z(v,{now:b,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=C.crossFadingFactor();P===1&&P===this._crossFadingFactor||(c=!0,this._crossFadingFactor=P),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bf.mark(d.bg.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,d.bf.mark(d.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),d.bf.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(w=>{d.bf.frame(w),this._frameRequest=null,this._render(w)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Bm}getCameraTargetElevation(){return this.transform.elevation}},y.MapMouseEvent=zn,y.MapTouchEvent=Zr,y.MapWheelEvent=bo,y.Marker=Gh,y.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),g=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const g=this._map._getUIString(`NavigationControl.${c}`);r.title=g,r.setAttribute("aria-label",g)},this.options=d.e({},g0,w),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new y0(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=N.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},y.Popup=class extends d.E{constructor(w){super(),this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new d.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?mr(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!r)return;const g=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let v=this.options.anchor;const b=Hh(this.options.offset);if(!v){const P=this._container.offsetWidth,z=this._container.offsetHeight;let $;$=g.y+b.bottom.y<z?["top"]:g.y>this._map.transform.height-z?["bottom"]:[],g.x<P/2?$.push("left"):g.x>this._map.transform.width-P/2&&$.push("right"),v=$.length===0?"bottom":$.join("-")}let C=g.add(b[v]);this.options.subpixelPositioning||(C=C.round()),N.setTransform(this._container,`${zu[v]} translate(${C.x}px,${C.y}px)`),Vh(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(Xt),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=d.N.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let g;for(c.innerHTML=w;g=c.firstChild,g;)r.appendChild(g);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(qh);w&&w.focus()}},y.RasterDEMTileSource=En,y.RasterTileSource=Xe,y.ScaleControl=class{constructor(w){this._onMove=()=>{Wc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Wc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ks),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},y.ScrollZoomHandler=ws,y.Style=Nl,y.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},y.TwoFingersTouchPitchHandler=Lu,y.TwoFingersTouchRotateHandler=Af,y.TwoFingersTouchZoomHandler=Lf,y.TwoFingersTouchZoomRotateHandler=Nf,y.VectorTileSource=Ln,y.VideoSource=Wt,y.addSourceType=(w,r)=>d._(void 0,void 0,void 0,function*(){if(Qi(w))throw new Error(`A source type called "${w}" already exists.`);((c,g)=>{qr[c]=g})(w,r)}),y.clearPrewarmedResources=function(){const w=nr;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ct),nr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},y.getMaxParallelImageRequests=function(){return d.a.MAX_PARALLEL_IMAGE_REQUESTS},y.getRTLTextPluginStatus=function(){return jt().getRTLTextPluginStatus()},y.getVersion=function(){return Uf},y.getWorkerCount=function(){return yn.workerCount},y.getWorkerUrl=function(){return d.a.WORKER_URL},y.importScriptInWorkers=function(w){return Dt().broadcast("IS",w)},y.prewarm=function(){hr().acquire(Ct)},y.setMaxParallelImageRequests=function(w){d.a.MAX_PARALLEL_IMAGE_REQUESTS=w},y.setRTLTextPlugin=function(w,r){return jt().setRTLTextPlugin(w,r)},y.setWorkerCount=function(w){yn.workerCount=w},y.setWorkerUrl=function(w){d.a.WORKER_URL=w}});var m=n;return m})})(WC);var sN=WC.exports;const Ht=tv(sN);var oa,Or,si,rc,_m,ic,Hn,q1,za,XC,H1,W1,Z1,YC,X1;class aN extends Map{constructor(n={}){super();Zu(this,Hn);Zu(this,oa,0);Zu(this,Or,new Map);Zu(this,si,new Map);Zu(this,rc);Zu(this,_m);Zu(this,ic);if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof n.maxAge=="number"&&n.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");Co(this,rc,n.maxSize),Co(this,_m,n.maxAge||Number.POSITIVE_INFINITY),Co(this,ic,n.onEviction)}get __oldCache(){return cn(this,si)}get(n){if(cn(this,Or).has(n)){const o=cn(this,Or).get(n);return Yr(this,Hn,H1).call(this,n,o)}if(cn(this,si).has(n)){const o=cn(this,si).get(n);if(Yr(this,Hn,za).call(this,n,o)===!1)return Yr(this,Hn,YC).call(this,n,o),o.value}}set(n,o,{maxAge:u=cn(this,_m)}={}){const m=typeof u=="number"&&u!==Number.POSITIVE_INFINITY?Date.now()+u:void 0;return cn(this,Or).has(n)?cn(this,Or).set(n,{value:o,expiry:m}):Yr(this,Hn,Z1).call(this,n,{value:o,expiry:m}),this}has(n){return cn(this,Or).has(n)?!Yr(this,Hn,za).call(this,n,cn(this,Or).get(n)):cn(this,si).has(n)?!Yr(this,Hn,za).call(this,n,cn(this,si).get(n)):!1}peek(n){if(cn(this,Or).has(n))return Yr(this,Hn,W1).call(this,n,cn(this,Or));if(cn(this,si).has(n))return Yr(this,Hn,W1).call(this,n,cn(this,si))}delete(n){const o=cn(this,Or).delete(n);return o&&l_(this,oa)._--,cn(this,si).delete(n)||o}clear(){cn(this,Or).clear(),cn(this,si).clear(),Co(this,oa,0)}resize(n){if(!(n&&n>0))throw new TypeError("`maxSize` must be a number greater than 0");const o=[...Yr(this,Hn,X1).call(this)],u=o.length-n;u<0?(Co(this,Or,new Map(o)),Co(this,si,new Map),Co(this,oa,o.length)):(u>0&&Yr(this,Hn,q1).call(this,o.slice(0,u)),Co(this,si,new Map(o.slice(u))),Co(this,Or,new Map),Co(this,oa,0)),Co(this,rc,n)}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of cn(this,Or)){const[o,u]=n;Yr(this,Hn,za).call(this,o,u)===!1&&(yield[o,u.value])}for(const n of cn(this,si)){const[o,u]=n;cn(this,Or).has(o)||Yr(this,Hn,za).call(this,o,u)===!1&&(yield[o,u.value])}}*entriesDescending(){let n=[...cn(this,Or)];for(let o=n.length-1;o>=0;--o){const u=n[o],[m,y]=u;Yr(this,Hn,za).call(this,m,y)===!1&&(yield[m,y.value])}n=[...cn(this,si)];for(let o=n.length-1;o>=0;--o){const u=n[o],[m,y]=u;cn(this,Or).has(m)||Yr(this,Hn,za).call(this,m,y)===!1&&(yield[m,y.value])}}*entriesAscending(){for(const[n,o]of Yr(this,Hn,X1).call(this))yield[n,o.value]}get size(){if(!cn(this,oa))return cn(this,si).size;let n=0;for(const o of cn(this,si).keys())cn(this,Or).has(o)||n++;return Math.min(cn(this,oa)+n,cn(this,rc))}get maxSize(){return cn(this,rc)}entries(){return this.entriesAscending()}forEach(n,o=this){for(const[u,m]of this.entriesAscending())n.call(o,m,u,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}oa=new WeakMap,Or=new WeakMap,si=new WeakMap,rc=new WeakMap,_m=new WeakMap,ic=new WeakMap,Hn=new WeakSet,q1=function(n){if(typeof cn(this,ic)=="function")for(const[o,u]of n)cn(this,ic).call(this,o,u.value)},za=function(n,o){return typeof o.expiry=="number"&&o.expiry<=Date.now()?(typeof cn(this,ic)=="function"&&cn(this,ic).call(this,n,o.value),this.delete(n)):!1},XC=function(n,o){if(Yr(this,Hn,za).call(this,n,o)===!1)return o.value},H1=function(n,o){return o.expiry?Yr(this,Hn,XC).call(this,n,o):o.value},W1=function(n,o){const u=o.get(n);return Yr(this,Hn,H1).call(this,n,u)},Z1=function(n,o){cn(this,Or).set(n,o),l_(this,oa)._++,cn(this,oa)>=cn(this,rc)&&(Co(this,oa,0),Yr(this,Hn,q1).call(this,cn(this,si)),Co(this,si,cn(this,Or)),Co(this,Or,new Map))},YC=function(n,o){cn(this,si).delete(n),Yr(this,Hn,Z1).call(this,n,o)},X1=function*(){for(const n of cn(this,si)){const[o,u]=n;cn(this,Or).has(o)||Yr(this,Hn,za).call(this,o,u)===!1&&(yield n)}for(const n of cn(this,Or)){const[o,u]=n;Yr(this,Hn,za).call(this,o,u)===!1&&(yield n)}};function lN(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class uN{constructor(){this._apiKey="",this._fetch=lN(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Oi=new uN,Tl={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!1},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!1},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!1},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!1},WELSH:{code:"cy",flag:"name:cy",name:"WELSH",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!1},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!1},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!1},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!1},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!1},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!1},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!1},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!1},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!1},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!1},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!1}};function KC(e,t=Tl){return e in t?e[e]:null}function Sh(e,t=Tl){for(const n of Object.values(t))if(n.code===e)return n;return null}function sm(e,t=Tl){for(const n of Object.values(t))if(n.flag===e)return n;return null}function Y1(){if(typeof navigator>"u"){const t=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Sh(t)??Tl.ENGLISH}return Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).map(t=>Sh(t)).filter(t=>t)[0]??Tl.ENGLISH}function Lb(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function By(e,t=Tl){return Lb(e)?sm(e.flag,t):typeof e!="string"?null:KC(e,t)||Sh(e,t)||sm(e,t)||null}function cN(e,t,n=Tl){const o=By(e,n),u=By(t,n);return o&&u&&o.flag===u.flag}async function qa(e,t={}){if(Oi.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Oi.fetch(e,t)}const Us={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(Us);class xa extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const vv={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function JC(e,t){const{language:n}=t;if(n===void 0)return;const o=(Array.isArray(n)?n:[n]).map(m=>hN(m)).filter(m=>m),u=Array.from(new Set(o)).join(",");e.set("language",u)}function hN(e){let t=null;return e===Tl.AUTO.flag?t=Y1():typeof e=="string"?t=Sh(e):Lb(e)&&(t=e.flag===Tl.AUTO.flag?Y1():sm(e.flag)),t&&t.geocoding?t.code:null}function QC(e,t){const{apiKey:n,limit:o,types:u,excludeTypes:m}=t;e.set("key",n??Oi.apiKey),o!==void 0&&e.set("limit",String(o)),u!==void 0&&e.set("types",u.join(",")),m!==void 0&&e.set("excludeTypes",String(m)),JC(e,t)}function eM(e,t){QC(e,t);const{bbox:n,proximity:o,country:u,fuzzyMatch:m,autocomplete:y}=t;n!==void 0&&e.set("bbox",n.join(",")),o!==void 0&&e.set("proximity",o==="ip"?o:o.join(",")),u!==void 0&&e.set("country",u.join(",")),m!==void 0&&e.set("fuzzyMatch",m?"true":"false"),y!==void 0&&e.set("autocomplete",y?"true":"false")}async function dN(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`geocoding/${encodeURIComponent(e)}.json`,Us.maptilerApiURL),{searchParams:o}=n;eM(o,t);const u=n.toString(),m=await qa(u);if(!m.ok)throw new xa(m,vv[m.status]??"");return await m.json()}async function fN(e,t={}){if(!Array.isArray(e)||e.length<2)throw new Error("The position must be an array of form [lng, lat].");const n=new URL(`geocoding/${e[0]},${e[1]}.json`,Us.maptilerApiURL);QC(n.searchParams,t);const o=n.toString(),u=await qa(o);if(!u.ok)throw new xa(u,vv[u.status]??"");return await u.json()}async function pN(e,t={}){const n=new URL(`geocoding/${e}.json`,Us.maptilerApiURL);n.searchParams.set("key",t.apiKey??Oi.apiKey),JC(n.searchParams,t);const o=n.toString(),u=await qa(o);if(!u.ok)throw new xa(u,vv[u.status]??"");return await u.json()}async function mN(e,t={}){if(!e.length)return[];const n=e.map(M=>encodeURIComponent(M)).join(";"),o=new URL(`geocoding/${n}.json`,Us.maptilerApiURL),{searchParams:u}=o;eM(u,t);const m=o.toString(),y=await qa(m);if(!y.ok)throw new xa(y,vv[y.status]??"");const d=await y.json();return e.length===1?[d]:d}const gN={forward:dN,reverse:fN,byId:pN,batch:mN},xS={403:"Key is missing, invalid or restricted"};async function yN(e={}){const t=new URL("geolocation/ip.json",Us.maptilerApiURL);t.searchParams.set("key",e.apiKey??Oi.apiKey);const n=t.toString(),o=await qa(n);if(!o.ok)throw new xa(o,o.status in xS?xS[o.status]:"");return await o.json()}const K1={info:yN},$y={403:"Key is missing, invalid or restricted"};async function vN(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`coordinates/search/${e}.json`,Us.maptilerApiURL);n.searchParams.set("key",t.apiKey??Oi.apiKey),"limit"in t&&n.searchParams.set("limit",t.limit.toString()),"transformations"in t&&n.searchParams.set("transformations",t.transformations.toString()),"exports"in t&&n.searchParams.set("exports",t.exports.toString());const o=n.toString(),u=await qa(o);if(!u.ok)throw new xa(u,u.status in $y?$y[u.status]:"");return await u.json()}async function _N(e,t={}){const n=(Array.isArray(e[0])?e:[e]).map(d=>`${d[0]},${d[1]}`).join(";"),o=new URL(`coordinates/transform/${n}.json`,Us.maptilerApiURL);o.searchParams.set("key",t.apiKey??Oi.apiKey),"sourceCrs"in t&&o.searchParams.set("s_srs",t.sourceCrs.toString()),"targetCrs"in t&&o.searchParams.set("t_srs",t.targetCrs.toString()),"operations"in t&&o.searchParams.set("ops",(Array.isArray(t.operations)?t.operations:[t.operations]).join("|"));const u=o.toString(),m=await qa(u);if(!m.ok)throw new xa(m,m.status in $y?$y[m.status]:"");return await m.json()}const xN={search:vN,transform:_N},bS={403:"Key is missing, invalid or restricted"};async function bN(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The data ID must be a non-empty string");const n=new URL(`data/${encodeURIComponent(e)}/features.json`,Us.maptilerApiURL);n.searchParams.set("key",t.apiKey??Oi.apiKey);const o=n.toString(),u=await qa(o);if(!u.ok)throw new xa(u,u.status in bS?bS[u.status]:"");return await u.json()}const wN={get:bN};function Pb(e){const t=/^maptiler:\/\/(.*)/;let n;const o=e.trim();let u;return o.startsWith("http://")||o.startsWith("https://")?u=o:(n=t.exec(o))!==null?u=`https://api.maptiler.com/maps/${n[1]}/style.json`:u=`https://api.maptiler.com/maps/${o}/style.json`,u}class _v{constructor(t,n,o,u,m,y){this.name=t,this.variantType=n,this.id=o,this.referenceStyle=u,this.description=m,this.imageURL=y}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return Pb(this.getId())}}class xv{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const am=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function kN(e){return new Proxy(e,{get(t,n,o){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,o)}})}function SN(){const e={};for(let t=0;t<am.length;t+=1){const n=am[t],o=kN(new xv(n.name,n.referenceStyleID));for(let u=0;u<n.variants.length;u+=1){const m=n.variants[u],y=new _v(m.name,m.variantType,m.id,o,m.description,m.imageURL);o.addVariant(y)}e[n.referenceStyleID]=o}return e}function bv(e){if(!e)return wv[am[0].referenceStyleID].getDefaultVariant().getId();if(typeof e=="string"||e instanceof String)return e.trim().toLowerCase();if(e instanceof _v)return e.getId();if(e instanceof xv)return e.getDefaultVariant().getId()}const wv=SN();function EN(e){const t=[];function n(m){(m.type==="LineString"||m.type==="MultiLineString")&&t.push(m)}function o(m){m.geometry&&n(m.geometry)}function u(m){for(const y of m.features)y.type==="Feature"?o(y):y.type==="FeatureCollection"&&u(y)}return e.type==="Feature"?o(e):e.type==="FeatureCollection"?u(e):n(e),t}function IN(e,t,n){let o=t[0],u=t[1],m=n[0]-o,y=n[1]-u;if(m!==0||y!==0){const d=((e[0]-o)*m+(e[1]-u)*y)/(m*m+y*y);d>1?(o=n[0],u=n[1]):d>0&&(o+=m*d,u+=y*d)}return m=e[0]-o,y=e[1]-u,m*m+y*y}function J1(e,t,n,o,u){let m=o,y;for(let d=t+1;d<n;d++){const M=IN(e[d],e[t],e[n]);M>m&&(y=d,m=M)}m>o&&(y-t>1&&J1(e,t,y,o,u),u.push(e[y]),n-y>1&&J1(e,y,n,o,u))}function TN(e,t){const n=e.length-1,o=[e[0]];return J1(e,0,n,t,o),o.push(e[n]),o}function CN(e,t){if(e.length<=2)return e;const n=t!==void 0?t*t:1;return TN(e,n)}const tM={extractLineStrings:EN,simplify:CN};function Ab(e,t=!0){let n=`${e[0]},${e[1]}`;return e.length===3&&t&&(n+=`,${e[2]}`),n}function Rb(e,t=3e3){let n=e.map(m=>m.join(",")).join("|"),o=5e-6;const u=1e-5;for(;n.length>t;)n=tM.simplify(e,o).map(y=>`${y[0]},${y[1]}`).join("|"),o+=u;return n}function MN(e,t,n={}){const o=bv(n.style),u=n.hiDPI?"@2x":"",m=n.format??"png";let y=~~(n.width??1024),d=~~(n.height??1024);n.hiDPI&&(y=~~(y/2),d=~~(d/2));const M=new URL(`maps/${encodeURIComponent(o)}/static/${e[0]},${e[1]},${t}/${y}x${d}${u}.${m}`,Us.maptilerApiURL);if("attribution"in n&&M.searchParams.set("attribution",n.attribution.toString()),"markers"in n){let A="";const O="markerIcon"in n;O&&(A+=`icon:${n.markerIcon}|`),O&&"markerAnchor"in n&&(A+=`anchor:${n.markerAnchor}|`),O&&n.hiDPI&&(A+="scale:2|");const R=Array.isArray(n.markers[0])?n.markers:[n.markers];A+=R.map(N=>Ab(N,!O)).join("|"),M.searchParams.set("markers",A)}if("path"in n){let A="";if(A+=`fill:${n.pathFillColor??"none"}|`,"pathStrokeColor"in n&&(A+=`stroke:${n.pathStrokeColor}|`),"pathWidth"in n){const O=n.pathWidth/(n.hiDPI?2:1);A+=`width:${O.toString()}|`}A+=Rb(n.path),M.searchParams.set("path",A)}return M.searchParams.set("key",n.apiKey??Oi.apiKey),M.toString()}function LN(e,t={}){const n=bv(t.style),o=t.hiDPI?"@2x":"",u=t.format??"png";let m=~~(t.width??1024),y=~~(t.height??1024);t.hiDPI&&(m=~~(m/2),y=~~(y/2));const d=new URL(`maps/${encodeURIComponent(n)}/static/${e[0]},${e[1]},${e[2]},${e[3]}/${m}x${y}${o}.${u}`,Us.maptilerApiURL);if("attribution"in t&&d.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&d.searchParams.set("padding",t.padding.toString()),"markers"in t){let M="";const A="markerIcon"in t;A&&(M+=`icon:${t.markerIcon}|`),A&&"markerAnchor"in t&&(M+=`anchor:${t.markerAnchor}|`),A&&t.hiDPI&&(M+="scale:2|");const O=Array.isArray(t.markers[0])?t.markers:[t.markers];M+=O.map(R=>Ab(R,!A)).join("|"),d.searchParams.set("markers",M)}if("path"in t){let M="";if(M+=`fill:${t.pathFillColor??"none"}|`,"pathStrokeColor"in t&&(M+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const A=t.pathWidth/(t.hiDPI?2:1);M+=`width:${A.toString()}|`}M+=Rb(t.path),d.searchParams.set("path",M)}return d.searchParams.set("key",t.apiKey??Oi.apiKey),d.toString()}function PN(e={}){if(!("markers"in e)&&!("path"in e))throw new Error("Automatic static maps require markers and/or path to be created.");const t=bv(e.style),n=e.hiDPI?"@2x":"",o=e.format??"png";let u=~~(e.width??1024),m=~~(e.height??1024);e.hiDPI&&(u=~~(u/2),m=~~(m/2));const y=new URL(`maps/${encodeURIComponent(t)}/static/auto/${u}x${m}${n}.${o}`,Us.maptilerApiURL);if("attribution"in e&&y.searchParams.set("attribution",e.attribution.toString()),"padding"in e&&y.searchParams.set("padding",e.padding.toString()),"markers"in e){let d="";const M="markerIcon"in e;M&&(d+=`icon:${e.markerIcon}|`),M&&"markerAnchor"in e&&(d+=`anchor:${e.markerAnchor}|`),M&&e.hiDPI&&(d+="scale:2|");const A=Array.isArray(e.markers[0])?e.markers:[e.markers];d+=A.map(O=>Ab(O,!M)).join("|"),y.searchParams.set("markers",d)}if("path"in e){let d="";if(d+=`fill:${e.pathFillColor??"none"}|`,"pathStrokeColor"in e&&(d+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const M=e.pathWidth/(e.hiDPI?2:1);d+=`width:${M.toString()}|`}d+=Rb(e.path),y.searchParams.set("path",d)}return y.searchParams.set("key",e.apiKey??Oi.apiKey),y.toString()}const AN={centered:MN,bounded:LN,automatic:PN},kv=63710088e-1,nM=2*Math.PI*kv;function rM(e){return(180+e)/360}function iM(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function oM(e){const t=lM(e);return[rM(t[0]),iM(t[1])]}function sM(e){return e*360-180}function aM(e){const t=180-e*360;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function RN(e){return[sM(e[0]),aM(e[1])]}function Nb(e,t){const n=Math.PI/180,o=e[1]*n,u=t[1]*n,m=Math.sin(o)*Math.sin(u)+Math.cos(o)*Math.cos(u)*Math.cos((t[0]-e[0])*n);return kv*Math.acos(Math.min(m,1))}function NN(e){const t=Array(e.length);t[0]=0;const n=t.length;for(let o=1;o<n;o++)t[o]=Nb(e[o-1],e[o])+t[o-1];return t}function lM(e){const t=e[0],n=e[1],o=360,u=((t+180)%o+o)%o-180;return[u===-180?180:u,n]}function uM(e){return nM*Math.cos(e*Math.PI/180)}function cM(e,t,n=!0){const o=2**t,u=[e[0]*o,e[1]*o];return n?[~~u[0],~~u[1]]:u}function zN(e,t,n=!0){const o=oM(e);return cM(o,t,n)}function Ip(e){return e*Math.PI/180}function Q1(e){return e*180/Math.PI}function DN(e,t,n){const o=Nb(e,t),u=Ip(e[0]),m=Ip(e[1]),y=Ip(t[0]),d=Ip(t[1]),M=o/kv,A=Math.sin((1-n)*M)/Math.sin(M),O=Math.sin(n*M)/Math.sin(M),R=A*Math.cos(m)*Math.cos(u)+O*Math.cos(d)*Math.cos(y),N=A*Math.cos(m)*Math.sin(u)+O*Math.cos(d)*Math.sin(y),V=A*Math.sin(m)+O*Math.sin(d),H=Math.atan2(V,Math.sqrt(R*R+N*N)),ne=Math.atan2(N,R);return[Q1(ne),Q1(H)]}const zb={EARTH_RADIUS:kv,EARTH_CIRCUMFERENCE:nM,longitudeToMercatorX:rM,latitudeToMercatorY:iM,wgs84ToMercator:oM,mercatorXToLongitude:sM,mercatorYToLatitude:aM,mercatorToWgs84:RN,haversineDistanceWgs84:Nb,wrapWgs84:lM,circumferenceAtLatitude:uM,mercatorToTileIndex:cM,wgs84ToTileIndex:zN,toRadians:Ip,toDegrees:Q1,haversineIntermediateWgs84:DN,haversineCumulatedDistanceWgs84:NN};let z_=null;function Db(){return z_||(z_=new aN({maxSize:Oi.tileCacheSize})),z_}async function hM(e){const t=new Blob([e]),n=await createImageBitmap(t),o=document.createElement("canvas"),u=o.getContext("2d");o.width=n.width,o.height=n.height,u.drawImage(n,0,0);const m=u.getImageData(0,0,o.width,o.height);return{pixels:m.data,width:o.width,height:o.height,components:m.data.length/(o.width*o.height)}}function Ob(){if(Oi.bufferToPixelData)return Oi.bufferToPixelData;if(typeof window<"u")return hM;throw new Error("An image file buffer to pixel data parser is necessary. Specify it in `config.bufferToPixelData`")}const ON="tiles/terrain-rgb-v2/tiles.json";let ru=null;const Fb={403:"Key is missing, invalid or restricted"};async function dM(e){const t=new URL(ON,Us.maptilerApiURL);t.searchParams.set("key",e);const n=t.toString(),o=await qa(n);if(o.ok)return ru=await o.json(),ru;if(!o.ok)throw new xa(o,Fb[o.status]??"")}async function FN(e,t={}){const n=t.apiKey??Oi.apiKey;ru||await dM(n);const o=ru.maxzoom;let u=~~(t.zoom??o);(u>o||u<0)&&(u=o);const m=zb.wgs84ToTileIndex(e,u,!1),y=~~m[0],d=~~m[1];if(!ru.tiles.length)throw new Error("Terrain tileJSON tile list is empty.");const M=`terrain_${u.toString()}_${y.toString()}_${d.toString()}`;let A;const O=Db();if(O.has(M))A=O.get(M);else{const X=ru.tiles[0].replace("{x}",y.toString()).replace("{y}",d.toString()).replace("{z}",u.toString()),Q=await qa(X);if(!Q.ok)throw new xa(Q,Fb[Q.status]??"");const ie=await Q.arrayBuffer();A=await Ob()(ie),O.set(M,A)}const R=~~(A.width*(m[0]%1)),V=(~~(A.height*(m[1]%1))*A.width+R)*A.components,H=A.pixels[V],ne=A.pixels[V+1],de=A.pixels[V+2],Y=-1e4+(H*256*256+ne*256+de)*.1;return[e[0],e[1],Y]}async function Bb(e,t={}){const n=t.apiKey??Oi.apiKey;ru||await dM(n);const o=Ob(),u=ru.tiles[0],m=Db(),y=ru.maxzoom;let d=~~(t.zoom??y);(d>y||d<0)&&(d=y);const M=e.map(ie=>zb.wgs84ToTileIndex(ie,d,!1)),O=M.map(ie=>[~~ie[0],~~ie[1]]).map(ie=>`terrain_${d.toString()}_${ie[0].toString()}_${ie[1].toString()}`),R=Array.from(new Set(O.filter(ie=>!m.has(ie)))).map(ie=>ie.split("_").slice(1)),V=R.map(ie=>u.replace("{x}",ie[1].toString()).replace("{y}",ie[2].toString()).replace("{z}",ie[0].toString())).map(ie=>qa(ie)),ne=(await Promise.allSettled(V)).map(ie=>ie.status==="fulfilled"?ie.value:null).filter(ie=>ie),de=ne.filter(ie=>!ie.ok);if(ne.length!==V.length)throw new Error("Some tiles could not be fetched.");if(de.length)throw new xa(de[0],Fb[de[0].status]??"");const Y=await Promise.all(ne.map(ie=>ie.arrayBuffer()));if(!Y.every(ie=>ie.byteLength>0))throw new Error("Some tiles are not available.");(await Promise.all(Y.map(ie=>o(ie)))).forEach((ie,he)=>{const _e=R[he],pe=`terrain_${_e[0].toString()}_${_e[1].toString()}_${_e[2].toString()}`;m.set(pe,ie)});const Q=e.map((ie,he)=>{const _e=O[he],pe=M[he],Ie=m.get(_e),Le=Math.min(Math.round(Ie.width*(pe[0]%1)),Ie.width-1),Ze=(Math.min(Math.round(Ie.height*(pe[1]%1)),Ie.height-1)*Ie.width+Le)*Ie.components,et=Ie.pixels[Ze],at=Ie.pixels[Ze+1],Ne=Ie.pixels[Ze+2],rt=-1e4+(et*256*256+at*256+Ne)*.1;return[ie[0],ie[1],~~(rt*1e3)/1e3]});if(t.smoothingKernelSize){const ie=~~(t.smoothingKernelSize/2)*2+1,he=Q.map(pe=>pe[2]),_e=~~(ie/2);for(let pe=_e;pe<he.length-_e-1;pe+=1){let Ie=0;for(let Le=0;Le<ie;Le+=1){const $e=he[pe-_e+Le];Ie+=$e}Ie/=ie,Q[pe][2]=Ie}}return Q}async function BN(e,t={}){if(e.type!=="LineString")throw new Error("The provided object is not a GeoJSON LineString");const n=structuredClone(e),o=await Bb(n.coordinates,t);return n.coordinates=o,n}async function $N(e,t={}){if(e.type!=="MultiLineString")throw new Error("The provided object is not a GeoJSON MultiLineString");const n=structuredClone(e),o=n.coordinates.map(M=>M.length),u=n.coordinates.flat(),m=await Bb(u,t),y=[];let d=0;for(const M of o)y.push(m.slice(d,d+M)),d+=M;return n.coordinates=y,n}const UN={at:FN,batch:Bb,fromLineString:BN,fromMultiLineString:$N};var $b={exports:{}},Vd=typeof Reflect=="object"?Reflect:null,wS=Vd&&typeof Vd.apply=="function"?Vd.apply:function(t,n,o){return Function.prototype.apply.call(t,n,o)},ey;Vd&&typeof Vd.ownKeys=="function"?ey=Vd.ownKeys:Object.getOwnPropertySymbols?ey=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ey=function(t){return Object.getOwnPropertyNames(t)};function jN(e){console&&console.warn&&console.warn(e)}var fM=Number.isNaN||function(t){return t!==t};function wr(){wr.init.call(this)}$b.exports=wr;$b.exports.once=HN;wr.EventEmitter=wr;wr.prototype._events=void 0;wr.prototype._eventsCount=0;wr.prototype._maxListeners=void 0;var kS=10;function Sv(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(wr,"defaultMaxListeners",{enumerable:!0,get:function(){return kS},set:function(e){if(typeof e!="number"||e<0||fM(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");kS=e}});wr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};wr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||fM(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function pM(e){return e._maxListeners===void 0?wr.defaultMaxListeners:e._maxListeners}wr.prototype.getMaxListeners=function(){return pM(this)};wr.prototype.emit=function(t){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var u=t==="error",m=this._events;if(m!==void 0)u=u&&m.error===void 0;else if(!u)return!1;if(u){var y;if(n.length>0&&(y=n[0]),y instanceof Error)throw y;var d=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw d.context=y,d}var M=m[t];if(M===void 0)return!1;if(typeof M=="function")wS(M,this,n);else for(var A=M.length,O=_M(M,A),o=0;o<A;++o)wS(O[o],this,n);return!0};function mM(e,t,n,o){var u,m,y;if(Sv(n),m=e._events,m===void 0?(m=e._events=Object.create(null),e._eventsCount=0):(m.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),m=e._events),y=m[t]),y===void 0)y=m[t]=n,++e._eventsCount;else if(typeof y=="function"?y=m[t]=o?[n,y]:[y,n]:o?y.unshift(n):y.push(n),u=pM(e),u>0&&y.length>u&&!y.warned){y.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=y.length,jN(d)}return e}wr.prototype.addListener=function(t,n){return mM(this,t,n,!1)};wr.prototype.on=wr.prototype.addListener;wr.prototype.prependListener=function(t,n){return mM(this,t,n,!0)};function VN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gM(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},u=VN.bind(o);return u.listener=n,o.wrapFn=u,u}wr.prototype.once=function(t,n){return Sv(n),this.on(t,gM(this,t,n)),this};wr.prototype.prependOnceListener=function(t,n){return Sv(n),this.prependListener(t,gM(this,t,n)),this};wr.prototype.removeListener=function(t,n){var o,u,m,y,d;if(Sv(n),u=this._events,u===void 0)return this;if(o=u[t],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,o.listener||n));else if(typeof o!="function"){for(m=-1,y=o.length-1;y>=0;y--)if(o[y]===n||o[y].listener===n){d=o[y].listener,m=y;break}if(m<0)return this;m===0?o.shift():GN(o,m),o.length===1&&(u[t]=o[0]),u.removeListener!==void 0&&this.emit("removeListener",t,d||n)}return this};wr.prototype.off=wr.prototype.removeListener;wr.prototype.removeAllListeners=function(t){var n,o,u;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var m=Object.keys(o),y;for(u=0;u<m.length;++u)y=m[u],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(u=n.length-1;u>=0;u--)this.removeListener(t,n[u]);return this};function yM(e,t,n){var o=e._events;if(o===void 0)return[];var u=o[t];return u===void 0?[]:typeof u=="function"?n?[u.listener||u]:[u]:n?qN(u):_M(u,u.length)}wr.prototype.listeners=function(t){return yM(this,t,!0)};wr.prototype.rawListeners=function(t){return yM(this,t,!1)};wr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):vM.call(e,t)};wr.prototype.listenerCount=vM;function vM(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}wr.prototype.eventNames=function(){return this._eventsCount>0?ey(this._events):[]};function _M(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function GN(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function qN(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function HN(e,t){return new Promise(function(n,o){function u(y){e.removeListener(t,m),o(y)}function m(){typeof e.removeListener=="function"&&e.removeListener("error",u),n([].slice.call(arguments))}xM(e,t,m,{once:!0}),t!=="error"&&WN(e,u,{once:!0})})}function WN(e,t,n){typeof e.on=="function"&&xM(e,"error",t,n)}function xM(e,t,n,o){if(typeof e.on=="function")o.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function u(m){o.once&&e.removeEventListener(t,u),n(m)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var ZN=$b.exports;const XN=tv(ZN);let Cg;const YN=new Uint8Array(16);function KN(){if(!Cg&&(Cg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cg(YN)}const lo=[];for(let e=0;e<256;++e)lo.push((e+256).toString(16).slice(1));function JN(e,t=0){return lo[e[t+0]]+lo[e[t+1]]+lo[e[t+2]]+lo[e[t+3]]+"-"+lo[e[t+4]]+lo[e[t+5]]+"-"+lo[e[t+6]]+lo[e[t+7]]+"-"+lo[e[t+8]]+lo[e[t+9]]+"-"+lo[e[t+10]]+lo[e[t+11]]+lo[e[t+12]]+lo[e[t+13]]+lo[e[t+14]]+lo[e[t+15]]}const QN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SS={randomUUID:QN};function ez(e,t,n){if(SS.randomUUID&&!t&&!e)return SS.randomUUID();e=e||{};const o=e.random||(e.rng||KN)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,JN(o)}const bM="3.7.7",tz=bM,hf=typeof Buffer=="function",ES=typeof TextDecoder=="function"?new TextDecoder:void 0,IS=typeof TextEncoder=="function"?new TextEncoder:void 0,nz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Tp=Array.prototype.slice.call(nz),Mg=(e=>{let t={};return e.forEach((n,o)=>t[n]=o),t})(Tp),rz=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,co=String.fromCharCode.bind(String),TS=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),wM=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),kM=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),SM=e=>{let t,n,o,u,m="";const y=e.length%3;for(let d=0;d<e.length;){if((n=e.charCodeAt(d++))>255||(o=e.charCodeAt(d++))>255||(u=e.charCodeAt(d++))>255)throw new TypeError("invalid character found");t=n<<16|o<<8|u,m+=Tp[t>>18&63]+Tp[t>>12&63]+Tp[t>>6&63]+Tp[t&63]}return y?m.slice(0,y-3)+"===".substring(y):m},Ub=typeof btoa=="function"?e=>btoa(e):hf?e=>Buffer.from(e,"binary").toString("base64"):SM,ex=hf?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let o=0,u=e.length;o<u;o+=4096)n.push(co.apply(null,e.subarray(o,o+4096)));return Ub(n.join(""))},ty=(e,t=!1)=>t?wM(ex(e)):ex(e),iz=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?co(192|t>>>6)+co(128|t&63):co(224|t>>>12&15)+co(128|t>>>6&63)+co(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return co(240|t>>>18&7)+co(128|t>>>12&63)+co(128|t>>>6&63)+co(128|t&63)}},oz=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,EM=e=>e.replace(oz,iz),CS=hf?e=>Buffer.from(e,"utf8").toString("base64"):IS?e=>ex(IS.encode(e)):e=>Ub(EM(e)),Gd=(e,t=!1)=>t?wM(CS(e)):CS(e),MS=e=>Gd(e,!0),sz=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,az=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return co((n>>>10)+55296)+co((n&1023)+56320);case 3:return co((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return co((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},IM=e=>e.replace(sz,az),TM=e=>{if(e=e.replace(/\s+/g,""),!rz.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",o,u;for(let m=0;m<e.length;)t=Mg[e.charAt(m++)]<<18|Mg[e.charAt(m++)]<<12|(o=Mg[e.charAt(m++)])<<6|(u=Mg[e.charAt(m++)]),n+=o===64?co(t>>16&255):u===64?co(t>>16&255,t>>8&255):co(t>>16&255,t>>8&255,t&255);return n},jb=typeof atob=="function"?e=>atob(kM(e)):hf?e=>Buffer.from(e,"base64").toString("binary"):TM,CM=hf?e=>TS(Buffer.from(e,"base64")):e=>TS(jb(e).split("").map(t=>t.charCodeAt(0))),MM=e=>CM(LM(e)),lz=hf?e=>Buffer.from(e,"base64").toString("utf8"):ES?e=>ES.decode(CM(e)):e=>IM(jb(e)),LM=e=>kM(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),tx=e=>lz(LM(e)),uz=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},PM=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),AM=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,PM(n));e("fromBase64",function(){return tx(this)}),e("toBase64",function(t){return Gd(this,t)}),e("toBase64URI",function(){return Gd(this,!0)}),e("toBase64URL",function(){return Gd(this,!0)}),e("toUint8Array",function(){return MM(this)})},RM=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,PM(n));e("toBase64",function(t){return ty(this,t)}),e("toBase64URI",function(){return ty(this,!0)}),e("toBase64URL",function(){return ty(this,!0)})},cz=()=>{AM(),RM()},hz={version:bM,VERSION:tz,atob:jb,atobPolyfill:TM,btoa:Ub,btoaPolyfill:SM,fromBase64:tx,toBase64:Gd,encode:Gd,encodeURI:MS,encodeURL:MS,utob:EM,btou:IM,decode:tx,isValid:uz,fromUint8Array:ty,toUint8Array:MM,extendString:AM,extendUint8Array:RM,extendBuiltins:cz};var dz=Object.defineProperty,NM=e=>{throw TypeError(e)},fz=(e,t,n)=>t in e?dz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xr=(e,t,n)=>fz(e,typeof t!="symbol"?t+"":t,n),Vb=(e,t,n)=>t.has(e)||NM("Cannot "+n),Dn=(e,t,n)=>(Vb(e,t,"read from private field"),n?n.call(e):t.get(e)),nh=(e,t,n)=>t.has(e)?NM("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),_d=(e,t,n,o)=>(Vb(e,t,"write to private field"),t.set(e,n),n),Ls=(e,t,n)=>(Vb(e,t,"access private method"),n);const pz="@maptiler/sdk",mz="2.3.0",gz="The Javascript & TypeScript map SDK tailored for MapTiler Cloud",yz="dist/maptiler-sdk.mjs",vz="dist/maptiler-sdk.d.ts",_z="dist/maptiler-sdk.css",xz="module",bz={".":{import:"./dist/maptiler-sdk.mjs",types:"./dist/maptiler-sdk.d.ts"},"./dist/maptiler-sdk.css":{import:"./dist/maptiler-sdk.css"},"./style.css":{import:"./dist/maptiler-sdk.css"}},wz=["maptiler","map","sdk","webmap","cloud","webGL","maplibre"],kz="https://docs.maptiler.com/sdk-js/",Sz="BSD-3-Clause",Ez={type:"git",url:"https://github.com/maptiler/maptiler-sdk-js.git"},Iz={biome:"biome check --max-diagnostics=1000","biome:fix":"npx @biomejs/biome check --max-diagnostics=1000 --write",doc:"rm -rf docs/* && typedoc --out docs && cp -r images docs/",test:"vitest run","build-css":"node scripts/replace-path-with-content.js src/style/style_template.css dist/tmp_maptiler-sdk.css && cat node_modules/maplibre-gl/dist/maplibre-gl.css dist/tmp_maptiler-sdk.css > dist/maptiler-sdk.css && rm dist/tmp_maptiler-sdk.css && cp dist/maptiler-sdk.css build/maptiler-sdk.css","build-umd":"tsc && NODE_ENV=production vite build -c vite.config-umd.ts","build-es":"tsc && NODE_ENV=production vite build -c vite.config-es.ts",build:"npm run build-es; npm run build-umd; npm run build-css",make:"npm run biome:fix && npm run build","dev-umd":"npm run build-css && tsc && NODE_ENV=dev vite build -w -c vite.config-umd.ts",help:"vite build --help"},Tz="MapTiler",Cz={"@biomejs/biome":"1.8.3","@types/uuid":"^9.0.2","@types/xmldom":"^0.1.31","@xmldom/xmldom":"^0.8.10",serve:"^14.2.0",terser:"^5.17.1",typedoc:"^0.24.8",typescript:"^5.1.6",vite:"^5.3.4","vite-plugin-dts":"^4.0.0-beta.0",vitest:"^0.34.2"},Mz={"@maptiler/client":"^2.0.0",events:"^3.3.0","js-base64":"^3.7.4","maplibre-gl":"^4.7.0",uuid:"^9.0.0"},Lz={name:pz,version:mz,description:gz,module:yz,types:vz,style:_z,type:xz,exports:bz,keywords:wz,homepage:kz,license:Sz,repository:Ez,scripts:Iz,author:Tz,devDependencies:Cz,dependencies:Mz},Bn={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...Tl};function nx(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Sh(e)||Bn.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>Sh(e)).filter(e=>e)[0]??Bn.LOCAL}const ds={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Bn.STYLE,secondaryLanguage:Bn.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(ds);const zM=ez();class DM extends XN{constructor(){super(...arguments),xr(this,"primaryLanguage",ds.primaryLanguage),xr(this,"secondaryLanguage"),xr(this,"session",!0),xr(this,"caching",!0),xr(this,"_unit","metric"),xr(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Oi.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Oi.fetch=t}get fetch(){return Oi.fetch}}const Ni=new DM,{addProtocol:LS}=Ht,rx="localcache_source",ix="localcache",Pz="maptiler_sdk",Az=1e3,Rz=100,ox=typeof caches<"u";function Nz(e,t){if(ox&&Ni.caching&&Ni.session&&e.host===ds.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${rx}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${ix}://`)}return e.href}let D_;async function OM(){return D_||(D_=await caches.open(Pz)),D_}let PS=0;async function zz(){const e=await OM(),t=await e.keys(),n=t.slice(0,Math.max(t.length-Az,0));for(const o of n)e.delete(o)}function Dz(){LS(rx,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${rx}://`,"https://");const n=e;n.signal=t.signal;const o=await fetch(e.url,n),u=await o.json();return u.tiles&&u.tiles.length>0&&(u.tiles[0]+=`&last-modified=${o.headers.get("Last-Modified")}`),{data:u,cacheControl:o.headers.get("Cache-Control"),expires:o.headers.get("Expires")}}),LS(ix,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${ix}://`,"https://");const n=new URL(e.url),o=new URL(n);o.searchParams.delete("mtsid"),o.searchParams.delete("key");const u=o.toString(),m=new URL(n);m.searchParams.delete("last-modified");const y=m.toString(),d=async N=>({data:await N.arrayBuffer(),cacheControl:N.headers.get("Cache-Control"),expires:N.headers.get("Expires")}),M=await OM(),A=await M.match(u);if(A)return d(A);const O=e;O.signal=t.signal;const R=await fetch(y,O);return R.status>=200&&R.status<300&&(M.put(u,R.clone()).catch(()=>{}),++PS>Rz&&(zz(),PS=0)),d(R)})}function Oz(){if(typeof window>"u")return;const e=Ht.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Ht.setRTLTextPlugin(ds.rtlPluginURL,!0)}catch{}}function Fz(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function qd(e,t,n){const o=window.document.createElement(e);return t!==void 0&&(o.className=t),n&&n.appendChild(o),o}function FM(e){e.parentNode&&e.parentNode.removeChild(e)}function AS(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===ds.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",Ni.apiKey),Ni.session&&n.searchParams.append("mtsid",zM)),{url:Nz(n,t)}}function RS(e){return(t,n)=>{if(e!=null){const o=e(t,n),u=AS((o==null?void 0:o.url)??"",n);return{...o,...u}}return AS(t,n)}}function BM(){return Math.random().toString(36).substring(2)}function Ev(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function Bz(e){try{return JSON.parse(e)}catch{}return null}function $z(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function Uz(e){const t=$z();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const o=document.createElement("div");throw o.innerHTML=t,o.classList.add("no-webgl-support-div"),n.appendChild(o),new Error(t)}let jz=class extends Ht.Marker{addTo(t){return super.addTo(t)}},$M=class extends Ht.Popup{addTo(t){return super.addTo(t)}},Vz=class extends Ht.Style{constructor(t,n={}){super(t,n)}},Gz=class extends Ht.CanvasSource{onAdd(t){super.onAdd(t)}},qz=class extends Ht.GeoJSONSource{onAdd(t){super.onAdd(t)}},Hz=class extends Ht.ImageSource{onAdd(t){super.onAdd(t)}},Wz=class extends Ht.RasterTileSource{onAdd(t){super.onAdd(t)}},Zz=class extends Ht.RasterDEMTileSource{onAdd(t){super.onAdd(t)}},Xz=class extends Ht.VectorTileSource{onAdd(t){super.onAdd(t)}},Yz=class extends Ht.VideoSource{onAdd(t){super.onAdd(t)}},UM=class extends Ht.NavigationControl{onAdd(t){return super.onAdd(t)}};class jM extends Ht.GeolocateControl{onAdd(t){return super.onAdd(t)}}let Kz=class extends Ht.AttributionControl{onAdd(t){return super.onAdd(t)}},VM=class extends Ht.LogoControl{onAdd(t){return super.onAdd(t)}},GM=class extends Ht.ScaleControl{onAdd(t){return super.onAdd(t)}},qM=class extends Ht.FullscreenControl{onAdd(t){return super.onAdd(t)}},Jz=class extends Ht.TerrainControl{onAdd(t){return super.onAdd(t)}},Qz=class extends Ht.BoxZoomHandler{constructor(t,n){super(t,n)}},e4=class extends Ht.ScrollZoomHandler{constructor(t,n){super(t,n)}},t4=class extends Ht.CooperativeGesturesHandler{constructor(t,n){super(t,n)}},n4=class extends Ht.KeyboardHandler{constructor(t){super(t)}},r4=class extends Ht.TwoFingersTouchPitchHandler{constructor(t){super(t)}},i4=class extends Ht.MapWheelEvent{constructor(t,n,o){super(t,n,o)}},o4=class extends Ht.MapTouchEvent{constructor(t,n,o){super(t,n,o)}},s4=class extends Ht.MapMouseEvent{constructor(t,n,o,u={}){super(t,n,o,u)}},sx=class extends VM{constructor(t={}){super(t),xr(this,"logoURL",""),xr(this,"linkURL",""),this.logoURL=t.logoURL??ds.maptilerLogoURL,this.linkURL=t.linkURL??ds.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}};function NS(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:Pb(e):e instanceof _v?e.getExpandedStyleURL():e instanceof xv?e.getDefaultVariant().getExpandedStyleURL():e:wv[am[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}class HM{constructor(){xr(this,"_map"),xr(this,"_container"),xr(this,"_terrainButton"),Fz(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=qd("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=qd("button","maplibregl-ctrl-terrain",this._container),qd("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){FM(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class WM extends UM{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),xr(this,"_rotateCompassArrow",()=>{const n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const o=super._createButton(t,n);return o.clickFunction=n,o}}const zS=Ht.Marker,DS=Ht.LngLat,a4=Ht.LngLatBounds;let ZM=class extends jM{constructor(){super(...arguments),xr(this,"lastUpdatedCenter",new DS(0,0)),xr(this,"_updateCamera",t=>{var n,o;const u=new DS(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,y={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},d=this._map.getZoom();d>(((o=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:o.maxZoom)??30)&&(y.zoom=d),this._map.fitBounds(a4.fromLngLat(u,m),y,{geolocateSource:!0});let M=!1;const A=()=>{M=!0};this._map.once("click",A),this._map.once("dblclick",A),this._map.once("dragstart",A),this._map.once("mousedown",A),this._map.once("touchstart",A),this._map.once("wheel",A),this._map.once("moveend",()=>{this._map.off("click",A),this._map.off("dblclick",A),this._map.off("dragstart",A),this._map.off("mousedown",A),this._map.off("touchstart",A),this._map.off("wheel",A),!M&&(this.lastUpdatedCenter=this._map.getCenter())})}),xr(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=qd("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zS({element:this._dotElement}),this._circleElement=qd("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zS({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const o=n.originalEvent&&n.originalEvent.type==="resize",u=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!o&&u>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),xr(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),o=this._map.unproject([n.x,n.y]),u=this._map.unproject([n.x+20,n.y]),m=o.distanceTo(u)/20,y=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}};var Ps,vl,oh,sh,ta,ny,Yo,XM,ra,YM;class O_{constructor(t,n){nh(this,Yo),nh(this,Ps),xr(this,"map"),nh(this,vl),nh(this,oh),nh(this,sh),nh(this,ta,!1),nh(this,ny),t.style!==void 0&&_d(this,ta,!0),_d(this,Ps,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(Dn(this,Ps).minZoom=t.lockZoom,Dn(this,Ps).maxZoom=t.lockZoom)}setStyle(t,n){Dn(this,ta)||this.map.setStyle(t,n),Ls(this,Yo,ra).call(this)}addLayer(t,n){return Dn(this,ta)||this.map.addLayer(t,n),Ls(this,Yo,ra).call(this),this.map}moveLayer(t,n){return Dn(this,ta)||this.map.moveLayer(t,n),Ls(this,Yo,ra).call(this),this.map}removeLayer(t){return Dn(this,ta)||this.map.removeLayer(t),Ls(this,Yo,ra).call(this),this}setLayerZoomRange(t,n,o){return Dn(this,ta)||this.map.setLayerZoomRange(t,n,o),Ls(this,Yo,ra).call(this),this}setFilter(t,n,o){return Dn(this,ta)||this.map.setFilter(t,n,o),Ls(this,Yo,ra).call(this),this}setPaintProperty(t,n,o,u){return Dn(this,ta)||this.map.setPaintProperty(t,n,o,u),Ls(this,Yo,ra).call(this),this}setLayoutProperty(t,n,o,u){return Dn(this,ta)||this.map.setLayoutProperty(t,n,o,u),Ls(this,Yo,ra).call(this),this}setGlyphs(t,n){return Dn(this,ta)||this.map.setGlyphs(t,n),Ls(this,Yo,ra).call(this),this}onAdd(t){_d(this,vl,t),_d(this,oh,qd("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,o]of Object.entries(Dn(this,Ps).containerStyle))Dn(this,oh).style.setProperty(n,o);return Dn(this,Ps).container=Dn(this,oh),Dn(this,Ps).zoom=t.getZoom()+Dn(this,Ps).zoomAdjust,this.map=new Gb(Dn(this,Ps)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Ls(this,Yo,XM).call(this,Dn(this,Ps).parentRect),_d(this,ny,Ls(this,Yo,YM).call(this))}),Dn(this,oh)}onRemove(){var t;(t=Dn(this,ny))==null||t.call(this),FM(Dn(this,oh))}}Ps=new WeakMap,vl=new WeakMap,oh=new WeakMap,sh=new WeakMap,ta=new WeakMap,ny=new WeakMap,Yo=new WeakSet,XM=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(_d(this,sh,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:Dn(this,sh)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Ls(this,Yo,ra).call(this))},ra=function(){if(Dn(this,sh)===void 0)return;const{devicePixelRatio:e}=window,t=Dn(this,vl).getCanvas(),n=t.width/e,o=t.height/e,u=Dn(this,vl).unproject.bind(Dn(this,vl)),m=u([0,0]),y=u([n,0]),d=u([0,o]),M=u([n,o]);Dn(this,sh).geometry.coordinates=[[d.toArray(),M.toArray(),y.toArray(),m.toArray(),d.toArray()]],this.map.getSource("parentRect").setData(Dn(this,sh))},YM=function(){const{pitchAdjust:e}=Dn(this,Ps),t=()=>{m("parent")},n=()=>{m("minimap")},o=()=>{Dn(this,vl).on("move",t),this.map.on("move",n)},u=()=>{Dn(this,vl).off("move",t),this.map.off("move",n)},m=y=>{u();const d=y==="parent"?Dn(this,vl):this.map,M=y==="parent"?this.map:Dn(this,vl),A=d.getCenter(),O=d.getZoom()+Dn(this,Ps).zoomAdjust*(y==="parent"?1:-1),R=d.getBearing(),N=d.getPitch();M.jumpTo({center:A,zoom:O,bearing:R,pitch:e?N:0}),Ls(this,Yo,ra).call(this),o()};return o(),()=>{u()}};const KM={POINT:"POINT",COUNTRY:"COUNTRY"};let Gb=class extends Ht.Map{constructor(t){Uz(t.container),t.apiKey&&(Ni.apiKey=t.apiKey);const n=NS(t.style),o=location.hash;Ni.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let u={compact:!1};t.customAttribution?u.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(u={...u,...t.attributionControl}),super({...t,style:n,maplibreLogo:!1,transformRequest:RS(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:u}),xr(this,"isTerrainEnabled",!1),xr(this,"terrainExaggeration",1),xr(this,"primaryLanguage"),xr(this,"terrainGrowing",!1),xr(this,"terrainFlattening",!1),xr(this,"minimap"),xr(this,"forceLanguageUpdate"),xr(this,"languageAlwaysBeenStyle"),xr(this,"isReady",!1),Ni.caching&&!ox&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Ni.caching&&ox&&Dz(),this.primaryLanguage=t.language??Ni.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===Bn.STYLE||this.primaryLanguage===Bn.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Bn.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&o)return;try{if(t.geolocate===KM.COUNTRY){await this.fitToIpBounds();return}}catch(O){console.warn(O.message)}let A;try{await this.centerOnIpPoint(t.zoom),A=this.getCameraHash()}catch(O){console.warn(O.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(O=>{A===this.getCameraHash()&&(this.terrain?this.easeTo({center:[O.coords.longitude,O.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[O.coords.longitude,O.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let A={logo:null};try{const O=Object.keys(this.style.sourceCaches).map(N=>this.getSource(N)).filter(N=>N&&"url"in N&&typeof N.url=="string"&&(N==null?void 0:N.url.includes("tiles.json"))),R=new URL(O[0].url);R.searchParams.has("key")||R.searchParams.append("key",Ni.apiKey),A=await(await fetch(R.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in A&&A.logo){const O=A.logo;this.addControl(new sx({logoURL:O}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new sx,t.logoPosition);if(t.scaleControl){const O=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,R=new GM({unit:Ni.unit});this.addControl(R,O),Ni.on("unit",N=>{R.setUnit(N)})}if(t.navigationControl!==!1){const O=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new WM,O)}if(t.geolocateControl!==!1){const O=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new ZM({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),O)}if(t.terrainControl){const O=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new HM,O)}if(t.fullscreenControl){const O=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new qM({}),O)}this.isReady=!0,this.fire("ready",{target:this})});let m=!1,y=!1,d;this.once("ready",()=>{m=!0,y&&this.fire("loadWithTerrain",d)}),this.once("style.load",()=>{const{minimap:A}=t;if(typeof A=="object"){const{zoom:O,center:R,style:N,language:V,apiKey:H,maptilerLogo:ne,antialias:de,refreshExpiredTiles:Y,maxBounds:X,scrollZoom:Q,minZoom:ie,maxZoom:he,boxZoom:_e,locale:pe,fadeDuration:Ie,crossSourceCollisions:Le,clickTolerance:$e,bounds:Ze,fitBoundsOptions:et,pixelRatio:at,validateStyle:Ne}=t;this.minimap=new O_(A,{zoom:O,center:R,style:N,language:V,apiKey:H,container:"null",maptilerLogo:ne,antialias:de,refreshExpiredTiles:Y,maxBounds:X,scrollZoom:Q,minZoom:ie,maxZoom:he,boxZoom:_e,locale:pe,fadeDuration:Ie,crossSourceCollisions:Le,clickTolerance:$e,bounds:Ze,fitBoundsOptions:et,pixelRatio:at,validateStyle:Ne}),this.addControl(this.minimap,A.position??"bottom-left")}else A===!0?(this.minimap=new O_({},t),this.addControl(this.minimap,"bottom-left")):A!==void 0&&A!==!1&&(this.minimap=new O_({},t),this.addControl(this.minimap,A))});const M=A=>{A.terrain&&(y=!0,d={type:"loadWithTerrain",target:this,terrain:A.terrain},this.off("terrain",M),m&&this.fire("loadWithTerrain",d))};this.on("terrain",M),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}setStyle(t,n){var o;return(o=this.minimap)==null||o.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(NS(t),n)}addLayer(t,n){var o;return(o=this.minimap)==null||o.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var o;return(o=this.minimap)==null||o.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,o){var u;return(u=this.minimap)==null||u.setLayerZoomRange(t,n,o),super.setLayerZoomRange(t,n,o)}setFilter(t,n,o){var u;return(u=this.minimap)==null||u.setFilter(t,n,o),super.setFilter(t,n,o)}setPaintProperty(t,n,o,u){var m;return(m=this.minimap)==null||m.setPaintProperty(t,n,o,u),super.setPaintProperty(t,n,o,u)}setLayoutProperty(t,n,o,u){var m;return(m=this.minimap)==null||m.setLayoutProperty(t,n,o,u),super.setLayoutProperty(t,n,o,u)}setGlyphs(t,n){var o;return(o=this.minimap)==null||o.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?sm(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n,o;(o=(n=this.minimap)==null?void 0:n.map)==null||o.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),o=By(t,Bn);if(!o){console.warn(`The language "${o}" is not supported.`);return}if(!(o.flag===Bn.STYLE.flag&&n&&(n.flag===Bn.AUTO.flag||n.flag===Bn.VISITOR.flag))&&(o.flag!==Bn.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===o&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Bn.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=o;let u=o;if(o.flag===Bn.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}u=n}let m=Bn.LOCAL.flag,y=`{${m}}`;u.flag===Bn.VISITOR.flag?(m=nx().flag,y=["case",["all",["has",m],["has",Bn.LOCAL.flag]],["case",["==",["get",m],["get",Bn.LOCAL.flag]],["get",Bn.LOCAL.flag],["format",["get",m],{"font-scale":.8},`
`,["get",Bn.LOCAL.flag],{"font-scale":1.1}]],["get",Bn.LOCAL.flag]]):u.flag===Bn.VISITOR_ENGLISH.flag?(m=Bn.ENGLISH.flag,y=["case",["all",["has",m],["has",Bn.LOCAL.flag]],["case",["==",["get",m],["get",Bn.LOCAL.flag]],["get",Bn.LOCAL.flag],["format",["get",m],{"font-scale":.8},`
`,["get",Bn.LOCAL.flag],{"font-scale":1.1}]],["get",Bn.LOCAL.flag]]):u.flag===Bn.AUTO.flag?(m=nx().flag,y=["case",["has",m],["get",m],["get",Bn.LOCAL.flag]]):u===Bn.LOCAL?(m=Bn.LOCAL.flag,y=`{${m}}`):(m=u.flag,y=["case",["has",m],["get",m],["get",Bn.LOCAL.flag]]);const{layers:d}=this.getStyle();for(const M of d){if(M.type!=="symbol")continue;const A=M,O=this.getSource(A.source);if(!O||!("url"in O&&typeof O.url=="string")||new URL(O.url).host!==ds.maptilerApiHost)continue;const{id:R,layout:N}=A;if(!N||!("text-field"in N))continue;const V=this.getLayoutProperty(R,"text-field");typeof V=="string"&&(V.toLowerCase().includes("ref")||V.toLowerCase().includes("housenumber"))||this.setLayoutProperty(R,"text-field",y)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,n=1e3){if(!this.terrain)return;const o=performance.now(),u=this.terrain.exaggeration,m=t-u,y=()=>{if(!this.terrain||this.terrainFlattening)return;const d=(performance.now()-o)/n;if(d<.99){const M=1-(1-d)**4,A=u+M*m;this.terrain.exaggeration=A,requestAnimationFrame(y)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(y)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=async u=>{!this.terrain||u.type!=="data"||u.dataType!=="source"||!("source"in u)||u.sourceId!=="maptiler-terrain"||u.source.type!=="raster-dem"||u.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(ds.terrainSourceId,{type:"raster-dem",url:ds.terrainSourceURL}),this.setTerrain({source:ds.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource(ds.terrainSourceId)||o()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,n=performance.now(),o=this.terrain.exaggeration,u=()=>{if(!this.terrain||this.terrainGrowing)return;const m=(performance.now()-n)/t;if(this._elevationFreeze=!1,m<.99){const y=(1-m)**4,d=o*y;this.terrain.exaggeration=d,requestAnimationFrame(u)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(ds.terrainSourceId)&&this.removeSource(ds.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(u)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await K1.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await K1.info();this.jumpTo({center:[(n==null?void 0:n.longitude)??0,(n==null?void 0:n.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),hz.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Ni}getMaptilerSessionId(){return zM}setTransformRequest(t){return super.setTransformRequest(RS(t)),this}};function Iv(e){if(typeof DOMParser<"u"){const t=new DOMParser().parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}throw new Error("No XML parser found")}function qb(e,t){if(!e.hasChildNodes())return!1;for(const n of Array.from(e.childNodes)){const o=n.nodeName;if(typeof o=="string"&&o.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function ax(e){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(e);throw new Error("No XML serializer found")}function Hb(e){const t=typeof e=="string"?Iv(e):e;if(!qb(t,"gpx"))throw new Error("The XML document is not valid GPX");const n=Zi(t,"trk"),o=Zi(t,"rte"),u=Zi(t,"wpt"),m={type:"FeatureCollection",features:[]};for(const y of Array.from(n)){const d=h4(y);d&&m.features.push(d)}for(const y of Array.from(o)){const d=d4(y);d&&m.features.push(d)}for(const y of Array.from(u))m.features.push(f4(y));return m}function Wb(e,t){let n=e;if(typeof n=="string"&&(n=Iv(n)),!qb(n,"kml"))throw new Error("The XML document is not valid KML");const o={type:"FeatureCollection",features:[]},u={},m={},y={},d=Zi(n,"Placemark"),M=Zi(n,"Style"),A=Zi(n,"StyleMap");for(const O of Array.from(M)){const R=FS(t!==void 0?t(O):ax(O)).toString(16);u[`#${yh(O,"id")}`]=R,m[R]=O}for(const O of Array.from(A)){u[`#${yh(O,"id")}`]=FS(t!==void 0?t(O):ax(O)).toString(16);const R=Zi(O,"Pair"),N={};for(const V of Array.from(R))N[ir(dn(V,"key"))??""]=ir(dn(V,"styleUrl"));y[`#${yh(O,"id")}`]=N}for(const O of Array.from(d))o.features=o.features.concat(c4(O,u,m,y));return o}function OS(e){if(e===null)return["#000000",1];let t="",n=1,o=e;return o.substring(0,1)==="#"&&(o=o.substring(1)),(o.length===6||o.length===3)&&(t=o),o.length===8&&(n=Number.parseInt(o.substring(0,2),16)/255,t=`#${o.substring(6,8)}${o.substring(4,6)}${o.substring(2,4)}`),[t??"#000000",n??1]}function l4(e){return eL(e.split(" "))}function u4(e){let t=Zi(e,"coord");const n=[],o=[];t.length===0&&(t=Zi(e,"gx:coord"));for(const m of Array.from(t))n.push(l4(ir(m)??""));const u=Zi(e,"when");for(const m of Array.from(u))o.push(ir(m));return{coords:n,times:o}}function ry(e){const t=["Polygon","LineString","Point","Track","gx:Track"];let n,o,u,m,y;const d=[],M=[];if(dn(e,"MultiGeometry")!==null)return ry(dn(e,"MultiGeometry"));if(dn(e,"MultiTrack")!==null)return ry(dn(e,"MultiTrack"));if(dn(e,"gx:MultiTrack")!==null)return ry(dn(e,"gx:MultiTrack"));for(u=0;u<t.length;u++)if(o=Zi(e,t[u]),o){for(m=0;m<o.length;m++)if(n=o[m],t[u]==="Point")d.push({type:"Point",coordinates:tL(ir(dn(n,"coordinates"))??"")});else if(t[u]==="LineString")d.push({type:"LineString",coordinates:$S(ir(dn(n,"coordinates"))??"")});else if(t[u]==="Polygon"){const A=Zi(n,"LinearRing"),O=[];for(y=0;y<A.length;y++)O.push($S(ir(dn(A[y],"coordinates"))??""));d.push({type:"Polygon",coordinates:O})}else if(t[u]==="Track"||t[u]==="gx:Track"){const A=u4(n);d.push({type:"LineString",coordinates:A.coords}),A.times.length&&M.push(A.times)}}return{geoms:d,coordTimes:M}}function c4(e,t,n,o){const u=ry(e),m={},y=ir(dn(e,"name")),d=ir(dn(e,"address")),M=ir(dn(e,"description")),A=dn(e,"TimeSpan"),O=dn(e,"TimeStamp"),R=dn(e,"ExtendedData"),N=dn(e,"visibility");let V,H=ir(dn(e,"styleUrl")),ne=dn(e,"LineStyle"),de=dn(e,"PolyStyle");if(!u.geoms.length)return[];if(y&&(m.name=y),d&&(m.address=d),H){H[0]!=="#"&&(H=`#${H}`),m.styleUrl=H,t[H]&&(m.styleHash=t[H]),o[H]&&(m.styleMapHash=o[H],m.styleHash=t[o[H].normal??""]);const X=n[m.styleHash??""];if(X){ne||(ne=dn(X,"LineStyle")),de||(de=dn(X,"PolyStyle"));const Q=dn(X,"IconStyle");if(Q){const ie=dn(Q,"Icon");if(ie){const he=ir(dn(ie,"href"));he&&(m.icon=he)}}}}if(M&&(m.description=M),A){const X=ir(dn(A,"begin")),Q=ir(dn(A,"end"));X&&Q&&(m.timespan={begin:X,end:Q})}if(O!==null&&(m.timestamp=ir(dn(O,"when"))??new Date().toISOString()),ne!==null){const X=OS(ir(dn(ne,"color"))),Q=X[0],ie=X[1],he=Number.parseFloat(ir(dn(ne,"width"))??"");Q&&(m.stroke=Q),Number.isNaN(ie)||(m["stroke-opacity"]=ie),Number.isNaN(he)||(m["stroke-width"]=he)}if(de){const X=OS(ir(dn(de,"color"))),Q=X[0],ie=X[1],he=ir(dn(de,"fill")),_e=ir(dn(de,"outline"));Q&&(m.fill=Q),Number.isNaN(ie)||(m["fill-opacity"]=ie),he&&(m["fill-opacity"]=he==="1"?m["fill-opacity"]||1:0),_e&&(m["stroke-opacity"]=_e==="1"?m["stroke-opacity"]||1:0)}if(R){const X=Zi(R,"Data"),Q=Zi(R,"SimpleData");for(V=0;V<X.length;V++)m[X[V].getAttribute("name")??""]=ir(dn(X[V],"value"))??"";for(V=0;V<Q.length;V++)m[Q[V].getAttribute("name")??""]=ir(Q[V])??""}N!==null&&(m.visibility=ir(N)??""),u.coordTimes.length!==0&&(m.coordTimes=u.coordTimes.length===1?u.coordTimes[0]:u.coordTimes);const Y={type:"Feature",geometry:u.geoms.length===1?u.geoms[0]:{type:"GeometryCollection",geometries:u.geoms},properties:m};return yh(e,"id")&&(Y.id=yh(e,"id")??void 0),[Y]}function JM(e,t){const n=Zi(e,t),o=[],u=[];let m=[];const y=n.length;if(!(y<2)){for(let d=0;d<y;d++){const M=nL(n[d]);o.push(M.coordinates),M.time&&u.push(M.time),(M.heartRate||m.length)&&(m.length===0&&(m=new Array(d).fill(null)),m.push(M.heartRate))}return{line:o,times:u,heartRates:m}}}function h4(e){const t=Zi(e,"trkseg"),n=[],o=[],u=[];let m;for(let d=0;d<t.length;d++)if(m=JM(t[d],"trkpt"),m!==void 0&&(m.line&&n.push(m.line),m.times&&m.times.length&&o.push(m.times),u.length||m.heartRates&&m.heartRates.length)){if(!u.length)for(let M=0;M<d;M++)u.push(new Array(n[M].length).fill(null));m.heartRates&&m.heartRates.length?u.push(m.heartRates):u.push(new Array(m.line.length).fill(null))}if(n.length===0)return;const y={...Zb(e),...QM(dn(e,"extensions"))};return o.length!==0&&(y.coordTimes=n.length===1?o[0]:o),u.length!==0&&(y.heartRates=n.length===1?u[0]:u),n.length===1?{type:"Feature",properties:y,geometry:{type:"LineString",coordinates:n[0]}}:{type:"Feature",properties:y,geometry:{type:"MultiLineString",coordinates:n}}}function d4(e){const t=JM(e,"rtept");return t===void 0?void 0:{type:"Feature",properties:{...Zb(e),...QM(dn(e,"extensions"))},geometry:{type:"LineString",coordinates:t.line}}}function f4(e){return{type:"Feature",properties:{...Zb(e),...lx(e,["sym"])},geometry:{type:"Point",coordinates:nL(e).coordinates}}}function QM(e){const t={};if(e){const n=dn(e,"line");if(n){const o=ir(dn(n,"color")),u=Number.parseFloat(ir(dn(n,"opacity"))??"0"),m=Number.parseFloat(ir(dn(n,"width"))??"0");o&&(t.stroke=o),Number.isNaN(u)||(t["stroke-opacity"]=u),Number.isNaN(m)||(t["stroke-width"]=m*96/25.4)}}return t}function Zb(e){const t=lx(e,["name","cmt","desc","type","time","keywords"]),n=Zi(e,"link");if(n.length!==0){t.links=[];for(const o of Array.from(n)){const u={href:yh(o,"href"),...lx(o,["text","type"])};t.links.push(u)}}return t}function FS(e){let t=0;if(!e||!e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function Zi(e,t){return e.getElementsByTagName(t)}function yh(e,t){return e.getAttribute(t)}function BS(e,t){return Number.parseFloat(yh(e,t)??"0")}function dn(e,t){const n=Zi(e,t);return n.length?n[0]:null}function p4(e){return e.normalize&&e.normalize(),e}function eL(e){return e.map(Number.parseFloat).map(t=>Number.isNaN(t)?null:t)}function ir(e){return e&&p4(e),e&&e.textContent}function lx(e,t){const n={};let o,u;for(u=0;u<t.length;u++)o=dn(e,t[u]),o&&(n[t[u]]=ir(o)??"");return n}function tL(e){return eL(e.replace(/\s*/g,"").split(","))}function $S(e){const t=e.replace(/^\s*|\s*$/g,"").split(/\s+/),n=[];for(const o of t)n.push(tL(o));return n}function nL(e){const t=[BS(e,"lon"),BS(e,"lat")],n=dn(e,"ele"),o=dn(e,"gpxtpx:hr")||dn(e,"hr"),u=dn(e,"time");let m;return n&&(m=Number.parseFloat(ir(n)??"0"),Number.isNaN(m)||t.push(m)),{coordinates:t,time:u?ir(u):null,heartRate:o!==null?Number.parseFloat(ir(o)??"0"):null}}function rL(e){let t=e;try{typeof t=="string"&&(t=Iv(t))}catch{return null}try{return Hb(t)}catch{}try{return Wb(t)}catch{}return null}function Lg(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function m4(e){return`#${Lg(e[0])}${Lg(e[1])}${Lg(e[2])}${e.length===4?Lg(e[3]):""}`}let un=class xd extends Array{constructor(t={}){super(),xr(this,"min",0),xr(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new xd({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const o=n.clone?this.clone():this;o.length=0;let u=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;for(let y=0;y<t.length;y+=1)u=Math.min(u,t[y].value),m=Math.max(m,t[y].value),o.push({value:t[y].value,color:t[y].color.slice()});return o.sort((y,d)=>y.value<d.value?-1:1),this.min=u,this.max=m,o}scale(t,n,o={clone:!0}){const u=o.clone,m=this[0].value,y=this.at(-1).value-m,d=n-t,M=[];for(let A=0;A<this.length;A+=1){const O=(this[A].value-m)/y*d+t;u?M.push({value:O,color:this[A].color.slice()}):this[A].value=O}return u?new xd({stops:M}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new xd({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let o=0;o<~~(n.length/2);o+=1){const u=n[o].color;n[o].color=n.at(-(o+1)).color,n.at(-(o+1)).color=u}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let o=0;o<this.length-1;o+=1){if(t>this[o+1].value)continue;const u=this[o].color;if(!n.smooth)return u.slice();const m=this[o].value,y=this[o+1].value,d=this[o+1].color,M=(y-t)/(y-m);return u.map((A,O)=>Math.round(A*M+d[O]*(1-M)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return m4(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const o=this.getBounds();return this.getColor(o.min+t*(o.max-o.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const o=n.getContext("2d");if(!o)throw new Error("Canvs context is missing");const u=o.getImageData(0,0,n.width,n.height),m=u.data,y=t.size,d=this[0].value,M=(this.at(-1).value-d)/y;for(let A=0;A<y;A+=1){const O=this.getColor(d+A*M,{smooth:t.smooth});m[A*4]=O[0],m[A*4+1]=O[1],m[A*4+2]=O[2],m[A*4+3]=O.length>3?O[3]:255}return o.putImageData(u,0,0),n}resample(t,n=15){const o=this.getBounds(),u=this.scale(0,1),m=1/(n-1);let y;if(t==="ease-in-square")y=Array.from({length:n},(d,M)=>{const A=M*m,O=A**2,R=u.getColor(O);return{value:A,color:R}});else if(t==="ease-out-square")y=Array.from({length:n},(d,M)=>{const A=M*m,O=1-(1-A)**2,R=u.getColor(O);return{value:A,color:R}});else if(t==="ease-out-sqrt")y=Array.from({length:n},(d,M)=>{const A=M*m,O=A**.5,R=u.getColor(O);return{value:A,color:R}});else if(t==="ease-in-sqrt")y=Array.from({length:n},(d,M)=>{const A=M*m,O=1-(1-A)**.5,R=u.getColor(O);return{value:A,color:R}});else if(t==="ease-out-exp")y=Array.from({length:n},(d,M)=>{const A=M*m,O=1-2**(-10*A),R=u.getColor(O);return{value:A,color:R}});else if(t==="ease-in-exp")y=Array.from({length:n},(d,M)=>{const A=M*m,O=2**(10*A-10),R=u.getColor(O);return{value:A,color:R}});else throw new Error("Invalid ressampling method.");return new xd({stops:y}).scale(o.min,o.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new xd({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}};const lm={NULL:new un({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new un({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new un({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new un({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new un({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new un({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new un({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new un({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new un({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new un({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new un({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new un({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new un({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new un({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new un({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new un({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new un({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new un({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new un({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new un({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new un({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new un({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new un({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new un({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new un({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new un({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new un({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new un({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new un({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new un({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new un({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new un({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new un({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new un({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new un({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new un({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new un({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new un({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new un({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new un({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new un({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new un({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new un({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new un({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new un({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new un({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new un({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new un({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new un({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})};async function g4(e,t={}){const n=t.download??!1,o=await y4(e);if(n){const u=t.filename??"maptiler_screenshot.png",m=document.createElement("a");m.style.display="none",document.body.appendChild(m),m.href=URL.createObjectURL(o),m.download=u,m.click(),setTimeout(()=>{document.body.removeChild(m),URL.revokeObjectURL(m.href)},0)}return o}function y4(e){return new Promise((t,n)=>{e.redraw(),e.once("idle",()=>{e.getCanvas().toBlob(o=>{if(!o)return n(Error("Screenshot could not be created."));t(o)},"image/png")})})}const US=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function Xb(){return US[~~(Math.random()*US.length)][~~(Math.random()*4)]}function Tv(){return`maptiler_source_${BM()}`}function Cv(){return`maptiler_layer_${BM()}`}function jS(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(let n=0;n<e.length-1;n+=1)if(t>=e[n].zoom&&t<e[n+1].zoom){const o=e[n+1].zoom-e[n].zoom,u=(t-e[n].zoom)/o;return u*e[n+1].value+(1-u)*e[n].value}return 0}function vh(e){return["interpolate",["linear"],["zoom"],...e.flatMap(t=>[t.zoom,t.value])]}function or(e){return["interpolate",["linear"],["zoom"],...e.flatMap(t=>[t.zoom,t.value])]}function v4(e,t){if(typeof t=="number"&&typeof e=="number")return 2*t+e;if(typeof t=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.flatMap(n=>[n.zoom,2*t+n.value])];if(typeof e=="number"&&Array.isArray(t))return["interpolate",["linear"],["zoom"],...t.flatMap(n=>[n.zoom,2*n.value+e])];if(Array.isArray(e)&&Array.isArray(t)){const n=Array.from(new Set([...e.map(o=>o.zoom),...t.map(o=>o.zoom)])).sort((o,u)=>o<u?-1:1);return["interpolate",["linear"],["zoom"],...n.flatMap(o=>[o,2*jS(t,o)+jS(e,o)])]}return 0}function _4(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(n=>[n.propertyValue,n.value])]}function iL(e){const t=e.trimStart(),n=`${t}${" ".repeat(e.length-t.length)}`,o=Array.from(n);if(!o.every(m=>m===" "||m==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(o.some(m=>m==="_")&&o.some(m=>m===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const u=[1];for(let m=1;m<o.length;m+=1){const y=o[m-1],d=o[m];y===d?u[u.length-1]+=1:u.push(1)}return u}function VS(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(n=>[n.value,n.color])]}function GS(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius*.025])],2,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius*.05])],4,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius*.1])],8,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius*.25])],16,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius])]]:["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.value,o.pointRadius])]}function x4(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value*.025])],2,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value*.05])],4,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value*.1])],8,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value*.25])],16,["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value])]]:["interpolate",["linear"],["get",t],...e.flatMap(o=>[o.propertyValue,o.value])]}function qS(e,t){return e.every(n=>n.color[3]===e[0].color[3])?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t],...e.getRawColorStops().flatMap(n=>{const o=n.value,u=n.color;return[o,u.length===4?u[3]/255:1]})]}function b4(e,t=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:t+1},(n,o)=>{const u=o/t;return[u,e.getColorHex(u)]}).flat()]}async function w4(e,t,n={}){var o,u;if(!t.sourceId&&!t.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let m=t.data;if(typeof m=="string"){if(Ev(m))m=`https://api.maptiler.com/data/${t.data}/features.json?key=${Ni.apiKey}`;else if(((o=m.split(".").pop())==null?void 0:o.toLowerCase().trim())==="gpx"){const y=await(await fetch(m,n)).text();m=Hb(y)}else if(((u=m.split(".").pop())==null?void 0:u.toLowerCase().trim())==="kml"){const y=await(await fetch(m,n)).text();m=Wb(y)}else{const y=Bz(m)??rL(m);y&&(m=y)}if(!m)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return k4(e,{...t,data:m})}function k4(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const n=t.sourceId??Tv(),o=t.layerId??Cv(),u={polylineLayerId:o,polylineOutlineLayerId:"",polylineSourceId:n};t.data&&!e.getSource(n)&&e.addSource(n,{type:"geojson",data:t.data});const m=t.lineWidth??3,y=t.lineColor??Xb(),d=t.lineOpacity??1,M=t.lineBlur??0,A=t.lineGapWidth??0;let O=t.lineDashArray??null;const R=t.outlineWidth??1,N=t.outlineColor??"#FFFFFF",V=t.outlineOpacity??1,H=t.outlineBlur??0;if(typeof O=="string"&&(O=iL(O)),t.outline===!0){const ne=`${o}_outline`;u.polylineOutlineLayerId=ne,e.addLayer({id:ne,type:"line",source:n,layout:{"line-join":t.lineJoin??"round","line-cap":t.lineCap??"round"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof V=="number"?V:or(V),"line-color":typeof N=="string"?N:vh(N),"line-width":v4(m,R),"line-blur":typeof H=="number"?H:or(H)}},t.beforeId)}return e.addLayer({id:o,type:"line",source:n,layout:{"line-join":t.lineJoin??"round","line-cap":t.lineCap??"round"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof d=="number"?d:or(d),"line-color":typeof y=="string"?y:vh(y),"line-width":typeof m=="number"?m:or(m),"line-blur":typeof M=="number"?M:or(M),"line-gap-width":typeof A=="number"?A:or(A),...O&&{"line-dasharray":O}}},t.beforeId),u}function S4(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const n=t.sourceId??Tv(),o=t.layerId??Cv(),u={polygonLayerId:o,polygonOutlineLayerId:t.outline?`${o}_outline`:"",polygonSourceId:n};if(t.data&&!e.getSource(n)){let ne=t.data;typeof ne=="string"&&Ev(ne)&&(ne=`https://api.maptiler.com/data/${ne}/features.json?key=${Ni.apiKey}`),e.addSource(n,{type:"geojson",data:ne})}let m=t.outlineDashArray??null;const y=t.outlineWidth??1,d=t.outlineColor??"#FFFFFF",M=t.outlineOpacity??1,A=t.outlineBlur??0,O=t.fillColor??Xb(),R=t.fillOpacity??1,N=t.outlinePosition??"center",V=t.pattern??null;typeof m=="string"&&(m=iL(m));const H=(ne=null)=>{if(e.addLayer({id:o,type:"fill",source:n,minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"fill-color":typeof O=="string"?O:vh(O),"fill-opacity":typeof R=="number"?R:or(R),...ne&&{"fill-pattern":ne}}},t.beforeId),t.outline===!0){let de;N==="inside"?typeof y=="number"?de=.5*y:de=or(y.map(({zoom:Y,value:X})=>({zoom:Y,value:.5*X}))):N==="outside"?typeof y=="number"?de=-.5*y:de=or(y.map(Y=>({zoom:Y.zoom,value:-.5*Y.value}))):de=0,e.addLayer({id:u.polygonOutlineLayerId,type:"line",source:n,layout:{"line-join":t.outlineJoin??"round","line-cap":t.outlineCap??"butt"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof M=="number"?M:or(M),"line-color":typeof d=="string"?d:vh(d),"line-width":typeof y=="number"?y:or(y),"line-blur":typeof A=="number"?A:or(A),"line-offset":de,...m&&{"line-dasharray":m}}},t.beforeId)}};return V?e.hasImage(V)?H(V):e.loadImage(V).then(ne=>{e.addImage(V,ne.data),H(V)}).catch(ne=>(console.error("Could not load the pattern image.",ne.message),H())):H(),u}function E4(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const n=t.minPointRadius??10,o=t.maxPointRadius??50,u=t.cluster??!1,m=20,y=Array.isArray(t.pointColor)?t.pointColor:lm.TURBO.scale(10,t.cluster?1e4:1e3).resample("ease-out-square"),d=y.getBounds(),M=t.sourceId??Tv(),A=t.layerId??Cv(),O=t.showLabel??u,R=t.alignOnViewport??!0,N=t.outline??!1,V=t.outlineOpacity??1,H=t.outlineWidth??1,ne=t.outlineColor??"#FFFFFF";let de;const Y=t.zoomCompensation??!0,X=t.minzoom??0,Q=t.maxzoom??23;typeof t.pointOpacity=="number"?de=t.pointOpacity:Array.isArray(t.pointOpacity)?de=or(t.pointOpacity):t.cluster?de=qS(y,"point_count"):t.property?de=qS(y,t.property):de=or([{zoom:X,value:0},{zoom:X+.25,value:1},{zoom:Q-.25,value:1},{zoom:Q,value:0}]);const ie={pointLayerId:A,clusterLayerId:"",labelLayerId:"",pointSourceId:M};if(t.data&&!e.getSource(M)){let he=t.data;typeof he=="string"&&Ev(he)&&(he=`https://api.maptiler.com/data/${he}/features.json?key=${Ni.apiKey}`),e.addSource(M,{type:"geojson",data:he,cluster:u})}if(u){ie.clusterLayerId=`${A}_cluster`;const he=Array.from({length:m},(_e,pe)=>{const Ie=d.min+pe*(d.max-d.min)/(m-1);return{value:Ie,pointRadius:n+(o-n)*(pe/(m-1))**.5,color:y.getColorHex(Ie)}});e.addLayer({id:ie.clusterLayerId,type:"circle",source:M,filter:["has","point_count"],paint:{"circle-color":typeof t.pointColor=="string"?t.pointColor:VS(he,"point_count"),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?or(t.pointRadius):GS(he,"point_count",!1),"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-opacity":de,...N&&{"circle-stroke-opacity":typeof V=="number"?V:or(V),"circle-stroke-width":typeof H=="number"?H:or(H),"circle-stroke-color":typeof ne=="string"?ne:vh(ne)}},minzoom:X,maxzoom:Q},t.beforeId),e.addLayer({id:ie.pointLayerId,type:"circle",source:M,filter:["!",["has","point_count"]],paint:{"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof t.pointColor=="string"?t.pointColor:y.getColorHex(y.getBounds().min),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?or(t.pointRadius):he[0].pointRadius*.75,"circle-opacity":de,...N&&{"circle-stroke-opacity":typeof V=="number"?V:or(V),"circle-stroke-width":typeof H=="number"?H:or(H),"circle-stroke-color":typeof ne=="string"?ne:vh(ne)}},minzoom:X,maxzoom:Q},t.beforeId)}else{let he=typeof t.pointColor=="string"?t.pointColor:Array.isArray(t.pointColor)?t.pointColor.getColorHex(t.pointColor.getBounds().min):Xb(),_e=typeof t.pointRadius=="number"?Y?or([{zoom:0,value:t.pointRadius*.025},{zoom:2,value:t.pointRadius*.05},{zoom:4,value:t.pointRadius*.1},{zoom:8,value:t.pointRadius*.25},{zoom:16,value:t.pointRadius*1}]):t.pointRadius:Array.isArray(t.pointRadius)?or(t.pointRadius):Y?or([{zoom:0,value:n*.05},{zoom:2,value:n*.1},{zoom:4,value:n*.2},{zoom:8,value:n*.5},{zoom:16,value:n*1}]):n;if(t.property&&Array.isArray(t.pointColor)){const pe=Array.from({length:m},(Ie,Le)=>{const $e=d.min+Le*(d.max-d.min)/(m-1);return{value:$e,pointRadius:typeof t.pointRadius=="number"?t.pointRadius:n+(o-n)*(Le/(m-1))**.5,color:typeof t.pointColor=="string"?t.pointColor:y.getColorHex($e)}});he=VS(pe,t.property),_e=GS(pe,t.property,Y)}e.addLayer({id:ie.pointLayerId,type:"circle",source:M,layout:{"circle-sort-key":t.property?["/",1,["get",t.property]]:0},paint:{"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-color":he,"circle-opacity":de,"circle-radius":_e,...N&&{"circle-stroke-opacity":typeof V=="number"?V:or(V),"circle-stroke-width":typeof H=="number"?H:or(H),"circle-stroke-color":typeof ne=="string"?ne:vh(ne)}},minzoom:X,maxzoom:Q},t.beforeId)}if(O!==!1&&(t.cluster||t.property)){ie.labelLayerId=`${A}_label`;const he=t.labelColor??"#fff",_e=t.labelSize??12;e.addLayer({id:ie.labelLayerId,type:"symbol",source:M,filter:["has",t.cluster?"point_count":t.property],layout:{"text-field":t.cluster?"{point_count_abbreviated}":`{${t.property}}`,"text-font":["Noto Sans Regular"],"text-size":_e,"text-pitch-alignment":R?"viewport":"map","symbol-sort-key":["/",1,["get",t.cluster?"point_count":t.property]]},paint:{"text-color":he,"text-opacity":de},minzoom:X,maxzoom:Q},t.beforeId)}return ie}function I4(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const n=t.sourceId??Tv(),o=t.layerId??Cv(),u=t.minzoom??0,m=t.maxzoom??23,y=t.zoomCompensation??!0,d=t.opacity??[{zoom:u,value:0},{zoom:u+.25,value:1},{zoom:m-.25,value:1},{zoom:m,value:0}];let M=Array.isArray(t.colorRamp)?t.colorRamp:lm.TURBO.transparentStart();const A=M.getBounds();(A.min!==0||A.max!==1)&&(M=M.scale(0,1)),M.hasTransparentStart()||(M=M.transparentStart());const O=t.intensity??[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],R=t.property??null,N=t.weight??1;let V=1;R?typeof N=="number"?(V=N,typeof t.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(N)?V=_4(N,R):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof N=="number"?V=N:Array.isArray(N)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const H=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],ne=t.radius??(y?H:10);let de=1;typeof ne=="number"?de=ne:Array.isArray(ne)&&"zoom"in ne[0]?de=or(ne):R&&Array.isArray(ne)&&"propertyValue"in ne[0]?de=x4(ne,R,y):!R&&Array.isArray(ne)&&"propertyValue"in ne[0]?(de=or(H),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):de=or(H);const Y={heatmapLayerId:o,heatmapSourceId:n};if(t.data&&!e.getSource(n)){let X=t.data;typeof X=="string"&&Ev(X)&&(X=`https://api.maptiler.com/data/${X}/features.json?key=${Ni.apiKey}`),e.addSource(n,{type:"geojson",data:X})}return e.addLayer({id:o,type:"heatmap",source:n,minzoom:u,maxzoom:m,paint:{"heatmap-weight":V,"heatmap-intensity":typeof O=="number"?O:or(O),"heatmap-color":b4(M),"heatmap-radius":de,"heatmap-opacity":typeof d=="number"?d:or(d)}},t.beforeId),Y}const ux={addPolyline:w4,addPolygon:S4,addPoint:E4,addHeatmap:I4,takeScreenshot:g4};Oz();function T4(){return Lz.version}const C4=Ht.Map,M4=Ht.Marker,L4=Ht.Popup,P4=Ht.Style,A4=Ht.CanvasSource,R4=Ht.GeoJSONSource,N4=Ht.ImageSource,z4=Ht.RasterTileSource,D4=Ht.RasterDEMTileSource,O4=Ht.VectorTileSource,F4=Ht.VideoSource,B4=Ht.NavigationControl,$4=Ht.GeolocateControl,U4=Ht.AttributionControl,j4=Ht.LogoControl,V4=Ht.ScaleControl,G4=Ht.FullscreenControl,q4=Ht.TerrainControl,H4=Ht.BoxZoomHandler,W4=Ht.ScrollZoomHandler,Z4=Ht.CooperativeGesturesHandler,X4=Ht.KeyboardHandler,Y4=Ht.TwoFingersTouchPitchHandler,K4=Ht.MapWheelEvent,J4=Ht.MapTouchEvent,Q4=Ht.MapMouseEvent,eD=Ht.config,tD=Ht.getVersion,{setRTLTextPlugin:nD,getRTLTextPluginStatus:rD,LngLat:iD,LngLatBounds:oD,MercatorCoordinate:sD,Evented:aD,AJAXError:lD,prewarm:uD,clearPrewarmedResources:cD,Hash:hD,Point:dD,EdgeInsets:fD,DragRotateHandler:pD,DragPanHandler:mD,TwoFingersTouchZoomRotateHandler:gD,DoubleClickZoomHandler:yD,TwoFingersTouchZoomHandler:vD,TwoFingersTouchRotateHandler:_D,getWorkerCount:xD,setWorkerCount:bD,getMaxParallelImageRequests:wD,setMaxParallelImageRequests:kD,getWorkerUrl:SD,setWorkerUrl:ED,addSourceType:ID,importScriptInWorkers:TD,addProtocol:CD,removeProtocol:MD}=Ht,LD=Object.freeze(Object.defineProperty({__proto__:null,AJAXError:lD,AttributionControl:Kz,AttributionControlMLGL:U4,BoxZoomHandler:Qz,BoxZoomHandlerMLGL:H4,CanvasSource:Gz,CanvasSourceMLGL:A4,ColorRamp:un,ColorRampCollection:lm,CooperativeGesturesHandler:t4,CooperativeGesturesHandlerMLGL:Z4,DoubleClickZoomHandler:yD,DragPanHandler:mD,DragRotateHandler:pD,EdgeInsets:fD,Evented:aD,FullscreenControl:qM,FullscreenControlMLGL:G4,GeoJSONSource:qz,GeoJSONSourceMLGL:R4,GeolocateControl:jM,GeolocateControlMLGL:$4,GeolocationType:KM,Hash:hD,ImageSource:Hz,ImageSourceMLGL:N4,KeyboardHandler:n4,KeyboardHandlerMLGL:X4,Language:Bn,LngLat:iD,LngLatBounds:oD,LogoControl:VM,LogoControlMLGL:j4,Map:Gb,MapMLGL:C4,MapMouseEvent:s4,MapMouseEventMLGL:Q4,MapStyle:wv,MapStyleVariant:_v,MapTouchEvent:o4,MapTouchEventMLGL:J4,MapWheelEvent:i4,MapWheelEventMLGL:K4,MaptilerGeolocateControl:ZM,MaptilerLogoControl:sx,MaptilerNavigationControl:WM,MaptilerTerrainControl:HM,Marker:jz,MarkerMLGL:M4,MercatorCoordinate:sD,NavigationControMLGL:B4,NavigationControl:UM,Point:dD,Popup:$M,PopupMLGL:L4,RasterDEMTileSource:Zz,RasterDEMTileSourceMLGL:D4,RasterTileSource:Wz,RasterTileSourceMLGL:z4,ReferenceMapStyle:xv,ScaleControl:GM,ScaleControlMLGL:V4,ScrollZoomHandler:e4,ScrollZoomHandlerMLGL:W4,SdkConfig:DM,ServiceError:xa,Style:Vz,StyleMLGL:P4,TerrainControMLGL:q4,TerrainControl:Jz,TwoFingersTouchPitchHandler:r4,TwoFingersTouchPitchHandlerMLGL:Y4,TwoFingersTouchRotateHandler:_D,TwoFingersTouchZoomHandler:vD,TwoFingersTouchZoomRotateHandler:gD,VectorTileSource:Xz,VectorTileSourceMLGL:O4,VideoSource:Yz,VideoSourceMLGL:F4,addProtocol:CD,addSourceType:ID,areSameLanguages:cN,bufferToPixelDataBrowser:hM,circumferenceAtLatitude:uM,clearPrewarmedResources:cD,config:Ni,configMLGL:eD,coordinates:xN,data:wN,elevation:UN,expandMapStyle:Pb,geocoding:gN,geolocation:K1,getAutoLanguage:Y1,getBrowserLanguage:nx,getBufferToPixelDataParser:Ob,getLanguageInfoFromCode:Sh,getLanguageInfoFromFlag:sm,getLanguageInfoFromKey:KC,getMapLibreVersion:tD,getMaxParallelImageRequests:wD,getRTLTextPluginStatus:rD,getTileCache:Db,getVersion:T4,getWorkerCount:xD,getWorkerUrl:SD,gpx:Hb,gpxOrKml:rL,hasChildNodeWithName:qb,helpers:ux,importScriptInWorkers:TD,isLanguageInfo:Lb,kml:Wb,mapStylePresetList:am,math:zb,misc:tM,prewarm:uD,removeProtocol:MD,setMaxParallelImageRequests:kD,setRTLTextPlugin:nD,setWorkerCount:bD,setWorkerUrl:ED,staticMaps:AN,str2xml:Iv,styleToStyle:bv,toLanguageInfo:By,xml2str:ax},Symbol.toStringTag,{value:"Module"}));var oL={},PD=Object.defineProperty,sL=e=>{throw TypeError(e)},AD=(e,t,n)=>t in e?PD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HS=(e,t,n)=>AD(e,typeof t!="symbol"?t+"":t,n),aL=(e,t,n)=>t.has(e)||sL("Cannot "+n),Na=(e,t,n)=>(aL(e,t,"read from private field"),t.get(e)),WS=(e,t,n)=>t.has(e)?sL("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),F_=(e,t,n,o)=>(aL(e,t,"write to private field"),t.set(e,n),n);function Br(){}function RD(e,t){for(const n in t)e[n]=t[n];return e}function lL(e){return e()}function ZS(){return Object.create(null)}function gu(e){e.forEach(lL)}function uL(e){return typeof e=="function"}function Ec(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Pg;function zo(e,t){return e===t?!0:(Pg||(Pg=document.createElement("a")),Pg.href=t,e===Pg.href)}function ND(e){return Object.keys(e).length===0}function zD(e,t,n,o){if(e){const u=cL(e,t,n,o);return e[0](u)}}function cL(e,t,n,o){return e[1]&&o?RD(n.ctx.slice(),e[1](o(t))):n.ctx}function DD(e,t,n,o){if(e[2]&&o){const u=e[2](o(n));if(t.dirty===void 0)return u;if(typeof u=="object"){const m=[],y=Math.max(t.dirty.length,u.length);for(let d=0;d<y;d+=1)m[d]=t.dirty[d]|u[d];return m}return t.dirty|u}return t.dirty}function OD(e,t,n,o,u,m){if(u){const y=cL(t,n,o,m);e.p(y,u)}}function FD(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function XS(e){return e??""}function On(e,t){e.appendChild(t)}function Gr(e,t,n){e.insertBefore(t,n||null)}function $r(e){e.parentNode&&e.parentNode.removeChild(e)}function br(e){return document.createElement(e)}function Va(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _c(e){return document.createTextNode(e)}function Rs(){return _c(" ")}function BD(){return _c("")}function Jo(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $D(e){return function(t){return t.preventDefault(),e.call(this,t)}}function it(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function UD(e){return Array.from(e.childNodes)}function um(e,t){t=""+t,e.data!==t&&(e.data=t)}function YS(e,t){e.value=t??""}function pa(e,t,n){e.classList.toggle(t,!!n)}function jD(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}let cm;function $p(e){cm=e}function hL(){if(!cm)throw new Error("Function called outside component initialization");return cm}function VD(e){hL().$$.on_destroy.push(e)}function GD(){const e=hL();return(t,n,{cancelable:o=!1}={})=>{const u=e.$$.callbacks[t];if(u){const m=jD(t,n,{cancelable:o});return u.slice().forEach(y=>{y.call(e,m)}),!m.defaultPrevented}return!0}}function KS(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const bd=[],cx=[];let Hd=[];const JS=[],qD=Promise.resolve();let hx=!1;function HD(){hx||(hx=!0,qD.then(dL))}function dx(e){Hd.push(e)}const B_=new Set;let hd=0;function dL(){if(hd!==0)return;const e=cm;do{try{for(;hd<bd.length;){const t=bd[hd];hd++,$p(t),WD(t.$$)}}catch(t){throw bd.length=0,hd=0,t}for($p(null),bd.length=0,hd=0;cx.length;)cx.pop()();for(let t=0;t<Hd.length;t+=1){const n=Hd[t];B_.has(n)||(B_.add(n),n())}Hd.length=0}while(bd.length);for(;JS.length;)JS.pop()();hx=!1,B_.clear(),$p(e)}function WD(e){if(e.fragment!==null){e.update(),gu(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(dx)}}function ZD(e){const t=[],n=[];Hd.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),Hd=t}const iy=new Set;let dh;function oy(){dh={r:0,c:[],p:dh}}function sy(){dh.r||gu(dh.c),dh=dh.p}function pi(e,t){e&&e.i&&(iy.delete(e),e.i(t))}function Hi(e,t,n,o){if(e&&e.o){if(iy.has(e))return;iy.add(e),dh.c.push(()=>{iy.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function QS(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function XD(e,t){Hi(e,1,1,()=>{t.delete(e.key)})}function YD(e,t,n,o,u,m,y,d,M,A,O,R){let N=e.length,V=m.length,H=N;const ne={};for(;H--;)ne[e[H].key]=H;const de=[],Y=new Map,X=new Map,Q=[];for(H=V;H--;){const pe=R(u,m,H),Ie=n(pe);let Le=y.get(Ie);Le?Q.push(()=>Le.p(pe,t)):(Le=A(Ie,pe),Le.c()),Y.set(Ie,de[H]=Le),Ie in ne&&X.set(Ie,Math.abs(H-ne[Ie]))}const ie=new Set,he=new Set;function _e(pe){pi(pe,1),pe.m(d,O),y.set(pe.key,pe),O=pe.first,V--}for(;N&&V;){const pe=de[V-1],Ie=e[N-1],Le=pe.key,$e=Ie.key;pe===Ie?(O=pe.first,N--,V--):Y.has($e)?!y.has(Le)||ie.has(Le)?_e(pe):he.has($e)?N--:X.get(Le)>X.get($e)?(he.add(Le),_e(pe)):(ie.add($e),N--):(M(Ie,y),N--)}for(;N--;){const pe=e[N];Y.has(pe.key)||M(pe,y)}for(;V;)_e(de[V-1]);return gu(Q),de}function xc(e){e&&e.c()}function hu(e,t,n){const{fragment:o,after_update:u}=e.$$;o&&o.m(t,n),dx(()=>{const m=e.$$.on_mount.map(lL).filter(uL);e.$$.on_destroy?e.$$.on_destroy.push(...m):gu(m),e.$$.on_mount=[]}),u.forEach(dx)}function du(e,t){const n=e.$$;n.fragment!==null&&(ZD(n.after_update),gu(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function KD(e,t){e.$$.dirty[0]===-1&&(bd.push(e),HD(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ic(e,t,n,o,u,m,y=null,d=[-1]){const M=cm;$p(e);const A=e.$$={fragment:null,ctx:[],props:m,update:Br,not_equal:u,bound:ZS(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(M?M.$$.context:[])),callbacks:ZS(),dirty:d,skip_bound:!1,root:t.target||M.$$.root};y&&y(A.root);let O=!1;if(A.ctx=n?n(e,t.props||{},(R,N,...V)=>{const H=V.length?V[0]:N;return A.ctx&&u(A.ctx[R],A.ctx[R]=H)&&(!A.skip_bound&&A.bound[R]&&A.bound[R](H),O&&KD(e,R)),N}):[],A.update(),O=!0,gu(A.before_update),A.fragment=o?o(A.ctx):!1,t.target){if(t.hydrate){const R=UD(t.target);A.fragment&&A.fragment.l(R),R.forEach($r)}else A.fragment&&A.fragment.c();t.intro&&pi(e.$$.fragment),hu(e,t.target,t.anchor),dL()}$p(M)}class Tc{constructor(){HS(this,"$$"),HS(this,"$$set")}$destroy(){du(this,1),this.$destroy=Br}$on(t,n){if(!uL(n))return Br;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const u=o.indexOf(n);u!==-1&&o.splice(u,1)}}$set(t){this.$$set&&!ND(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const JD="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(JD);function QD(e){let t,n;return{c(){t=Va("svg"),n=Va("path"),it(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),it(t,"viewBox","0 0 14 14"),it(t,"width","13"),it(t,"height","13"),it(t,"class","svelte-en2qvf")},m(o,u){Gr(o,t,u),On(t,n)},p:Br,i:Br,o:Br,d(o){o&&$r(t)}}}class fL extends Tc{constructor(t){super(),Ic(this,t,null,QD,Ec,{})}}function eO(e){let t,n;return{c(){t=Va("svg"),n=Va("path"),it(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),it(t,"viewBox","0 0 30 30"),it(t,"fill","none"),it(t,"xmlns","http://www.w3.org/2000/svg"),it(t,"class","svelte-d2loi5")},m(o,u){Gr(o,t,u),On(t,n)},p:Br,i:Br,o:Br,d(o){o&&$r(t)}}}class pL extends Tc{constructor(t){super(),Ic(this,t,null,eO,Ec,{})}}function tO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"area.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"area.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function nO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"reverse.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"reverse.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function rO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"poi.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"poi.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function iO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"postal_code.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"postal_code.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function oO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"street.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"street.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function sO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"road.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"road.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function aO(e){let t,n;return{c(){t=br("img"),zo(t.src,n=e[3]+"housenumber.svg")||it(t,"src",n),it(t,"alt",e[6]),it(t,"class","svelte-ltkwvy")},m(o,u){Gr(o,t,u)},p(o,u){u&8&&!zo(t.src,n=o[3]+"housenumber.svg")&&it(t,"src",n),u&64&&it(t,"alt",o[6])},d(o){o&&$r(t)}}}function lO(e){let t,n,o,u;return{c(){t=br("img"),zo(t.src,n=e[5])||it(t,"src",n),it(t,"alt",e[4]),it(t,"class","svelte-ltkwvy")},m(m,y){Gr(m,t,y),o||(u=Jo(t,"error",e[14]),o=!0)},p(m,y){y&32&&!zo(t.src,n=m[5])&&it(t,"src",n),y&16&&it(t,"alt",m[4])},d(m){m&&$r(t),o=!1,u()}}}function eE(e){let t,n;return{c(){t=br("span"),n=_c(e[6]),it(t,"class","secondary svelte-ltkwvy")},m(o,u){Gr(o,t,u),On(t,n)},p(o,u){u&64&&um(n,o[6])},d(o){o&&$r(t)}}}function uO(e){var t,n;let o,u,m,y,d,M,A,O,R=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",N,V,H=e[2]==="always"||e[2]&&!e[0].address&&((t=e[0].properties)==null?void 0:t.kind)!=="road"&&((n=e[0].properties)==null?void 0:n.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],ne,de,Y=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",X,Q,ie;function he(Le,$e){var Ze,et;return $e&1&&(u=null),$e&1&&(m=null),$e&1&&(y=null),Le[5]?lO:Le[0].address?aO:((Ze=Le[0].properties)==null?void 0:Ze.kind)==="road"||((et=Le[0].properties)==null?void 0:et.kind)==="road_relation"?sO:(u==null&&(u=!!Le[0].id.startsWith("address.")),u?oO:(m==null&&(m=!!Le[0].id.startsWith("postal_code.")),m?iO:(y==null&&(y=!!Le[0].id.startsWith("poi.")),y?rO:Le[7]?nO:tO)))}let _e=he(e,-1),pe=_e(e),Ie=H&&eE(e);return{c(){o=br("li"),pe.c(),d=Rs(),M=br("span"),A=br("span"),O=br("span"),N=_c(R),V=Rs(),Ie&&Ie.c(),ne=Rs(),de=br("span"),X=_c(Y),it(O,"class","primary svelte-ltkwvy"),it(A,"class","svelte-ltkwvy"),it(de,"class","line2 svelte-ltkwvy"),it(M,"class","texts svelte-ltkwvy"),it(o,"tabindex","0"),it(o,"data-selected",e[1]),it(o,"class","svelte-ltkwvy"),pa(o,"selected",e[1])},m(Le,$e){Gr(Le,o,$e),pe.m(o,null),On(o,d),On(o,M),On(M,A),On(A,O),On(O,N),On(A,V),Ie&&Ie.m(A,null),On(M,ne),On(M,de),On(de,X),Q||(ie=[Jo(o,"mouseenter",e[12]),Jo(o,"focus",e[13])],Q=!0)},p(Le,[$e]){var Ze,et;_e===(_e=he(Le,$e))&&pe?pe.p(Le,$e):(pe.d(1),pe=_e(Le),pe&&(pe.c(),pe.m(o,d))),$e&1&&R!==(R=(Le[7]?Le[0].place_name:Le[0].place_name.replace(/,.*/,""))+"")&&um(N,R),$e&37&&(H=Le[2]==="always"||Le[2]&&!Le[0].address&&((Ze=Le[0].properties)==null?void 0:Ze.kind)!=="road"&&((et=Le[0].properties)==null?void 0:et.kind)!=="road_relation"&&!Le[0].id.startsWith("address.")&&!Le[0].id.startsWith("postal_code.")&&(!Le[0].id.startsWith("poi.")||!Le[5])&&!Le[7]),H?Ie?Ie.p(Le,$e):(Ie=eE(Le),Ie.c(),Ie.m(A,null)):Ie&&(Ie.d(1),Ie=null),$e&1&&Y!==(Y=(Le[7]?"":Le[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&um(X,Y),$e&2&&it(o,"data-selected",Le[1]),$e&2&&pa(o,"selected",Le[1])},i:Br,o:Br,d(Le){Le&&$r(o),pe.d(),Ie&&Ie.d(),Q=!1,gu(ie)}}}function cO(e,t,n){var o;let u,m,{feature:y}=t,{selected:d=!1}=t,{showPlaceType:M}=t,{missingIconsCache:A}=t,{iconsBaseUrl:O}=t;const R=(o=y.properties)==null?void 0:o.categories;let N,V,H=0,ne=y.place_type[0]==="reverse";function de(){V&&A.add(V),n(10,H++,H)}function Y(ie){KS.call(this,e,ie)}function X(ie){KS.call(this,e,ie)}const Q=()=>de();return e.$$set=ie=>{"feature"in ie&&n(0,y=ie.feature),"selected"in ie&&n(1,d=ie.selected),"showPlaceType"in ie&&n(2,M=ie.showPlaceType),"missingIconsCache"in ie&&n(9,A=ie.missingIconsCache),"iconsBaseUrl"in ie&&n(3,O=ie.iconsBaseUrl)},e.$$.update=()=>{var ie,he,_e,pe;if(e.$$.dirty&3640)do n(11,u--,u),n(4,N=R==null?void 0:R[u]),n(5,V=N?O+N.replace(/ /g,"_")+".svg":void 0);while(u>-1&&(!V||A.has(V)));e.$$.dirty&1&&n(6,m=y.id.startsWith("poi.")?(he=(ie=y.properties)==null?void 0:ie.categories)==null?void 0:he.join(", "):((pe=(_e=y.properties)==null?void 0:_e.place_type_name)==null?void 0:pe[0])??y.place_type[0])},n(11,u=(R==null?void 0:R.length)??0),[y,d,M,O,N,V,m,ne,de,A,H,u,Y,X,Q]}class hO extends Tc{constructor(t){super(),Ic(this,t,cO,uO,Ec,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function dO(e){let t;return{c(){t=br("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',it(t,"class","svelte-7cmwmc")},m(n,o){Gr(n,t,o)},p:Br,i:Br,o:Br,d(n){n&&$r(t)}}}class fO extends Tc{constructor(t){super(),Ic(this,t,null,dO,Ec,{})}}function pO(e){let t,n,o;return{c(){t=Va("svg"),n=Va("path"),it(n,"stroke-width","4"),it(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),it(n,"class","svelte-gzo3ar"),it(t,"width",o=e[0]==="list"?20:void 0),it(t,"viewBox","0 0 70 85"),it(t,"fill","none"),it(t,"class","svelte-gzo3ar"),pa(t,"in-map",e[0]!=="list"),pa(t,"list-icon",e[0]==="list")},m(u,m){Gr(u,t,m),On(t,n)},p(u,[m]){m&1&&o!==(o=u[0]==="list"?20:void 0)&&it(t,"width",o),m&1&&pa(t,"in-map",u[0]!=="list"),m&1&&pa(t,"list-icon",u[0]==="list")},i:Br,o:Br,d(u){u&&$r(t)}}}function mO(e,t,n){let{displayIn:o}=t;return e.$$set=u=>{"displayIn"in u&&n(0,o=u.displayIn)},[o]}class gO extends Tc{constructor(t){super(),Ic(this,t,mO,pO,Ec,{displayIn:0})}}function yO(e){let t,n;return{c(){t=Va("svg"),n=Va("path"),it(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),it(t,"viewBox","0 0 60.006 21.412"),it(t,"width","14"),it(t,"height","20"),it(t,"class","svelte-en2qvf")},m(o,u){Gr(o,t,u),On(t,n)},p:Br,i:Br,o:Br,d(o){o&&$r(t)}}}class vO extends Tc{constructor(t){super(),Ic(this,t,null,yO,Ec,{})}}function _O(e){let t,n,o;return{c(){t=Va("svg"),n=Va("circle"),o=Va("path"),it(n,"cx","4.789"),it(n,"cy","4.787"),it(n,"r","3.85"),it(n,"class","svelte-1aq105l"),it(o,"d","M12.063 12.063 7.635 7.635"),it(o,"class","svelte-1aq105l"),it(t,"xmlns","http://www.w3.org/2000/svg"),it(t,"width","13"),it(t,"height","13"),it(t,"viewBox","0 0 13 13"),it(t,"class","svelte-1aq105l")},m(u,m){Gr(u,t,m),On(t,n),On(t,o)},p:Br,i:Br,o:Br,d(u){u&&$r(t)}}}class xO extends Tc{constructor(t){super(),Ic(this,t,null,_O,Ec,{})}}function bO(e,t,n){const o=t[1],u=t[0],m=o-u;return e===o&&n?e:((e-u)%m+m)%m+u}function tE(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let mp;async function wO(e,t,n){const o=e==null?void 0:e.getCenterAndZoom();for(const u of t??[])if(!(o&&(u.minZoom!=null&&u.minZoom>o[0]||u.maxZoom!=null&&u.maxZoom<o[0]))){if(u.type==="fixed")return u.coordinates.join(",");e:if(u.type==="client-geolocation"){if(mp&&u.cachedLocationExpiry&&mp.time+u.cachedLocationExpiry>Date.now()){if(!mp.coords)break e;return mp.coords}let m;try{return m=await new Promise((y,d)=>{n.signal.addEventListener("abort",()=>{d(Error("aborted"))}),navigator.geolocation.getCurrentPosition(M=>{y([M.coords.longitude,M.coords.latitude].map(A=>A.toFixed(6)).join(","))},M=>{d(M)},u)}),m}catch{}finally{u.cachedLocationExpiry&&(mp={time:Date.now(),coords:m})}if(n.signal.aborted)return}if(u.type==="server-geolocation")return"ip";if(o&&u.type==="map-center")return o[1].toFixed(6)+","+o[2].toFixed(6)}}const kO=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,nE=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,rE=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?$/i,iE=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,oE=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,sE=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?$/i;function SO(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(V=>Number(V.trim())),n=Number(t[0]),o=Number(t[1]),u=Math.abs(n),m=Math.abs(o),y=n>0?"N":"S",d=o>0?"E":"W";let M;e=="DD"&&(M=`${u}° ${y}, ${m}° ${d}`);const A=Math.floor(u),O=Math.floor(m),R=(u-A)*60,N=(m-O)*60;if(e=="DM"){let V=aE(R,3).toFixed(3).padStart(6,"0"),H=aE(N,3).toFixed(3).padStart(6,"0");V.endsWith(".000")&&H.endsWith(".000")&&(V=V.replace(/\.000$/,""),H=H.replace(/\.000$/,"")),M=`${A}° ${V}' ${y}, ${O}° ${H}' ${d}`}if(e=="DMS"){const V=Math.floor(R),H=Math.floor(N);let ne=((R-V)*60).toFixed(1).padStart(4,"0"),de=((N-H)*60).toFixed(1).padStart(4,"0");const Y=V.toString().padStart(2,"0"),X=H.toString().padStart(2,"0");ne.endsWith(".0")&&de.endsWith(".0")&&(ne=ne.replace(/\.0$/,""),de=de.replace(/\.0$/,"")),M=`${A}° ${Y}' ${ne}" ${y}, ${O}° ${X}' ${de}" ${d}`}return M}else throw new Error("no decimal coordinates to convert")}function aE(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function Yb(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,o=null,u="",m="",y=null,d=[],M=!1;if(kO.test(e))throw new Error("invalid coordinate value");if(nE.test(e))if(d=nE.exec(e),M=gp(d),M)n=Math.abs(d[1])+d[2]/60,Number(d[1])<0&&(n*=-1),o=Math.abs(d[3])+d[4]/60,Number(d[3])<0&&(o*=-1),y="DM";else throw new Error("invalid coordinate format");else if(rE.test(e))if(d=rE.exec(e),M=gp(d),M){if(n=d[2],o=d[6],n.includes(",")&&(n=n.replace(",",".")),o.includes(",")&&(o=o.replace(",",".")),y="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(o))==Number(o))throw new Error("integer only coordinate provided");d[1]?(u=d[1],m=d[5]):d[4]&&(u=d[4],m=d[8])}else throw new Error("invalid decimal coordinate format");else if(iE.test(e))if(d=iE.exec(e),M=gp(d),M)n=Math.abs(parseInt(d[2])),d[4]&&(n+=d[4]/60,y="DM"),d[6]&&(n+=d[6].replace(",",".")/3600,y="DMS"),parseInt(d[2])<0&&(n=-1*n),o=Math.abs(parseInt(d[9])),d[11]&&(o+=d[11]/60),d[13]&&(o+=d[13].replace(",",".")/3600),parseInt(d[9])<0&&(o=-1*o),d[1]?(u=d[1],m=d[8]):d[7]&&(u=d[7],m=d[14]);else throw new Error("invalid DMS coordinates format");else if(oE.test(e))if(d=oE.exec(e),M=gp(d),M)n=Math.abs(parseInt(d[2])),d[4]&&(n+=d[4]/60,y="DM"),d[6]&&(n+=d[6]/3600,y="DMS"),parseInt(d[2])<0&&(n=-1*n),o=Math.abs(parseInt(d[10])),d[12]&&(o+=d[12]/60),d[14]&&(o+=d[14]/3600),parseInt(d[10])<0&&(o=-1*o),d[1]?(u=d[1],m=d[9]):d[8]&&(u=d[8],m=d[16]);else throw new Error("invalid DMS coordinates format");else if(sE.test(e)){if(d=sE.exec(e),M=gp(d),d.filter(A=>A).length<=5)throw new Error("invalid coordinates format");if(M)n=Math.abs(parseInt(d[2])),d[4]&&(n+=d[4].replace(",",".")/60,y="DM"),d[6]&&(n+=d[6].replace(",",".")/3600,y="DMS"),parseInt(d[2])<0&&(n=-1*n),o=Math.abs(parseInt(d[10])),d[12]&&(o+=d[12].replace(",",".")/60),d[14]&&(o+=d[14].replace(",",".")/3600),parseInt(d[10])<0&&(o=-1*o),d[1]?(u=d[1],m=d[9]):d[8]&&(u=d[8],m=d[16]);else throw new Error("invalid coordinates format")}if(M){if(Math.abs(o)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(u&&!m||!u&&m)throw new Error("invalid coordinates value");if(u&&u==m)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),o.toString().includes(",")&&(o=o.replace(",","."));let A=/S|SOUTH/i;A.test(u)&&n>0&&(n=-1*n),A=/W|WEST/i,A.test(m)&&o>0&&(o=-1*o);const O=d[0].trim();let R,N;const V=/[,/;\u0020]/g,H=O.match(V);if(H==null){const Y=Math.floor(e.length/2);R=O.substring(0,Y).trim(),N=O.substring(Y).trim()}else{let Y;H.length%2==1?Y=Math.floor(H.length/2):Y=H.length/2-1;let X=0;if(Y==0)X=O.indexOf(H[0]),R=O.substring(0,X).trim(),N=O.substring(X+1).trim();else{let Q=0,ie=0;for(;Q<=Y;)X=O.indexOf(H[Q],ie),ie=X+1,Q++;R=O.substring(0,X).trim(),N=O.substring(X+1).trim()}}const ne=R.split(".");if(ne.length==2&&ne[1]==0&&ne[1].length!=2)throw new Error("invalid coordinates format");const de=N.split(".");if(de.length==2&&de[1]==0&&de[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(R)||/^\d+$/.test(N))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),o=Number(Number(o).toFixed(t)),Object.freeze({verbatimCoordinates:O,verbatimLatitude:R,verbatimLongitude:N,decimalLatitude:n,decimalLongitude:o,decimalCoordinates:`${n},${o}`,originalFormat:y,closeEnough:EO,toCoordinateFormat:SO})}else throw new Error("coordinates pattern match failed")}function gp(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,o=/[eastsouthnorthwest]+/i,u=t.length/2;for(let m=0;m<u;m++){const y=t[m],d=t[m+u],M=n.test(y)&&n.test(d),A=o.test(y)&&o.test(d),O=y==d;if(!(y==null&&d==null)){if(y==null||d==null)return!1;if(M||A||O)continue;return!1}}return!0}function lE(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function EO(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return lE(this.decimalLatitude,Number(t[0]))&&lE(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const IO=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Yb.to=IO;const TO=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],CO={decimalLatitude:40.123,decimalLongitude:-74.123},MO=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],LO=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function PO(){const e=[];return TO.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...CO})}),[...e,...MO,...LO]}const AO=PO();Yb.formats=AO.map(e=>e.verbatimCoordinates);const RO=Yb;function uE(e,t,n){const o=e.slice();return o[81]=t[n],o[83]=n,o}function cE(e){let t,n;return t=new fO({}),{c(){xc(t.$$.fragment)},m(o,u){hu(t,o,u),n=!0},i(o){n||(pi(t.$$.fragment,o),n=!0)},o(o){Hi(t.$$.fragment,o),n=!1},d(o){du(t,o)}}}function hE(e){let t,n,o,u,m;return n=new vO({}),{c(){t=br("button"),xc(n.$$.fragment),it(t,"type","button"),it(t,"title",e[9]),it(t,"class","svelte-zh3kmv"),pa(t,"active",e[0])},m(y,d){Gr(y,t,d),hu(n,t,null),o=!0,u||(m=Jo(t,"click",e[67]),u=!0)},p(y,d){(!o||d[0]&512)&&it(t,"title",y[9]),(!o||d[0]&1)&&pa(t,"active",y[0])},i(y){o||(pi(n.$$.fragment,y),o=!0)},o(y){Hi(n.$$.fragment,y),o=!1},d(y){y&&$r(t),du(n),u=!1,m()}}}function NO(e){let t,n=[],o=new Map,u,m,y,d=QS(e[14]);const M=A=>A[81].id+(A[81].address?","+A[81].address:"");for(let A=0;A<d.length;A+=1){let O=uE(e,d,A),R=M(O);o.set(R,n[A]=dE(R,O))}return{c(){t=br("ul");for(let A=0;A<n.length;A+=1)n[A].c();it(t,"class","svelte-zh3kmv")},m(A,O){Gr(A,t,O);for(let R=0;R<n.length;R+=1)n[R]&&n[R].m(t,null);u=!0,m||(y=[Jo(t,"mouseleave",e[71]),Jo(t,"blur",e[72])],m=!0)},p(A,O){O[0]&17880064&&(d=QS(A[14]),oy(),n=YD(n,O,M,1,A,d,o,t,XD,dE,null,uE),sy())},i(A){if(!u){for(let O=0;O<d.length;O+=1)pi(n[O]);u=!0}},o(A){for(let O=0;O<n.length;O+=1)Hi(n[O]);u=!1},d(A){A&&$r(t);for(let O=0;O<n.length;O+=1)n[O].d();m=!1,gu(y)}}}function zO(e){let t,n,o,u,m,y;return n=new pL({}),{c(){t=br("div"),xc(n.$$.fragment),o=Rs(),u=br("div"),m=_c(e[7]),it(u,"class","svelte-zh3kmv"),it(t,"class","no-results svelte-zh3kmv")},m(d,M){Gr(d,t,M),hu(n,t,null),On(t,o),On(t,u),On(u,m),y=!0},p(d,M){(!y||M[0]&128)&&um(m,d[7])},i(d){y||(pi(n.$$.fragment,d),y=!0)},o(d){Hi(n.$$.fragment,d),y=!1},d(d){d&&$r(t),du(n)}}}function DO(e){let t="",n;return{c(){n=_c(t)},m(o,u){Gr(o,n,u)},p:Br,i:Br,o:Br,d(o){o&&$r(n)}}}function OO(e){let t,n,o,u,m,y,d,M,A,O,R;return n=new pL({}),M=new fL({}),{c(){t=br("div"),xc(n.$$.fragment),o=Rs(),u=br("div"),m=_c(e[6]),y=Rs(),d=br("button"),xc(M.$$.fragment),it(u,"class","svelte-zh3kmv"),it(d,"class","svelte-zh3kmv"),it(t,"class","error svelte-zh3kmv")},m(N,V){Gr(N,t,V),hu(n,t,null),On(t,o),On(t,u),On(u,m),On(t,y),On(t,d),hu(M,d,null),A=!0,O||(R=Jo(d,"click",e[68]),O=!0)},p(N,V){(!A||V[0]&64)&&um(m,N[6])},i(N){A||(pi(n.$$.fragment,N),pi(M.$$.fragment,N),A=!0)},o(N){Hi(n.$$.fragment,N),Hi(M.$$.fragment,N),A=!1},d(N){N&&$r(t),du(n),du(M),O=!1,R()}}}function dE(e,t){let n,o,u;function m(){return t[69](t[83])}function y(){return t[70](t[81])}return o=new hO({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),o.$on("mouseenter",m),o.$on("focus",y),{key:e,first:null,c(){n=BD(),xc(o.$$.fragment),this.first=n},m(d,M){Gr(d,n,M),hu(o,d,M),u=!0},p(d,M){t=d;const A={};M[0]&16384&&(A.feature=t[81]),M[0]&1024&&(A.showPlaceType=t[10]),M[0]&49152&&(A.selected=t[15]===t[83]),M[0]&4096&&(A.iconsBaseUrl=t[12]),o.$set(A)},i(d){u||(pi(o.$$.fragment,d),u=!0)},o(d){Hi(o.$$.fragment,d),u=!1},d(d){d&&$r(n),du(o,d)}}}function FO(e){let t,n,o,u,m,y,d,M,A,O,R,N,V,H,ne,de,Y,X,Q,ie,he,_e=!1;m=new xO({}),R=new fL({});let pe=e[19]&&cE(),Ie=e[5]===!0&&hE(e);const Le=e[59].default,$e=zD(Le,e,e[58],null),Ze=[OO,DO,zO,NO],et=[];function at(Ne,rt){var ut,wt;return Ne[18]?0:Ne[16]?((ut=Ne[14])==null?void 0:ut.length)===0?2:Ne[16]&&(wt=Ne[14])!=null&&wt.length?3:-1:1}return~(de=at(e))&&(Y=et[de]=Ze[de](e)),{c(){t=Rs(),n=br("form"),o=br("div"),u=br("button"),xc(m.$$.fragment),y=Rs(),d=br("input"),M=Rs(),A=br("div"),O=br("button"),xc(R.$$.fragment),N=Rs(),pe&&pe.c(),V=Rs(),Ie&&Ie.c(),H=Rs(),$e&&$e.c(),ne=Rs(),Y&&Y.c(),it(u,"class","search-button svelte-zh3kmv"),it(u,"type","button"),it(d,"placeholder",e[8]),it(d,"aria-label",e[8]),it(d,"class","svelte-zh3kmv"),it(O,"type","button"),it(O,"title",e[3]),it(O,"class","svelte-zh3kmv"),it(A,"class","clear-button-container svelte-zh3kmv"),pa(A,"displayable",e[1]!==""),it(o,"class","input-group svelte-zh3kmv"),it(n,"tabindex","0"),it(n,"class",X=XS(e[2])+" svelte-zh3kmv"),pa(n,"can-collapse",e[4]&&e[1]==="")},m(Ne,rt){Gr(Ne,t,rt),Gr(Ne,n,rt),On(n,o),On(o,u),hu(m,u,null),On(o,y),On(o,d),e[61](d),YS(d,e[1]),On(o,M),On(o,A),On(A,O),hu(R,O,null),On(A,N),pe&&pe.m(A,null),On(o,V),Ie&&Ie.m(o,null),On(o,H),$e&&$e.m(o,null),On(n,ne),~de&&et[de].m(n,null),Q=!0,ie||(he=[Jo(u,"click",e[60]),Jo(d,"input",e[62]),Jo(d,"focus",e[63]),Jo(d,"blur",e[64]),Jo(d,"keydown",e[22]),Jo(d,"input",e[65]),Jo(O,"click",e[66]),Jo(n,"submit",$D(e[21]))],ie=!0)},p(Ne,rt){(!Q||rt[0]&256)&&it(d,"placeholder",Ne[8]),(!Q||rt[0]&256)&&it(d,"aria-label",Ne[8]),rt[0]&2&&d.value!==Ne[1]&&YS(d,Ne[1]),(!Q||rt[0]&8)&&it(O,"title",Ne[3]),Ne[19]?pe?rt[0]&524288&&pi(pe,1):(pe=cE(),pe.c(),pi(pe,1),pe.m(A,null)):pe&&(oy(),Hi(pe,1,1,()=>{pe=null}),sy()),(!Q||rt[0]&2)&&pa(A,"displayable",Ne[1]!==""),Ne[5]===!0?Ie?(Ie.p(Ne,rt),rt[0]&32&&pi(Ie,1)):(Ie=hE(Ne),Ie.c(),pi(Ie,1),Ie.m(o,H)):Ie&&(oy(),Hi(Ie,1,1,()=>{Ie=null}),sy()),$e&&$e.p&&(!Q||rt[1]&134217728)&&OD($e,Le,Ne,Ne[58],Q?DD(Le,Ne[58],rt,null):FD(Ne[58]),null);let ut=de;de=at(Ne),de===ut?~de&&et[de].p(Ne,rt):(Y&&(oy(),Hi(et[ut],1,1,()=>{et[ut]=null}),sy()),~de?(Y=et[de],Y?Y.p(Ne,rt):(Y=et[de]=Ze[de](Ne),Y.c()),pi(Y,1),Y.m(n,null)):Y=null),(!Q||rt[0]&4&&X!==(X=XS(Ne[2])+" svelte-zh3kmv"))&&it(n,"class",X),(!Q||rt[0]&22)&&pa(n,"can-collapse",Ne[4]&&Ne[1]==="")},i(Ne){Q||(pi(_e),pi(m.$$.fragment,Ne),pi(R.$$.fragment,Ne),pi(pe),pi(Ie),pi($e,Ne),pi(Y),Q=!0)},o(Ne){Hi(_e),Hi(m.$$.fragment,Ne),Hi(R.$$.fragment,Ne),Hi(pe),Hi(Ie),Hi($e,Ne),Hi(Y),Q=!1},d(Ne){Ne&&($r(t),$r(n)),du(m),e[61](null),du(R),pe&&pe.d(),Ie&&Ie.d(),$e&&$e.d(Ne),~de&&et[de].d(),ie=!1,gu(he)}}}function BO(e,t,n){let o,{$$slots:u={},$$scope:m}=t,{class:y=void 0}=t,{apiKey:d}=t,{bbox:M=void 0}=t,{clearButtonTitle:A="clear"}=t,{clearOnBlur:O=!1}=t,{collapsed:R=!1}=t,{country:N=void 0}=t,{debounceSearch:V=200}=t,{enableReverse:H=!1}=t,{errorMessage:ne="Something went wrong…"}=t,{filter:de=()=>!0}=t,{flyTo:Y=!0}=t,{fuzzyMatch:X=!0}=t,{language:Q=void 0}=t,{limit:ie=void 0}=t,{mapController:he=void 0}=t,{minLength:_e=2}=t,{noResultsMessage:pe="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:Ie="Search"}=t,{proximity:Le=[{type:"server-geolocation"}]}=t,{reverseActive:$e=H==="always"}=t,{reverseButtonTitle:Ze="toggle reverse geocoding"}=t,{searchValue:et=""}=t,{showFullGeometry:at=!0}=t,{showPlaceType:Ne="ifNeeded"}=t,{showResultsWhileTyping:rt=!0}=t,{selectFirst:ut=!0}=t,{flyToSelected:wt=!1}=t,{markerOnSelected:Ge=!0}=t,{types:ct=void 0}=t,{excludeTypes:Je=!1}=t,{zoom:At=16}=t,{maxZoom:Ut=18}=t,{apiUrl:Sn="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Ct={}}=t,{iconsBaseUrl:yn="https://cdn.maptiler.com/maptiler-geocoding-control/v1.3.3/icons/"}=t,{adjustUrlQuery:Zn=()=>{}}=t;function nr(){Er.focus()}function Be(){Er.blur()}function hr(ce,Te=!0,Ae=!1){n(1,et=ce),Te?(n(15,Ln=-1),Qi()):(lt(!Ae,Ae),setTimeout(()=>{Er.focus(),Er.select()}))}function mn(){n(14,Vt=void 0),n(55,Jt=void 0),n(15,Ln=-1)}function Dt(){n(54,gn=[]),n(55,Jt=void 0)}let xe=!1,Vt,gn,Jt,Ve="",Er,Ln=-1,Xe,En=[],li,kr,vi,Wt;const dr=new Set,qr=GD();VD(()=>{he&&(he.setEventHandler(void 0),he.indicateReverse(!1),he.setSelectedMarker(-1),he.setMarkers(void 0,void 0))});function Qi(ce){if(kr&&(clearTimeout(kr),kr=void 0),Ln>-1&&Vt)n(55,Jt=Vt[Ln]),n(1,et=Jt.place_type[0]==="reverse"?Jt.place_name:Jt.place_name.replace(/,.*/,"")),n(18,Xe=void 0),n(54,gn=void 0),n(15,Ln=-1);else if(et){const Te=ce||!He(et);Gt(et,{exact:!0}).then(()=>{n(54,gn=Vt),n(55,Jt=void 0),Te&&Kt()}).catch(Ae=>n(18,Xe=Ae))}}function He(ce){try{return RO(ce,6)}catch{return!1}}async function Gt(ce,{byId:Te=!1,exact:Ae=!1}={}){n(18,Xe=void 0),li==null||li.abort();const be=new AbortController;n(19,li=be);try{const Oe=He(ce),Ke=new URLSearchParams;if(Q!==void 0&&Ke.set("language",Array.isArray(Q)?Q.join(","):Q??""),ct&&Ke.set("types",ct.join(",")),Je&&Ke.set("excludeTypes",String(Je)),M&&Ke.set("bbox",M.map(Ft=>Ft.toFixed(6)).join(",")),N&&Ke.set("country",Array.isArray(N)?N.join(","):N),!Te&&!Oe){const Ft=await wO(he,Le,be);Ft&&Ke.set("proximity",Ft),(Ae||!rt)&&Ke.set("autocomplete","false"),Ke.set("fuzzyMatch",String(X))}ie!==void 0&&(!Oe||(ct==null?void 0:ct.length)===1)&&Ke.set("limit",String(ie)),Ke.set("key",d),Zn(Ke);const je=Sn+"/"+encodeURIComponent(Oe?Oe.decimalLongitude+","+Oe.decimalLatitude:ce)+".json?"+Ke.toString();if(je===Ve){Te?(n(14,Vt=void 0),n(55,Jt=En[0])):n(14,Vt=En);return}Ve=je;const dt=await fetch(je,{signal:be.signal,...Ct});if(!dt.ok)throw new Error(await dt.text());const Lt=await dt.json();qr("response",{url:je,featureCollection:Lt}),Te?(n(14,Vt=void 0),n(55,Jt=Lt.features[0]),En=[Jt]):(n(14,Vt=Lt.features.filter(de)),Oe&&Vt.unshift({type:"Feature",properties:{},id:"reverse_"+Oe.decimalLongitude+"_"+Oe.decimalLatitude,text:Oe.decimalLatitude+", "+Oe.decimalLongitude,place_name:Oe.decimalLatitude+", "+Oe.decimalLongitude,place_type:["reverse"],center:[Oe.decimalLongitude,Oe.decimalLatitude],bbox:[Oe.decimalLongitude,Oe.decimalLatitude,Oe.decimalLongitude,Oe.decimalLatitude],geometry:{type:"Point",coordinates:[Oe.decimalLongitude,Oe.decimalLatitude]}}),En=Vt,Oe&&Er.focus())}catch(Oe){if(Oe&&typeof Oe=="object"&&"name"in Oe&&Oe.name==="AbortError")return;throw Oe}finally{be===li&&n(19,li=void 0)}}function Kt(){var ce;if(!(gn!=null&&gn.length)||!Y)return;const Te=[180,90,-180,-90],Ae=!gn.some(be=>!be.matching_text);for(const be of gn)if(Ae||!be.matching_text)for(const Oe of[0,1,2,3])Te[Oe]=Math[Oe<2?"min":"max"](Te[Oe],((ce=be.bbox)==null?void 0:ce[Oe])??be.center[Oe%2]);he&&gn.length>0&&(Jt&&Te[0]===Te[2]&&Te[1]===Te[3]?he.flyTo(Jt.center,At):he.fitBounds(tE(Te),50,Ut))}function jt(ce){n(0,$e=H==="always"),n(14,Vt=void 0),n(55,Jt=void 0),n(15,Ln=-1),hr(ce[1].toFixed(6)+", "+bO(ce[0],[-180,180],!0).toFixed(6),!1,!0)}function eo(ce){if(!Vt)return;let Te=ce.key==="ArrowDown"?1:ce.key==="ArrowUp"?-1:0;Te&&(Ln===(ut?0:-1)&&Te===-1&&n(15,Ln=Vt.length),n(15,Ln+=Te),Ln>=Vt.length&&n(15,Ln=-1),Ln<0&&ut&&n(15,Ln=0),ce.preventDefault())}function lt(ce=!0,Te=!1){if(n(18,Xe=void 0),rt||Te){if(kr&&clearTimeout(kr),et.length<_e)return;const Ae=et;kr=window.setTimeout(()=>{Gt(Ae).catch(be=>n(18,Xe=be))},ce?V:0)}else n(14,Vt=void 0),n(18,Xe=void 0)}function on(ce){n(55,Jt=ce),n(1,et=ce.place_name),n(15,Ln=-1)}const st=()=>Er.focus();function _i(ce){cx[ce?"unshift":"push"](()=>{Er=ce,n(17,Er)})}function to(){et=this.value,n(1,et),n(13,xe),n(27,O)}const Qt=()=>n(13,xe=!0),Sr=()=>n(13,xe=!1),Ii=()=>lt(),Hr=()=>{n(1,et=""),Er.focus()},no=()=>n(0,$e=!$e),ve=()=>n(18,Xe=void 0),J=ce=>n(15,Ln=ce),K=ce=>on(ce),se=()=>{ut||n(15,Ln=-1)},oe=()=>{};return e.$$set=ce=>{"class"in ce&&n(2,y=ce.class),"apiKey"in ce&&n(25,d=ce.apiKey),"bbox"in ce&&n(26,M=ce.bbox),"clearButtonTitle"in ce&&n(3,A=ce.clearButtonTitle),"clearOnBlur"in ce&&n(27,O=ce.clearOnBlur),"collapsed"in ce&&n(4,R=ce.collapsed),"country"in ce&&n(28,N=ce.country),"debounceSearch"in ce&&n(29,V=ce.debounceSearch),"enableReverse"in ce&&n(5,H=ce.enableReverse),"errorMessage"in ce&&n(6,ne=ce.errorMessage),"filter"in ce&&n(30,de=ce.filter),"flyTo"in ce&&n(31,Y=ce.flyTo),"fuzzyMatch"in ce&&n(32,X=ce.fuzzyMatch),"language"in ce&&n(33,Q=ce.language),"limit"in ce&&n(34,ie=ce.limit),"mapController"in ce&&n(35,he=ce.mapController),"minLength"in ce&&n(36,_e=ce.minLength),"noResultsMessage"in ce&&n(7,pe=ce.noResultsMessage),"placeholder"in ce&&n(8,Ie=ce.placeholder),"proximity"in ce&&n(37,Le=ce.proximity),"reverseActive"in ce&&n(0,$e=ce.reverseActive),"reverseButtonTitle"in ce&&n(9,Ze=ce.reverseButtonTitle),"searchValue"in ce&&n(1,et=ce.searchValue),"showFullGeometry"in ce&&n(38,at=ce.showFullGeometry),"showPlaceType"in ce&&n(10,Ne=ce.showPlaceType),"showResultsWhileTyping"in ce&&n(39,rt=ce.showResultsWhileTyping),"selectFirst"in ce&&n(11,ut=ce.selectFirst),"flyToSelected"in ce&&n(40,wt=ce.flyToSelected),"markerOnSelected"in ce&&n(41,Ge=ce.markerOnSelected),"types"in ce&&n(42,ct=ce.types),"excludeTypes"in ce&&n(43,Je=ce.excludeTypes),"zoom"in ce&&n(44,At=ce.zoom),"maxZoom"in ce&&n(45,Ut=ce.maxZoom),"apiUrl"in ce&&n(46,Sn=ce.apiUrl),"fetchParameters"in ce&&n(47,Ct=ce.fetchParameters),"iconsBaseUrl"in ce&&n(12,yn=ce.iconsBaseUrl),"adjustUrlQuery"in ce&&n(48,Zn=ce.adjustUrlQuery),"$$scope"in ce&&n(58,m=ce.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&32&&n(0,$e=H==="always"),e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,vi=xe),O&&!xe&&n(1,et="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&et.length<_e&&(n(55,Jt=void 0),n(14,Vt=void 0),n(18,Xe=void 0),n(54,gn=Vt)),e.$$.dirty[1]&16777344&&at&&Jt&&!Jt.address&&Jt.geometry.type==="Point"&&Jt.place_type[0]!=="reverse"&&Gt(Jt.id,{byId:!0}).catch(ce=>n(18,Xe=ce)),e.$$.dirty[1]&50356241&&(he&&Jt&&Jt.id!==Wt&&Y&&(!Jt.bbox||Jt.bbox[0]===Jt.bbox[2]&&Jt.bbox[1]===Jt.bbox[3]?he.flyTo(Jt.center,Jt.id.startsWith("poi.")||Jt.id.startsWith("address.")?Ut:At):he.fitBounds(tE(Jt.bbox),50,Ut),n(14,Vt=void 0),n(54,gn=void 0),n(15,Ln=-1)),n(56,Wt=Jt==null?void 0:Jt.id)),e.$$.dirty[0]&18432&&ut&&Vt!=null&&Vt.length&&n(15,Ln=0),e.$$.dirty[0]&2050&&(ut||n(15,Ln=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&gn!==Vt&&n(54,gn=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&he&&he.setEventHandler(ce=>{switch(ce.type){case"mapClick":$e&&jt(ce.coordinates);break;case"markerClick":{const Te=Vt==null?void 0:Vt.find(Ae=>Ae.id===ce.id);Te&&on(Te)}break;case"markerMouseEnter":gn&&n(15,Ln=vi?(Vt==null?void 0:Vt.findIndex(Te=>Te.id===ce.id))??-1:-1);break;case"markerMouseLeave":gn&&n(15,Ln=-1);break}}),e.$$.dirty[0]&49152&&n(57,o=Vt==null?void 0:Vt[Ln]),e.$$.dirty[1]&67133969&&he&&o&&Y&&wt&&he.flyTo(o.center,o.id.startsWith("poi.")||o.id.startsWith("address.")?Ut:At),e.$$.dirty[1]&1040&&(Ge||he==null||he.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&he&&Ge&&!gn&&(he.setMarkers(o?[o]:void 0,void 0),he.setSelectedMarker(o?0:-1)),e.$$.dirty[1]&25165840&&he&&he.setMarkers(gn,Jt),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&gn&&he&&he.setSelectedMarker(Ln),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&he){const ce=He(et);he.setReverseMarker(ce?[ce.decimalLongitude,ce.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&qr("select",o),e.$$.dirty[1]&16777216&&qr("pick",Jt),e.$$.dirty[0]&81920&&qr("optionsVisibilityChange",vi&&!!Vt),e.$$.dirty[0]&16384&&qr("featuresListed",Vt),e.$$.dirty[1]&8388608&&qr("featuresMarked",gn),e.$$.dirty[0]&1&&qr("reverseToggle",$e),e.$$.dirty[0]&2&&qr("queryChange",et),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&he&&he.indicateReverse($e)},[$e,et,y,A,R,H,ne,pe,Ie,Ze,Ne,ut,yn,xe,Vt,Ln,vi,Er,Xe,li,dr,Qi,eo,lt,on,d,M,O,N,V,de,Y,X,Q,ie,he,_e,Le,at,rt,wt,Ge,ct,Je,At,Ut,Sn,Ct,Zn,nr,Be,hr,mn,Dt,gn,Jt,Wt,o,m,u,st,_i,to,Qt,Sr,Ii,Hr,no,ve,J,K,se,oe]}let $O=class extends Tc{constructor(e){super(),Ic(this,e,BO,FO,Ec,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}};var hs=63710088e-1,mL={centimeters:hs*100,centimetres:hs*100,degrees:360/(2*Math.PI),feet:hs*3.28084,inches:hs*39.37,kilometers:hs/1e3,kilometres:hs/1e3,meters:hs,metres:hs,miles:hs/1609.344,millimeters:hs*1e3,millimetres:hs*1e3,nauticalmiles:hs/1852,radians:1,yards:hs*1.0936};function Em(e,t,n={}){const o={type:"Feature"};return(n.id===0||n.id)&&(o.id=n.id),n.bbox&&(o.bbox=n.bbox),o.properties=t||{},o.geometry=e,o}function UO(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fE(e[0])||!fE(e[1]))throw new Error("coordinates must contain numbers");return Em({type:"Point",coordinates:e},t,n)}function Kb(e,t,n={}){for(const o of e){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}return Em({type:"Polygon",coordinates:e},t,n)}function Eh(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function gL(e,t,n={}){return Em({type:"MultiPolygon",coordinates:e},t,n)}function jO(e,t="kilometers"){const n=mL[t];if(!n)throw new Error(t+" units is invalid");return e*n}function VO(e,t="kilometers"){const n=mL[t];if(!n)throw new Error(t+" units is invalid");return e/n}function fE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function GO(e,t){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,u,m,y;return y={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function d(A){return function(O){return M([A,O])}}function M(A){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,u&&(m=A[0]&2?u.return:A[0]?u.throw||((m=u.return)&&m.call(u),0):u.next)&&!(m=m.call(u,A[1])).done)return m;switch(u=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,u=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){n.label=A[1];break}if(A[0]===6&&n.label<m[1]){n.label=m[1],m=A;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(A);break}m[2]&&n.ops.pop(),n.trys.pop();continue}A=t.call(e,n)}catch(O){A=[6,O],u=0}finally{o=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}var bc=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function qO(e,t){return e>t?1:e<t?-1:0}function tc(e,t,n){for(var o=new bc(null,null),u=o,m=o;;){var y=n(e,t.key);if(y<0){if(t.left===null)break;if(n(e,t.left.key)<0){var d=t.left;if(t.left=d.right,d.right=t,t=d,t.left===null)break}m.left=t,m=t,t=t.left}else if(y>0){if(t.right===null)break;if(n(e,t.right.key)>0){var d=t.right;if(t.right=d.left,d.left=t,t=d,t.right===null)break}u.right=t,u=t,t=t.right}else break}return u.right=t.left,m.left=t.right,t.left=o.right,t.right=o.left,t}function $_(e,t,n,o){var u=new bc(e,t);if(n===null)return u.left=u.right=null,u;n=tc(e,n,o);var m=o(e,n.key);return m<0?(u.left=n.left,u.right=n,n.left=null):m>=0&&(u.right=n.right,u.left=n,n.right=null),u}function pE(e,t,n){var o=null,u=null;if(t){t=tc(e,t,n);var m=n(t.key,e);m===0?(o=t.left,u=t.right):m<0?(u=t.right,t.right=null,o=t):(o=t.left,t.left=null,u=t)}return{left:o,right:u}}function HO(e,t,n){return t===null?e:(e===null||(t=tc(e.key,t,n),t.left=e),t)}function fx(e,t,n,o,u){if(e){o(""+t+(n?"└── ":"├── ")+u(e)+`
`);var m=t+(n?"    ":"│   ");e.left&&fx(e.left,m,!1,o,u),e.right&&fx(e.right,m,!0,o,u)}}var Jb=function(){function e(t){t===void 0&&(t=qO),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=$_(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var o=new bc(t,n);this._root===null&&(o.left=o.right=null,this._size++,this._root=o);var u=this._comparator,m=tc(t,this._root,u),y=u(t,m.key);return y===0?this._root=m:(y<0?(o.left=m.left,o.right=m,m.left=null):y>0&&(o.right=m.right,o.left=m,m.right=null),this._size++,this._root=o),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,o){var u;if(n===null)return null;n=tc(t,n,o);var m=o(t,n.key);return m===0?(n.left===null?u=n.right:(u=tc(t,n.left,o),u.right=n.right),this._size--,u):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=tc(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,o=this._comparator;n;){var u=o(t,n.key);if(u===0)return n;u<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=tc(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,o=this._comparator;n;){var u=o(t,n.key);if(u===0)return!0;u<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var o=this._root,u=[],m=!1;!m;)o!==null?(u.push(o),o=o.left):u.length!==0?(o=u.pop(),t.call(n,o),o=o.right):m=!0;return this},e.prototype.range=function(t,n,o,u){for(var m=[],y=this._comparator,d=this._root,M;m.length!==0||d;)if(d)m.push(d),d=d.left;else{if(d=m.pop(),M=y(d.key,n),M>0)break;if(y(d.key,t)>=0&&o.call(u,d))return this;d=d.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var o=n.key;return t.push(o)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var o=n.data;return t.push(o)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,o=!1,u=0,m=[];!o;)if(n)m.push(n),n=n.left;else if(m.length>0){if(n=m.pop(),u===t)return n;u++,n=n.right}else o=!0;return null},e.prototype.next=function(t){var n=this._root,o=null;if(t.right){for(o=t.right;o.left;)o=o.left;return o}for(var u=this._comparator;n;){var m=u(t.key,n.key);if(m===0)break;m<0?(o=n,n=n.left):n=n.right}return o},e.prototype.prev=function(t){var n=this._root,o=null;if(t.left!==null){for(o=t.left;o.right;)o=o.right;return o}for(var u=this._comparator;n;){var m=u(t.key,n.key);if(m===0)break;m<0?n=n.left:(o=n,n=n.right)}return o},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return ZO(this._root)},e.prototype.load=function(t,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1);var u=t.length,m=this._comparator;if(o&&gx(t,n,0,u-1,m),this._root===null)this._root=px(t,n,0,u),this._size=u;else{var y=XO(this.toList(),WO(t,n),m);u=this._size+u,this._root=mx({head:y},0,u)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(o){return String(o.key)});var n=[];return fx(this._root,"",!0,function(o){return n.push(o)},t),n.join("")},e.prototype.update=function(t,n,o){var u=this._comparator,m=pE(t,this._root,u),y=m.left,d=m.right;u(t,n)<0?d=$_(n,o,d,u):y=$_(n,o,y,u),this._root=HO(y,d,u)},e.prototype.split=function(t){return pE(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,o;return GO(this,function(u){switch(u.label){case 0:t=this._root,n=[],o=!1,u.label=1;case 1:return o?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return u.sent(),t=t.right,[3,5];case 4:o=!0,u.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function px(e,t,n,o){var u=o-n;if(u>0){var m=n+Math.floor(u/2),y=e[m],d=t[m],M=new bc(y,d);return M.left=px(e,t,n,m),M.right=px(e,t,m+1,o),M}return null}function WO(e,t){for(var n=new bc(null,null),o=n,u=0;u<e.length;u++)o=o.next=new bc(e[u],t[u]);return o.next=null,n.next}function ZO(e){for(var t=e,n=[],o=!1,u=new bc(null,null),m=u;!o;)t?(n.push(t),t=t.left):n.length>0?(t=m=m.next=n.pop(),t=t.right):o=!0;return m.next=null,u.next}function mx(e,t,n){var o=n-t;if(o>0){var u=t+Math.floor(o/2),m=mx(e,t,u),y=e.head;return y.left=m,e.head=e.head.next,y.right=mx(e,u+1,n),y}return null}function XO(e,t,n){for(var o=new bc(null,null),u=o,m=e,y=t;m!==null&&y!==null;)n(m.key,y.key)<0?(u.next=m,m=m.next):(u.next=y,y=y.next),u=u.next;return m!==null?u.next=m:y!==null&&(u.next=y),o.next}function gx(e,t,n,o,u){if(!(n>=o)){for(var m=e[n+o>>1],y=n-1,d=o+1;;){do y++;while(u(e[y],m)<0);do d--;while(u(e[d],m)>0);if(y>=d)break;var M=e[y];e[y]=e[d],e[d]=M,M=t[y],t[y]=t[d],t[d]=M}gx(e,t,n,d,u),gx(e,t,d+1,o,u)}}const ou=11102230246251565e-32,Po=134217729,YO=(3+8*ou)*ou;function U_(e,t,n,o,u){let m,y,d,M,A=t[0],O=o[0],R=0,N=0;O>A==O>-A?(m=A,A=t[++R]):(m=O,O=o[++N]);let V=0;if(R<e&&N<n)for(O>A==O>-A?(y=A+m,d=m-(y-A),A=t[++R]):(y=O+m,d=m-(y-O),O=o[++N]),m=y,d!==0&&(u[V++]=d);R<e&&N<n;)O>A==O>-A?(y=m+A,M=y-m,d=m-(y-M)+(A-M),A=t[++R]):(y=m+O,M=y-m,d=m-(y-M)+(O-M),O=o[++N]),m=y,d!==0&&(u[V++]=d);for(;R<e;)y=m+A,M=y-m,d=m-(y-M)+(A-M),A=t[++R],m=y,d!==0&&(u[V++]=d);for(;N<n;)y=m+O,M=y-m,d=m-(y-M)+(O-M),O=o[++N],m=y,d!==0&&(u[V++]=d);return(m!==0||V===0)&&(u[V++]=m),V}function KO(e,t){let n=t[0];for(let o=1;o<e;o++)n+=t[o];return n}function Im(e){return new Float64Array(e)}const JO=(3+16*ou)*ou,QO=(2+12*ou)*ou,eF=(9+64*ou)*ou*ou,dd=Im(4),mE=Im(8),gE=Im(12),yE=Im(16),Xo=Im(4);function tF(e,t,n,o,u,m,y){let d,M,A,O,R,N,V,H,ne,de,Y,X,Q,ie,he,_e,pe,Ie;const Le=e-u,$e=n-u,Ze=t-m,et=o-m;ie=Le*et,N=Po*Le,V=N-(N-Le),H=Le-V,N=Po*et,ne=N-(N-et),de=et-ne,he=H*de-(ie-V*ne-H*ne-V*de),_e=Ze*$e,N=Po*Ze,V=N-(N-Ze),H=Ze-V,N=Po*$e,ne=N-(N-$e),de=$e-ne,pe=H*de-(_e-V*ne-H*ne-V*de),Y=he-pe,R=he-Y,dd[0]=he-(Y+R)+(R-pe),X=ie+Y,R=X-ie,Q=ie-(X-R)+(Y-R),Y=Q-_e,R=Q-Y,dd[1]=Q-(Y+R)+(R-_e),Ie=X+Y,R=Ie-X,dd[2]=X-(Ie-R)+(Y-R),dd[3]=Ie;let at=KO(4,dd),Ne=QO*y;if(at>=Ne||-at>=Ne||(R=e-Le,d=e-(Le+R)+(R-u),R=n-$e,A=n-($e+R)+(R-u),R=t-Ze,M=t-(Ze+R)+(R-m),R=o-et,O=o-(et+R)+(R-m),d===0&&M===0&&A===0&&O===0)||(Ne=eF*y+YO*Math.abs(at),at+=Le*O+et*d-(Ze*A+$e*M),at>=Ne||-at>=Ne))return at;ie=d*et,N=Po*d,V=N-(N-d),H=d-V,N=Po*et,ne=N-(N-et),de=et-ne,he=H*de-(ie-V*ne-H*ne-V*de),_e=M*$e,N=Po*M,V=N-(N-M),H=M-V,N=Po*$e,ne=N-(N-$e),de=$e-ne,pe=H*de-(_e-V*ne-H*ne-V*de),Y=he-pe,R=he-Y,Xo[0]=he-(Y+R)+(R-pe),X=ie+Y,R=X-ie,Q=ie-(X-R)+(Y-R),Y=Q-_e,R=Q-Y,Xo[1]=Q-(Y+R)+(R-_e),Ie=X+Y,R=Ie-X,Xo[2]=X-(Ie-R)+(Y-R),Xo[3]=Ie;const rt=U_(4,dd,4,Xo,mE);ie=Le*O,N=Po*Le,V=N-(N-Le),H=Le-V,N=Po*O,ne=N-(N-O),de=O-ne,he=H*de-(ie-V*ne-H*ne-V*de),_e=Ze*A,N=Po*Ze,V=N-(N-Ze),H=Ze-V,N=Po*A,ne=N-(N-A),de=A-ne,pe=H*de-(_e-V*ne-H*ne-V*de),Y=he-pe,R=he-Y,Xo[0]=he-(Y+R)+(R-pe),X=ie+Y,R=X-ie,Q=ie-(X-R)+(Y-R),Y=Q-_e,R=Q-Y,Xo[1]=Q-(Y+R)+(R-_e),Ie=X+Y,R=Ie-X,Xo[2]=X-(Ie-R)+(Y-R),Xo[3]=Ie;const ut=U_(rt,mE,4,Xo,gE);ie=d*O,N=Po*d,V=N-(N-d),H=d-V,N=Po*O,ne=N-(N-O),de=O-ne,he=H*de-(ie-V*ne-H*ne-V*de),_e=M*A,N=Po*M,V=N-(N-M),H=M-V,N=Po*A,ne=N-(N-A),de=A-ne,pe=H*de-(_e-V*ne-H*ne-V*de),Y=he-pe,R=he-Y,Xo[0]=he-(Y+R)+(R-pe),X=ie+Y,R=X-ie,Q=ie-(X-R)+(Y-R),Y=Q-_e,R=Q-Y,Xo[1]=Q-(Y+R)+(R-_e),Ie=X+Y,R=Ie-X,Xo[2]=X-(Ie-R)+(Y-R),Xo[3]=Ie;const wt=U_(ut,gE,4,Xo,yE);return yE[wt-1]}function nF(e,t,n,o,u,m){const y=(t-m)*(n-u),d=(e-u)*(o-m),M=y-d,A=Math.abs(y+d);return Math.abs(M)>=JO*A?M:-tF(e,t,n,o,u,m,A)}const yp=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,yx=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,u=e.ll.y<t.ll.y?t.ll.y:e.ll.y,m=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:u},ur:{x:o,y:m}}};let ac=Number.EPSILON;ac===void 0&&(ac=Math.pow(2,-52));const rF=ac*ac,vE=(e,t)=>{if(-ac<e&&e<ac&&-ac<t&&t<ac)return 0;const n=e-t;return n*n<rF*e*t?0:e<t?-1:1};class iF{constructor(){this.reset()}reset(){this.xRounder=new _E,this.yRounder=new _E}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class _E{constructor(){this.tree=new Jb,this.round(0)}round(t){const n=this.tree.add(t),o=this.tree.prev(n);if(o!==null&&vE(n.key,o.key)===0)return this.tree.remove(t),o.key;const u=this.tree.next(n);return u!==null&&vE(n.key,u.key)===0?(this.tree.remove(t),u.key):t}}const hm=new iF,ay=(e,t)=>e.x*t.y-e.y*t.x,yL=(e,t)=>e.x*t.x+e.y*t.y,xE=(e,t,n)=>{const o=nF(e.x,e.y,t.x,t.y,n.x,n.y);return o>0?-1:o<0?1:0},Uy=e=>Math.sqrt(yL(e,e)),oF=(e,t,n)=>{const o={x:t.x-e.x,y:t.y-e.y},u={x:n.x-e.x,y:n.y-e.y};return ay(u,o)/Uy(u)/Uy(o)},sF=(e,t,n)=>{const o={x:t.x-e.x,y:t.y-e.y},u={x:n.x-e.x,y:n.y-e.y};return yL(u,o)/Uy(u)/Uy(o)},bE=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},wE=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},aF=(e,t,n,o)=>{if(t.x===0)return wE(n,o,e.x);if(o.x===0)return wE(e,t,n.x);if(t.y===0)return bE(n,o,e.y);if(o.y===0)return bE(e,t,n.y);const u=ay(t,o);if(u==0)return null;const m={x:n.x-e.x,y:n.y-e.y},y=ay(m,t)/u,d=ay(m,o)/u,M=e.x+d*t.x,A=n.x+y*o.x,O=e.y+d*t.y,R=n.y+y*o.y,N=(M+A)/2,V=(O+R)/2;return{x:N,y:V}};class aa{static compare(t,n){const o=aa.comparePoints(t.point,n.point);return o!==0?o:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:gc.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let o=0,u=n.length;o<u;o++){const m=n[o];this.point.events.push(m),m.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const o=this.point.events[n];if(o.segment.consumedBy===void 0)for(let u=n+1;u<t;u++){const m=this.point.events[u];m.consumedBy===void 0&&o.otherSE.point.events===m.otherSE.point.events&&o.segment.consume(m.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,o=this.point.events.length;n<o;n++){const u=this.point.events[n];u!==this&&!u.segment.ringOut&&u.segment.isInResult()&&t.push(u)}return t}getLeftmostComparator(t){const n=new Map,o=u=>{const m=u.otherSE;n.set(u,{sine:oF(this.point,t.point,m.point),cosine:sF(this.point,t.point,m.point)})};return(u,m)=>{n.has(u)||o(u),n.has(m)||o(m);const{sine:y,cosine:d}=n.get(u),{sine:M,cosine:A}=n.get(m);return y>=0&&M>=0?d<A?1:d>A?-1:0:y<0&&M<0?d<A?-1:d>A?1:0:M<y?-1:M>y?1:0}}}let lF=0;class gc{static compare(t,n){const o=t.leftSE.point.x,u=n.leftSE.point.x,m=t.rightSE.point.x,y=n.rightSE.point.x;if(y<o)return 1;if(m<u)return-1;const d=t.leftSE.point.y,M=n.leftSE.point.y,A=t.rightSE.point.y,O=n.rightSE.point.y;if(o<u){if(M<d&&M<A)return 1;if(M>d&&M>A)return-1;const R=t.comparePoint(n.leftSE.point);if(R<0)return 1;if(R>0)return-1;const N=n.comparePoint(t.rightSE.point);return N!==0?N:-1}if(o>u){if(d<M&&d<O)return-1;if(d>M&&d>O)return 1;const R=n.comparePoint(t.leftSE.point);if(R!==0)return R;const N=t.comparePoint(n.rightSE.point);return N<0?1:N>0?-1:1}if(d<M)return-1;if(d>M)return 1;if(m<y){const R=n.comparePoint(t.rightSE.point);if(R!==0)return R}if(m>y){const R=t.comparePoint(n.rightSE.point);if(R<0)return 1;if(R>0)return-1}if(m!==y){const R=A-d,N=m-o,V=O-M,H=y-u;if(R>N&&V<H)return 1;if(R<N&&V>H)return-1}return m>y?1:m<y||A<O?-1:A>O?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,o,u){this.id=++lF,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=o,this.windings=u}static fromRing(t,n,o){let u,m,y;const d=aa.comparePoints(t,n);if(d<0)u=t,m=n,y=1;else if(d>0)u=n,m=t,y=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const M=new aa(u,!0),A=new aa(m,!1);return new gc(M,A,[o],[y])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,o=this.rightSE.point,u=this.vector();if(n.x===o.x)return t.x===n.x?0:t.x<n.x?1:-1;const m=(t.y-n.y)/u.y,y=n.x+m*u.x;if(t.x===y)return 0;const d=(t.x-n.x)/u.x,M=n.y+d*u.y;return t.y===M?0:t.y<M?-1:1}getIntersection(t){const n=this.bbox(),o=t.bbox(),u=yx(n,o);if(u===null)return null;const m=this.leftSE.point,y=this.rightSE.point,d=t.leftSE.point,M=t.rightSE.point,A=yp(n,d)&&this.comparePoint(d)===0,O=yp(o,m)&&t.comparePoint(m)===0,R=yp(n,M)&&this.comparePoint(M)===0,N=yp(o,y)&&t.comparePoint(y)===0;if(O&&A)return N&&!R?y:!N&&R?M:null;if(O)return R&&m.x===M.x&&m.y===M.y?null:m;if(A)return N&&y.x===d.x&&y.y===d.y?null:d;if(N&&R)return null;if(N)return y;if(R)return M;const V=aF(m,this.vector(),d,t.vector());return V===null||!yp(u,V)?null:hm.round(V.x,V.y)}split(t){const n=[],o=t.events!==void 0,u=new aa(t,!0),m=new aa(t,!1),y=this.rightSE;this.replaceRightSE(m),n.push(m),n.push(u);const d=new gc(u,y,this.rings.slice(),this.windings.slice());return aa.comparePoints(d.leftSE.point,d.rightSE.point)>0&&d.swapEvents(),aa.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(u.checkForConsuming(),m.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,o=this.windings.length;n<o;n++)this.windings[n]*=-1}consume(t){let n=this,o=t;for(;n.consumedBy;)n=n.consumedBy;for(;o.consumedBy;)o=o.consumedBy;const u=gc.compare(n,o);if(u!==0){if(u>0){const m=n;n=o,o=m}if(n.prev===o){const m=n;n=o,o=m}for(let m=0,y=o.rings.length;m<y;m++){const d=o.rings[m],M=o.windings[m],A=n.rings.indexOf(d);A===-1?(n.rings.push(d),n.windings.push(M)):n.windings[A]+=M}o.rings=null,o.windings=null,o.consumedBy=n,o.leftSE.consumedBy=n.leftSE,o.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,o=this._afterState.windings,u=this._afterState.multiPolys;for(let d=0,M=this.rings.length;d<M;d++){const A=this.rings[d],O=this.windings[d],R=n.indexOf(A);R===-1?(n.push(A),o.push(O)):o[R]+=O}const m=[],y=[];for(let d=0,M=n.length;d<M;d++){if(o[d]===0)continue;const A=n[d],O=A.poly;if(y.indexOf(O)===-1)if(A.isExterior)m.push(O);else{y.indexOf(O)===-1&&y.push(O);const R=m.indexOf(A.poly);R!==-1&&m.splice(R,1)}}for(let d=0,M=m.length;d<M;d++){const A=m[d].multiPoly;u.indexOf(A)===-1&&u.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch($a.type){case"union":{const o=t.length===0,u=n.length===0;this._isInResult=o!==u;break}case"intersection":{let o,u;t.length<n.length?(o=t.length,u=n.length):(o=n.length,u=t.length),this._isInResult=u===$a.numMultiPolys&&o<u;break}case"xor":{const o=Math.abs(t.length-n.length);this._isInResult=o%2===1;break}case"difference":{const o=u=>u.length===1&&u[0].isSubject;this._isInResult=o(t)!==o(n);break}default:throw new Error(`Unrecognized operation type found ${$a.type}`)}return this._isInResult}}class kE{constructor(t,n,o){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=hm.round(t[0][0],t[0][1]);this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let m=u;for(let y=1,d=t.length;y<d;y++){if(typeof t[y][0]!="number"||typeof t[y][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let M=hm.round(t[y][0],t[y][1]);M.x===m.x&&M.y===m.y||(this.segments.push(gc.fromRing(m,M,this)),M.x<this.bbox.ll.x&&(this.bbox.ll.x=M.x),M.y<this.bbox.ll.y&&(this.bbox.ll.y=M.y),M.x>this.bbox.ur.x&&(this.bbox.ur.x=M.x),M.y>this.bbox.ur.y&&(this.bbox.ur.y=M.y),m=M)}(u.x!==m.x||u.y!==m.y)&&this.segments.push(gc.fromRing(m,u,this))}getSweepEvents(){const t=[];for(let n=0,o=this.segments.length;n<o;n++){const u=this.segments[n];t.push(u.leftSE),t.push(u.rightSE)}return t}}class uF{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new kE(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let o=1,u=t.length;o<u;o++){const m=new kE(t[o],this,!1);m.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,o=this.interiorRings.length;n<o;n++){const u=this.interiorRings[n].getSweepEvents();for(let m=0,y=u.length;m<y;m++)t.push(u[m])}return t}}class SE{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let o=0,u=t.length;o<u;o++){const m=new uF(t[o],this);m.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,o=this.polys.length;n<o;n++){const u=this.polys[n].getSweepEvents();for(let m=0,y=u.length;m<y;m++)t.push(u[m])}return t}}class jy{static factory(t){const n=[];for(let o=0,u=t.length;o<u;o++){const m=t[o];if(!m.isInResult()||m.ringOut)continue;let y=null,d=m.leftSE,M=m.rightSE;const A=[d],O=d.point,R=[];for(;y=d,d=M,A.push(d),d.point!==O;)for(;;){const N=d.getAvailableLinkedEvents();if(N.length===0){const ne=A[0].point,de=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${ne.x}, ${ne.y}]. Last matching segment found ends at [${de.x}, ${de.y}].`)}if(N.length===1){M=N[0].otherSE;break}let V=null;for(let ne=0,de=R.length;ne<de;ne++)if(R[ne].point===d.point){V=ne;break}if(V!==null){const ne=R.splice(V)[0],de=A.splice(ne.index);de.unshift(de[0].otherSE),n.push(new jy(de.reverse()));continue}R.push({index:A.length,point:d.point});const H=d.getLeftmostComparator(y);M=N.sort(H)[0].otherSE;break}n.push(new jy(A))}return n}constructor(t){this.events=t;for(let n=0,o=t.length;n<o;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let A=1,O=this.events.length-1;A<O;A++){const R=this.events[A].point,N=this.events[A+1].point;xE(R,t,N)!==0&&(n.push(R),t=R)}if(n.length===1)return null;const o=n[0],u=n[1];xE(o,t,u)===0&&n.shift(),n.push(n[0]);const m=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:n.length-1,d=this.isExteriorRing()?n.length:-1,M=[];for(let A=y;A!=d;A+=m)M.push([n[A].x,n[A].y]);return M}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let u=1,m=this.events.length;u<m;u++){const y=this.events[u];aa.compare(t,y)>0&&(t=y)}let n=t.segment.prevInResult(),o=n?n.prevInResult():null;for(;;){if(!n)return null;if(!o)return n.ringOut;if(o.ringOut!==n.ringOut)return o.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=o.prevInResult(),o=n?n.prevInResult():null}}}class EE{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,o=this.interiorRings.length;n<o;n++){const u=this.interiorRings[n].getGeom();u!==null&&t.push(u)}return t}}class cF{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,o=this.polys.length;n<o;n++){const u=this.polys[n].getGeom();u!==null&&t.push(u)}return t}_composePolys(t){const n=[];for(let o=0,u=t.length;o<u;o++){const m=t[o];if(!m.poly)if(m.isExteriorRing())n.push(new EE(m));else{const y=m.enclosingRing();y.poly||n.push(new EE(y)),y.poly.addInterior(m)}}return n}}class hF{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gc.compare;this.queue=t,this.tree=new Jb(n),this.segments=[]}process(t){const n=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),o;const u=t.isLeft?this.tree.add(n):this.tree.find(n);if(!u)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let m=u,y=u,d,M;for(;d===void 0;)m=this.tree.prev(m),m===null?d=null:m.key.consumedBy===void 0&&(d=m.key);for(;M===void 0;)y=this.tree.next(y),y===null?M=null:y.key.consumedBy===void 0&&(M=y.key);if(t.isLeft){let A=null;if(d){const R=d.getIntersection(n);if(R!==null&&(n.isAnEndpoint(R)||(A=R),!d.isAnEndpoint(R))){const N=this._splitSafely(d,R);for(let V=0,H=N.length;V<H;V++)o.push(N[V])}}let O=null;if(M){const R=M.getIntersection(n);if(R!==null&&(n.isAnEndpoint(R)||(O=R),!M.isAnEndpoint(R))){const N=this._splitSafely(M,R);for(let V=0,H=N.length;V<H;V++)o.push(N[V])}}if(A!==null||O!==null){let R=null;A===null?R=O:O===null?R=A:R=aa.comparePoints(A,O)<=0?A:O,this.queue.remove(n.rightSE),o.push(n.rightSE);const N=n.split(R);for(let V=0,H=N.length;V<H;V++)o.push(N[V])}o.length>0?(this.tree.remove(n),o.push(t)):(this.segments.push(n),n.prev=d)}else{if(d&&M){const A=d.getIntersection(M);if(A!==null){if(!d.isAnEndpoint(A)){const O=this._splitSafely(d,A);for(let R=0,N=O.length;R<N;R++)o.push(O[R])}if(!M.isAnEndpoint(A)){const O=this._splitSafely(M,A);for(let R=0,N=O.length;R<N;R++)o.push(O[R])}}}this.tree.remove(n)}return o}_splitSafely(t,n){this.tree.remove(t);const o=t.rightSE;this.queue.remove(o);const u=t.split(n);return u.push(o),t.consumedBy===void 0&&this.tree.add(t),u}}const IE=typeof process<"u"&&oL.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,dF=typeof process<"u"&&oL.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class fF{run(t,n,o){$a.type=t,hm.reset();const u=[new SE(n,!0)];for(let O=0,R=o.length;O<R;O++)u.push(new SE(o[O],!1));if($a.numMultiPolys=u.length,$a.type==="difference"){const O=u[0];let R=1;for(;R<u.length;)yx(u[R].bbox,O.bbox)!==null?R++:u.splice(R,1)}if($a.type==="intersection")for(let O=0,R=u.length;O<R;O++){const N=u[O];for(let V=O+1,H=u.length;V<H;V++)if(yx(N.bbox,u[V].bbox)===null)return[]}const m=new Jb(aa.compare);for(let O=0,R=u.length;O<R;O++){const N=u[O].getSweepEvents();for(let V=0,H=N.length;V<H;V++)if(m.insert(N[V]),m.size>IE)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const y=new hF(m);let d=m.size,M=m.pop();for(;M;){const O=M.key;if(m.size===d){const N=O.segment;throw new Error(`Unable to pop() ${O.isLeft?"left":"right"} SweepEvent [${O.point.x}, ${O.point.y}] from segment #${N.id} [${N.leftSE.point.x}, ${N.leftSE.point.y}] -> [${N.rightSE.point.x}, ${N.rightSE.point.y}] from queue.`)}if(m.size>IE)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(y.segments.length>dF)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const R=y.process(O);for(let N=0,V=R.length;N<V;N++){const H=R[N];H.consumedBy===void 0&&m.insert(H)}d=m.size,M=m.pop()}hm.reset();const A=jy.factory(y.segments);return new cF(A).getGeom()}}const $a=new fF,pF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return $a.run("union",e,n)},mF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return $a.run("intersection",e,n)},gF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return $a.run("xor",e,n)},yF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return $a.run("difference",e,n)};var vL={union:pF,intersection:mF,xor:gF,difference:yF};function _L(e,t,n){if(e!==null)for(var o,u,m,y,d,M,A,O=0,R=0,N,V=e.type,H=V==="FeatureCollection",ne=V==="Feature",de=H?e.features.length:1,Y=0;Y<de;Y++){A=H?e.features[Y].geometry:ne?e.geometry:e,N=A?A.type==="GeometryCollection":!1,d=N?A.geometries.length:1;for(var X=0;X<d;X++){var Q=0,ie=0;if(y=N?A.geometries[X]:A,y!==null){M=y.coordinates;var he=y.type;switch(O=0,he){case null:break;case"Point":if(t(M,R,Y,Q,ie)===!1)return!1;R++,Q++;break;case"LineString":case"MultiPoint":for(o=0;o<M.length;o++){if(t(M[o],R,Y,Q,ie)===!1)return!1;R++,he==="MultiPoint"&&Q++}he==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(o=0;o<M.length;o++){for(u=0;u<M[o].length-O;u++){if(t(M[o][u],R,Y,Q,ie)===!1)return!1;R++}he==="MultiLineString"&&Q++,he==="Polygon"&&ie++}he==="Polygon"&&Q++;break;case"MultiPolygon":for(o=0;o<M.length;o++){for(ie=0,u=0;u<M[o].length;u++){for(m=0;m<M[o][u].length-O;m++){if(t(M[o][u][m],R,Y,Q,ie)===!1)return!1;R++}ie++}Q++}break;case"GeometryCollection":for(o=0;o<y.geometries.length;o++)if(_L(y.geometries[o],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function TE(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Mv(e,t){var n,o,u,m,y,d,M,A,O,R,N=0,V=e.type==="FeatureCollection",H=e.type==="Feature",ne=V?e.features.length:1;for(n=0;n<ne;n++){for(d=V?e.features[n].geometry:H?e.geometry:e,A=V?e.features[n].properties:H?e.properties:{},O=V?e.features[n].bbox:H?e.bbox:void 0,R=V?e.features[n].id:H?e.id:void 0,M=d?d.type==="GeometryCollection":!1,y=M?d.geometries.length:1,u=0;u<y;u++){if(m=M?d.geometries[u]:d,m===null){if(t(null,N,A,O,R)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(m,N,A,O,R)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<m.geometries.length;o++)if(t(m.geometries[o],N,A,O,R)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function vF(e,t={}){const n=[];if(Mv(e,u=>{n.push(u.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const o=vL.union(n[0],...n.slice(1));return o.length===0?null:o.length===1?Kb(o[0],t.properties):gL(o,t.properties)}var _F=vF;function xF(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return _L(e,o=>{n[0]>o[0]&&(n[0]=o[0]),n[1]>o[1]&&(n[1]=o[1]),n[2]<o[0]&&(n[2]=o[0]),n[3]<o[1]&&(n[3]=o[1])}),n}function bF(e,t={}){const n=xF(e),o=(n[0]+n[2])/2,u=(n[1]+n[3])/2;return UO([o,u],t.properties,t)}var wF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kF(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xL={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(wF,function(){function n(k,l){if(!(k instanceof l))throw new TypeError("Cannot call a class as a function")}function o(k,l){for(var h=0;h<l.length;h++){var f=l[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(k,f.key,f)}}function u(k,l,h){return l&&o(k.prototype,l),h&&o(k,h),k}function m(k,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(l&&l.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),l&&d(k,l)}function y(k){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},y(k)}function d(k,l){return d=Object.setPrototypeOf||function(h,f){return h.__proto__=f,h},d(k,l)}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(k,l,h){return A=M()?Reflect.construct:function(f,x,I){var F=[null];F.push.apply(F,x);var U=new(Function.bind.apply(f,F));return I&&d(U,I.prototype),U},A.apply(null,arguments)}function O(k){var l=typeof Map=="function"?new Map:void 0;return O=function(h){if(h===null||(f=h,Function.toString.call(f).indexOf("[native code]")===-1))return h;var f;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(h))return l.get(h);l.set(h,x)}function x(){return A(h,arguments,y(this).constructor)}return x.prototype=Object.create(h.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d(x,h)},O(k)}function R(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function N(k,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(k)}function V(k){var l=M();return function(){var h,f=y(k);if(l){var x=y(this).constructor;h=Reflect.construct(f,arguments,x)}else h=f.apply(this,arguments);return N(this,h)}}function H(k,l,h){return H=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(f,x,I){var F=function(Z,le){for(;!Object.prototype.hasOwnProperty.call(Z,le)&&(Z=y(Z))!==null;);return Z}(f,x);if(F){var U=Object.getOwnPropertyDescriptor(F,x);return U.get?U.get.call(I):U.value}},H(k,l,h||k)}function ne(k){return function(l){if(Array.isArray(l))return Y(l)}(k)||function(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}(k)||de(k)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function de(k,l){if(k){if(typeof k=="string")return Y(k,l);var h=Object.prototype.toString.call(k).slice(8,-1);return h==="Object"&&k.constructor&&(h=k.constructor.name),h==="Map"||h==="Set"?Array.from(k):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?Y(k,l):void 0}}function Y(k,l){(l==null||l>k.length)&&(l=k.length);for(var h=0,f=new Array(l);h<l;h++)f[h]=k[h];return f}function X(k,l){var h=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!h){if(Array.isArray(k)||(h=de(k))||l){h&&(k=h);var f=0,x=function(){};return{s:x,n:function(){return f>=k.length?{done:!0}:{done:!1,value:k[f++]}},e:function(Z){throw Z},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,U=!1;return{s:function(){h=h.call(k)},n:function(){var Z=h.next();return F=Z.done,Z},e:function(Z){U=!0,I=Z},f:function(){try{F||h.return==null||h.return()}finally{if(U)throw I}}}}var Q=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(l){this._quadrantSegments=l,this._quadrantSegments===0&&(this._joinStyle=k.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=k.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),l<=0&&(this._quadrantSegments=1),this._joinStyle!==k.JOIN_ROUND&&(this._quadrantSegments=k.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(l){this._joinStyle=l}},{key:"setSimplifyFactor",value:function(l){this._simplifyFactor=l<0?0:l}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(l){this._endCapStyle=l}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(l){this._mitreLimit=l}},{key:"setSingleSided",value:function(l){this._isSingleSided=l}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=k.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=k.CAP_ROUND,this._joinStyle=k.JOIN_ROUND,this._mitreLimit=k.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=k.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this.setQuadrantSegments(l)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this.setQuadrantSegments(h),this.setEndCapStyle(f)}else if(arguments.length===4){var x=arguments[0],I=arguments[1],F=arguments[2],U=arguments[3];this.setQuadrantSegments(x),this.setEndCapStyle(I),this.setJoinStyle(F),this.setMitreLimit(U)}}}},{key:"bufferDistanceError",value:function(l){var h=Math.PI/2/l;return 1-Math.cos(h/2)}}]),k}();Q.CAP_ROUND=1,Q.CAP_FLAT=2,Q.CAP_SQUARE=3,Q.JOIN_ROUND=1,Q.JOIN_MITRE=2,Q.JOIN_BEVEL=3,Q.DEFAULT_QUADRANT_SEGMENTS=8,Q.DEFAULT_MITRE_LIMIT=5,Q.DEFAULT_SIMPLIFY_FACTOR=.01;var ie=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({Exception:h})[0],x}return u(h,[{key:"toString",value:function(){return this.message}}]),h}(O(Error)),he=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({IllegalArgumentException:h})[0],x}return h}(ie),_e=function(){function k(){n(this,k)}return u(k,[{key:"filter",value:function(l){}}]),k}();function pe(){}function Ie(){}function Le(){}var $e,Ze,et,at,Ne,rt,ut,wt,Ge=function(){function k(){n(this,k)}return u(k,null,[{key:"equalsWithTolerance",value:function(l,h,f){return Math.abs(l-h)<=f}}]),k}(),ct=function(){function k(l,h){n(this,k),this.low=h||0,this.high=l||0}return u(k,null,[{key:"toBinaryString",value:function(l){var h,f="";for(h=2147483648;h>0;h>>>=1)f+=(l.high&h)===h?"1":"0";for(h=2147483648;h>0;h>>>=1)f+=(l.low&h)===h?"1":"0";return f}}]),k}();function Je(){}function At(){}Je.NaN=NaN,Je.isNaN=function(k){return Number.isNaN(k)},Je.isInfinite=function(k){return!Number.isFinite(k)},Je.MAX_VALUE=Number.MAX_VALUE,Je.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Je.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(rt=2146435072,ut=new Float64Array(1),wt=new Int32Array(ut.buffer),Je.doubleToLongBits=function(k){ut[0]=k;var l=0|wt[0],h=0|wt[1];return(h&rt)===rt&&1048575&h&&l!==0&&(l=0,h=2146959360),new ct(h,l)},Je.longBitsToDouble=function(k){return wt[0]=k.low,wt[1]=k.high,ut[0]}):($e=1023,Ze=Math.log2,et=Math.floor,at=Math.pow,Ne=function(){for(var k=53;k>0;k--){var l=at(2,k)-1;if(et(Ze(l))+1===k)return l}return 0}(),Je.doubleToLongBits=function(k){var l,h,f,x,I,F,U,Z,le;if(k<0||1/k===Number.NEGATIVE_INFINITY?(F=1<<31,k=-k):F=0,k===0)return new ct(Z=F,le=0);if(k===1/0)return new ct(Z=2146435072|F,le=0);if(k!=k)return new ct(Z=2146959360,le=0);if(x=0,le=0,(l=et(k))>1)if(l<=Ne)(x=et(Ze(l)))<=20?(le=0,Z=l<<20-x&1048575):(le=l%(h=at(2,f=x-20))<<32-f,Z=l/h&1048575);else for(f=l,le=0;(f=et(h=f/2))!==0;)x++,le>>>=1,le|=(1&Z)<<31,Z>>>=1,h!==f&&(Z|=524288);if(U=x+$e,I=l===0,l=k-l,x<52&&l!==0)for(f=0;;){if((h=2*l)>=1?(l=h-1,I?(U--,I=!1):(f<<=1,f|=1,x++)):(l=h,I?--U==0&&(x++,I=!1):(f<<=1,x++)),x===20)Z|=f,f=0;else if(x===52){le|=f;break}if(h===1){x<20?Z|=f<<20-x:x<52&&(le|=f<<52-x);break}}return Z|=U<<20,new ct(Z|=F,le)},Je.longBitsToDouble=function(k){var l,h,f,x,I=k.high,F=k.low,U=I&1<<31?-1:1;for(f=((2146435072&I)>>20)-$e,x=0,h=1<<19,l=1;l<=20;l++)I&h&&(x+=at(2,-l)),h>>>=1;for(h=1<<31,l=21;l<=52;l++)F&h&&(x+=at(2,-l)),h>>>=1;if(f===-1023){if(x===0)return 0*U;f=-1022}else{if(f===1024)return x===0?U/0:NaN;x+=1}return U*x*at(2,f)});var Ut=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({RuntimeException:h})[0],x}return h}(ie),Sn=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,null,[{key:"constructor_",value:function(){if(arguments.length===0)Ut.constructor_.call(this);else if(arguments.length===1){var f=arguments[0];Ut.constructor_.call(this,f)}}}]),h}(Ut),Ct=function(){function k(){n(this,k)}return u(k,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)k.shouldNeverReachHere(null);else if(arguments.length===1){var l=arguments[0];throw new Sn("Should never reach here"+(l!==null?": "+l:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var l=arguments[0];k.isTrue(l,null)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];if(!h)throw f===null?new Sn:new Sn(f)}}},{key:"equals",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];k.equals(l,h,null)}else if(arguments.length===3){var f=arguments[0],x=arguments[1],I=arguments[2];if(!x.equals(f))throw new Sn("Expected "+f+" but encountered "+x+(I!==null?": "+I:""))}}}]),k}(),yn=new ArrayBuffer(8),Zn=new Float64Array(yn),nr=new Int32Array(yn),Be=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getM",value:function(){return Je.NaN}},{key:"setOrdinate",value:function(l,h){switch(l){case k.X:this.x=h;break;case k.Y:this.y=h;break;case k.Z:this.setZ(h);break;default:throw new he("Invalid ordinate index: "+l)}}},{key:"equals2D",value:function(){if(arguments.length===1){var l=arguments[0];return this.x===l.x&&this.y===l.y}if(arguments.length===2){var h=arguments[0],f=arguments[1];return!!Ge.equalsWithTolerance(this.x,h.x,f)&&!!Ge.equalsWithTolerance(this.y,h.y,f)}}},{key:"setM",value:function(l){throw new he("Invalid ordinate index: "+k.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(l){switch(l){case k.X:return this.x;case k.Y:return this.y;case k.Z:return this.getZ()}throw new he("Invalid ordinate index: "+l)}},{key:"equals3D",value:function(l){return this.x===l.x&&this.y===l.y&&(this.getZ()===l.getZ()||Je.isNaN(this.getZ())&&Je.isNaN(l.getZ()))}},{key:"equals",value:function(l){return l instanceof k&&this.equals2D(l)}},{key:"equalInZ",value:function(l,h){return Ge.equalsWithTolerance(this.getZ(),l.getZ(),h)}},{key:"setX",value:function(l){this.x=l}},{key:"compareTo",value:function(l){var h=l;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(l){this.z=l}},{key:"clone",value:function(){try{return null}catch(l){if(l instanceof CloneNotSupportedException)return Ct.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw l}}},{key:"copy",value:function(){return new k(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(l){var h=this.x-l.x,f=this.y-l.y,x=this.getZ()-l.getZ();return Math.sqrt(h*h+f*f+x*x)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(l){this.y=l}},{key:"distance",value:function(l){var h=this.x-l.x,f=this.y-l.y;return Math.sqrt(h*h+f*f)}},{key:"hashCode",value:function(){var l=17;return l=37*(l=37*l+k.hashCode(this.x))+k.hashCode(this.y)}},{key:"setCoordinate",value:function(l){this.x=l.x,this.y=l.y,this.z=l.getZ()}},{key:"interfaces_",get:function(){return[pe,Ie,Le]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)k.constructor_.call(this,0,0);else if(arguments.length===1){var l=arguments[0];k.constructor_.call(this,l.x,l.y,l.getZ())}else if(arguments.length===2){var h=arguments[0],f=arguments[1];k.constructor_.call(this,h,f,k.NULL_ORDINATE)}else if(arguments.length===3){var x=arguments[0],I=arguments[1],F=arguments[2];this.x=x,this.y=I,this.z=F}}},{key:"hashCode",value:function(l){return Zn[0]=l,nr[0]^nr[1]}}]),k}(),hr=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"compare",value:function(l,h){var f=k.compare(l.x,h.x);if(f!==0)return f;var x=k.compare(l.y,h.y);return x!==0?x:this._dimensionsToTest<=2?0:k.compare(l.getZ(),h.getZ())}},{key:"interfaces_",get:function(){return[At]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)k.constructor_.call(this,2);else if(arguments.length===1){var l=arguments[0];if(l!==2&&l!==3)throw new he("only 2 or 3 dimensions may be specified");this._dimensionsToTest=l}}},{key:"compare",value:function(l,h){return l<h?-1:l>h?1:Je.isNaN(l)?Je.isNaN(h)?0:-1:Je.isNaN(h)?1:0}}]),k}();Be.DimensionalComparator=hr,Be.NULL_ORDINATE=Je.NaN,Be.X=0,Be.Y=1,Be.Z=2,Be.M=3;var mn=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(l){if(!(l instanceof k))return!1;var h=l;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()}},{key:"intersection",value:function(l){if(this.isNull()||l.isNull()||!this.intersects(l))return new k;var h=this._minx>l._minx?this._minx:l._minx,f=this._miny>l._miny?this._miny:l._miny;return new k(h,this._maxx<l._maxx?this._maxx:l._maxx,f,this._maxy<l._maxy?this._maxy:l._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Be){var l=arguments[0];return this.covers(l.x,l.y)}if(arguments[0]instanceof k){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];return!this.isNull()&&f>=this._minx&&f<=this._maxx&&x>=this._miny&&x<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var l=arguments[0];return!this.isNull()&&!l.isNull()&&!(l._minx>this._maxx||l._maxx<this._minx||l._miny>this._maxy||l._maxy<this._miny)}if(arguments[0]instanceof Be){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var f=arguments[0],x=arguments[1];if(this.isNull())return!1;var I=f.x<x.x?f.x:x.x;if(I>this._maxx)return!1;var F=f.x>x.x?f.x:x.x;if(F<this._minx)return!1;var U=f.y<x.y?f.y:x.y;if(U>this._maxy)return!1;var Z=f.y>x.y?f.y:x.y;return!(Z<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var le=arguments[0],Ee=arguments[1];return!this.isNull()&&!(le>this._maxx||le<this._minx||Ee>this._maxy||Ee<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var l=this.getWidth(),h=this.getHeight();return Math.sqrt(l*l+h*h)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Be){var l=arguments[0];this.expandToInclude(l.x,l.y)}else if(arguments[0]instanceof k){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];this.isNull()?(this._minx=f,this._maxx=f,this._miny=x,this._maxy=x):(f<this._minx&&(this._minx=f),f>this._maxx&&(this._maxx=f),x<this._miny&&(this._miny=x),x>this._maxy&&(this._maxy=x))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var l=this.getWidth(),h=this.getHeight();return l<h?l:h}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(l){var h=l;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0}},{key:"translate",value:function(l,h){if(this.isNull())return null;this.init(this.getMinX()+l,this.getMaxX()+l,this.getMinY()+h,this.getMaxY()+h)}},{key:"copy",value:function(){return new k(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(l){return!(!this.isNull()&&!l.isNull())||l._minx>this._maxx||l._maxx<this._minx||l._miny>this._maxy||l._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var l=this.getWidth(),h=this.getHeight();return l>h?l:h}},{key:"expandBy",value:function(){if(arguments.length===1){var l=arguments[0];this.expandBy(l,l)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=f,this._maxy+=f,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var l=arguments[0];return this.covers(l)}if(arguments[0]instanceof Be){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];return this.covers(f,x)}}},{key:"centre",value:function(){return this.isNull()?null:new Be((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Be){var l=arguments[0];this.init(l.x,l.x,l.y,l.y)}else if(arguments[0]instanceof k){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];this.init(f.x,x.x,f.y,x.y)}else if(arguments.length===4){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3];I<F?(this._minx=I,this._maxx=F):(this._minx=F,this._maxx=I),U<Z?(this._miny=U,this._maxy=Z):(this._miny=Z,this._maxy=U)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(l){if(this.intersects(l))return 0;var h=0;this._maxx<l._minx?h=l._minx-this._maxx:this._minx>l._maxx&&(h=this._minx-l._maxx);var f=0;return this._maxy<l._miny?f=l._miny-this._maxy:this._miny>l._maxy&&(f=this._miny-l._maxy),h===0?f:f===0?h:Math.sqrt(h*h+f*f)}},{key:"hashCode",value:function(){var l=17;return l=37*(l=37*(l=37*(l=37*l+Be.hashCode(this._minx))+Be.hashCode(this._maxx))+Be.hashCode(this._miny))+Be.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[pe,Le]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Be){var l=arguments[0];this.init(l.x,l.x,l.y,l.y)}else if(arguments[0]instanceof k){var h=arguments[0];this.init(h)}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];this.init(f.x,x.x,f.y,x.y)}else if(arguments.length===4){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3];this.init(I,F,U,Z)}}},{key:"intersects",value:function(){if(arguments.length===3){var l=arguments[0],h=arguments[1],f=arguments[2];return f.x>=(l.x<h.x?l.x:h.x)&&f.x<=(l.x>h.x?l.x:h.x)&&f.y>=(l.y<h.y?l.y:h.y)&&f.y<=(l.y>h.y?l.y:h.y)}if(arguments.length===4){var x=arguments[0],I=arguments[1],F=arguments[2],U=arguments[3],Z=Math.min(F.x,U.x),le=Math.max(F.x,U.x),Ee=Math.min(x.x,I.x),Re=Math.max(x.x,I.x);return!(Ee>le)&&!(Re<Z)&&(Z=Math.min(F.y,U.y),le=Math.max(F.y,U.y),Ee=Math.min(x.y,I.y),Re=Math.max(x.y,I.y),!(Ee>le)&&!(Re<Z))}}}]),k}(),Dt=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(l){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(l){return this===l||this.equalsExact(l,0)}},{key:"geometryChanged",value:function(){this.apply(k.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(l){return l!==null&&this.norm().equalsExact(l.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var l;if(arguments.length===1){var h=arguments[0];return l=h,this.getTypeCode()!==l.getTypeCode()?this.getTypeCode()-l.getTypeCode():this.isEmpty()&&l.isEmpty()?0:this.isEmpty()?-1:l.isEmpty()?1:this.compareToSameClass(h)}if(arguments.length===2){var f=arguments[0],x=arguments[1];return l=f,this.getTypeCode()!==l.getTypeCode()?this.getTypeCode()-l.getTypeCode():this.isEmpty()&&l.isEmpty()?0:this.isEmpty()?-1:l.isEmpty()?1:this.compareToSameClass(f,x)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(l){if(l.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION)throw new he("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(l,h,f){return f===0?l.equals(h):l.distance(h)<=f}},{key:"norm",value:function(){var l=this.copy();return l.normalize(),l}},{key:"reverse",value:function(){var l=this.reverseInternal();return this.envelope!=null&&(l.envelope=this.envelope.copy()),l.setSRID(this.getSRID()),l}},{key:"copy",value:function(){var l=this.copyInternal();return l.envelope=this._envelope==null?null:this._envelope.copy(),l._SRID=this._SRID,l._userData=this._userData,l}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new mn(this._envelope)}},{key:"setSRID",value:function(l){this._SRID=l}},{key:"setUserData",value:function(l){this._userData=l}},{key:"compare",value:function(l,h){for(var f=l.iterator(),x=h.iterator();f.hasNext()&&x.hasNext();){var I=f.next(),F=x.next(),U=I.compareTo(F);if(U!==0)return U}return f.hasNext()?1:x.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(l){return this.getClass()===l.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===k.TYPECODE_MULTIPOINT||this.getTypeCode()===k.TYPECODE_MULTILINESTRING||this.getTypeCode()===k.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Ie,pe,Le]}},{key:"getClass",value:function(){return k}}],[{key:"hasNonEmptyElements",value:function(l){for(var h=0;h<l.length;h++)if(!l[h].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(l){for(var h=0;h<l.length;h++)if(l[h]===null)return!0;return!1}}]),k}();Dt.constructor_=function(k){k&&(this._envelope=null,this._userData=null,this._factory=k,this._SRID=k.getSRID())},Dt.TYPECODE_POINT=0,Dt.TYPECODE_MULTIPOINT=1,Dt.TYPECODE_LINESTRING=2,Dt.TYPECODE_LINEARRING=3,Dt.TYPECODE_MULTILINESTRING=4,Dt.TYPECODE_POLYGON=5,Dt.TYPECODE_MULTIPOLYGON=6,Dt.TYPECODE_GEOMETRYCOLLECTION=7,Dt.TYPENAME_POINT="Point",Dt.TYPENAME_MULTIPOINT="MultiPoint",Dt.TYPENAME_LINESTRING="LineString",Dt.TYPENAME_LINEARRING="LinearRing",Dt.TYPENAME_MULTILINESTRING="MultiLineString",Dt.TYPENAME_POLYGON="Polygon",Dt.TYPENAME_MULTIPOLYGON="MultiPolygon",Dt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Dt.geometryChangedFilter={get interfaces_(){return[_e]},filter:function(k){k.geometryChangedAction()}};var xe=function(){function k(){n(this,k)}return u(k,null,[{key:"toLocationSymbol",value:function(l){switch(l){case k.EXTERIOR:return"e";case k.BOUNDARY:return"b";case k.INTERIOR:return"i";case k.NONE:return"-"}throw new he("Unknown location value: "+l)}}]),k}();xe.INTERIOR=0,xe.BOUNDARY=1,xe.EXTERIOR=2,xe.NONE=-1;var Vt=function(){function k(){n(this,k)}return u(k,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),k}(),gn=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({NoSuchElementException:h})[0],x}return h}(ie),Jt=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({UnsupportedOperationException:h})[0],x}return h}(ie),Ve=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.apply(this,arguments)}return u(h,[{key:"contains",value:function(){}}]),h}(Vt),Er=function(k,l){m(f,k);var h=V(f);function f(x){var I;return n(this,f),(I=h.call(this)).map=new Map,x instanceof Vt&&I.addAll(x),I}return u(f,[{key:"contains",value:function(x){var I=x.hashCode?x.hashCode():x;return!!this.map.has(I)}},{key:"add",value:function(x){var I=x.hashCode?x.hashCode():x;return!this.map.has(I)&&!!this.map.set(I,x)}},{key:"addAll",value:function(x){var I,F=X(x);try{for(F.s();!(I=F.n()).done;){var U=I.value;this.add(U)}}catch(Z){F.e(Z)}finally{F.f()}return!0}},{key:"remove",value:function(){throw new Jt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ln(this.map)}},{key:l,value:function(){return this.map}}]),f}(Ve,Symbol.iterator),Ln=function(){function k(l){n(this,k),this.iterator=l.values();var h=this.iterator.next(),f=h.done,x=h.value;this.done=f,this.value=x}return u(k,[{key:"next",value:function(){if(this.done)throw new gn;var l=this.value,h=this.iterator.next(),f=h.done,x=h.value;return this.done=f,this.value=x,l}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Jt}}]),k}(),Xe=function(){function k(){n(this,k)}return u(k,null,[{key:"opposite",value:function(l){return l===k.LEFT?k.RIGHT:l===k.RIGHT?k.LEFT:l}}]),k}();Xe.ON=0,Xe.LEFT=1,Xe.RIGHT=2;var En=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({EmptyStackException:h})[0],x}return h}(ie),li=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this,f)).name=Object.keys({IndexOutOfBoundsException:h})[0],x}return h}(ie),kr=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.apply(this,arguments)}return u(h,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),h}(Vt),vi=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),(f=l.call(this)).array=[],f}return u(h,[{key:"add",value:function(f){return this.array.push(f),!0}},{key:"get",value:function(f){if(f<0||f>=this.size())throw new li;return this.array[f]}},{key:"push",value:function(f){return this.array.push(f),f}},{key:"pop",value:function(){if(this.array.length===0)throw new En;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new En;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(f){return this.array.indexOf(f)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),h}(kr);function Wt(k,l){return k.interfaces_&&k.interfaces_.indexOf(l)>-1}var dr=function(){function k(l){n(this,k),this.str=l}return u(k,[{key:"append",value:function(l){this.str+=l}},{key:"setCharAt",value:function(l,h){this.str=this.str.substr(0,l)+h+this.str.substr(l+1)}},{key:"toString",value:function(){return this.str}}]),k}(),qr=function(){function k(l){n(this,k),this.value=l}return u(k,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(l){return this.value<l?-1:this.value>l?1:0}}],[{key:"compare",value:function(l,h){return l<h?-1:l>h?1:0}},{key:"isNan",value:function(l){return Number.isNaN(l)}},{key:"valueOf",value:function(l){return new k(l)}}]),k}(),Qi=function(){function k(){n(this,k)}return u(k,null,[{key:"isWhitespace",value:function(l){return l<=32&&l>=0||l===127}},{key:"toUpperCase",value:function(l){return l.toUpperCase()}}]),k}(),He=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"le",value:function(l){return this._hi<l._hi||this._hi===l._hi&&this._lo<=l._lo}},{key:"extractSignificantDigits",value:function(l,h){var f=this.abs(),x=k.magnitude(f._hi),I=k.TEN.pow(x);(f=f.divide(I)).gt(k.TEN)?(f=f.divide(k.TEN),x+=1):f.lt(k.ONE)&&(f=f.multiply(k.TEN),x-=1);for(var F=x+1,U=new dr,Z=k.MAX_PRINT_DIGITS-1,le=0;le<=Z;le++){l&&le===F&&U.append(".");var Ee=Math.trunc(f._hi);if(Ee<0)break;var Re=!1,Ye=0;Ee>9?(Re=!0,Ye="9"):Ye="0"+Ee,U.append(Ye),f=f.subtract(k.valueOf(Ee)).multiply(k.TEN),Re&&f.selfAdd(k.TEN);var pt=!0,ft=k.magnitude(f._hi);if(ft<0&&Math.abs(ft)>=Z-le&&(pt=!1),!pt)break}return h[0]=x,U.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return this.add(l.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof k){var l=arguments[0];return this._hi===l._hi&&this._lo===l._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return this.isNaN()?this:this.selfAdd(-l._hi,-l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(l){return this.le(l)?this:l}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var l=arguments[0];return this.selfDivide(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var f=arguments[0],x=arguments[1],I=null,F=null,U=null,Z=null,le=null,Ee=null,Re=null,Ye=null;return le=this._hi/f,Ye=(I=(Ee=k.SPLIT*le)-(I=Ee-le))*(U=(Ye=k.SPLIT*f)-(U=Ye-f))-(Re=le*f)+I*(Z=f-U)+(F=le-I)*U+F*Z,Ye=le+(Ee=(this._hi-Re-Ye+this._lo-le*x)/f),this._hi=Ye,this._lo=le-Ye+Ee,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof k){var l=arguments[0],h=null,f=null,x=null,I=null,F=null,U=null,Z=null,le=null;f=(F=this._hi/l._hi)-(h=(U=k.SPLIT*F)-(h=U-F)),le=h*(x=(le=k.SPLIT*l._hi)-(x=le-l._hi))-(Z=F*l._hi)+h*(I=l._hi-x)+f*x+f*I;var Ee=le=F+(U=(this._hi-Z-le+this._lo-F*l._lo)/l._hi),Re=F-le+U;return new k(Ee,Re)}if(typeof arguments[0]=="number"){var Ye=arguments[0];return Je.isNaN(Ye)?k.createNaN():k.copy(this).selfDivide(Ye,0)}}},{key:"ge",value:function(l){return this._hi>l._hi||this._hi===l._hi&&this._lo>=l._lo}},{key:"pow",value:function(l){if(l===0)return k.valueOf(1);var h=new k(this),f=k.valueOf(1),x=Math.abs(l);if(x>1)for(;x>0;)x%2==1&&f.selfMultiply(h),(x/=2)>0&&(h=h.sqr());else f=h;return l<0?f.reciprocal():f}},{key:"ceil",value:function(){if(this.isNaN())return k.NaN;var l=Math.ceil(this._hi),h=0;return l===this._hi&&(h=Math.ceil(this._lo)),new k(l,h)}},{key:"compareTo",value:function(l){var h=l;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return this.init(l),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}}},{key:"max",value:function(l){return this.ge(l)?this:l}},{key:"sqrt",value:function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var l=1/Math.sqrt(this._hi),h=this._hi*l,f=k.valueOf(h),x=this.subtract(f.sqr())._hi*(.5*l);return f.add(x)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var l=arguments[0];return this.selfAdd(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0],f=null,x=null,I=null,F=null,U=null,Z=null;return F=(I=this._hi+h)-(U=I-this._hi),x=(Z=(F=h-U+(this._hi-F))+this._lo)+(I-(f=I+Z)),this._hi=f+x,this._lo=x+(f-this._hi),this}}else if(arguments.length===2){var le=arguments[0],Ee=arguments[1],Re=null,Ye=null,pt=null,ft=null,qt=null,Yt=null,ln=null;ft=this._hi+le,Ye=this._lo+Ee,qt=ft-(Yt=ft-this._hi),pt=Ye-(ln=Ye-this._lo);var Cn=(Re=ft+(Yt=(qt=le-Yt+(this._hi-qt))+Ye))+(Yt=(pt=Ee-ln+(this._lo-pt))+(Yt+(ft-Re))),Yn=Yt+(Re-Cn);return this._hi=Cn,this._lo=Yn,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var l=arguments[0];return this.selfMultiply(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var f=arguments[0],x=arguments[1],I=null,F=null,U=null,Z=null,le=null,Ee=null;I=(le=k.SPLIT*this._hi)-this._hi,Ee=k.SPLIT*f,I=le-I,F=this._hi-I,U=Ee-f;var Re=(le=this._hi*f)+(Ee=I*(U=Ee-U)-le+I*(Z=f-U)+F*U+F*Z+(this._hi*x+this._lo*f)),Ye=Ee+(I=le-Re);return this._hi=Re,this._lo=Ye,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return k.NaN;var l=Math.floor(this._hi),h=0;return l===this._hi&&(h=Math.floor(this._lo)),new k(l,h)}},{key:"negate",value:function(){return this.isNaN()?this:new k(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(l){if(l instanceof CloneNotSupportedException)return null;throw l}}},{key:"multiply",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return l.isNaN()?k.createNaN():k.copy(this).selfMultiply(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return Je.isNaN(h)?k.createNaN():k.copy(this).selfMultiply(h,0)}}},{key:"isNaN",value:function(){return Je.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var l=k.magnitude(this._hi);return l>=-3&&l<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var l=this.getSpecialNumberString();if(l!==null)return l;var h=new Array(1).fill(null),f=this.extractSignificantDigits(!0,h),x=h[0]+1,I=f;if(f.charAt(0)===".")I="0"+f;else if(x<0)I="0."+k.stringOfChar("0",-x)+f;else if(f.indexOf(".")===-1){var F=x-f.length;I=f+k.stringOfChar("0",F)+".0"}return this.isNegative()?"-"+I:I}},{key:"reciprocal",value:function(){var l,h,f,x,I=null,F=null,U=null,Z=null;l=(f=1/this._hi)-(I=(U=k.SPLIT*f)-(I=U-f)),F=(Z=k.SPLIT*this._hi)-this._hi;var le=f+(U=(1-(x=f*this._hi)-(Z=I*(F=Z-F)-x+I*(h=this._hi-F)+l*F+l*h)-f*this._lo)/this._hi);return new k(le,f-le+U)}},{key:"toSciNotation",value:function(){if(this.isZero())return k.SCI_NOT_ZERO;var l=this.getSpecialNumberString();if(l!==null)return l;var h=new Array(1).fill(null),f=this.extractSignificantDigits(!1,h),x=k.SCI_NOT_EXPONENT_CHAR+h[0];if(f.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+f);var I="";f.length>1&&(I=f.substring(1));var F=f.charAt(0)+"."+I;return this.isNegative()?"-"+F+x:F+x}},{key:"abs",value:function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(l){return this._hi<l._hi||this._hi===l._hi&&this._lo<l._lo}},{key:"add",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return k.copy(this).selfAdd(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return k.copy(this).selfAdd(h)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var l=arguments[0];this._hi=l,this._lo=0}else if(arguments[0]instanceof k){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];this._hi=f,this._lo=x}}},{key:"gt",value:function(l){return this._hi>l._hi||this._hi===l._hi&&this._lo>l._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[Le,pe,Ie]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var l=arguments[0];this.init(l)}else if(arguments[0]instanceof k){var h=arguments[0];this.init(h)}else if(typeof arguments[0]=="string"){var f=arguments[0];k.constructor_.call(this,k.parse(f))}}else if(arguments.length===2){var x=arguments[0],I=arguments[1];this.init(x,I)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3];return k.determinant(k.valueOf(l),k.valueOf(h),k.valueOf(f),k.valueOf(x))}if(arguments[3]instanceof k&&arguments[2]instanceof k&&arguments[0]instanceof k&&arguments[1]instanceof k){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3],le=I.multiply(Z).selfSubtract(F.multiply(U));return le}}},{key:"sqr",value:function(l){return k.valueOf(l).selfMultiply(l)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var l=arguments[0];return k.parse(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return new k(h)}}},{key:"sqrt",value:function(l){return k.valueOf(l).sqrt()}},{key:"parse",value:function(l){for(var h=0,f=l.length;Qi.isWhitespace(l.charAt(h));)h++;var x=!1;if(h<f){var I=l.charAt(h);I!=="-"&&I!=="+"||(h++,I==="-"&&(x=!0))}for(var F=new k,U=0,Z=0,le=0,Ee=!1;!(h>=f);){var Re=l.charAt(h);if(h++,Qi.isDigit(Re)){var Ye=Re-"0";F.selfMultiply(k.TEN),F.selfAdd(Ye),U++}else{if(Re!=="."){if(Re==="e"||Re==="E"){var pt=l.substring(h);try{le=qr.parseInt(pt)}catch(Cn){throw Cn instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+pt+" in string "+l):Cn}break}throw new NumberFormatException("Unexpected character '"+Re+"' at position "+h+" in string "+l)}Z=U,Ee=!0}}var ft=F;Ee||(Z=U);var qt=U-Z-le;if(qt===0)ft=F;else if(qt>0){var Yt=k.TEN.pow(qt);ft=F.divide(Yt)}else if(qt<0){var ln=k.TEN.pow(-qt);ft=F.multiply(ln)}return x?ft.negate():ft}},{key:"createNaN",value:function(){return new k(Je.NaN,Je.NaN)}},{key:"copy",value:function(l){return new k(l)}},{key:"magnitude",value:function(l){var h=Math.abs(l),f=Math.log(h)/Math.log(10),x=Math.trunc(Math.floor(f));return 10*Math.pow(10,x)<=h&&(x+=1),x}},{key:"stringOfChar",value:function(l,h){for(var f=new dr,x=0;x<h;x++)f.append(l);return f.toString()}}]),k}();He.PI=new He(3.141592653589793,12246467991473532e-32),He.TWO_PI=new He(6.283185307179586,24492935982947064e-32),He.PI_2=new He(1.5707963267948966,6123233995736766e-32),He.E=new He(2.718281828459045,14456468917292502e-32),He.NaN=new He(Je.NaN,Je.NaN),He.EPS=123259516440783e-46,He.SPLIT=134217729,He.MAX_PRINT_DIGITS=32,He.TEN=He.valueOf(10),He.ONE=He.valueOf(1),He.SCI_NOT_EXPONENT_CHAR="E",He.SCI_NOT_ZERO="0.0E0";var Gt=function(){function k(){n(this,k)}return u(k,null,[{key:"orientationIndex",value:function(l,h,f){var x=k.orientationIndexFilter(l,h,f);if(x<=1)return x;var I=He.valueOf(h.x).selfAdd(-l.x),F=He.valueOf(h.y).selfAdd(-l.y),U=He.valueOf(f.x).selfAdd(-h.x),Z=He.valueOf(f.y).selfAdd(-h.y);return I.selfMultiply(Z).selfSubtract(F.selfMultiply(U)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof He&&arguments[2]instanceof He&&arguments[0]instanceof He&&arguments[1]instanceof He){var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3],I=l.multiply(x).selfSubtract(h.multiply(f));return I.signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var F=arguments[0],U=arguments[1],Z=arguments[2],le=arguments[3],Ee=He.valueOf(F),Re=He.valueOf(U),Ye=He.valueOf(Z),pt=He.valueOf(le),ft=Ee.multiply(pt).selfSubtract(Re.multiply(Ye));return ft.signum()}}},{key:"intersection",value:function(l,h,f,x){var I=new He(l.y).selfSubtract(h.y),F=new He(h.x).selfSubtract(l.x),U=new He(l.x).selfMultiply(h.y).selfSubtract(new He(h.x).selfMultiply(l.y)),Z=new He(f.y).selfSubtract(x.y),le=new He(x.x).selfSubtract(f.x),Ee=new He(f.x).selfMultiply(x.y).selfSubtract(new He(x.x).selfMultiply(f.y)),Re=F.multiply(Ee).selfSubtract(le.multiply(U)),Ye=Z.multiply(U).selfSubtract(I.multiply(Ee)),pt=I.multiply(le).selfSubtract(Z.multiply(F)),ft=Re.selfDivide(pt).doubleValue(),qt=Ye.selfDivide(pt).doubleValue();return Je.isNaN(ft)||Je.isInfinite(ft)||Je.isNaN(qt)||Je.isInfinite(qt)?null:new Be(ft,qt)}},{key:"orientationIndexFilter",value:function(l,h,f){var x=null,I=(l.x-f.x)*(h.y-f.y),F=(l.y-f.y)*(h.x-f.x),U=I-F;if(I>0){if(F<=0)return k.signum(U);x=I+F}else{if(!(I<0)||F>=0)return k.signum(U);x=-I-F}var Z=k.DP_SAFE_EPSILON*x;return U>=Z||-U>=Z?k.signum(U):2}},{key:"signum",value:function(l){return l>0?1:l<0?-1:0}}]),k}();Gt.DP_SAFE_EPSILON=1e-15;var Kt=function(){function k(){n(this,k)}return u(k,[{key:"getM",value:function(l){if(this.hasM()){var h=this.getDimension()-this.getMeasures();return this.getOrdinate(l,h)}return Je.NaN}},{key:"setOrdinate",value:function(l,h,f){}},{key:"getZ",value:function(l){return this.hasZ()?this.getOrdinate(l,2):Je.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(l,h){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(l){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(l){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(l){}},{key:"copy",value:function(){}},{key:"getY",value:function(l){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[Ie]}}]),k}();Kt.X=0,Kt.Y=1,Kt.Z=2,Kt.M=3;var jt=function(){function k(){n(this,k)}return u(k,null,[{key:"index",value:function(l,h,f){return Gt.orientationIndex(l,h,f)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var l=arguments[0],h=l.length-1;if(h<3)throw new he("Ring has fewer than 4 points, so orientation cannot be determined");for(var f=l[0],x=0,I=1;I<=h;I++){var F=l[I];F.y>f.y&&(f=F,x=I)}var U=x;do(U-=1)<0&&(U=h);while(l[U].equals2D(f)&&U!==x);var Z=x;do Z=(Z+1)%h;while(l[Z].equals2D(f)&&Z!==x);var le=l[U],Ee=l[Z];if(le.equals2D(f)||Ee.equals2D(f)||le.equals2D(Ee))return!1;var Re=k.index(le,f,Ee),Ye=null;return Ye=Re===0?le.x>Ee.x:Re>0,Ye}if(Wt(arguments[0],Kt)){var pt=arguments[0],ft=pt.size()-1;if(ft<3)throw new he("Ring has fewer than 4 points, so orientation cannot be determined");for(var qt=pt.getCoordinate(0),Yt=0,ln=1;ln<=ft;ln++){var Cn=pt.getCoordinate(ln);Cn.y>qt.y&&(qt=Cn,Yt=ln)}var Yn=null,zn=Yt;do(zn-=1)<0&&(zn=ft),Yn=pt.getCoordinate(zn);while(Yn.equals2D(qt)&&zn!==Yt);var Zr=null,bo=Yt;do bo=(bo+1)%ft,Zr=pt.getCoordinate(bo);while(Zr.equals2D(qt)&&bo!==Yt);if(Yn.equals2D(qt)||Zr.equals2D(qt)||Yn.equals2D(Zr))return!1;var rs=k.index(Yn,qt,Zr);return rs===0?Yn.x>Zr.x:rs>0}}}]),k}();jt.CLOCKWISE=-1,jt.RIGHT=jt.CLOCKWISE,jt.COUNTERCLOCKWISE=1,jt.LEFT=jt.COUNTERCLOCKWISE,jt.COLLINEAR=0,jt.STRAIGHT=jt.COLLINEAR;var eo=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(l,h){var f=this.getRightmostSideOfSegment(l,h);return f<0&&(f=this.getRightmostSideOfSegment(l,h-1)),f<0&&(this._minCoord=null,this.checkForRightmostCoordinate(l)),f}},{key:"findRightmostEdgeAtVertex",value:function(){var l=this._minDe.getEdge().getCoordinates();Ct.isTrue(this._minIndex>0&&this._minIndex<l.length,"rightmost point expected to be interior vertex of edge");var h=l[this._minIndex-1],f=l[this._minIndex+1],x=jt.index(this._minCoord,f,h),I=!1;(h.y<this._minCoord.y&&f.y<this._minCoord.y&&x===jt.COUNTERCLOCKWISE||h.y>this._minCoord.y&&f.y>this._minCoord.y&&x===jt.CLOCKWISE)&&(I=!0),I&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(l,h){var f=l.getEdge().getCoordinates();if(h<0||h+1>=f.length||f[h].y===f[h+1].y)return-1;var x=Xe.LEFT;return f[h].y<f[h+1].y&&(x=Xe.RIGHT),x}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(l){for(var h=l.getEdge().getCoordinates(),f=0;f<h.length-1;f++)(this._minCoord===null||h[f].x>this._minCoord.x)&&(this._minDe=l,this._minIndex=f,this._minCoord=h[f])}},{key:"findRightmostEdgeAtNode",value:function(){var l=this._minDe.getNode().getEdges();this._minDe=l.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(l){for(var h=l.iterator();h.hasNext();){var f=h.next();f.isForward()&&this.checkForRightmostCoordinate(f)}Ct.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Xe.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),k}(),lt=function(k){m(h,k);var l=V(h);function h(f,x){var I;return n(this,h),(I=l.call(this,x?f+" [ "+x+" ]":f)).pt=x?new Be(x):void 0,I.name=Object.keys({TopologyException:h})[0],I}return u(h,[{key:"getCoordinate",value:function(){return this.pt}}]),h}(Ut),on=function(){function k(){n(this,k),this.array=[]}return u(k,[{key:"addLast",value:function(l){this.array.push(l)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}]),k}(),st=function(k,l){m(f,k);var h=V(f);function f(x){var I;return n(this,f),(I=h.call(this)).array=[],x instanceof Vt&&I.addAll(x),I}return u(f,[{key:"interfaces_",get:function(){return[kr,Vt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(x){return arguments.length===1?this.array.push(x):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(x){var I,F=X(x);try{for(F.s();!(I=F.n()).done;){var U=I.value;this.array.push(U)}}catch(Z){F.e(Z)}finally{F.f()}}},{key:"set",value:function(x,I){var F=this.array[x];return this.array[x]=I,F}},{key:"iterator",value:function(){return new _i(this)}},{key:"get",value:function(x){if(x<0||x>=this.size())throw new li;return this.array[x]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(x){x?this.array.sort(function(I,F){return x.compare(I,F)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(x){for(var I=0,F=this.array.length;I<F;I++)if(this.array[I]===x)return!!this.array.splice(I,1);return!1}},{key:l,value:function(){return this.array.values()}}]),f}(kr,Symbol.iterator),_i=function(){function k(l){n(this,k),this.arrayList=l,this.position=0}return u(k,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new gn;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(l){return this.arrayList.set(this.position-1,l)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),k}(),to=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"clearVisitedEdges",value:function(){for(var l=this._dirEdgeList.iterator();l.hasNext();)l.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(l){for(var h=null,f=l.getEdges().iterator();f.hasNext();){var x=f.next();if(x.isVisited()||x.getSym().isVisited()){h=x;break}}if(h===null)throw new lt("unable to find edge to compute depths at "+l.getCoordinate());l.getEdges().computeDepths(h);for(var I=l.getEdges().iterator();I.hasNext();){var F=I.next();F.setVisited(!0),this.copySymDepths(F)}}},{key:"computeDepth",value:function(l){this.clearVisitedEdges();var h=this._finder.getEdge();h.getNode(),h.getLabel(),h.setEdgeDepths(Xe.RIGHT,l),this.copySymDepths(h),this.computeDepths(h)}},{key:"create",value:function(l){this.addReachable(l),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var l=this._dirEdgeList.iterator();l.hasNext();){var h=l.next();h.getDepth(Xe.RIGHT)>=1&&h.getDepth(Xe.LEFT)<=0&&!h.isInteriorAreaEdge()&&h.setInResult(!0)}}},{key:"computeDepths",value:function(l){var h=new Er,f=new on,x=l.getNode();for(f.addLast(x),h.add(x),l.setVisited(!0);!f.isEmpty();){var I=f.removeFirst();h.add(I),this.computeNodeDepth(I);for(var F=I.getEdges().iterator();F.hasNext();){var U=F.next().getSym();if(!U.isVisited()){var Z=U.getNode();h.contains(Z)||(f.addLast(Z),h.add(Z))}}}}},{key:"compareTo",value:function(l){var h=l;return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var l=new mn,h=this._dirEdgeList.iterator();h.hasNext();)for(var f=h.next().getEdge().getCoordinates(),x=0;x<f.length-1;x++)l.expandToInclude(f[x]);this._env=l}return this._env}},{key:"addReachable",value:function(l){var h=new vi;for(h.add(l);!h.empty();){var f=h.pop();this.add(f,h)}}},{key:"copySymDepths",value:function(l){var h=l.getSym();h.setDepth(Xe.LEFT,l.getDepth(Xe.RIGHT)),h.setDepth(Xe.RIGHT,l.getDepth(Xe.LEFT))}},{key:"add",value:function(l,h){l.setVisited(!0),this._nodes.add(l);for(var f=l.getEdges().iterator();f.hasNext();){var x=f.next();this._dirEdgeList.add(x);var I=x.getSym().getNode();I.isVisited()||h.push(I)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new st,this._nodes=new st,this._rightMostCoord=null,this._env=null,this._finder=new eo}}]),k}(),Qt=function(){function k(){n(this,k)}return u(k,null,[{key:"intersection",value:function(l,h,f,x){var I=l.x<h.x?l.x:h.x,F=l.y<h.y?l.y:h.y,U=l.x>h.x?l.x:h.x,Z=l.y>h.y?l.y:h.y,le=f.x<x.x?f.x:x.x,Ee=f.y<x.y?f.y:x.y,Re=f.x>x.x?f.x:x.x,Ye=f.y>x.y?f.y:x.y,pt=((I>le?I:le)+(U<Re?U:Re))/2,ft=((F>Ee?F:Ee)+(Z<Ye?Z:Ye))/2,qt=l.x-pt,Yt=l.y-ft,ln=h.x-pt,Cn=h.y-ft,Yn=f.x-pt,zn=f.y-ft,Zr=x.x-pt,bo=x.y-ft,rs=Yt-Cn,qn=ln-qt,Pi=qt*Cn-ln*Yt,di=zn-bo,is=Zr-Yn,Mu=Yn*bo-Zr*zn,ql=rs*is-di*qn,Xs=(qn*Mu-is*Pi)/ql,Go=(di*Pi-rs*Mu)/ql;return Je.isNaN(Xs)||Je.isInfinite(Xs)||Je.isNaN(Go)||Je.isInfinite(Go)?null:new Be(Xs+pt,Go+ft)}}]),k}(),Sr=function(){function k(){n(this,k)}return u(k,null,[{key:"arraycopy",value:function(l,h,f,x,I){for(var F=0,U=h;U<h+I;U++)f[x+F]=l[U],F++}},{key:"getProperty",value:function(l){return{"line.separator":`
`}[l]}}]),k}(),Ii=function(){function k(){n(this,k)}return u(k,null,[{key:"log10",value:function(l){var h=Math.log(l);return Je.isInfinite(h)||Je.isNaN(h)?h:h/k.LOG_10}},{key:"min",value:function(l,h,f,x){var I=l;return h<I&&(I=h),f<I&&(I=f),x<I&&(I=x),I}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1],f=arguments[2];return l<h?h:l>f?f:l}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x=arguments[0],I=arguments[1],F=arguments[2];return x<I?I:x>F?F:x}}},{key:"wrap",value:function(l,h){return l<0?h- -l%h:l%h}},{key:"max",value:function(){if(arguments.length===3){var l=arguments[0],h=arguments[1],f=arguments[2],x=l;return h>x&&(x=h),f>x&&(x=f),x}if(arguments.length===4){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3],le=I;return F>le&&(le=F),U>le&&(le=U),Z>le&&(le=Z),le}}},{key:"average",value:function(l,h){return(l+h)/2}}]),k}();Ii.LOG_10=Math.log(10);var Hr=function(){function k(){n(this,k)}return u(k,null,[{key:"segmentToSegment",value:function(l,h,f,x){if(l.equals(h))return k.pointToSegment(l,f,x);if(f.equals(x))return k.pointToSegment(x,l,h);var I=!1;if(mn.intersects(l,h,f,x)){var F=(h.x-l.x)*(x.y-f.y)-(h.y-l.y)*(x.x-f.x);if(F===0)I=!0;else{var U=(l.y-f.y)*(x.x-f.x)-(l.x-f.x)*(x.y-f.y),Z=((l.y-f.y)*(h.x-l.x)-(l.x-f.x)*(h.y-l.y))/F,le=U/F;(le<0||le>1||Z<0||Z>1)&&(I=!0)}}else I=!0;return I?Ii.min(k.pointToSegment(l,f,x),k.pointToSegment(h,f,x),k.pointToSegment(f,l,h),k.pointToSegment(x,l,h)):0}},{key:"pointToSegment",value:function(l,h,f){if(h.x===f.x&&h.y===f.y)return l.distance(h);var x=(f.x-h.x)*(f.x-h.x)+(f.y-h.y)*(f.y-h.y),I=((l.x-h.x)*(f.x-h.x)+(l.y-h.y)*(f.y-h.y))/x;if(I<=0)return l.distance(h);if(I>=1)return l.distance(f);var F=((h.y-l.y)*(f.x-h.x)-(h.x-l.x)*(f.y-h.y))/x;return Math.abs(F)*Math.sqrt(x)}},{key:"pointToLinePerpendicular",value:function(l,h,f){var x=(f.x-h.x)*(f.x-h.x)+(f.y-h.y)*(f.y-h.y),I=((h.y-l.y)*(f.x-h.x)-(h.x-l.x)*(f.y-h.y))/x;return Math.abs(I)*Math.sqrt(x)}},{key:"pointToSegmentString",value:function(l,h){if(h.length===0)throw new he("Line array must contain at least one vertex");for(var f=l.distance(h[0]),x=0;x<h.length-1;x++){var I=k.pointToSegment(l,h[x],h[x+1]);I<f&&(f=I)}return f}}]),k}(),no=function(){function k(){n(this,k)}return u(k,[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Wt(arguments[0],Kt);else if(arguments.length!==2&&arguments.length===3){var l=arguments[0],h=arguments[1];return this.create(l,h)}}}]),k}(),ve=function(){function k(){n(this,k)}return u(k,[{key:"filter",value:function(l){}}]),k}(),J=function(){function k(){n(this,k)}return u(k,null,[{key:"ofLine",value:function(l){var h=l.size();if(h<=1)return 0;var f=0,x=new Be;l.getCoordinate(0,x);for(var I=x.x,F=x.y,U=1;U<h;U++){l.getCoordinate(U,x);var Z=x.x,le=x.y,Ee=Z-I,Re=le-F;f+=Math.sqrt(Ee*Ee+Re*Re),I=Z,F=le}return f}}]),k}(),K=function k(){n(this,k)},se=function(){function k(){n(this,k)}return u(k,null,[{key:"copyCoord",value:function(l,h,f,x){for(var I=Math.min(l.getDimension(),f.getDimension()),F=0;F<I;F++)f.setOrdinate(x,F,l.getOrdinate(h,F))}},{key:"isRing",value:function(l){var h=l.size();return h===0||!(h<=3)&&l.getOrdinate(0,Kt.X)===l.getOrdinate(h-1,Kt.X)&&l.getOrdinate(0,Kt.Y)===l.getOrdinate(h-1,Kt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Wt(arguments[0],Kt)&&Number.isInteger(arguments[1])){var l=arguments[0],h=arguments[1];k.scroll(l,h,k.isRing(l))}else if(Wt(arguments[0],Kt)&&arguments[1]instanceof Be){var f=arguments[0],x=arguments[1],I=k.indexOf(x,f);if(I<=0)return null;k.scroll(f,I)}}else if(arguments.length===3){var F=arguments[0],U=arguments[1],Z=arguments[2],le=U;if(le<=0)return null;for(var Ee=F.copy(),Re=Z?F.size()-1:F.size(),Ye=0;Ye<Re;Ye++)for(var pt=0;pt<F.getDimension();pt++)F.setOrdinate(Ye,pt,Ee.getOrdinate((U+Ye)%Re,pt));if(Z)for(var ft=0;ft<F.getDimension();ft++)F.setOrdinate(Re,ft,F.getOrdinate(0,ft))}}},{key:"isEqual",value:function(l,h){var f=l.size();if(f!==h.size())return!1;for(var x=Math.min(l.getDimension(),h.getDimension()),I=0;I<f;I++)for(var F=0;F<x;F++){var U=l.getOrdinate(I,F),Z=h.getOrdinate(I,F);if(l.getOrdinate(I,F)!==h.getOrdinate(I,F)&&(!Je.isNaN(U)||!Je.isNaN(Z)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var l=arguments[0];return k.minCoordinateIndex(l,0,l.size()-1)}if(arguments.length===3){for(var h=arguments[0],f=arguments[1],x=arguments[2],I=-1,F=null,U=f;U<=x;U++){var Z=h.getCoordinate(U);(F===null||F.compareTo(Z)>0)&&(F=Z,I=U)}return I}}},{key:"extend",value:function(l,h,f){var x=l.create(f,h.getDimension()),I=h.size();if(k.copy(h,0,x,0,I),I>0)for(var F=I;F<f;F++)k.copy(h,I-1,x,F,1);return x}},{key:"reverse",value:function(l){for(var h=l.size()-1,f=Math.trunc(h/2),x=0;x<=f;x++)k.swap(l,x,h-x)}},{key:"swap",value:function(l,h,f){if(h===f)return null;for(var x=0;x<l.getDimension();x++){var I=l.getOrdinate(h,x);l.setOrdinate(h,x,l.getOrdinate(f,x)),l.setOrdinate(f,x,I)}}},{key:"copy",value:function(l,h,f,x,I){for(var F=0;F<I;F++)k.copyCoord(l,h+F,f,x+F)}},{key:"ensureValidRing",value:function(l,h){var f=h.size();return f===0?h:f<=3?k.createClosedRing(l,h,4):h.getOrdinate(0,Kt.X)===h.getOrdinate(f-1,Kt.X)&&h.getOrdinate(0,Kt.Y)===h.getOrdinate(f-1,Kt.Y)?h:k.createClosedRing(l,h,f+1)}},{key:"indexOf",value:function(l,h){for(var f=0;f<h.size();f++)if(l.x===h.getOrdinate(f,Kt.X)&&l.y===h.getOrdinate(f,Kt.Y))return f;return-1}},{key:"createClosedRing",value:function(l,h,f){var x=l.create(f,h.getDimension()),I=h.size();k.copy(h,0,x,0,I);for(var F=I;F<f;F++)k.copy(h,0,x,F,1);return x}},{key:"minCoordinate",value:function(l){for(var h=null,f=0;f<l.size();f++){var x=l.getCoordinate(f);(h===null||h.compareTo(x)>0)&&(h=x)}return h}}]),k}(),oe=function(){function k(){n(this,k)}return u(k,null,[{key:"toDimensionSymbol",value:function(l){switch(l){case k.FALSE:return k.SYM_FALSE;case k.TRUE:return k.SYM_TRUE;case k.DONTCARE:return k.SYM_DONTCARE;case k.P:return k.SYM_P;case k.L:return k.SYM_L;case k.A:return k.SYM_A}throw new he("Unknown dimension value: "+l)}},{key:"toDimensionValue",value:function(l){switch(Qi.toUpperCase(l)){case k.SYM_FALSE:return k.FALSE;case k.SYM_TRUE:return k.TRUE;case k.SYM_DONTCARE:return k.DONTCARE;case k.SYM_P:return k.P;case k.SYM_L:return k.L;case k.SYM_A:return k.A}throw new he("Unknown dimension symbol: "+l)}}]),k}();oe.P=0,oe.L=1,oe.A=2,oe.FALSE=-1,oe.TRUE=-2,oe.DONTCARE=-3,oe.SYM_FALSE="F",oe.SYM_TRUE="T",oe.SYM_DONTCARE="*",oe.SYM_P="0",oe.SYM_L="1",oe.SYM_A="2";var ce=function(){function k(){n(this,k)}return u(k,[{key:"filter",value:function(l){}}]),k}(),Te=function(){function k(){n(this,k)}return u(k,[{key:"filter",value:function(l,h){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),k}(),Ae=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new mn:this._points.expandEnvelope(new mn)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new h(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];if(!this.isEquivalentClass(f))return!1;var I=f;if(this._points.size()!==I._points.size())return!1;for(var F=0;F<this._points.size();F++)if(!this.equal(this._points.getCoordinate(F),I._points.getCoordinate(F),x))return!1;return!0}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var f=0;f<Math.trunc(this._points.size()/2);f++){var x=this._points.size()-1-f;if(!this._points.getCoordinate(f).equals(this._points.getCoordinate(x))){if(this._points.getCoordinate(f).compareTo(this._points.getCoordinate(x))>0){var I=this._points.copy();se.reverse(I),this._points=I}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?oe.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var f=this._points.copy();return se.reverse(f),this.getFactory().createLineString(f)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return J.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var f=arguments[0],x=f,I=0,F=0;I<this._points.size()&&F<x._points.size();){var U=this._points.getCoordinate(I).compareTo(x._points.getCoordinate(F));if(U!==0)return U;I++,F++}return I<this._points.size()?1:F<x._points.size()?-1:0}if(arguments.length===2){var Z=arguments[0],le=arguments[1],Ee=Z;return le.compare(this._points,Ee._points)}}},{key:"apply",value:function(){if(Wt(arguments[0],ve))for(var f=arguments[0],x=0;x<this._points.size();x++)f.filter(this._points.getCoordinate(x));else if(Wt(arguments[0],Te)){var I=arguments[0];if(this._points.size()===0)return null;for(var F=0;F<this._points.size()&&(I.filter(this._points,F),!I.isDone());F++);I.isGeometryChanged()&&this.geometryChanged()}else if(Wt(arguments[0],ce)){var U=arguments[0];U.filter(this)}else if(Wt(arguments[0],_e)){var Z=arguments[0];Z.filter(this)}}},{key:"getBoundary",value:function(){throw new Jt}},{key:"isEquivalentClass",value:function(f){return f instanceof h}},{key:"getCoordinateN",value:function(f){return this._points.getCoordinate(f)}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(f){if(f===null&&(f=this.getFactory().getCoordinateSequenceFactory().create([])),f.size()===1)throw new he("Invalid number of points in LineString (found "+f.size()+" - must be 0 or >= 2)");this._points=f}},{key:"isCoordinate",value:function(f){for(var x=0;x<this._points.size();x++)if(this._points.getCoordinate(x).equals(f))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(f){return this.getFactory().createPoint(this._points.getCoordinate(f))}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0&&arguments.length===2){var f=arguments[0],x=arguments[1];Dt.constructor_.call(this,x),this.init(f)}}}]),h}(Dt),be=function k(){n(this,k)},Oe=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new mn;var f=new mn;return f.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),f}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new h(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];return!!this.isEquivalentClass(f)&&(!(!this.isEmpty()||!f.isEmpty())||this.isEmpty()===f.isEmpty()&&this.equal(f.getCoordinate(),this.getCoordinate(),x))}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return oe.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0],x=f;return this.getCoordinate().compareTo(x.getCoordinate())}if(arguments.length===2){var I=arguments[0],F=arguments[1],U=I;return F.compare(this._coordinates,U._coordinates)}}},{key:"apply",value:function(){if(Wt(arguments[0],ve)){var f=arguments[0];if(this.isEmpty())return null;f.filter(this.getCoordinate())}else if(Wt(arguments[0],Te)){var x=arguments[0];if(this.isEmpty())return null;x.filter(this._coordinates,0),x.isGeometryChanged()&&this.geometryChanged()}else if(Wt(arguments[0],ce)){var I=arguments[0];I.filter(this)}else if(Wt(arguments[0],_e)){var F=arguments[0];F.filter(this)}}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(f){f===null&&(f=this.getFactory().getCoordinateSequenceFactory().create([])),Ct.isTrue(f.size()<=1),this._coordinates=f}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[be]}}],[{key:"constructor_",value:function(){this._coordinates=null;var f=arguments[0],x=arguments[1];Dt.constructor_.call(this,x),this.init(f)}}]),h}(Dt),Ke=function(){function k(){n(this,k)}return u(k,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var l=arguments[0];return Math.abs(k.ofRingSigned(l))}if(Wt(arguments[0],Kt)){var h=arguments[0];return Math.abs(k.ofRingSigned(h))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var l=arguments[0];if(l.length<3)return 0;for(var h=0,f=l[0].x,x=1;x<l.length-1;x++){var I=l[x].x-f,F=l[x+1].y,U=l[x-1].y;h+=I*(U-F)}return h/2}if(Wt(arguments[0],Kt)){var Z=arguments[0],le=Z.size();if(le<3)return 0;var Ee=new Be,Re=new Be,Ye=new Be;Z.getCoordinate(0,Re),Z.getCoordinate(1,Ye);var pt=Re.x;Ye.x-=pt;for(var ft=0,qt=1;qt<le-1;qt++)Ee.y=Re.y,Re.x=Ye.x,Re.y=Ye.y,Z.getCoordinate(qt+1,Ye),Ye.x-=pt,ft+=Re.x*(Ee.y-Ye.y);return ft/2}}}]),k}(),je=function(){function k(){n(this,k)}return u(k,null,[{key:"sort",value:function(){var l=arguments,h=arguments[0];if(arguments.length===1)h.sort(function(pt,ft){return pt.compareTo(ft)});else if(arguments.length===2)h.sort(function(pt,ft){return l[1].compare(pt,ft)});else if(arguments.length===3){var f=h.slice(arguments[1],arguments[2]);f.sort();var x=h.slice(0,arguments[1]).concat(f,h.slice(arguments[2],h.length));h.splice(0,h.length);var I,F=X(x);try{for(F.s();!(I=F.n()).done;){var U=I.value;h.push(U)}}catch(pt){F.e(pt)}finally{F.f()}}else if(arguments.length===4){var Z=h.slice(arguments[1],arguments[2]);Z.sort(function(pt,ft){return l[3].compare(pt,ft)});var le=h.slice(0,arguments[1]).concat(Z,h.slice(arguments[2],h.length));h.splice(0,h.length);var Ee,Re=X(le);try{for(Re.s();!(Ee=Re.n()).done;){var Ye=Ee.value;h.push(Ye)}}catch(pt){Re.e(pt)}finally{Re.f()}}}},{key:"asList",value:function(l){var h,f=new st,x=X(l);try{for(x.s();!(h=x.n()).done;){var I=h.value;f.add(I)}}catch(F){x.e(F)}finally{x.f()}return f}},{key:"copyOf",value:function(l,h){return l.slice(0,h)}}]),k}(),dt=function k(){n(this,k)},Lt=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var f=new Array(this.getNumPoints()).fill(null),x=-1,I=this._shell.getCoordinates(),F=0;F<I.length;F++)f[++x]=I[F];for(var U=0;U<this._holes.length;U++)for(var Z=this._holes[U].getCoordinates(),le=0;le<Z.length;le++)f[++x]=Z[le];return f}},{key:"getArea",value:function(){var f=0;f+=Ke.ofRing(this._shell.getCoordinateSequence());for(var x=0;x<this._holes.length;x++)f-=Ke.ofRing(this._holes[x].getCoordinateSequence());return f}},{key:"copyInternal",value:function(){for(var f=this._shell.copy(),x=new Array(this._holes.length).fill(null),I=0;I<this._holes.length;I++)x[I]=this._holes[I].copy();return new h(f,x,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var f=this._shell.getCoordinateSequence(),x=this.getEnvelopeInternal(),I=0;I<5;I++){var F=f.getX(I);if(F!==x.getMinX()&&F!==x.getMaxX())return!1;var U=f.getY(I);if(U!==x.getMinY()&&U!==x.getMaxY())return!1}for(var Z=f.getX(0),le=f.getY(0),Ee=1;Ee<=4;Ee++){var Re=f.getX(Ee),Ye=f.getY(Ee);if(Re!==Z==(Ye!==le))return!1;Z=Re,le=Ye}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];if(!this.isEquivalentClass(f))return!1;var I=f,F=this._shell,U=I._shell;if(!F.equalsExact(U,x)||this._holes.length!==I._holes.length)return!1;for(var Z=0;Z<this._holes.length;Z++)if(!this._holes[Z].equalsExact(I._holes[Z],x))return!1;return!0}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var f=0;f<this._holes.length;f++)this._holes[f]=this.normalized(this._holes[f],!1);je.sort(this._holes)}else if(arguments.length===2){var x=arguments[0],I=arguments[1];if(x.isEmpty())return null;var F=x.getCoordinateSequence(),U=se.minCoordinateIndex(F,0,F.size()-2);se.scroll(F,U,!0),jt.isCCW(F)===I&&se.reverse(F)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var f=this.getExteriorRing().reverse(),x=new Array(this.getNumInteriorRing()).fill(null),I=0;I<x.length;I++)x[I]=this.getInteriorRingN(I).reverse();return this.getFactory().createPolygon(f,x)}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var f=0;f+=this._shell.getLength();for(var x=0;x<this._holes.length;x++)f+=this._holes[x].getLength();return f}},{key:"getNumPoints",value:function(){for(var f=this._shell.getNumPoints(),x=0;x<this._holes.length;x++)f+=this._holes[x].getNumPoints();return f}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(f,x){var I=f.copy();return this.normalize(I,x),I}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0],x=this._shell,I=f._shell;return x.compareToSameClass(I)}if(arguments.length===2){var F=arguments[0],U=arguments[1],Z=F,le=this._shell,Ee=Z._shell,Re=le.compareToSameClass(Ee,U);if(Re!==0)return Re;for(var Ye=this.getNumInteriorRing(),pt=Z.getNumInteriorRing(),ft=0;ft<Ye&&ft<pt;){var qt=this.getInteriorRingN(ft),Yt=Z.getInteriorRingN(ft),ln=qt.compareToSameClass(Yt,U);if(ln!==0)return ln;ft++}return ft<Ye?1:ft<pt?-1:0}}},{key:"apply",value:function(){if(Wt(arguments[0],ve)){var f=arguments[0];this._shell.apply(f);for(var x=0;x<this._holes.length;x++)this._holes[x].apply(f)}else if(Wt(arguments[0],Te)){var I=arguments[0];if(this._shell.apply(I),!I.isDone())for(var F=0;F<this._holes.length&&(this._holes[F].apply(I),!I.isDone());F++);I.isGeometryChanged()&&this.geometryChanged()}else if(Wt(arguments[0],ce)){var U=arguments[0];U.filter(this)}else if(Wt(arguments[0],_e)){var Z=arguments[0];Z.filter(this),this._shell.apply(Z);for(var le=0;le<this._holes.length;le++)this._holes[le].apply(Z)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var f=new Array(this._holes.length+1).fill(null);f[0]=this._shell;for(var x=0;x<this._holes.length;x++)f[x+1]=this._holes[x];return f.length<=1?this.getFactory().createLinearRing(f[0].getCoordinateSequence()):this.getFactory().createMultiLineString(f)}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(f){return this._holes[f]}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var f=arguments[0],x=arguments[1],I=arguments[2];if(Dt.constructor_.call(this,I),f===null&&(f=this.getFactory().createLinearRing()),x===null&&(x=[]),Dt.hasNullElements(x))throw new he("holes must not contain null elements");if(f.isEmpty()&&Dt.hasNonEmptyElements(x))throw new he("shell is empty but holes are not");this._shell=f,this._holes=x}}]),h}(Dt),Ft=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.apply(this,arguments)}return h}(Ve),_n=function(k){m(h,k);var l=V(h);function h(f){var x;return n(this,h),(x=l.call(this)).array=[],f instanceof Vt&&x.addAll(f),x}return u(h,[{key:"contains",value:function(f){var x,I=X(this.array);try{for(I.s();!(x=I.n()).done;)if(x.value.compareTo(f)===0)return!0}catch(F){I.e(F)}finally{I.f()}return!1}},{key:"add",value:function(f){if(this.contains(f))return!1;for(var x=0,I=this.array.length;x<I;x++)if(this.array[x].compareTo(f)===1)return!!this.array.splice(x,0,f);return this.array.push(f),!0}},{key:"addAll",value:function(f){var x,I=X(f);try{for(I.s();!(x=I.n()).done;){var F=x.value;this.add(F)}}catch(U){I.e(U)}finally{I.f()}return!0}},{key:"remove",value:function(){throw new Jt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new sn(this.array)}}]),h}(Ft),sn=function(){function k(l){n(this,k),this.array=l,this.position=0}return u(k,[{key:"next",value:function(){if(this.position===this.array.length)throw new gn;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Jt}}]),k}(),an=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"computeEnvelopeInternal",value:function(){for(var f=new mn,x=0;x<this._geometries.length;x++)f.expandToInclude(this._geometries[x].getEnvelopeInternal());return f}},{key:"getGeometryN",value:function(f){return this._geometries[f]}},{key:"getCoordinates",value:function(){for(var f=new Array(this.getNumPoints()).fill(null),x=-1,I=0;I<this._geometries.length;I++)for(var F=this._geometries[I].getCoordinates(),U=0;U<F.length;U++)f[++x]=F[U];return f}},{key:"getArea",value:function(){for(var f=0,x=0;x<this._geometries.length;x++)f+=this._geometries[x].getArea();return f}},{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),x=0;x<f.length;x++)f[x]=this._geometries[x].copy();return new h(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];if(!this.isEquivalentClass(f))return!1;var I=f;if(this._geometries.length!==I._geometries.length)return!1;for(var F=0;F<this._geometries.length;F++)if(!this._geometries[F].equalsExact(I._geometries[F],x))return!1;return!0}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var f=0;f<this._geometries.length;f++)this._geometries[f].normalize();je.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var f=oe.FALSE,x=0;x<this._geometries.length;x++)f=Math.max(f,this._geometries[x].getBoundaryDimension());return f}},{key:"reverseInternal",value:function(){for(var f=this._geometries.length,x=new st(f),I=0;I<f;I++)x.add(this._geometries[I].reverse());return this.getFactory().buildGeometry(x)}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var f=oe.FALSE,x=0;x<this._geometries.length;x++)f=Math.max(f,this._geometries[x].getDimension());return f}},{key:"getLength",value:function(){for(var f=0,x=0;x<this._geometries.length;x++)f+=this._geometries[x].getLength();return f}},{key:"getNumPoints",value:function(){for(var f=0,x=0;x<this._geometries.length;x++)f+=this._geometries[x].getNumPoints();return f}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0],x=new _n(je.asList(this._geometries)),I=new _n(je.asList(f._geometries));return this.compare(x,I)}if(arguments.length===2){for(var F=arguments[0],U=arguments[1],Z=F,le=this.getNumGeometries(),Ee=Z.getNumGeometries(),Re=0;Re<le&&Re<Ee;){var Ye=this.getGeometryN(Re),pt=Z.getGeometryN(Re),ft=Ye.compareToSameClass(pt,U);if(ft!==0)return ft;Re++}return Re<le?1:Re<Ee?-1:0}}},{key:"apply",value:function(){if(Wt(arguments[0],ve))for(var f=arguments[0],x=0;x<this._geometries.length;x++)this._geometries[x].apply(f);else if(Wt(arguments[0],Te)){var I=arguments[0];if(this._geometries.length===0)return null;for(var F=0;F<this._geometries.length&&(this._geometries[F].apply(I),!I.isDone());F++);I.isGeometryChanged()&&this.geometryChanged()}else if(Wt(arguments[0],ce)){var U=arguments[0];U.filter(this);for(var Z=0;Z<this._geometries.length;Z++)this._geometries[Z].apply(U)}else if(Wt(arguments[0],_e)){var le=arguments[0];le.filter(this);for(var Ee=0;Ee<this._geometries.length;Ee++)this._geometries[Ee].apply(le)}}},{key:"getBoundary",value:function(){return Dt.checkNotGeometryCollection(this),Ct.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var f=0;f<this._geometries.length;f++)if(!this._geometries[f].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0&&arguments.length===2){var f=arguments[0],x=arguments[1];if(Dt.constructor_.call(this,x),f===null&&(f=[]),Dt.hasNullElements(f))throw new he("geometries must not contain null elements");this._geometries=f}}}]),h}(Dt),fn=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),x=0;x<f.length;x++)f[x]=this._geometries[x].copy();return new h(f,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];return!!this.isEquivalentClass(f)&&H(y(h.prototype),"equalsExact",this).call(this,f,x)}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var f=arguments[0];return this._geometries[f].getCoordinate()}return H(y(h.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return oe.FALSE}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[be]}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];an.constructor_.call(this,f,x)}}]),h}(an),fr=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"copyInternal",value:function(){return new h(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return oe.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||H(y(h.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var f=this._points.copy();return se.reverse(f),this.getFactory().createLinearRing(f)}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!H(y(h.prototype),"isClosed",this).call(this))throw new he("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<h.MINIMUM_VALID_SIZE)throw new he("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];Ae.constructor_.call(this,f,x),this.validateConstruction()}}]),h}(Ae);fr.MINIMUM_VALID_SIZE=4;var Un=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"setOrdinate",value:function(f,x){switch(f){case h.X:this.x=x;break;case h.Y:this.y=x;break;default:throw new he("Invalid ordinate index: "+f)}}},{key:"getZ",value:function(){return Be.NULL_ORDINATE}},{key:"getOrdinate",value:function(f){switch(f){case h.X:return this.x;case h.Y:return this.y}throw new he("Invalid ordinate index: "+f)}},{key:"setZ",value:function(f){throw new he("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new h(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Be.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof h){var f=arguments[0];Be.constructor_.call(this,f.x,f.y)}else if(arguments[0]instanceof Be){var x=arguments[0];Be.constructor_.call(this,x.x,x.y)}}else if(arguments.length===2){var I=arguments[0],F=arguments[1];Be.constructor_.call(this,I,F,Be.NULL_ORDINATE)}}}]),h}(Be);Un.X=0,Un.Y=1,Un.Z=-1,Un.M=-1;var rn=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(f,x){switch(f){case h.X:this.x=x;break;case h.Y:this.y=x;break;case h.M:this._m=x;break;default:throw new he("Invalid ordinate index: "+f)}}},{key:"setM",value:function(f){this._m=f}},{key:"getZ",value:function(){return Be.NULL_ORDINATE}},{key:"getOrdinate",value:function(f){switch(f){case h.X:return this.x;case h.Y:return this.y;case h.M:return this._m}throw new he("Invalid ordinate index: "+f)}},{key:"setZ",value:function(f){throw new he("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new h(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ(),this._m=f.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Be.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof h){var f=arguments[0];Be.constructor_.call(this,f.x,f.y),this._m=f._m}else if(arguments[0]instanceof Be){var x=arguments[0];Be.constructor_.call(this,x.x,x.y),this._m=this.getM()}}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];Be.constructor_.call(this,I,F,Be.NULL_ORDINATE),this._m=U}}}]),h}(Be);rn.X=0,rn.Y=1,rn.Z=-1,rn.M=2;var Pn=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(f,x){switch(f){case Be.X:this.x=x;break;case Be.Y:this.y=x;break;case Be.Z:this.z=x;break;case Be.M:this._m=x;break;default:throw new he("Invalid ordinate index: "+f)}}},{key:"setM",value:function(f){this._m=f}},{key:"getOrdinate",value:function(f){switch(f){case Be.X:return this.x;case Be.Y:return this.y;case Be.Z:return this.getZ();case Be.M:return this.getM()}throw new he("Invalid ordinate index: "+f)}},{key:"copy",value:function(){return new h(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ(),this._m=f.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Be.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof h){var f=arguments[0];Be.constructor_.call(this,f),this._m=f._m}else if(arguments[0]instanceof Be){var x=arguments[0];Be.constructor_.call(this,x),this._m=this.getM()}}else if(arguments.length===4){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3];Be.constructor_.call(this,I,F,U),this._m=Z}}}]),h}(Be),Gn=function(){function k(){n(this,k)}return u(k,null,[{key:"measures",value:function(l){return l instanceof Un?0:l instanceof rn||l instanceof Pn?1:0}},{key:"dimension",value:function(l){return l instanceof Un?2:l instanceof rn?3:l instanceof Pn?4:3}},{key:"create",value:function(){if(arguments.length===1){var l=arguments[0];return k.create(l,0)}if(arguments.length===2){var h=arguments[0],f=arguments[1];return h===2?new Un:h===3&&f===0?new Be:h===3&&f===1?new rn:h===4&&f===1?new Pn:new Be}}}]),k}(),Ir=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getCoordinate",value:function(f){return this.get(f)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Wt(arguments[0],Vt)){for(var f=arguments[0],x=arguments[1],I=!1,F=f.iterator();F.hasNext();)this.add(F.next(),x),I=!0;return I}return H(y(h.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var f=H(y(h.prototype),"clone",this).call(this),x=0;x<this.size();x++)f.add(x,this.get(x).clone());return f}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(h.coordArrayType);if(arguments.length===1){var f=arguments[0];if(f)return this.toArray(h.coordArrayType);for(var x=this.size(),I=new Array(x).fill(null),F=0;F<x;F++)I[F]=this.get(x-F-1);return I}}},{key:"add",value:function(){if(arguments.length===1){var f=arguments[0];return H(y(h.prototype),"add",this).call(this,f)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var x=arguments[0],I=arguments[1];return this.add(x,I,!0),!0}if(arguments[0]instanceof Be&&typeof arguments[1]=="boolean"){var F=arguments[0],U=arguments[1];if(!U&&this.size()>=1){var Z=this.get(this.size()-1);if(Z.equals2D(F))return null}H(y(h.prototype),"add",this).call(this,F)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var le=arguments[0],Ee=arguments[1];return this.add(le,Ee),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Re=arguments[0],Ye=arguments[1],pt=arguments[2];if(pt)for(var ft=0;ft<Re.length;ft++)this.add(Re[ft],Ye);else for(var qt=Re.length-1;qt>=0;qt--)this.add(Re[qt],Ye);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Be){var Yt=arguments[0],ln=arguments[1],Cn=arguments[2];if(!Cn){var Yn=this.size();if(Yn>0){if(Yt>0){var zn=this.get(Yt-1);if(zn.equals2D(ln))return null}if(Yt<Yn){var Zr=this.get(Yt);if(Zr.equals2D(ln))return null}}}H(y(h.prototype),"add",this).call(this,Yt,ln)}}else if(arguments.length===4){var bo=arguments[0],rs=arguments[1],qn=arguments[2],Pi=arguments[3],di=1;qn>Pi&&(di=-1);for(var is=qn;is!==Pi;is+=di)this.add(bo[is],rs);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var f=this.get(0).copy();this.add(f,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var f=arguments[0];this.ensureCapacity(f.length),this.add(f,!0)}else if(arguments.length===2){var x=arguments[0],I=arguments[1];this.ensureCapacity(x.length),this.add(x,I)}}}}]),h}(st);Ir.coordArrayType=new Array(0).fill(null);var wn=function(){function k(){n(this,k)}return u(k,null,[{key:"isRing",value:function(l){return!(l.length<4)&&!!l[0].equals2D(l[l.length-1])}},{key:"ptNotInList",value:function(l,h){for(var f=0;f<l.length;f++){var x=l[f];if(k.indexOf(x,h)<0)return x}return null}},{key:"scroll",value:function(l,h){var f=k.indexOf(h,l);if(f<0)return null;var x=new Array(l.length).fill(null);Sr.arraycopy(l,f,x,0,l.length-f),Sr.arraycopy(l,0,x,l.length-f,f),Sr.arraycopy(x,0,l,0,l.length)}},{key:"equals",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];if(l===h)return!0;if(l===null||h===null||l.length!==h.length)return!1;for(var f=0;f<l.length;f++)if(!l[f].equals(h[f]))return!1;return!0}if(arguments.length===3){var x=arguments[0],I=arguments[1],F=arguments[2];if(x===I)return!0;if(x===null||I===null||x.length!==I.length)return!1;for(var U=0;U<x.length;U++)if(F.compare(x[U],I[U])!==0)return!1;return!0}}},{key:"intersection",value:function(l,h){for(var f=new Ir,x=0;x<l.length;x++)h.intersects(l[x])&&f.add(l[x],!0);return f.toCoordinateArray()}},{key:"measures",value:function(l){if(l===null||l.length===0)return 0;var h,f=0,x=X(l);try{for(x.s();!(h=x.n()).done;){var I=h.value;f=Math.max(f,Gn.measures(I))}}catch(F){x.e(F)}finally{x.f()}return f}},{key:"hasRepeatedPoints",value:function(l){for(var h=1;h<l.length;h++)if(l[h-1].equals(l[h]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(l){return k.hasRepeatedPoints(l)?new Ir(l,!1).toCoordinateArray():l}},{key:"reverse",value:function(l){for(var h=l.length-1,f=Math.trunc(h/2),x=0;x<=f;x++){var I=l[x];l[x]=l[h-x],l[h-x]=I}}},{key:"removeNull",value:function(l){for(var h=0,f=0;f<l.length;f++)l[f]!==null&&h++;var x=new Array(h).fill(null);if(h===0)return x;for(var I=0,F=0;F<l.length;F++)l[F]!==null&&(x[I++]=l[F]);return x}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var l=arguments[0],h=new Array(l.length).fill(null),f=0;f<l.length;f++)h[f]=l[f].copy();return h}if(arguments.length===5)for(var x=arguments[0],I=arguments[1],F=arguments[2],U=arguments[3],Z=arguments[4],le=0;le<Z;le++)F[U+le]=x[I+le].copy()}},{key:"isEqualReversed",value:function(l,h){for(var f=0;f<l.length;f++){var x=l[f],I=h[l.length-f-1];if(x.compareTo(I)!==0)return!1}return!0}},{key:"envelope",value:function(l){for(var h=new mn,f=0;f<l.length;f++)h.expandToInclude(l[f]);return h}},{key:"toCoordinateArray",value:function(l){return l.toArray(k.coordArrayType)}},{key:"dimension",value:function(l){if(l===null||l.length===0)return 3;var h,f=0,x=X(l);try{for(x.s();!(h=x.n()).done;){var I=h.value;f=Math.max(f,Gn.dimension(I))}}catch(F){x.e(F)}finally{x.f()}return f}},{key:"atLeastNCoordinatesOrNothing",value:function(l,h){return h.length>=l?h:[]}},{key:"indexOf",value:function(l,h){for(var f=0;f<h.length;f++)if(l.equals(h[f]))return f;return-1}},{key:"increasingDirection",value:function(l){for(var h=0;h<Math.trunc(l.length/2);h++){var f=l.length-1-h,x=l[h].compareTo(l[f]);if(x!==0)return x}return 1}},{key:"compare",value:function(l,h){for(var f=0;f<l.length&&f<h.length;){var x=l[f].compareTo(h[f]);if(x!==0)return x;f++}return f<h.length?-1:f<l.length?1:0}},{key:"minCoordinate",value:function(l){for(var h=null,f=0;f<l.length;f++)(h===null||h.compareTo(l[f])>0)&&(h=l[f]);return h}},{key:"extract",value:function(l,h,f){h=Ii.clamp(h,0,l.length);var x=(f=Ii.clamp(f,-1,l.length))-h+1;f<0&&(x=0),h>=l.length&&(x=0),f<h&&(x=0);var I=new Array(x).fill(null);if(x===0)return I;for(var F=0,U=h;U<=f;U++)I[F++]=l[U];return I}}]),k}(),Ti=function(){function k(){n(this,k)}return u(k,[{key:"compare",value:function(l,h){var f=l,x=h;return wn.compare(f,x)}},{key:"interfaces_",get:function(){return[At]}}]),k}(),Ha=function(){function k(){n(this,k)}return u(k,[{key:"compare",value:function(l,h){var f=l,x=h;if(f.length<x.length)return-1;if(f.length>x.length)return 1;if(f.length===0)return 0;var I=wn.compare(f,x);return wn.isEqualReversed(f,x)?0:I}},{key:"OLDcompare",value:function(l,h){var f=l,x=h;if(f.length<x.length)return-1;if(f.length>x.length)return 1;if(f.length===0)return 0;for(var I=wn.increasingDirection(f),F=wn.increasingDirection(x),U=I>0?0:f.length-1,Z=F>0?0:f.length-1,le=0;le<f.length;le++){var Ee=f[U].compareTo(x[Z]);if(Ee!==0)return Ee;U+=I,Z+=F}return 0}},{key:"interfaces_",get:function(){return[At]}}]),k}();wn.ForwardComparator=Ti,wn.BidirectionalComparator=Ha,wn.coordArrayType=new Array(0).fill(null);var In=function(){function k(l){n(this,k),this.str=l}return u(k,[{key:"append",value:function(l){this.str+=l}},{key:"setCharAt",value:function(l,h){this.str=this.str.substr(0,l)+h+this.str.substr(l+1)}},{key:"toString",value:function(){return this.str}}]),k}(),ka=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getM",value:function(l){return this.hasM()?this._coordinates[l].getM():Je.NaN}},{key:"setOrdinate",value:function(l,h,f){switch(h){case Kt.X:this._coordinates[l].x=f;break;case Kt.Y:this._coordinates[l].y=f;break;default:this._coordinates[l].setOrdinate(h,f)}}},{key:"getZ",value:function(l){return this.hasZ()?this._coordinates[l].getZ():Je.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(l,h){switch(h){case Kt.X:return this._coordinates[l].x;case Kt.Y:return this._coordinates[l].y;default:return this._coordinates[l].getOrdinate(h)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var l=arguments[0];return this._coordinates[l]}if(arguments.length===2){var h=arguments[0],f=arguments[1];f.setCoordinate(this._coordinates[h])}}},{key:"getCoordinateCopy",value:function(l){var h=this.createCoordinate();return h.setCoordinate(this._coordinates[l]),h}},{key:"createCoordinate",value:function(){return Gn.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(l){return this._coordinates[l].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(l){for(var h=0;h<this._coordinates.length;h++)l.expandToInclude(this._coordinates[h]);return l}},{key:"copy",value:function(){for(var l=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++){var f=this.createCoordinate();f.setCoordinate(this._coordinates[h]),l[h]=f}return new k(l,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var l=new In(17*this._coordinates.length);l.append("("),l.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)l.append(", "),l.append(this._coordinates[h]);return l.append(")"),l.toString()}return"()"}},{key:"getY",value:function(l){return this._coordinates[l].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Kt,Le]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];k.constructor_.call(this,l,wn.dimension(l),wn.measures(l))}else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var f=0;f<h;f++)this._coordinates[f]=new Be}else if(Wt(arguments[0],Kt)){var x=arguments[0];if(x===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=x.getDimension(),this._measures=x.getMeasures(),this._coordinates=new Array(x.size()).fill(null);for(var I=0;I<this._coordinates.length;I++)this._coordinates[I]=x.getCoordinateCopy(I)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var F=arguments[0],U=arguments[1];k.constructor_.call(this,F,U,wn.measures(F))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Z=arguments[0],le=arguments[1];this._coordinates=new Array(Z).fill(null),this._dimension=le;for(var Ee=0;Ee<Z;Ee++)this._coordinates[Ee]=Gn.create(le)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Re=arguments[0],Ye=arguments[1],pt=arguments[2];this._dimension=Ye,this._measures=pt,this._coordinates=Re===null?new Array(0).fill(null):Re}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ft=arguments[0],qt=arguments[1],Yt=arguments[2];this._coordinates=new Array(ft).fill(null),this._dimension=qt,this._measures=Yt;for(var ln=0;ln<ft;ln++)this._coordinates[ln]=this.createCoordinate()}}}}]),k}(),Pl=function(){function k(){n(this,k)}return u(k,[{key:"readResolve",value:function(){return k.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return new ka(l)}if(Wt(arguments[0],Kt)){var h=arguments[0];return new ka(h)}}else{if(arguments.length===2){var f=arguments[0],x=arguments[1];return x>3&&(x=3),x<2&&(x=2),new ka(f,x)}if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2],Z=F-U;return U>1&&(U=1),Z>3&&(Z=3),Z<2&&(Z=2),new ka(I,Z+U,U)}}}},{key:"interfaces_",get:function(){return[no,Le]}}],[{key:"instance",value:function(){return k.instanceObject}}]),k}();Pl.instanceObject=new Pl;var Ci=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),x=0;x<f.length;x++)f[x]=this._geometries[x].copy();return new h(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];return!!this.isEquivalentClass(f)&&H(y(h.prototype),"equalsExact",this).call(this,f,x)}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var f=new st,x=0;x<this._geometries.length;x++)for(var I=this._geometries[x].getBoundary(),F=0;F<I.getNumGeometries();F++)f.add(I.getGeometryN(F));var U=new Array(f.size()).fill(null);return this.getFactory().createMultiLineString(f.toArray(U))}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];an.constructor_.call(this,f,x)}}]),h}(an),Fi=function(){function k(){n(this,k)}return u(k,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),k}(),yf=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),(f=l.call(this)).map=new Map,f}return u(h,[{key:"get",value:function(f){return this.map.get(f)||null}},{key:"put",value:function(f,x){return this.map.set(f,x),x}},{key:"values",value:function(){for(var f=new st,x=this.map.values(),I=x.next();!I.done;)f.add(I.value),I=x.next();return f}},{key:"entrySet",value:function(){var f=new Er;return this.map.entries().forEach(function(x){return f.add(x)}),f}},{key:"size",value:function(){return this.map.size()}}]),h}(Fi),Tr=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"equals",value:function(l){if(!(l instanceof k))return!1;var h=l;return this._modelType===h._modelType&&this._scale===h._scale}},{key:"compareTo",value:function(l){var h=l,f=this.getMaximumSignificantDigits(),x=h.getMaximumSignificantDigits();return qr.compare(f,x)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===k.FLOATING||this._modelType===k.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var l="UNKNOWN";return this._modelType===k.FLOATING?l="Floating":this._modelType===k.FLOATING_SINGLE?l="Floating-Single":this._modelType===k.FIXED&&(l="Fixed (Scale="+this.getScale()+")"),l}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var l=arguments[0];return Je.isNaN(l)||this._modelType===k.FLOATING_SINGLE?l:this._modelType===k.FIXED?Math.round(l*this._scale)/this._scale:l}if(arguments[0]instanceof Be){var h=arguments[0];if(this._modelType===k.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}}},{key:"getMaximumSignificantDigits",value:function(){var l=16;return this._modelType===k.FLOATING?l=16:this._modelType===k.FLOATING_SINGLE?l=6:this._modelType===k.FIXED&&(l=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),l}},{key:"setScale",value:function(l){this._scale=Math.abs(l)}},{key:"interfaces_",get:function(){return[Le,pe]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=k.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof ni){var l=arguments[0];this._modelType=l,l===k.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var h=arguments[0];this._modelType=k.FIXED,this.setScale(h)}else if(arguments[0]instanceof k){var f=arguments[0];this._modelType=f._modelType,this._scale=f._scale}}}},{key:"mostPrecise",value:function(l,h){return l.compareTo(h)>=0?l:h}}]),k}(),ni=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"readResolve",value:function(){return k.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[Le]}}],[{key:"constructor_",value:function(){this._name=null;var l=arguments[0];this._name=l,k.nameToTypeMap.put(l,this)}}]),k}();ni.nameToTypeMap=new yf,Tr.Type=ni,Tr.FIXED=new ni("FIXED"),Tr.FLOATING=new ni("FLOATING"),Tr.FLOATING_SINGLE=new ni("FLOATING SINGLE"),Tr.maximumPreciseValue=9007199254740992;var Vs=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),x=0;x<f.length;x++)f[x]=this._geometries[x].copy();return new h(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Dt){var f=arguments[0],x=arguments[1];return!!this.isEquivalentClass(f)&&H(y(h.prototype),"equalsExact",this).call(this,f,x)}return H(y(h.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?oe.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var f=0;f<this._geometries.length;f++)if(!this._geometries[f].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Dt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Jt}},{key:"getGeometryType",value:function(){return Dt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];an.constructor_.call(this,f,x)}}]),h}(an),mo=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"createEmpty",value:function(l){switch(l){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new he("Invalid dimension: "+l)}}},{key:"toGeometry",value:function(l){return l.isNull()?this.createPoint():l.getMinX()===l.getMaxX()&&l.getMinY()===l.getMaxY()?this.createPoint(new Be(l.getMinX(),l.getMinY())):l.getMinX()===l.getMaxX()||l.getMinY()===l.getMaxY()?this.createLineString([new Be(l.getMinX(),l.getMinY()),new Be(l.getMaxX(),l.getMaxY())]):this.createPolygon(this.createLinearRing([new Be(l.getMinX(),l.getMinY()),new Be(l.getMinX(),l.getMaxY()),new Be(l.getMaxX(),l.getMaxY()),new Be(l.getMaxX(),l.getMinY()),new Be(l.getMinX(),l.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return this.createLineString(l!==null?this.getCoordinateSequenceFactory().create(l):null)}if(Wt(arguments[0],Kt)){var h=arguments[0];return new Ae(h,this)}}}},{key:"createMultiLineString",value:function(){if(arguments.length===0)return new Vs(null,this);if(arguments.length===1){var l=arguments[0];return new Vs(l,this)}}},{key:"buildGeometry",value:function(l){for(var h=null,f=!1,x=!1,I=l.iterator();I.hasNext();){var F=I.next(),U=F.getTypeCode();h===null&&(h=U),U!==h&&(f=!0),F instanceof an&&(x=!0)}if(h===null)return this.createGeometryCollection();if(f||x)return this.createGeometryCollection(k.toGeometryArray(l));var Z=l.iterator().next();if(l.size()>1){if(Z instanceof Lt)return this.createMultiPolygon(k.toPolygonArray(l));if(Z instanceof Ae)return this.createMultiLineString(k.toLineStringArray(l));if(Z instanceof Oe)return this.createMultiPoint(k.toPointArray(l));Ct.shouldNeverReachHere("Unhandled geometry type: "+Z.getGeometryType())}return Z}},{key:"createMultiPointFromCoords",value:function(l){return this.createMultiPoint(l!==null?this.getCoordinateSequenceFactory().create(l):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Be){var l=arguments[0];return this.createPoint(l!==null?this.getCoordinateSequenceFactory().create([l]):null)}if(Wt(arguments[0],Kt)){var h=arguments[0];return new Oe(h,this)}}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Wt(arguments[0],Kt)){var l=arguments[0];return this.createPolygon(this.createLinearRing(l))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof fr){var f=arguments[0];return this.createPolygon(f,null)}}else if(arguments.length===2){var x=arguments[0],I=arguments[1];return new Lt(x,I,this)}}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){if(arguments.length===0)return new an(null,this);if(arguments.length===1){var l=arguments[0];return new an(l,this)}}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return this.createLinearRing(l!==null?this.getCoordinateSequenceFactory().create(l):null)}if(Wt(arguments[0],Kt)){var h=arguments[0];return new fr(h,this)}}}},{key:"createMultiPolygon",value:function(){if(arguments.length===0)return new Ci(null,this);if(arguments.length===1){var l=arguments[0];return new Ci(l,this)}}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new fn(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return new fn(l,this)}if(Wt(arguments[0],Kt)){var h=arguments[0];if(h===null)return this.createMultiPoint(new Array(0).fill(null));for(var f=new Array(h.size()).fill(null),x=0;x<h.size();x++){var I=this.getCoordinateSequenceFactory().create(1,h.getDimension(),h.getMeasures());se.copy(h,x,I,0,1),f[x]=this.createPoint(I)}return this.createMultiPoint(f)}}}},{key:"interfaces_",get:function(){return[Le]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)k.constructor_.call(this,new Tr,0);else if(arguments.length===1){if(Wt(arguments[0],no)){var l=arguments[0];k.constructor_.call(this,new Tr,0,l)}else if(arguments[0]instanceof Tr){var h=arguments[0];k.constructor_.call(this,h,0,k.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];k.constructor_.call(this,f,x,k.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];this._precisionModel=I,this._coordinateSequenceFactory=U,this._SRID=F}}},{key:"toMultiPolygonArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toGeometryArray",value:function(l){if(l===null)return null;var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Pl.instance()}},{key:"toMultiLineStringArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toLineStringArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toMultiPointArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toLinearRingArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toPointArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"toPolygonArray",value:function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)}},{key:"createPointFromInternalCoord",value:function(l,h){return h.getPrecisionModel().makePrecise(l),h.getFactory().createPoint(l)}}]),k}(),Cr="XY",Al="XYZ",Fo="XYM",Rr="XYZM",Rl={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},go="EMPTY",Wa=1,Wr=2,Gs=3,Nl=4,yo=5,qs=6;for(var Tn in Rl)Rl[Tn].toUpperCase();var Mc=function(){function k(l){n(this,k),this.wkt=l,this.index_=-1}return u(k,[{key:"isAlpha_",value:function(l){return l>="a"&&l<="z"||l>="A"&&l<="Z"}},{key:"isNumeric_",value:function(l,h){return l>="0"&&l<="9"||l=="."&&!(h!==void 0&&h)}},{key:"isWhiteSpace_",value:function(l){return l==" "||l=="	"||l=="\r"||l==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var l,h=this.nextChar_(),f=this.index_,x=h;if(h=="(")l=Wr;else if(h==",")l=yo;else if(h==")")l=Gs;else if(this.isNumeric_(h)||h=="-")l=Nl,x=this.readNumber_();else if(this.isAlpha_(h))l=Wa,x=this.readText_();else{if(this.isWhiteSpace_(h))return this.nextToken();if(h!=="")throw new Error("Unexpected character: "+h);l=qs}return{position:f,value:x,type:l}}},{key:"readNumber_",value:function(){var l,h=this.index_,f=!1,x=!1;do l=="."?f=!0:l!="e"&&l!="E"||(x=!0),l=this.nextChar_();while(this.isNumeric_(l,f)||!x&&(l=="e"||l=="E")||x&&(l=="-"||l=="+"));return parseFloat(this.wkt.substring(h,this.index_--))}},{key:"readText_",value:function(){var l,h=this.index_;do l=this.nextChar_();while(this.isAlpha_(l));return this.wkt.substring(h,this.index_--).toUpperCase()}}]),k}(),Lc=function(){function k(l,h){n(this,k),this.lexer_=l,this.token_,this.layout_=Cr,this.factory=h}return u(k,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(l){return this.token_.type==l}},{key:"match",value:function(l){var h=this.isTokenType(l);return h&&this.consume_(),h}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var l=Cr,h=this.token_;if(this.isTokenType(Wa)){var f=h.value;f==="Z"?l=Al:f==="M"?l=Fo:f==="ZM"&&(l=Rr),l!==Cr&&this.consume_()}return l}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Wr)){var l=[];do l.push(this.parseGeometry_());while(this.match(yo));if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Wr)){var l=this.parsePoint_();if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Wr)){var l=this.parsePointList_();if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Wr)){var l=this.parseLineStringTextList_();if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var l;if(this.match(Wr)){if(l=this.token_.type==Wr?this.parsePointTextList_():this.parsePointList_(),this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Wr)){var l=this.parseLineStringTextList_();if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Wr)){var l=this.parsePolygonTextList_();if(this.match(Gs))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var l=[],h=this.layout_.length,f=0;f<h;++f){var x=this.token_;if(!this.match(Nl))break;l.push(x.value)}if(l.length==h)return l;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var l=[this.parsePoint_()];this.match(yo);)l.push(this.parsePoint_());return l}},{key:"parsePointTextList_",value:function(){for(var l=[this.parsePointText_()];this.match(yo);)l.push(this.parsePointText_());return l}},{key:"parseLineStringTextList_",value:function(){for(var l=[this.parseLineStringText_()];this.match(yo);)l.push(this.parseLineStringText_());return l}},{key:"parsePolygonTextList_",value:function(){for(var l=[this.parsePolygonText_()];this.match(yo);)l.push(this.parsePolygonText_());return l}},{key:"isEmptyGeometry_",value:function(){var l=this.isTokenType(Wa)&&this.token_.value==go;return l&&this.consume_(),l}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var l=this.factory,h=function(Yt){return A(Be,ne(Yt))},f=function(Yt){var ln=Yt.map(function(Cn){return l.createLinearRing(Cn.map(h))});return ln.length>1?l.createPolygon(ln[0],ln.slice(1)):l.createPolygon(ln[0])},x=this.token_;if(this.match(Wa)){var I=x.value;if(this.layout_=this.parseGeometryLayout_(),I=="GEOMETRYCOLLECTION"){var F=this.parseGeometryCollectionText_();return l.createGeometryCollection(F)}switch(I){case"POINT":var U=this.parsePointText_();return U?l.createPoint(A(Be,ne(U))):l.createPoint();case"LINESTRING":var Z=this.parseLineStringText_().map(h);return l.createLineString(Z);case"LINEARRING":var le=this.parseLineStringText_().map(h);return l.createLinearRing(le);case"POLYGON":var Ee=this.parsePolygonText_();return Ee&&Ee.length!==0?f(Ee):l.createPolygon();case"MULTIPOINT":var Re=this.parseMultiPointText_();if(!Re||Re.length===0)return l.createMultiPoint();var Ye=Re.map(h).map(function(Yt){return l.createPoint(Yt)});return l.createMultiPoint(Ye);case"MULTILINESTRING":var pt=this.parseMultiLineStringText_().map(function(Yt){return l.createLineString(Yt.map(h))});return l.createMultiLineString(pt);case"MULTIPOLYGON":var ft=this.parseMultiPolygonText_();if(!ft||ft.length===0)return l.createMultiPolygon();var qt=ft.map(f);return l.createMultiPolygon(qt);default:throw new Error("Invalid geometry type: "+I)}}throw new Error(this.formatErrorMessage_())}}]),k}();function Sa(k){if(k.isEmpty())return"";var l=k.getCoordinate(),h=[l.x,l.y];return l.z===void 0||Number.isNaN(l.z)||h.push(l.z),l.m===void 0||Number.isNaN(l.m)||h.push(l.m),h.join(" ")}function Ea(k){for(var l=k.getCoordinates().map(function(I){var F=[I.x,I.y];return I.z===void 0||Number.isNaN(I.z)||F.push(I.z),I.m===void 0||Number.isNaN(I.m)||F.push(I.m),F}),h=[],f=0,x=l.length;f<x;++f)h.push(l[f].join(" "));return h.join(", ")}function zl(k){var l=[];l.push("("+Ea(k.getExteriorRing())+")");for(var h=0,f=k.getNumInteriorRing();h<f;++h)l.push("("+Ea(k.getInteriorRingN(h))+")");return l.join(", ")}var Dl={Point:Sa,LineString:Ea,LinearRing:Ea,Polygon:zl,MultiPoint:function(k){for(var l=[],h=0,f=k.getNumGeometries();h<f;++h)l.push("("+Sa(k.getGeometryN(h))+")");return l.join(", ")},MultiLineString:function(k){for(var l=[],h=0,f=k.getNumGeometries();h<f;++h)l.push("("+Ea(k.getGeometryN(h))+")");return l.join(", ")},MultiPolygon:function(k){for(var l=[],h=0,f=k.getNumGeometries();h<f;++h)l.push("("+zl(k.getGeometryN(h))+")");return l.join(", ")},GeometryCollection:function(k){for(var l=[],h=0,f=k.getNumGeometries();h<f;++h)l.push(Ol(k.getGeometryN(h)));return l.join(", ")}};function Ol(k){var l=k.getGeometryType(),h=Dl[l];l=l.toUpperCase();var f=function(x){var I="";if(x.isEmpty())return I;var F=x.getCoordinate();return F.z===void 0||Number.isNaN(F.z)||(I+="Z"),F.m===void 0||Number.isNaN(F.m)||(I+="M"),I}(k);return f.length>0&&(l+=" "+f),k.isEmpty()?l+" "+go:l+" ("+h(k)+")"}var Za=function(){function k(l){n(this,k),this.geometryFactory=l||new mo,this.precisionModel=this.geometryFactory.getPrecisionModel()}return u(k,[{key:"read",value:function(l){var h=new Mc(l);return new Lc(h,this.geometryFactory).parse()}},{key:"write",value:function(l){return Ol(l)}}]),k}(),yu=function(){function k(l){n(this,k),this.parser=new Za(l)}return u(k,[{key:"write",value:function(l){return this.parser.write(l)}}],[{key:"toLineString",value:function(l,h){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+l.x+" "+l.y+", "+h.x+" "+h.y+" )"}}]),k}(),pr=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getIndexAlongSegment",value:function(l,h){return this.computeIntLineIndex(),this._intLineIndex[l][h]}},{key:"getTopologySummary",value:function(){var l=new In;return this.isEndPoint()&&l.append(" endpoint"),this._isProper&&l.append(" proper"),this.isCollinear()&&l.append(" collinear"),l.toString()}},{key:"computeIntersection",value:function(l,h,f,x){this._inputLines[0][0]=l,this._inputLines[0][1]=h,this._inputLines[1][0]=f,this._inputLines[1][1]=x,this._result=this.computeIntersect(l,h,f,x)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var l=arguments[0],h=this.getEdgeDistance(l,0),f=this.getEdgeDistance(l,1);h>f?(this._intLineIndex[l][0]=0,this._intLineIndex[l][1]=1):(this._intLineIndex[l][0]=1,this._intLineIndex[l][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(l){this._precisionModel=l}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var l=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[l][0])&&!this._intPt[h].equals2D(this._inputLines[l][1]))return!0;return!1}}},{key:"getIntersection",value:function(l){return this._intPt[l]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==k.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(l,h){return k.computeEdgeDistance(this._intPt[h],this._inputLines[l][0],this._inputLines[l][1])}},{key:"isCollinear",value:function(){return this._result===k.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return yu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+yu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(l,h){return this._inputLines[l][h]}},{key:"isIntersection",value:function(l){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(l))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(l,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[l][h]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Be,this._intPt[1]=new Be,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(l,h,f){var x=Math.abs(f.x-h.x),I=Math.abs(f.y-h.y),F=-1;if(l.equals(h))F=0;else if(l.equals(f))F=x>I?x:I;else{var U=Math.abs(l.x-h.x),Z=Math.abs(l.y-h.y);(F=x>I?U:Z)!==0||l.equals(h)||(F=Math.max(U,Z))}return Ct.isTrue(!(F===0&&!l.equals(h)),"Bad distance calculation"),F}},{key:"nonRobustComputeEdgeDistance",value:function(l,h,f){var x=l.x-h.x,I=l.y-h.y,F=Math.sqrt(x*x+I*I);return Ct.isTrue(!(F===0&&!l.equals(h)),"Invalid distance calculation"),F}}]),k}();pr.DONT_INTERSECT=0,pr.DO_INTERSECT=1,pr.COLLINEAR=2,pr.NO_INTERSECTION=0,pr.POINT_INTERSECTION=1,pr.COLLINEAR_INTERSECTION=2;var Hs=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.call(this)}return u(h,[{key:"isInSegmentEnvelopes",value:function(f){var x=new mn(this._inputLines[0][0],this._inputLines[0][1]),I=new mn(this._inputLines[1][0],this._inputLines[1][1]);return x.contains(f)&&I.contains(f)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return H(y(h.prototype),"computeIntersection",this).apply(this,arguments);var f=arguments[0],x=arguments[1],I=arguments[2];if(this._isProper=!1,mn.intersects(x,I,f)&&jt.index(x,I,f)===0&&jt.index(I,x,f)===0)return this._isProper=!0,(f.equals(x)||f.equals(I))&&(this._isProper=!1),this._result=pr.POINT_INTERSECTION,null;this._result=pr.NO_INTERSECTION}},{key:"intersection",value:function(f,x,I,F){var U=this.intersectionSafe(f,x,I,F);return this.isInSegmentEnvelopes(U)||(U=new Be(h.nearestEndpoint(f,x,I,F))),this._precisionModel!==null&&this._precisionModel.makePrecise(U),U}},{key:"checkDD",value:function(f,x,I,F,U){var Z=Gt.intersection(f,x,I,F),le=this.isInSegmentEnvelopes(Z);Sr.out.println("DD in env = "+le+"  --------------------- "+Z),U.distance(Z)>1e-4&&Sr.out.println("Distance = "+U.distance(Z))}},{key:"intersectionSafe",value:function(f,x,I,F){var U=Qt.intersection(f,x,I,F);return U===null&&(U=h.nearestEndpoint(f,x,I,F)),U}},{key:"computeCollinearIntersection",value:function(f,x,I,F){var U=mn.intersects(f,x,I),Z=mn.intersects(f,x,F),le=mn.intersects(I,F,f),Ee=mn.intersects(I,F,x);return U&&Z?(this._intPt[0]=I,this._intPt[1]=F,pr.COLLINEAR_INTERSECTION):le&&Ee?(this._intPt[0]=f,this._intPt[1]=x,pr.COLLINEAR_INTERSECTION):U&&le?(this._intPt[0]=I,this._intPt[1]=f,!I.equals(f)||Z||Ee?pr.COLLINEAR_INTERSECTION:pr.POINT_INTERSECTION):U&&Ee?(this._intPt[0]=I,this._intPt[1]=x,!I.equals(x)||Z||le?pr.COLLINEAR_INTERSECTION:pr.POINT_INTERSECTION):Z&&le?(this._intPt[0]=F,this._intPt[1]=f,!F.equals(f)||U||Ee?pr.COLLINEAR_INTERSECTION:pr.POINT_INTERSECTION):Z&&Ee?(this._intPt[0]=F,this._intPt[1]=x,!F.equals(x)||U||le?pr.COLLINEAR_INTERSECTION:pr.POINT_INTERSECTION):pr.NO_INTERSECTION}},{key:"computeIntersect",value:function(f,x,I,F){if(this._isProper=!1,!mn.intersects(f,x,I,F))return pr.NO_INTERSECTION;var U=jt.index(f,x,I),Z=jt.index(f,x,F);if(U>0&&Z>0||U<0&&Z<0)return pr.NO_INTERSECTION;var le=jt.index(I,F,f),Ee=jt.index(I,F,x);return le>0&&Ee>0||le<0&&Ee<0?pr.NO_INTERSECTION:U===0&&Z===0&&le===0&&Ee===0?this.computeCollinearIntersection(f,x,I,F):(U===0||Z===0||le===0||Ee===0?(this._isProper=!1,f.equals2D(I)||f.equals2D(F)?this._intPt[0]=f:x.equals2D(I)||x.equals2D(F)?this._intPt[0]=x:U===0?this._intPt[0]=new Be(I):Z===0?this._intPt[0]=new Be(F):le===0?this._intPt[0]=new Be(f):Ee===0&&(this._intPt[0]=new Be(x))):(this._isProper=!0,this._intPt[0]=this.intersection(f,x,I,F)),pr.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(f,x,I,F){var U=f,Z=Hr.pointToSegment(f,I,F),le=Hr.pointToSegment(x,I,F);return le<Z&&(Z=le,U=x),(le=Hr.pointToSegment(I,f,x))<Z&&(Z=le,U=I),(le=Hr.pointToSegment(F,f,x))<Z&&(Z=le,U=F),U}}]),h}(pr),vf=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"countSegment",value:function(l,h){if(l.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(l.y===this._p.y&&h.y===this._p.y){var f=l.x,x=h.x;return f>x&&(f=h.x,x=l.x),this._p.x>=f&&this._p.x<=x&&(this._isPointOnSegment=!0),null}if(l.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&l.y<=this._p.y){var I=jt.index(l,h,this._p);if(I===jt.COLLINEAR)return this._isPointOnSegment=!0,null;h.y<l.y&&(I=-I),I===jt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==xe.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?xe.BOUNDARY:this._crossingCount%2==1?xe.INTERIOR:xe.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var l=arguments[0];this._p=l}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Be&&Wt(arguments[1],Kt)){for(var l=arguments[0],h=arguments[1],f=new k(l),x=new Be,I=new Be,F=1;F<h.size();F++)if(h.getCoordinate(F,x),h.getCoordinate(F-1,I),f.countSegment(x,I),f.isOnSegment())return f.getLocation();return f.getLocation()}if(arguments[0]instanceof Be&&arguments[1]instanceof Array){for(var U=arguments[0],Z=arguments[1],le=new k(U),Ee=1;Ee<Z.length;Ee++){var Re=Z[Ee],Ye=Z[Ee-1];if(le.countSegment(Re,Ye),le.isOnSegment())return le.getLocation()}return le.getLocation()}}}]),k}(),_s=function(){function k(){n(this,k)}return u(k,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Be&&Wt(arguments[1],Kt)){for(var l=arguments[0],h=arguments[1],f=new Hs,x=new Be,I=new Be,F=h.size(),U=1;U<F;U++)if(h.getCoordinate(U-1,x),h.getCoordinate(U,I),f.computeIntersection(l,x,I),f.hasIntersection())return!0;return!1}if(arguments[0]instanceof Be&&arguments[1]instanceof Array){for(var Z=arguments[0],le=arguments[1],Ee=new Hs,Re=1;Re<le.length;Re++){var Ye=le[Re-1],pt=le[Re];if(Ee.computeIntersection(Z,Ye,pt),Ee.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(l,h){return vf.locatePointInRing(l,h)}},{key:"isInRing",value:function(l,h){return k.locateInRing(l,h)!==xe.EXTERIOR}}]),k}(),xi=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"setAllLocations",value:function(l){for(var h=0;h<this.location.length;h++)this.location[h]=l}},{key:"isNull",value:function(){for(var l=0;l<this.location.length;l++)if(this.location[l]!==xe.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(l){for(var h=0;h<this.location.length;h++)this.location[h]===xe.NONE&&(this.location[h]=l)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(l){if(l.location.length>this.location.length){var h=new Array(3).fill(null);h[Xe.ON]=this.location[Xe.ON],h[Xe.LEFT]=xe.NONE,h[Xe.RIGHT]=xe.NONE,this.location=h}for(var f=0;f<this.location.length;f++)this.location[f]===xe.NONE&&f<l.location.length&&(this.location[f]=l.location[f])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var l=this.location[Xe.LEFT];this.location[Xe.LEFT]=this.location[Xe.RIGHT],this.location[Xe.RIGHT]=l}},{key:"toString",value:function(){var l=new dr;return this.location.length>1&&l.append(xe.toLocationSymbol(this.location[Xe.LEFT])),l.append(xe.toLocationSymbol(this.location[Xe.ON])),this.location.length>1&&l.append(xe.toLocationSymbol(this.location[Xe.RIGHT])),l.toString()}},{key:"setLocations",value:function(l,h,f){this.location[Xe.ON]=l,this.location[Xe.LEFT]=h,this.location[Xe.RIGHT]=f}},{key:"get",value:function(l){return l<this.location.length?this.location[l]:xe.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var l=0;l<this.location.length;l++)if(this.location[l]===xe.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var l=arguments[0];this.setLocation(Xe.ON,l)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this.location[h]=f}}},{key:"init",value:function(l){this.location=new Array(l).fill(null),this.setAllLocations(xe.NONE)}},{key:"isEqualOnSide",value:function(l,h){return this.location[h]===l.location[h]}},{key:"allPositionsEqual",value:function(l){for(var h=0;h<this.location.length;h++)if(this.location[h]!==l)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];this.init(l.length)}else if(Number.isInteger(arguments[0])){var h=arguments[0];this.init(1),this.location[Xe.ON]=h}else if(arguments[0]instanceof k){var f=arguments[0];if(this.init(f.location.length),f!==null)for(var x=0;x<this.location.length;x++)this.location[x]=f.location[x]}}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];this.init(3),this.location[Xe.ON]=I,this.location[Xe.LEFT]=F,this.location[Xe.RIGHT]=U}}}]),k}(),sr=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getGeometryCount",value:function(){var l=0;return this.elt[0].isNull()||l++,this.elt[1].isNull()||l++,l}},{key:"setAllLocations",value:function(l,h){this.elt[l].setAllLocations(h)}},{key:"isNull",value:function(l){return this.elt[l].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var l=arguments[0];this.setAllLocationsIfNull(0,l),this.setAllLocationsIfNull(1,l)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this.elt[h].setAllLocationsIfNull(f)}}},{key:"isLine",value:function(l){return this.elt[l].isLine()}},{key:"merge",value:function(l){for(var h=0;h<2;h++)this.elt[h]===null&&l.elt[h]!==null?this.elt[h]=new xi(l.elt[h]):this.elt[h].merge(l.elt[h])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var l=arguments[0];return this.elt[l].get(Xe.ON)}if(arguments.length===2){var h=arguments[0],f=arguments[1];return this.elt[h].get(f)}}},{key:"toString",value:function(){var l=new dr;return this.elt[0]!==null&&(l.append("A:"),l.append(this.elt[0].toString())),this.elt[1]!==null&&(l.append(" B:"),l.append(this.elt[1].toString())),l.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var l=arguments[0];return this.elt[l].isArea()}}},{key:"isAnyNull",value:function(l){return this.elt[l].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];this.elt[l].setLocation(Xe.ON,h)}else if(arguments.length===3){var f=arguments[0],x=arguments[1],I=arguments[2];this.elt[f].setLocation(x,I)}}},{key:"isEqualOnSide",value:function(l,h){return this.elt[0].isEqualOnSide(l.elt[0],h)&&this.elt[1].isEqualOnSide(l.elt[1],h)}},{key:"allPositionsEqual",value:function(l,h){return this.elt[l].allPositionsEqual(h)}},{key:"toLine",value:function(l){this.elt[l].isArea()&&(this.elt[l]=new xi(this.elt[l].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var l=arguments[0];this.elt[0]=new xi(l),this.elt[1]=new xi(l)}else if(arguments[0]instanceof k){var h=arguments[0];this.elt[0]=new xi(h.elt[0]),this.elt[1]=new xi(h.elt[1])}}else if(arguments.length===2){var f=arguments[0],x=arguments[1];this.elt[0]=new xi(xe.NONE),this.elt[1]=new xi(xe.NONE),this.elt[f].setLocation(x)}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];this.elt[0]=new xi(I,F,U),this.elt[1]=new xi(I,F,U)}else if(arguments.length===4){var Z=arguments[0],le=arguments[1],Ee=arguments[2],Re=arguments[3];this.elt[0]=new xi(xe.NONE,xe.NONE,xe.NONE),this.elt[1]=new xi(xe.NONE,xe.NONE,xe.NONE),this.elt[Z].setLocations(le,Ee,Re)}}},{key:"toLineLabel",value:function(l){for(var h=new k(xe.NONE),f=0;f<2;f++)h.setLocation(f,l.getLocation(f));return h}}]),k}(),ui=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var l=new Array(this._pts.size()).fill(null),h=0;h<this._pts.size();h++)l[h]=this._pts.get(h);this._ring=this._geometryFactory.createLinearRing(l),this._isHole=jt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(l){this._startDe=l;var h=l,f=!0;do{if(h===null)throw new lt("Found null DirectedEdge");if(h.getEdgeRing()===this)throw new lt("Directed Edge visited twice during ring-building at "+h.getCoordinate());this._edges.add(h);var x=h.getLabel();Ct.isTrue(x.isArea()),this.mergeLabel(x),this.addPoints(h.getEdge(),h.isForward(),f),f=!1,this.setEdgeRing(h,this),h=this.getNext(h)}while(h!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(l){return this._pts.get(l)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var l=this._startDe;do{var h=l.getNode().getEdges().getOutgoingDegree(this);h>this._maxNodeDegree&&(this._maxNodeDegree=h),l=this.getNext(l)}while(l!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(l,h,f){var x=l.getCoordinates();if(h){var I=1;f&&(I=0);for(var F=I;F<x.length;F++)this._pts.add(x[F])}else{var U=x.length-2;f&&(U=x.length-1);for(var Z=U;Z>=0;Z--)this._pts.add(x[Z])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var l=this._startDe;do l.getEdge().setInResult(!0),l=l.getNext();while(l!==this._startDe)}},{key:"containsPoint",value:function(l){var h=this.getLinearRing();if(!h.getEnvelopeInternal().contains(l)||!_s.isInRing(l,h.getCoordinates()))return!1;for(var f=this._holes.iterator();f.hasNext();)if(f.next().containsPoint(l))return!1;return!0}},{key:"addHole",value:function(l){this._holes.add(l)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var l=arguments[0];this.mergeLabel(l,0),this.mergeLabel(l,1)}else if(arguments.length===2){var h=arguments[0],f=arguments[1],x=h.getLocation(f,Xe.RIGHT);if(x===xe.NONE)return null;if(this._label.getLocation(f)===xe.NONE)return this._label.setLocation(f,x),null}}},{key:"setShell",value:function(l){this._shell=l,l!==null&&l.addHole(this)}},{key:"toPolygon",value:function(l){for(var h=new Array(this._holes.size()).fill(null),f=0;f<this._holes.size();f++)h[f]=this._holes.get(f).getLinearRing();return l.createPolygon(this.getLinearRing(),h)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new st,this._pts=new st,this._label=new sr(xe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new st,this._geometryFactory=null,arguments.length!==0&&arguments.length===2){var l=arguments[0],h=arguments[1];this._geometryFactory=h,this.computePoints(l),this.computeRing()}}}]),k}(),vu=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"setEdgeRing",value:function(f,x){f.setMinEdgeRing(x)}},{key:"getNext",value:function(f){return f.getNextMin()}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];ui.constructor_.call(this,f,x)}}]),h}(ui),_u=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"buildMinimalRings",value:function(){var f=new st,x=this._startDe;do{if(x.getMinEdgeRing()===null){var I=new vu(x,this._geometryFactory);f.add(I)}x=x.getNext()}while(x!==this._startDe);return f}},{key:"setEdgeRing",value:function(f,x){f.setEdgeRing(x)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var f=this._startDe;do f.getNode().getEdges().linkMinimalDirectedEdges(this),f=f.getNext();while(f!==this._startDe)}},{key:"getNext",value:function(f){return f.getNext()}}],[{key:"constructor_",value:function(){var f=arguments[0],x=arguments[1];ui.constructor_.call(this,f,x)}}]),h}(ui),Fl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"setVisited",value:function(l){this._isVisited=l}},{key:"setInResult",value:function(l){this._isInResult=l}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(l){this._label=l}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(l){this._isCovered=l,this._isCoveredSet=!0}},{key:"updateIM",value:function(l){Ct.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(l)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var l=arguments[0];this._label=l}}}]),k}(),Bl=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"isIncidentEdgeInResult",value:function(){for(var f=this.getEdges().getEdges().iterator();f.hasNext();)if(f.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(f){f.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(f){}},{key:"computeMergedLocation",value:function(f,x){var I=xe.NONE;if(I=this._label.getLocation(x),!f.isNull(x)){var F=f.getLocation(x);I!==xe.BOUNDARY&&(I=F)}return I}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return H(y(h.prototype),"setLabel",this).apply(this,arguments);var f=arguments[0],x=arguments[1];this._label===null?this._label=new sr(f,x):this._label.setLocation(f,x)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof h){var f=arguments[0];this.mergeLabel(f._label)}else if(arguments[0]instanceof sr)for(var x=arguments[0],I=0;I<2;I++){var F=this.computeMergedLocation(x,I),U=this._label.getLocation(I);U===xe.NONE&&this._label.setLocation(I,F)}}},{key:"add",value:function(f){this._edges.insert(f),f.setNode(this)}},{key:"setLabelBoundary",value:function(f){if(this._label===null)return null;var x=xe.NONE;this._label!==null&&(x=this._label.getLocation(f));var I=null;switch(x){case xe.BOUNDARY:I=xe.INTERIOR;break;case xe.INTERIOR:default:I=xe.BOUNDARY}this._label.setLocation(f,I)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var f=arguments[0],x=arguments[1];this._coord=f,this._edges=x,this._label=new sr(0,xe.NONE)}}]),h}(Fl),Xa=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.apply(this,arguments)}return h}(Fi);function Mh(k){return k==null?0:k.color}function An(k){return k==null?null:k.parent}function Bo(k,l){k!==null&&(k.color=l)}function Pc(k){return k==null?null:k.left}function Lh(k){return k==null?null:k.right}var Ya=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),(f=l.call(this)).root_=null,f.size_=0,f}return u(h,[{key:"get",value:function(f){for(var x=this.root_;x!==null;){var I=f.compareTo(x.key);if(I<0)x=x.left;else{if(!(I>0))return x.value;x=x.right}}return null}},{key:"put",value:function(f,x){if(this.root_===null)return this.root_={key:f,value:x,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var I,F,U=this.root_;do if(I=U,(F=f.compareTo(U.key))<0)U=U.left;else{if(!(F>0)){var Z=U.value;return U.value=x,Z}U=U.right}while(U!==null);var le={key:f,left:null,right:null,value:x,parent:I,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return F<0?I.left=le:I.right=le,this.fixAfterInsertion(le),this.size_++,null}},{key:"fixAfterInsertion",value:function(f){var x;for(f.color=1;f!=null&&f!==this.root_&&f.parent.color===1;)An(f)===Pc(An(An(f)))?Mh(x=Lh(An(An(f))))===1?(Bo(An(f),0),Bo(x,0),Bo(An(An(f)),1),f=An(An(f))):(f===Lh(An(f))&&(f=An(f),this.rotateLeft(f)),Bo(An(f),0),Bo(An(An(f)),1),this.rotateRight(An(An(f)))):Mh(x=Pc(An(An(f))))===1?(Bo(An(f),0),Bo(x,0),Bo(An(An(f)),1),f=An(An(f))):(f===Pc(An(f))&&(f=An(f),this.rotateRight(f)),Bo(An(f),0),Bo(An(An(f)),1),this.rotateLeft(An(An(f))));this.root_.color=0}},{key:"values",value:function(){var f=new st,x=this.getFirstEntry();if(x!==null)for(f.add(x.value);(x=h.successor(x))!==null;)f.add(x.value);return f}},{key:"entrySet",value:function(){var f=new Er,x=this.getFirstEntry();if(x!==null)for(f.add(x);(x=h.successor(x))!==null;)f.add(x);return f}},{key:"rotateLeft",value:function(f){if(f!=null){var x=f.right;f.right=x.left,x.left!=null&&(x.left.parent=f),x.parent=f.parent,f.parent==null?this.root_=x:f.parent.left===f?f.parent.left=x:f.parent.right=x,x.left=f,f.parent=x}}},{key:"rotateRight",value:function(f){if(f!=null){var x=f.left;f.left=x.right,x.right!=null&&(x.right.parent=f),x.parent=f.parent,f.parent==null?this.root_=x:f.parent.right===f?f.parent.right=x:f.parent.left=x,x.right=f,f.parent=x}}},{key:"getFirstEntry",value:function(){var f=this.root_;if(f!=null)for(;f.left!=null;)f=f.left;return f}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(f){for(var x=this.root_;x!==null;){var I=f.compareTo(x.key);if(I<0)x=x.left;else{if(!(I>0))return!0;x=x.right}}return!1}}],[{key:"successor",value:function(f){var x;if(f===null)return null;if(f.right!==null){for(x=f.right;x.left!==null;)x=x.left;return x}x=f.parent;for(var I=f;x!==null&&I===x.right;)I=x,x=x.parent;return x}}]),h}(Xa),Ka=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"find",value:function(l){return this.nodeMap.get(l)}},{key:"addNode",value:function(){if(arguments[0]instanceof Be){var l=arguments[0],h=this.nodeMap.get(l);return h===null&&(h=this.nodeFact.createNode(l),this.nodeMap.put(l,h)),h}if(arguments[0]instanceof Bl){var f=arguments[0],x=this.nodeMap.get(f.getCoordinate());return x===null?(this.nodeMap.put(f.getCoordinate(),f),f):(x.mergeLabel(f),x)}}},{key:"print",value:function(l){for(var h=this.iterator();h.hasNext();)h.next().print(l)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(l){for(var h=new st,f=this.iterator();f.hasNext();){var x=f.next();x.getLabel().getLocation(l)===xe.BOUNDARY&&h.add(x)}return h}},{key:"add",value:function(l){var h=l.getCoordinate();this.addNode(h).add(l)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ya,this.nodeFact=null;var l=arguments[0];this.nodeFact=l}}]),k}(),ci=function(){function k(){n(this,k)}return u(k,null,[{key:"isNorthern",value:function(l){return l===k.NE||l===k.NW}},{key:"isOpposite",value:function(l,h){return l!==h&&(l-h+4)%4===2}},{key:"commonHalfPlane",value:function(l,h){if(l===h)return l;if((l-h+4)%4===2)return-1;var f=l<h?l:h;return f===0&&(l>h?l:h)===3?3:f}},{key:"isInHalfPlane",value:function(l,h){return h===k.SE?l===k.SE||l===k.SW:l===h||l===h+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1];if(l===0&&h===0)throw new he("Cannot compute the quadrant for point ( "+l+", "+h+" )");return l>=0?h>=0?k.NE:k.SE:h>=0?k.NW:k.SW}if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var f=arguments[0],x=arguments[1];if(x.x===f.x&&x.y===f.y)throw new he("Cannot compute the quadrant for two identical points "+f);return x.x>=f.x?x.y>=f.y?k.NE:k.SE:x.y>=f.y?k.NW:k.SW}}}]),k}();ci.NE=0,ci.NW=1,ci.SW=2,ci.SE=3;var $l=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"compareDirection",value:function(l){return this._dx===l._dx&&this._dy===l._dy?0:this._quadrant>l._quadrant?1:this._quadrant<l._quadrant?-1:jt.index(l._p0,l._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(l){this._node=l}},{key:"print",value:function(l){var h=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),x=f.lastIndexOf("."),I=f.substring(x+1);l.print("  "+I+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)}},{key:"compareTo",value:function(l){var h=l;return this.compareDirection(h)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var l=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),f=h.lastIndexOf(".");return"  "+h.substring(f+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+l+"   "+this._label}},{key:"computeLabel",value:function(l){}},{key:"init",value:function(l,h){this._p0=l,this._p1=h,this._dx=h.x-l.x,this._dy=h.y-l.y,this._quadrant=ci.quadrant(this._dx,this._dy),Ct.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var l=arguments[0];this._edge=l}else if(arguments.length===3){var h=arguments[0],f=arguments[1],x=arguments[2];k.constructor_.call(this,h,f,x,null)}else if(arguments.length===4){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3];k.constructor_.call(this,I),this.init(F,U),this._label=Z}}}]),k}(),Ul=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(f){return this._depth[f]}},{key:"setVisited",value:function(f){this._isVisited=f}},{key:"computeDirectedLabel",value:function(){this._label=new sr(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(f,x){if(this._depth[f]!==-999&&this._depth[f]!==x)throw new lt("assigned depths do not match",this.getCoordinate());this._depth[f]=x}},{key:"isInteriorAreaEdge",value:function(){for(var f=!0,x=0;x<2;x++)this._label.isArea(x)&&this._label.getLocation(x,Xe.LEFT)===xe.INTERIOR&&this._label.getLocation(x,Xe.RIGHT)===xe.INTERIOR||(f=!1);return f}},{key:"setNextMin",value:function(f){this._nextMin=f}},{key:"print",value:function(f){H(y(h.prototype),"print",this).call(this,f),f.print(" "+this._depth[Xe.LEFT]+"/"+this._depth[Xe.RIGHT]),f.print(" ("+this.getDepthDelta()+")"),this._isInResult&&f.print(" inResult")}},{key:"setMinEdgeRing",value:function(f){this._minEdgeRing=f}},{key:"isLineEdge",value:function(){var f=this._label.isLine(0)||this._label.isLine(1),x=!this._label.isArea(0)||this._label.allPositionsEqual(0,xe.EXTERIOR),I=!this._label.isArea(1)||this._label.allPositionsEqual(1,xe.EXTERIOR);return f&&x&&I}},{key:"setEdgeRing",value:function(f){this._edgeRing=f}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var f=this._edge.getDepthDelta();return this._isForward||(f=-f),f}},{key:"setInResult",value:function(f){this._isInResult=f}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(f){this.print(f),f.print(" "),this._isForward?this._edge.print(f):this._edge.printReverse(f)}},{key:"setSym",value:function(f){this._sym=f}},{key:"setVisitedEdge",value:function(f){this.setVisited(f),this._sym.setVisited(f)}},{key:"setEdgeDepths",value:function(f,x){var I=this.getEdge().getDepthDelta();this._isForward||(I=-I);var F=1;f===Xe.LEFT&&(F=-1);var U=Xe.opposite(f),Z=x+I*F;this.setDepth(f,x),this.setDepth(U,Z)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(f){this._next=f}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var f=arguments[0],x=arguments[1];if($l.constructor_.call(this,f),this._isForward=x,x)this.init(f.getCoordinate(0),f.getCoordinate(1));else{var I=f.getNumPoints()-1;this.init(f.getCoordinate(I),f.getCoordinate(I-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(f,x){return f===xe.EXTERIOR&&x===xe.INTERIOR?1:f===xe.INTERIOR&&x===xe.EXTERIOR?-1:0}}]),h}($l),xu=function(){function k(){n(this,k)}return u(k,[{key:"createNode",value:function(l){return new Bl(l,null)}}]),k}(),$o=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"printEdges",value:function(l){l.println("Edges:");for(var h=0;h<this._edges.size();h++){l.println("edge "+h+":");var f=this._edges.get(h);f.print(l),f.eiList.print(l)}}},{key:"find",value:function(l){return this._nodes.find(l)}},{key:"addNode",value:function(){if(arguments[0]instanceof Bl){var l=arguments[0];return this._nodes.addNode(l)}if(arguments[0]instanceof Be){var h=arguments[0];return this._nodes.addNode(h)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(l){Sr.out.println(l)}},{key:"isBoundaryNode",value:function(l,h){var f=this._nodes.find(h);if(f===null)return!1;var x=f.getLabel();return x!==null&&x.getLocation(l)===xe.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(l,h,f,x){return!!l.equals(f)&&jt.index(l,h,x)===jt.COLLINEAR&&ci.quadrant(l,h)===ci.quadrant(f,x)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(l){Sr.out.print(l)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(l,h){for(var f=0;f<this._edges.size();f++){var x=this._edges.get(f),I=x.getCoordinates();if(this.matchInSameDirection(l,h,I[0],I[1])||this.matchInSameDirection(l,h,I[I.length-1],I[I.length-2]))return x}return null}},{key:"insertEdge",value:function(l){this._edges.add(l)}},{key:"findEdgeEnd",value:function(l){for(var h=this.getEdgeEnds().iterator();h.hasNext();){var f=h.next();if(f.getEdge()===l)return f}return null}},{key:"addEdges",value:function(l){for(var h=l.iterator();h.hasNext();){var f=h.next();this._edges.add(f);var x=new Ul(f,!0),I=new Ul(f,!1);x.setSym(I),I.setSym(x),this.add(x),this.add(I)}}},{key:"add",value:function(l){this._nodes.add(l),this._edgeEndList.add(l)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(l,h){for(var f=0;f<this._edges.size();f++){var x=this._edges.get(f),I=x.getCoordinates();if(l.equals(I[0])&&h.equals(I[1]))return x}return null}}],[{key:"constructor_",value:function(){if(this._edges=new st,this._nodes=null,this._edgeEndList=new st,arguments.length===0)this._nodes=new Ka(new xu);else if(arguments.length===1){var l=arguments[0];this._nodes=new Ka(l)}}},{key:"linkResultDirectedEdges",value:function(l){for(var h=l.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()}}]),k}(),_f=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"sortShellsAndHoles",value:function(l,h,f){for(var x=l.iterator();x.hasNext();){var I=x.next();I.isHole()?f.add(I):h.add(I)}}},{key:"computePolygons",value:function(l){for(var h=new st,f=l.iterator();f.hasNext();){var x=f.next().toPolygon(this._geometryFactory);h.add(x)}return h}},{key:"placeFreeHoles",value:function(l,h){for(var f=h.iterator();f.hasNext();){var x=f.next();if(x.getShell()===null){var I=k.findEdgeRingContaining(x,l);if(I===null)throw new lt("unable to assign hole to a shell",x.getCoordinate(0));x.setShell(I)}}}},{key:"buildMinimalEdgeRings",value:function(l,h,f){for(var x=new st,I=l.iterator();I.hasNext();){var F=I.next();if(F.getMaxNodeDegree()>2){F.linkDirectedEdgesForMinimalEdgeRings();var U=F.buildMinimalRings(),Z=this.findShell(U);Z!==null?(this.placePolygonHoles(Z,U),h.add(Z)):f.addAll(U)}else x.add(F)}return x}},{key:"buildMaximalEdgeRings",value:function(l){for(var h=new st,f=l.iterator();f.hasNext();){var x=f.next();if(x.isInResult()&&x.getLabel().isArea()&&x.getEdgeRing()===null){var I=new _u(x,this._geometryFactory);h.add(I),I.setInResult()}}return h}},{key:"placePolygonHoles",value:function(l,h){for(var f=h.iterator();f.hasNext();){var x=f.next();x.isHole()&&x.setShell(l)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(l){for(var h=0,f=null,x=l.iterator();x.hasNext();){var I=x.next();I.isHole()||(f=I,h++)}return Ct.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),f}},{key:"add",value:function(){if(arguments.length===1){var l=arguments[0];this.add(l.getEdgeEnds(),l.getNodes())}else if(arguments.length===2){var h=arguments[0],f=arguments[1];$o.linkResultDirectedEdges(f);var x=this.buildMaximalEdgeRings(h),I=new st,F=this.buildMinimalEdgeRings(x,this._shellList,I);this.sortShellsAndHoles(F,this._shellList,I),this.placeFreeHoles(this._shellList,I)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new st;var l=arguments[0];this._geometryFactory=l}},{key:"findEdgeRingContaining",value:function(l,h){for(var f=l.getLinearRing(),x=f.getEnvelopeInternal(),I=f.getCoordinateN(0),F=null,U=null,Z=h.iterator();Z.hasNext();){var le=Z.next(),Ee=le.getLinearRing(),Re=Ee.getEnvelopeInternal();if(!Re.equals(x)&&Re.contains(x)){I=wn.ptNotInList(f.getCoordinates(),Ee.getCoordinates());var Ye=!1;_s.isInRing(I,Ee.getCoordinates())&&(Ye=!0),Ye&&(F===null||U.contains(Re))&&(U=(F=le).getLinearRing().getEnvelopeInternal())}}return F}}]),k}(),bu=function(){function k(){n(this,k)}return u(k,[{key:"getBounds",value:function(){}}]),k}(),Mi=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[bu,Le]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var l=arguments[0],h=arguments[1];this._bounds=l,this._item=h}}]),k}(),Uo=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"poll",value:function(){if(this.isEmpty())return null;var l=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),l}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(l){for(var h=null,f=this._items.get(l);2*l<=this._size&&((h=2*l)!==this._size&&this._items.get(h+1).compareTo(this._items.get(h))<0&&h++,this._items.get(h).compareTo(f)<0);l=h)this._items.set(l,this._items.get(h));this._items.set(l,f)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(l){this._items.add(null),this._size+=1;var h=this._size;for(this._items.set(0,l);l.compareTo(this._items.get(Math.trunc(h/2)))<0;h/=2)this._items.set(h,this._items.get(Math.trunc(h/2)));this._items.set(h,l)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new st,this._items.add(null)}}]),k}(),Rn=function(){function k(){n(this,k)}return u(k,[{key:"insert",value:function(l,h){}},{key:"remove",value:function(l,h){}},{key:"query",value:function(){}}]),k}(),Li=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(l){Ct.isTrue(this._bounds===null),this._childBoundables.add(l)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[bu,Le]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new st,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var l=arguments[0];this._level=l}}}]),k}(),Ja={reverseOrder:function(){return{compare:function(k,l){return l.compareTo(k)}}},min:function(k){return Ja.sort(k),k.get(0)},sort:function(k,l){var h=k.toArray();l?je.sort(h,l):je.sort(h);for(var f=k.iterator(),x=0,I=h.length;x<I;x++)f.next(),f.set(h[x])},singletonList:function(k){var l=new st;return l.add(k),l}},Qa=function(){function k(){n(this,k)}return u(k,null,[{key:"maxDistance",value:function(l,h,f,x,I,F,U,Z){var le=k.distance(l,h,I,F);return le=Math.max(le,k.distance(l,h,U,Z)),le=Math.max(le,k.distance(f,x,I,F)),le=Math.max(le,k.distance(f,x,U,Z))}},{key:"distance",value:function(l,h,f,x){var I=f-l,F=x-h;return Math.sqrt(I*I+F*F)}},{key:"maximumDistance",value:function(l,h){var f=Math.min(l.getMinX(),h.getMinX()),x=Math.min(l.getMinY(),h.getMinY()),I=Math.max(l.getMaxX(),h.getMaxX()),F=Math.max(l.getMaxY(),h.getMaxY());return k.distance(f,x,I,F)}},{key:"minMaxDistance",value:function(l,h){var f=l.getMinX(),x=l.getMinY(),I=l.getMaxX(),F=l.getMaxY(),U=h.getMinX(),Z=h.getMinY(),le=h.getMaxX(),Ee=h.getMaxY(),Re=k.maxDistance(f,x,f,F,U,Z,U,Ee);return Re=Math.min(Re,k.maxDistance(f,x,f,F,U,Z,le,Z)),Re=Math.min(Re,k.maxDistance(f,x,f,F,le,Ee,U,Ee)),Re=Math.min(Re,k.maxDistance(f,x,f,F,le,Ee,le,Z)),Re=Math.min(Re,k.maxDistance(f,x,I,x,U,Z,U,Ee)),Re=Math.min(Re,k.maxDistance(f,x,I,x,U,Z,le,Z)),Re=Math.min(Re,k.maxDistance(f,x,I,x,le,Ee,U,Ee)),Re=Math.min(Re,k.maxDistance(f,x,I,x,le,Ee,le,Z)),Re=Math.min(Re,k.maxDistance(I,F,f,F,U,Z,U,Ee)),Re=Math.min(Re,k.maxDistance(I,F,f,F,U,Z,le,Z)),Re=Math.min(Re,k.maxDistance(I,F,f,F,le,Ee,U,Ee)),Re=Math.min(Re,k.maxDistance(I,F,f,F,le,Ee,le,Z)),Re=Math.min(Re,k.maxDistance(I,F,I,x,U,Z,U,Ee)),Re=Math.min(Re,k.maxDistance(I,F,I,x,U,Z,le,Z)),Re=Math.min(Re,k.maxDistance(I,F,I,x,le,Ee,U,Ee)),Re=Math.min(Re,k.maxDistance(I,F,I,x,le,Ee,le,Z))}}]),k}(),el=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"maximumDistance",value:function(){return Qa.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(l,h){var f=k.isComposite(this._boundable1),x=k.isComposite(this._boundable2);if(f&&x)return k.area(this._boundable1)>k.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,l,h),null):(this.expand(this._boundable2,this._boundable1,!0,l,h),null);if(f)return this.expand(this._boundable1,this._boundable2,!1,l,h),null;if(x)return this.expand(this._boundable2,this._boundable1,!0,l,h),null;throw new he("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(k.isComposite(this._boundable1)||k.isComposite(this._boundable2))}},{key:"compareTo",value:function(l){var h=l;return this._distance<h._distance?-1:this._distance>h._distance?1:0}},{key:"expand",value:function(l,h,f,x,I){for(var F=l.getChildBoundables().iterator();F.hasNext();){var U=F.next(),Z=null;(Z=f?new k(h,U,this._itemDistance):new k(U,h,this._itemDistance)).getDistance()<I&&x.add(Z)}}},{key:"getBoundable",value:function(l){return l===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var l=arguments[0],h=arguments[1],f=arguments[2];this._boundable1=l,this._boundable2=h,this._itemDistance=f,this._distance=this.distance()}},{key:"area",value:function(l){return l.getBounds().getArea()}},{key:"isComposite",value:function(l){return l instanceof Li}}]),k}(),Ac=function(){function k(){n(this,k)}return u(k,[{key:"visitItem",value:function(l){}}]),k}(),tl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"queryInternal",value:function(){if(Wt(arguments[2],Ac)&&arguments[0]instanceof Object&&arguments[1]instanceof Li)for(var l=arguments[0],h=arguments[1],f=arguments[2],x=h.getChildBoundables(),I=0;I<x.size();I++){var F=x.get(I);this.getIntersectsOp().intersects(F.getBounds(),l)&&(F instanceof Li?this.queryInternal(l,F,f):F instanceof Mi?f.visitItem(F.getItem()):Ct.shouldNeverReachHere())}else if(Wt(arguments[2],kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Li)for(var U=arguments[0],Z=arguments[1],le=arguments[2],Ee=Z.getChildBoundables(),Re=0;Re<Ee.size();Re++){var Ye=Ee.get(Re);this.getIntersectsOp().intersects(Ye.getBounds(),U)&&(Ye instanceof Li?this.queryInternal(U,Ye,le):Ye instanceof Mi?le.add(Ye.getItem()):Ct.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(l){return l.get(l.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var l=arguments[0],h=0,f=l.getChildBoundables().iterator();f.hasNext();){var x=f.next();x instanceof Li?h+=this.size(x):x instanceof Mi&&(h+=1)}return h}}},{key:"removeItem",value:function(l,h){for(var f=null,x=l.getChildBoundables().iterator();x.hasNext();){var I=x.next();I instanceof Mi&&I.getItem()===h&&(f=I)}return f!==null&&(l.getChildBoundables().remove(f),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var l=this.itemsTree(this._root);return l===null?new st:l}if(arguments.length===1){for(var h=arguments[0],f=new st,x=h.getChildBoundables().iterator();x.hasNext();){var I=x.next();if(I instanceof Li){var F=this.itemsTree(I);F!==null&&f.add(F)}else I instanceof Mi?f.add(I.getItem()):Ct.shouldNeverReachHere()}return f.size()<=0?null:f}}},{key:"insert",value:function(l,h){Ct.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Mi(l,h))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var l=arguments[0],h=new st;return this.boundablesAtLevel(l,this._root,h),h}if(arguments.length===3){var f=arguments[0],x=arguments[1],I=arguments[2];if(Ct.isTrue(f>-2),x.getLevel()===f)return I.add(x),null;for(var F=x.getChildBoundables().iterator();F.hasNext();){var U=F.next();U instanceof Li?this.boundablesAtLevel(f,U,I):(Ct.isTrue(U instanceof Mi),f===-1&&I.add(U))}return null}}},{key:"query",value:function(){if(arguments.length===1){var l=arguments[0];this.build();var h=new st;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.queryInternal(l,this._root,h),h}if(arguments.length===2){var f=arguments[0],x=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.queryInternal(f,this._root,x)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.remove(l,this._root,h)}if(arguments.length===3){var f=arguments[0],x=arguments[1],I=arguments[2],F=this.removeItem(x,I);if(F)return!0;for(var U=null,Z=x.getChildBoundables().iterator();Z.hasNext();){var le=Z.next();if(this.getIntersectsOp().intersects(le.getBounds(),f)&&le instanceof Li&&(F=this.remove(f,le,I))){U=le;break}}return U!==null&&U.getChildBoundables().isEmpty()&&x.getChildBoundables().remove(U),F}}},{key:"createHigherLevels",value:function(l,h){Ct.isTrue(!l.isEmpty());var f=this.createParentBoundables(l,h+1);return f.size()===1?f.get(0):this.createHigherLevels(f,h+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var l=arguments[0],h=0,f=l.getChildBoundables().iterator();f.hasNext();){var x=f.next();if(x instanceof Li){var I=this.depth(x);I>h&&(h=I)}}return h+1}}},{key:"createParentBoundables",value:function(l,h){Ct.isTrue(!l.isEmpty());var f=new st;f.add(this.createNode(h));var x=new st(l);Ja.sort(x,this.getComparator());for(var I=x.iterator();I.hasNext();){var F=I.next();this.lastNode(f).getChildBoundables().size()===this.getNodeCapacity()&&f.add(this.createNode(h)),this.lastNode(f).addChildBoundable(F)}return f}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[Le]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new st,this._nodeCapacity=null,arguments.length===0)k.constructor_.call(this,k.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var l=arguments[0];Ct.isTrue(l>1,"Node capacity must be greater than 1"),this._nodeCapacity=l}}},{key:"compareDoubles",value:function(l,h){return l>h?1:l<h?-1:0}}]),k}();tl.IntersectsOp=function(){},tl.DEFAULT_NODE_CAPACITY=10;var Ph=function(){function k(){n(this,k)}return u(k,[{key:"distance",value:function(l,h){}}]),k}(),vo=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"createParentBoundablesFromVerticalSlices",value:function(f,x){Ct.isTrue(f.length>0);for(var I=new st,F=0;F<f.length;F++)I.addAll(this.createParentBoundablesFromVerticalSlice(f[F],x));return I}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var f=arguments[0],x=arguments[1];return this.nearestNeighbourK(f,Je.POSITIVE_INFINITY,x)}if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2],Z=F,le=new Uo;le.add(I);for(var Ee=new Uo;!le.isEmpty()&&Z>=0;){var Re=le.poll(),Ye=Re.getDistance();if(Ye>=Z)break;if(Re.isLeaves())if(Ee.size()<U)Ee.add(Re);else{var pt=Ee.peek();pt.getDistance()>Ye&&(Ee.poll(),Ee.add(Re));var ft=Ee.peek();Z=ft.getDistance()}else Re.expandToQueue(le,Z)}return h.getItems(Ee)}}},{key:"createNode",value:function(f){return new Rc(f)}},{key:"size",value:function(){return arguments.length===0?H(y(h.prototype),"size",this).call(this):H(y(h.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof mn))return H(y(h.prototype),"insert",this).apply(this,arguments);var f=arguments[0],x=arguments[1];if(f.isNull())return null;H(y(h.prototype),"insert",this).call(this,f,x)}},{key:"getIntersectsOp",value:function(){return h.intersectsOp}},{key:"verticalSlices",value:function(f,x){for(var I=Math.trunc(Math.ceil(f.size()/x)),F=new Array(x).fill(null),U=f.iterator(),Z=0;Z<x;Z++){F[Z]=new st;for(var le=0;U.hasNext()&&le<I;){var Ee=U.next();F[Z].add(Ee),le++}}return F}},{key:"query",value:function(){if(arguments.length===1){var f=arguments[0];return H(y(h.prototype),"query",this).call(this,f)}if(arguments.length===2){var x=arguments[0],I=arguments[1];H(y(h.prototype),"query",this).call(this,x,I)}}},{key:"getComparator",value:function(){return h.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(f,x){return H(y(h.prototype),"createParentBoundables",this).call(this,f,x)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof mn){var f=arguments[0],x=arguments[1];return H(y(h.prototype),"remove",this).call(this,f,x)}return H(y(h.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?H(y(h.prototype),"depth",this).call(this):H(y(h.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(f,x){Ct.isTrue(!f.isEmpty());var I=Math.trunc(Math.ceil(f.size()/this.getNodeCapacity())),F=new st(f);Ja.sort(F,h.xComparator);var U=this.verticalSlices(F,Math.trunc(Math.ceil(Math.sqrt(I))));return this.createParentBoundablesFromVerticalSlices(U,x)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Wt(arguments[0],Ph)){var f=arguments[0];if(this.isEmpty())return null;var x=new el(this.getRoot(),this.getRoot(),f);return this.nearestNeighbour(x)}if(arguments[0]instanceof el){var I=arguments[0],F=Je.POSITIVE_INFINITY,U=null,Z=new Uo;for(Z.add(I);!Z.isEmpty()&&F>0;){var le=Z.poll(),Ee=le.getDistance();if(Ee>=F)break;le.isLeaves()?(F=Ee,U=le):le.expandToQueue(Z,F)}return U===null?null:[U.getBoundable(0).getItem(),U.getBoundable(1).getItem()]}}else{if(arguments.length===2){var Re=arguments[0],Ye=arguments[1];if(this.isEmpty()||Re.isEmpty())return null;var pt=new el(this.getRoot(),Re.getRoot(),Ye);return this.nearestNeighbour(pt)}if(arguments.length===3){var ft=arguments[0],qt=arguments[1],Yt=arguments[2],ln=new Mi(ft,qt),Cn=new el(this.getRoot(),ln,Yt);return this.nearestNeighbour(Cn)[0]}if(arguments.length===4){var Yn=arguments[0],zn=arguments[1],Zr=arguments[2],bo=arguments[3],rs=new Mi(Yn,zn),qn=new el(this.getRoot(),rs,Zr);return this.nearestNeighbourK(qn,bo)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var f=arguments[0],x=arguments[1],I=Je.POSITIVE_INFINITY,F=new Uo;for(F.add(f);!F.isEmpty();){var U=F.poll(),Z=U.getDistance();if(Z>x)return!1;if(U.maximumDistance()<=x)return!0;if(U.isLeaves()){if((I=Z)<=x)return!0}else U.expandToQueue(F,I)}return!1}if(arguments.length===3){var le=arguments[0],Ee=arguments[1],Re=arguments[2],Ye=new el(this.getRoot(),le.getRoot(),Ee);return this.isWithinDistance(Ye,Re)}}},{key:"interfaces_",get:function(){return[Rn,Le]}}],[{key:"constructor_",value:function(){if(arguments.length===0)h.constructor_.call(this,h.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var f=arguments[0];tl.constructor_.call(this,f)}}},{key:"centreX",value:function(f){return h.avg(f.getMinX(),f.getMaxX())}},{key:"avg",value:function(f,x){return(f+x)/2}},{key:"getItems",value:function(f){for(var x=new Array(f.size()).fill(null),I=0;!f.isEmpty();){var F=f.poll();x[I]=F.getBoundable(0).getItem(),I++}return x}},{key:"centreY",value:function(f){return h.avg(f.getMinY(),f.getMaxY())}}]),h}(tl),Rc=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"computeBounds",value:function(){for(var f=null,x=this.getChildBoundables().iterator();x.hasNext();){var I=x.next();f===null?f=new mn(I.getBounds()):f.expandToInclude(I.getBounds())}return f}}],[{key:"constructor_",value:function(){var f=arguments[0];Li.constructor_.call(this,f)}}]),h}(Li);vo.STRtreeNode=Rc,vo.xComparator=new(function(){function k(){n(this,k)}return u(k,[{key:"interfaces_",get:function(){return[At]}},{key:"compare",value:function(l,h){return tl.compareDoubles(vo.centreX(l.getBounds()),vo.centreX(h.getBounds()))}}]),k}()),vo.yComparator=new(function(){function k(){n(this,k)}return u(k,[{key:"interfaces_",get:function(){return[At]}},{key:"compare",value:function(l,h){return tl.compareDoubles(vo.centreY(l.getBounds()),vo.centreY(h.getBounds()))}}]),k}()),vo.intersectsOp=new(function(){function k(){n(this,k)}return u(k,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(l,h){return l.intersects(h)}}]),k}()),vo.DEFAULT_NODE_CAPACITY=10;var Ah=function(){function k(){n(this,k)}return u(k,null,[{key:"relativeSign",value:function(l,h){return l<h?-1:l>h?1:0}},{key:"compare",value:function(l,h,f){if(h.equals2D(f))return 0;var x=k.relativeSign(h.x,f.x),I=k.relativeSign(h.y,f.y);switch(l){case 0:return k.compareValue(x,I);case 1:return k.compareValue(I,x);case 2:return k.compareValue(I,-x);case 3:return k.compareValue(-x,I);case 4:return k.compareValue(-x,-I);case 5:return k.compareValue(-I,-x);case 6:return k.compareValue(-I,x);case 7:return k.compareValue(x,-I)}return Ct.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(l,h){return l<0?-1:l>0?1:h<0?-1:h>0?1:0}}]),k}(),Rh=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(l){var h=l;return this.segmentIndex<h.segmentIndex?-1:this.segmentIndex>h.segmentIndex?1:this.coord.equals2D(h.coord)?0:this._isInterior?h._isInterior?Ah.compare(this._segmentOctant,this.coord,h.coord):1:-1}},{key:"isEndPoint",value:function(l){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===l}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3];this._segString=l,this.coord=new Be(h),this.segmentIndex=f,this._segmentOctant=x,this._isInterior=!h.equals2D(l.getCoordinate(f))}}]),k}(),Nh=function(){function k(){n(this,k)}return u(k,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),k}(),Ia=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getSplitCoordinates",value:function(){var l=new Ir;this.addEndpoints();for(var h=this.iterator(),f=h.next();h.hasNext();){var x=h.next();this.addEdgeCoordinates(f,x,l),f=x}return l.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var l=new st;this.findCollapsesFromInsertedNodes(l),this.findCollapsesFromExistingVertices(l);for(var h=l.iterator();h.hasNext();){var f=h.next().intValue();this.add(this._edge.getCoordinate(f),f)}}},{key:"createSplitEdgePts",value:function(l,h){var f=h.segmentIndex-l.segmentIndex+2;if(f===2)return[new Be(l.coord),new Be(h.coord)];var x=this._edge.getCoordinate(h.segmentIndex),I=h.isInterior()||!h.coord.equals2D(x);I||f--;var F=new Array(f).fill(null),U=0;F[U++]=new Be(l.coord);for(var Z=l.segmentIndex+1;Z<=h.segmentIndex;Z++)F[U++]=this._edge.getCoordinate(Z);return I&&(F[U]=new Be(h.coord)),F}},{key:"print",value:function(l){l.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(l)}},{key:"findCollapsesFromExistingVertices",value:function(l){for(var h=0;h<this._edge.size()-2;h++){var f=this._edge.getCoordinate(h);this._edge.getCoordinate(h+1);var x=this._edge.getCoordinate(h+2);f.equals2D(x)&&l.add(qr.valueOf(h+1))}}},{key:"addEdgeCoordinates",value:function(l,h,f){var x=this.createSplitEdgePts(l,h);f.add(x,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(l){this.addEndpoints(),this.addCollapsedNodes();for(var h=this.iterator(),f=h.next();h.hasNext();){var x=h.next(),I=this.createSplitEdge(f,x);l.add(I),f=x}}},{key:"findCollapseIndex",value:function(l,h,f){if(!l.coord.equals2D(h.coord))return!1;var x=h.segmentIndex-l.segmentIndex;return h.isInterior()||x--,x===1&&(f[0]=l.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(l){for(var h=new Array(1).fill(null),f=this.iterator(),x=f.next();f.hasNext();){var I=f.next();this.findCollapseIndex(x,I,h)&&l.add(qr.valueOf(h[0])),x=I}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var l=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(l),l)}},{key:"createSplitEdge",value:function(l,h){var f=this.createSplitEdgePts(l,h);return new jo(f,this._edge.getData())}},{key:"add",value:function(l,h){var f=new Rh(this._edge,l,h,this._edge.getSegmentOctant(h)),x=this._nodeMap.get(f);return x!==null?(Ct.isTrue(x.coord.equals2D(l),"Found equal nodes with different coordinates"),x):(this._nodeMap.put(f,f),f)}},{key:"checkSplitEdgesCorrectness",value:function(l){var h=this._edge.getCoordinates(),f=l.get(0).getCoordinate(0);if(!f.equals2D(h[0]))throw new Ut("bad split edge start point at "+f);var x=l.get(l.size()-1).getCoordinates(),I=x[x.length-1];if(!I.equals2D(h[h.length-1]))throw new Ut("bad split edge end point at "+I)}}],[{key:"constructor_",value:function(){this._nodeMap=new Ya,this._edge=null;var l=arguments[0];this._edge=l}}]),k}(),zh=function(){function k(){n(this,k)}return u(k,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1];if(l===0&&h===0)throw new he("Cannot compute the octant for point ( "+l+", "+h+" )");var f=Math.abs(l),x=Math.abs(h);return l>=0?h>=0?f>=x?0:1:f>=x?7:6:h>=0?f>=x?3:2:f>=x?4:5}if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var I=arguments[0],F=arguments[1],U=F.x-I.x,Z=F.y-I.y;if(U===0&&Z===0)throw new he("Cannot compute the octant for two identical points "+I);return k.octant(U,Z)}}}]),k}(),xf=function(){function k(){n(this,k)}return u(k,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(l){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(l){}},{key:"getData",value:function(){}}]),k}(),Dh=function(){function k(){n(this,k)}return u(k,[{key:"addIntersection",value:function(l,h){}},{key:"interfaces_",get:function(){return[xf]}}]),k}(),jo=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(l){return this._pts[l]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(l){return l===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(l),this.getCoordinate(l+1))}},{key:"setData",value:function(l){this._data=l}},{key:"safeOctant",value:function(l,h){return l.equals2D(h)?0:zh.octant(l,h)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];this.addIntersectionNode(l,h)}else if(arguments.length===4){var f=arguments[0],x=arguments[1],I=arguments[3],F=new Be(f.getIntersection(I));this.addIntersection(F,x)}}},{key:"toString",value:function(){return yu.toLineString(new ka(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(l,h){var f=h,x=f+1;if(x<this._pts.length){var I=this._pts[x];l.equals2D(I)&&(f=x)}return this._nodeList.add(l,f)}},{key:"addIntersections",value:function(l,h,f){for(var x=0;x<l.getIntersectionNum();x++)this.addIntersection(l,h,f,x)}},{key:"interfaces_",get:function(){return[Dh]}}],[{key:"constructor_",value:function(){this._nodeList=new Ia(this),this._pts=null,this._data=null;var l=arguments[0],h=arguments[1];this._pts=l,this._data=h}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var l=arguments[0],h=new st;return k.getNodedSubstrings(l,h),h}if(arguments.length===2)for(var f=arguments[0],x=arguments[1],I=f.iterator();I.hasNext();){var F=I.next();F.getNodeList().addSplitEdges(x)}}}]),k}(),ro=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof k){var l=arguments[0],h=jt.index(this.p0,this.p1,l.p0),f=jt.index(this.p0,this.p1,l.p1);return h>=0&&f>=0||h<=0&&f<=0?Math.max(h,f):0}if(arguments[0]instanceof Be){var x=arguments[0];return jt.index(this.p0,this.p1,x)}}},{key:"toGeometry",value:function(l){return l.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(l){if(!(l instanceof k))return!1;var h=l;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)}},{key:"intersection",value:function(l){var h=new Hs;return h.computeIntersection(this.p0,this.p1,l.p0,l.p1),h.hasIntersection()?h.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Be){var l=arguments[0];if(l.equals(this.p0)||l.equals(this.p1))return new Be(l);var h=this.projectionFactor(l),f=new Be;return f.x=this.p0.x+h*(this.p1.x-this.p0.x),f.y=this.p0.y+h*(this.p1.y-this.p0.y),f}if(arguments[0]instanceof k){var x=arguments[0],I=this.projectionFactor(x.p0),F=this.projectionFactor(x.p1);if(I>=1&&F>=1||I<=0&&F<=0)return null;var U=this.project(x.p0);I<0&&(U=this.p0),I>1&&(U=this.p1);var Z=this.project(x.p1);return F<0&&(Z=this.p0),F>1&&(Z=this.p1),new k(U,Z)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(l){return l===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(l){return Hr.pointToLinePerpendicular(l,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return k.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(l){if(l.equals(this.p0))return 0;if(l.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y,x=h*h+f*f;return x<=0?Je.NaN:((l.x-this.p0.x)*h+(l.y-this.p0.y)*f)/x}},{key:"closestPoints",value:function(l){var h=this.intersection(l);if(h!==null)return[h,h];var f=new Array(2).fill(null),x=Je.MAX_VALUE,I=null,F=this.closestPoint(l.p0);x=F.distance(l.p0),f[0]=F,f[1]=l.p0;var U=this.closestPoint(l.p1);(I=U.distance(l.p1))<x&&(x=I,f[0]=U,f[1]=l.p1);var Z=l.closestPoint(this.p0);(I=Z.distance(this.p0))<x&&(x=I,f[0]=this.p0,f[1]=Z);var le=l.closestPoint(this.p1);return(I=le.distance(this.p1))<x&&(x=I,f[0]=this.p1,f[1]=le),f}},{key:"closestPoint",value:function(l){var h=this.projectionFactor(l);return h>0&&h<1?this.project(l):this.p0.distance(l)<this.p1.distance(l)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(l){var h=l,f=this.p0.compareTo(h.p0);return f!==0?f:this.p1.compareTo(h.p1)}},{key:"reverse",value:function(){var l=this.p0;this.p0=this.p1,this.p1=l}},{key:"equalsTopo",value:function(l){return this.p0.equals(l.p0)&&this.p1.equals(l.p1)||this.p0.equals(l.p1)&&this.p1.equals(l.p0)}},{key:"lineIntersection",value:function(l){return Qt.intersection(this.p0,this.p1,l.p0,l.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(l,h){var f=this.p0.x+l*(this.p1.x-this.p0.x),x=this.p0.y+l*(this.p1.y-this.p0.y),I=this.p1.x-this.p0.x,F=this.p1.y-this.p0.y,U=Math.sqrt(I*I+F*F),Z=0,le=0;if(h!==0){if(U<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");Z=h*I/U,le=h*F/U}return new Be(f-le,x+Z)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var l=arguments[0];this.setCoordinates(l.p0,l.p1)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=f.x,this.p1.y=f.y}}},{key:"segmentFraction",value:function(l){var h=this.projectionFactor(l);return h<0?h=0:(h>1||Je.isNaN(h))&&(h=1),h}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(l){var h=this.p1.getY()-this.p0.getY(),f=this.p0.getX()-this.p1.getX(),x=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),I=h*h+f*f,F=h*h-f*f,U=l.getX(),Z=l.getY();return new Be((-F*U-2*h*f*Z-2*h*x)/I,(F*Z-2*h*f*U-2*f*x)/I)}},{key:"distance",value:function(){if(arguments[0]instanceof k){var l=arguments[0];return Hr.segmentToSegment(this.p0,this.p1,l.p0,l.p1)}if(arguments[0]instanceof Be){var h=arguments[0];return Hr.pointToSegment(h,this.p0,this.p1)}}},{key:"pointAlong",value:function(l){var h=new Be;return h.x=this.p0.x+l*(this.p1.x-this.p0.x),h.y=this.p0.y+l*(this.p1.y-this.p0.y),h}},{key:"hashCode",value:function(){var l=Je.doubleToLongBits(this.p0.x);l^=31*Je.doubleToLongBits(this.p0.y);var h=Math.trunc(l)^Math.trunc(l>>32),f=Je.doubleToLongBits(this.p1.x);return f^=31*Je.doubleToLongBits(this.p1.y),h^(Math.trunc(f)^Math.trunc(f>>32))}},{key:"interfaces_",get:function(){return[pe,Le]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)k.constructor_.call(this,new Be,new Be);else if(arguments.length===1){var l=arguments[0];k.constructor_.call(this,l.p0,l.p1)}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this.p0=h,this.p1=f}else if(arguments.length===4){var x=arguments[0],I=arguments[1],F=arguments[2],U=arguments[3];k.constructor_.call(this,new Be(x,I),new Be(F,U))}}},{key:"midPoint",value:function(l,h){return new Be((l.x+h.x)/2,(l.y+h.y)/2)}}]),k}(),wu=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"overlap",value:function(){if(arguments.length!==2&&arguments.length===4){var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3];l.getLineSegment(h,this._overlapSeg1),f.getLineSegment(x,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ro,this._overlapSeg2=new ro}}]),k}(),Oh=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getLineSegment",value:function(l,h){h.p0=this._pts[l],h.p1=this._pts[l+1]}},{key:"computeSelect",value:function(l,h,f,x){var I=this._pts[h],F=this._pts[f];if(f-h==1)return x.select(this,h),null;if(!l.intersects(I,F))return null;var U=Math.trunc((h+f)/2);h<U&&this.computeSelect(l,h,U,x),U<f&&this.computeSelect(l,U,f,x)}},{key:"getCoordinates",value:function(){for(var l=new Array(this._end-this._start+1).fill(null),h=0,f=this._start;f<=this._end;f++)l[h++]=this._pts[f];return l}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];this.computeOverlaps(this._start,this._end,l,l._start,l._end,h)}else if(arguments.length===6){var f=arguments[0],x=arguments[1],I=arguments[2],F=arguments[3],U=arguments[4],Z=arguments[5];if(x-f==1&&U-F==1)return Z.overlap(this,f,I,F),null;if(!this.overlaps(f,x,I,F,U))return null;var le=Math.trunc((f+x)/2),Ee=Math.trunc((F+U)/2);f<le&&(F<Ee&&this.computeOverlaps(f,le,I,F,Ee,Z),Ee<U&&this.computeOverlaps(f,le,I,Ee,U,Z)),le<x&&(F<Ee&&this.computeOverlaps(le,x,I,F,Ee,Z),Ee<U&&this.computeOverlaps(le,x,I,Ee,U,Z))}}},{key:"setId",value:function(l){this._id=l}},{key:"select",value:function(l,h){this.computeSelect(l,this._start,this._end,h)}},{key:"getEnvelope",value:function(){if(this._env===null){var l=this._pts[this._start],h=this._pts[this._end];this._env=new mn(l,h)}return this._env}},{key:"overlaps",value:function(l,h,f,x,I){return mn.intersects(this._pts[l],this._pts[h],f._pts[x],f._pts[I])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3];this._pts=l,this._start=h,this._end=f,this._context=x}}]),k}(),bf=function(){function k(){n(this,k)}return u(k,null,[{key:"findChainEnd",value:function(l,h){for(var f=h;f<l.length-1&&l[f].equals2D(l[f+1]);)f++;if(f>=l.length-1)return l.length-1;for(var x=ci.quadrant(l[f],l[f+1]),I=h+1;I<l.length&&!(!l[I-1].equals2D(l[I])&&ci.quadrant(l[I-1],l[I])!==x);)I++;return I-1}},{key:"getChains",value:function(){if(arguments.length===1){var l=arguments[0];return k.getChains(l,null)}if(arguments.length===2){var h=arguments[0],f=arguments[1],x=new st,I=0;do{var F=k.findChainEnd(h,I),U=new Oh(h,I,F,f);x.add(U),I=F}while(I<h.length-1);return x}}}]),k}(),ku=function(){function k(){n(this,k)}return u(k,[{key:"computeNodes",value:function(l){}},{key:"getNodedSubstrings",value:function(){}}]),k}(),Nc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"setSegmentIntersector",value:function(l){this._segInt=l}},{key:"interfaces_",get:function(){return[ku]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var l=arguments[0];this.setSegmentIntersector(l)}}}]),k}(),Su=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return jo.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(f){for(var x=bf.getChains(f.getCoordinates(),f).iterator();x.hasNext();){var I=x.next();I.setId(this._idCounter++),this._index.insert(I.getEnvelope(),I),this._monoChains.add(I)}}},{key:"computeNodes",value:function(f){this._nodedSegStrings=f;for(var x=f.iterator();x.hasNext();)this.add(x.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var f=new Eu(this._segInt),x=this._monoChains.iterator();x.hasNext();)for(var I=x.next(),F=this._index.query(I.getEnvelope()).iterator();F.hasNext();){var U=F.next();if(U.getId()>I.getId()&&(I.computeOverlaps(U,f),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new st,this._index=new vo,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0&&arguments.length===1){var f=arguments[0];Nc.constructor_.call(this,f)}}}]),h}(Nc),Eu=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"overlap",value:function(){if(arguments.length!==4)return H(y(h.prototype),"overlap",this).apply(this,arguments);var f=arguments[0],x=arguments[1],I=arguments[2],F=arguments[3],U=f.getContext(),Z=I.getContext();this._si.processIntersections(U,x,Z,F)}}],[{key:"constructor_",value:function(){this._si=null;var f=arguments[0];this._si=f}}]),h}(wu);Su.SegmentOverlapAction=Eu;var _o=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"isDeletable",value:function(l,h,f,x){var I=this._inputLine[l],F=this._inputLine[h],U=this._inputLine[f];return!!this.isConcave(I,F,U)&&!!this.isShallow(I,F,U,x)&&this.isShallowSampled(I,F,l,f,x)}},{key:"deleteShallowConcavities",value:function(){for(var l=1,h=this.findNextNonDeletedIndex(l),f=this.findNextNonDeletedIndex(h),x=!1;f<this._inputLine.length;){var I=!1;this.isDeletable(l,h,f,this._distanceTol)&&(this._isDeleted[h]=k.DELETE,I=!0,x=!0),l=I?f:h,h=this.findNextNonDeletedIndex(l),f=this.findNextNonDeletedIndex(h)}return x}},{key:"isShallowConcavity",value:function(l,h,f,x){return jt.index(l,h,f)===this._angleOrientation&&Hr.pointToSegment(h,l,f)<x}},{key:"isShallowSampled",value:function(l,h,f,x,I){var F=Math.trunc((x-f)/k.NUM_PTS_TO_CHECK);F<=0&&(F=1);for(var U=f;U<x;U+=F)if(!this.isShallow(l,h,this._inputLine[U],I))return!1;return!0}},{key:"isConcave",value:function(l,h,f){var x=jt.index(l,h,f)===this._angleOrientation;return x}},{key:"simplify",value:function(l){this._distanceTol=Math.abs(l),l<0&&(this._angleOrientation=jt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(l){for(var h=l+1;h<this._inputLine.length&&this._isDeleted[h]===k.DELETE;)h++;return h}},{key:"isShallow",value:function(l,h,f,x){return Hr.pointToSegment(h,l,f)<x}},{key:"collapseLine",value:function(){for(var l=new Ir,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==k.DELETE&&l.add(this._inputLine[h]);return l.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=jt.COUNTERCLOCKWISE;var l=arguments[0];this._inputLine=l}},{key:"simplify",value:function(l,h){return new k(l).simplify(h)}}]),k}();_o.INIT=0,_o.DELETE=1,_o.KEEP=1,_o.NUM_PTS_TO_CHECK=10;var jl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getCoordinates",value:function(){return this._ptList.toArray(k.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(l){this._precisionModel=l}},{key:"addPt",value:function(l){var h=new Be(l);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(l,h){if(h)for(var f=0;f<l.length;f++)this.addPt(l[f]);else for(var x=l.length-1;x>=0;x--)this.addPt(l[x])}},{key:"isRedundant",value:function(l){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return l.distance(h)<this._minimimVertexDistance}},{key:"toString",value:function(){return new mo().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var l=new Be(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(l.equals(h))return null;this._ptList.add(l)}},{key:"setMinimumVertexDistance",value:function(l){this._minimimVertexDistance=l}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new st}}]),k}();jl.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Nr=function(){function k(){n(this,k)}return u(k,null,[{key:"toDegrees",value:function(l){return 180*l/Math.PI}},{key:"normalize",value:function(l){for(;l>Math.PI;)l-=k.PI_TIMES_2;for(;l<=-Math.PI;)l+=k.PI_TIMES_2;return l}},{key:"angle",value:function(){if(arguments.length===1){var l=arguments[0];return Math.atan2(l.y,l.x)}if(arguments.length===2){var h=arguments[0],f=arguments[1],x=f.x-h.x,I=f.y-h.y;return Math.atan2(I,x)}}},{key:"isAcute",value:function(l,h,f){var x=l.x-h.x,I=l.y-h.y;return x*(f.x-h.x)+I*(f.y-h.y)>0}},{key:"isObtuse",value:function(l,h,f){var x=l.x-h.x,I=l.y-h.y;return x*(f.x-h.x)+I*(f.y-h.y)<0}},{key:"interiorAngle",value:function(l,h,f){var x=k.angle(h,l),I=k.angle(h,f);return Math.abs(I-x)}},{key:"normalizePositive",value:function(l){if(l<0){for(;l<0;)l+=k.PI_TIMES_2;l>=k.PI_TIMES_2&&(l=0)}else{for(;l>=k.PI_TIMES_2;)l-=k.PI_TIMES_2;l<0&&(l=0)}return l}},{key:"angleBetween",value:function(l,h,f){var x=k.angle(h,l),I=k.angle(h,f);return k.diff(x,I)}},{key:"diff",value:function(l,h){var f=null;return(f=l<h?h-l:l-h)>Math.PI&&(f=2*Math.PI-f),f}},{key:"toRadians",value:function(l){return l*Math.PI/180}},{key:"getTurn",value:function(l,h){var f=Math.sin(h-l);return f>0?k.COUNTERCLOCKWISE:f<0?k.CLOCKWISE:k.NONE}},{key:"angleBetweenOriented",value:function(l,h,f){var x=k.angle(h,l),I=k.angle(h,f)-x;return I<=-Math.PI?I+k.PI_TIMES_2:I>Math.PI?I-k.PI_TIMES_2:I}}]),k}();Nr.PI_TIMES_2=2*Math.PI,Nr.PI_OVER_2=Math.PI/2,Nr.PI_OVER_4=Math.PI/4,Nr.COUNTERCLOCKWISE=jt.COUNTERCLOCKWISE,Nr.CLOCKWISE=jt.CLOCKWISE,Nr.NONE=jt.COLLINEAR;var Ta=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"addNextSegment",value:function(l,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=l,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var f=jt.index(this._s0,this._s1,this._s2),x=f===jt.CLOCKWISE&&this._side===Xe.LEFT||f===jt.COUNTERCLOCKWISE&&this._side===Xe.RIGHT;f===0?this.addCollinear(h):x?this.addOutsideTurn(f,h):this.addInsideTurn(f,h)}},{key:"addLineEndCap",value:function(l,h){var f=new ro(l,h),x=new ro;this.computeOffsetSegment(f,Xe.LEFT,this._distance,x);var I=new ro;this.computeOffsetSegment(f,Xe.RIGHT,this._distance,I);var F=h.x-l.x,U=h.y-l.y,Z=Math.atan2(U,F);switch(this._bufParams.getEndCapStyle()){case Q.CAP_ROUND:this._segList.addPt(x.p1),this.addDirectedFillet(h,Z+Math.PI/2,Z-Math.PI/2,jt.CLOCKWISE,this._distance),this._segList.addPt(I.p1);break;case Q.CAP_FLAT:this._segList.addPt(x.p1),this._segList.addPt(I.p1);break;case Q.CAP_SQUARE:var le=new Be;le.x=Math.abs(this._distance)*Math.cos(Z),le.y=Math.abs(this._distance)*Math.sin(Z);var Ee=new Be(x.p1.x+le.x,x.p1.y+le.y),Re=new Be(I.p1.x+le.x,I.p1.y+le.y);this._segList.addPt(Ee),this._segList.addPt(Re)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(l,h,f,x){var I=Qt.intersection(h.p0,h.p1,f.p0,f.p1);if(I!==null&&(x<=0?1:I.distance(l)/Math.abs(x))<=this._bufParams.getMitreLimit())return this._segList.addPt(I),null;this.addLimitedMitreJoin(h,f,x,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(l,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*k.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Q.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Q.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,l,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(l){this._segList.addPt(new Be(l.x+this._distance,l.y+this._distance)),this._segList.addPt(new Be(l.x+this._distance,l.y-this._distance)),this._segList.addPt(new Be(l.x-this._distance,l.y-this._distance)),this._segList.addPt(new Be(l.x-this._distance,l.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(l,h){this._segList.addPts(l,h)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(l,h,f,x,I){var F=h.x-l.x,U=h.y-l.y,Z=Math.atan2(U,F),le=f.x-l.x,Ee=f.y-l.y,Re=Math.atan2(Ee,le);x===jt.CLOCKWISE?Z<=Re&&(Z+=2*Math.PI):Z>=Re&&(Z-=2*Math.PI),this._segList.addPt(h),this.addDirectedFillet(l,Z,Re,x,I),this._segList.addPt(f)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(l,h,f){this._s1=l,this._s2=h,this._side=f,this._seg1.setCoordinates(l,h),this.computeOffsetSegment(this._seg1,f,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(l,h,f,x){var I=this._seg0.p1,F=Nr.angle(I,this._seg0.p0),U=Nr.angleBetweenOriented(this._seg0.p0,I,this._seg1.p1)/2,Z=Nr.normalize(F+U),le=Nr.normalize(Z+Math.PI),Ee=x*f,Re=f-Ee*Math.abs(Math.sin(U)),Ye=I.x+Ee*Math.cos(le),pt=I.y+Ee*Math.sin(le),ft=new Be(Ye,pt),qt=new ro(I,ft),Yt=qt.pointAlongOffset(1,Re),ln=qt.pointAlongOffset(1,-Re);this._side===Xe.LEFT?(this._segList.addPt(Yt),this._segList.addPt(ln)):(this._segList.addPt(ln),this._segList.addPt(Yt))}},{key:"addDirectedFillet",value:function(l,h,f,x,I){var F=x===jt.CLOCKWISE?-1:1,U=Math.abs(h-f),Z=Math.trunc(U/this._filletAngleQuantum+.5);if(Z<1)return null;for(var le=U/Z,Ee=new Be,Re=0;Re<Z;Re++){var Ye=h+F*Re*le;Ee.x=l.x+I*Math.cos(Ye),Ee.y=l.y+I*Math.sin(Ye),this._segList.addPt(Ee)}}},{key:"computeOffsetSegment",value:function(l,h,f,x){var I=h===Xe.LEFT?1:-1,F=l.p1.x-l.p0.x,U=l.p1.y-l.p0.y,Z=Math.sqrt(F*F+U*U),le=I*f*F/Z,Ee=I*f*U/Z;x.p0.x=l.p0.x-Ee,x.p0.y=l.p0.y+le,x.p1.x=l.p1.x-Ee,x.p1.y=l.p1.y+le}},{key:"addInsideTurn",value:function(l,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*k.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var f=new Be((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(f);var x=new Be((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(x)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(l){var h=new Be(l.x+this._distance,l.y);this._segList.addPt(h),this.addDirectedFillet(l,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(l,h){this._segList.addPt(l.p1),this._segList.addPt(h.p0)}},{key:"init",value:function(l){this._distance=l,this._maxCurveSegmentError=l*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new jl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(l*k.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(l){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Q.JOIN_BEVEL||this._bufParams.getJoinStyle()===Q.JOIN_MITRE?(l&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,jt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ro,this._seg1=new ro,this._offset0=new ro,this._offset1=new ro,this._side=0,this._hasNarrowConcaveAngle=!1;var l=arguments[0],h=arguments[1],f=arguments[2];this._precisionModel=l,this._bufParams=h,this._li=new Hs,this._filletAngleQuantum=Math.PI/2/h.getQuadrantSegments(),h.getQuadrantSegments()>=8&&h.getJoinStyle()===Q.JOIN_ROUND&&(this._closingSegLengthFactor=k.MAX_CLOSING_SEG_LEN_FACTOR),this.init(f)}}]),k}();Ta.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ta.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ta.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ta.MAX_CLOSING_SEG_LEN_FACTOR=80;var zc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getOffsetCurve",value:function(l,h){if(this._distance=h,h===0)return null;var f=h<0,x=Math.abs(h),I=this.getSegGen(x);l.length<=1?this.computePointCurve(l[0],I):this.computeOffsetCurve(l,f,I);var F=I.getCoordinates();return f&&wn.reverse(F),F}},{key:"computeSingleSidedBufferCurve",value:function(l,h,f){var x=this.simplifyTolerance(this._distance);if(h){f.addSegments(l,!0);var I=_o.simplify(l,-x),F=I.length-1;f.initSideSegments(I[F],I[F-1],Xe.LEFT),f.addFirstSegment();for(var U=F-2;U>=0;U--)f.addNextSegment(I[U],!0)}else{f.addSegments(l,!1);var Z=_o.simplify(l,x),le=Z.length-1;f.initSideSegments(Z[0],Z[1],Xe.LEFT),f.addFirstSegment();for(var Ee=2;Ee<=le;Ee++)f.addNextSegment(Z[Ee],!0)}f.addLastSegment(),f.closeRing()}},{key:"computeRingBufferCurve",value:function(l,h,f){var x=this.simplifyTolerance(this._distance);h===Xe.RIGHT&&(x=-x);var I=_o.simplify(l,x),F=I.length-1;f.initSideSegments(I[F-1],I[0],h);for(var U=1;U<=F;U++){var Z=U!==1;f.addNextSegment(I[U],Z)}f.closeRing()}},{key:"computeLineBufferCurve",value:function(l,h){var f=this.simplifyTolerance(this._distance),x=_o.simplify(l,f),I=x.length-1;h.initSideSegments(x[0],x[1],Xe.LEFT);for(var F=2;F<=I;F++)h.addNextSegment(x[F],!0);h.addLastSegment(),h.addLineEndCap(x[I-1],x[I]);var U=_o.simplify(l,-f),Z=U.length-1;h.initSideSegments(U[Z],U[Z-1],Xe.LEFT);for(var le=Z-2;le>=0;le--)h.addNextSegment(U[le],!0);h.addLastSegment(),h.addLineEndCap(U[1],U[0]),h.closeRing()}},{key:"computePointCurve",value:function(l,h){switch(this._bufParams.getEndCapStyle()){case Q.CAP_ROUND:h.createCircle(l);break;case Q.CAP_SQUARE:h.createSquare(l)}}},{key:"getLineCurve",value:function(l,h){if(this._distance=h,this.isLineOffsetEmpty(h))return null;var f=Math.abs(h),x=this.getSegGen(f);if(l.length<=1)this.computePointCurve(l[0],x);else if(this._bufParams.isSingleSided()){var I=h<0;this.computeSingleSidedBufferCurve(l,I,x)}else this.computeLineBufferCurve(l,x);return x.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(l){return l*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(l,h,f){if(this._distance=f,l.length<=2)return this.getLineCurve(l,f);if(f===0)return k.copyCoordinates(l);var x=this.getSegGen(f);return this.computeRingBufferCurve(l,h,x),x.getCoordinates()}},{key:"computeOffsetCurve",value:function(l,h,f){var x=this.simplifyTolerance(this._distance);if(h){var I=_o.simplify(l,-x),F=I.length-1;f.initSideSegments(I[F],I[F-1],Xe.LEFT),f.addFirstSegment();for(var U=F-2;U>=0;U--)f.addNextSegment(I[U],!0)}else{var Z=_o.simplify(l,x),le=Z.length-1;f.initSideSegments(Z[0],Z[1],Xe.LEFT),f.addFirstSegment();for(var Ee=2;Ee<=le;Ee++)f.addNextSegment(Z[Ee],!0)}f.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(l){return l===0||l<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(l){return new Ta(this._precisionModel,this._bufParams,l)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var l=arguments[0],h=arguments[1];this._precisionModel=l,this._bufParams=h}},{key:"copyCoordinates",value:function(l){for(var h=new Array(l.length).fill(null),f=0;f<h.length;f++)h[f]=new Be(l[f]);return h}}]),k}(),Iu=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var l=arguments[0],h=new st,f=this._subgraphs.iterator();f.hasNext();){var x=f.next(),I=x.getEnvelope();l.y<I.getMinY()||l.y>I.getMaxY()||this.findStabbedSegments(l,x.getDirectedEdges(),h)}return h}if(arguments.length===3){if(Wt(arguments[2],kr)&&arguments[0]instanceof Be&&arguments[1]instanceof Ul)for(var F=arguments[0],U=arguments[1],Z=arguments[2],le=U.getEdge().getCoordinates(),Ee=0;Ee<le.length-1;Ee++){this._seg.p0=le[Ee],this._seg.p1=le[Ee+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();var Re=Math.max(this._seg.p0.x,this._seg.p1.x);if(!(Re<F.x)&&!(this._seg.isHorizontal()||F.y<this._seg.p0.y||F.y>this._seg.p1.y||jt.index(this._seg.p0,this._seg.p1,F)===jt.RIGHT)){var Ye=U.getDepth(Xe.LEFT);this._seg.p0.equals(le[Ee])||(Ye=U.getDepth(Xe.RIGHT));var pt=new Vl(this._seg,Ye);Z.add(pt)}}else if(Wt(arguments[2],kr)&&arguments[0]instanceof Be&&Wt(arguments[1],kr))for(var ft=arguments[0],qt=arguments[1],Yt=arguments[2],ln=qt.iterator();ln.hasNext();){var Cn=ln.next();Cn.isForward()&&this.findStabbedSegments(ft,Cn,Yt)}}}},{key:"getDepth",value:function(l){var h=this.findStabbedSegments(l);return h.size()===0?0:Ja.min(h)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ro;var l=arguments[0];this._subgraphs=l}}]),k}(),Vl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"compareTo",value:function(l){var h=l;if(this._upwardSeg.minX()>=h._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=h._upwardSeg.minX())return-1;var f=this._upwardSeg.orientationIndex(h._upwardSeg);return f!==0||(f=-1*h._upwardSeg.orientationIndex(this._upwardSeg))!==0?f:this._upwardSeg.compareTo(h._upwardSeg)}},{key:"compareX",value:function(l,h){var f=l.p0.compareTo(h.p0);return f!==0?f:l.p1.compareTo(h.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var l=arguments[0],h=arguments[1];this._upwardSeg=new ro(l),this._leftDepth=h}}]),k}();Iu.DepthSegment=Vl;var Tu=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,null,[{key:"constructor_",value:function(){ie.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),h}(ie),xs=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getY",value:function(){var l=this.y/this.w;if(Je.isNaN(l)||Je.isInfinite(l))throw new Tu;return l}},{key:"getX",value:function(){var l=this.x/this.w;if(Je.isNaN(l)||Je.isInfinite(l))throw new Tu;return l}},{key:"getCoordinate",value:function(){var l=new Be;return l.x=this.getX(),l.y=this.getY(),l}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var l=arguments[0];this.x=l.x,this.y=l.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var h=arguments[0],f=arguments[1];this.x=h,this.y=f,this.w=1}else if(arguments[0]instanceof k&&arguments[1]instanceof k){var x=arguments[0],I=arguments[1];this.x=x.y*I.w-I.y*x.w,this.y=I.x*x.w-x.x*I.w,this.w=x.x*I.y-I.x*x.y}else if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var F=arguments[0],U=arguments[1];this.x=F.y-U.y,this.y=U.x-F.x,this.w=F.x*U.y-U.x*F.y}}else if(arguments.length===3){var Z=arguments[0],le=arguments[1],Ee=arguments[2];this.x=Z,this.y=le,this.w=Ee}else if(arguments.length===4){var Re=arguments[0],Ye=arguments[1],pt=arguments[2],ft=arguments[3],qt=Re.y-Ye.y,Yt=Ye.x-Re.x,ln=Re.x*Ye.y-Ye.x*Re.y,Cn=pt.y-ft.y,Yn=ft.x-pt.x,zn=pt.x*ft.y-ft.x*pt.y;this.x=Yt*zn-Yn*ln,this.y=Cn*ln-qt*zn,this.w=qt*Yn-Cn*Yt}}}]),k}(),Dc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"area",value:function(){return k.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return k.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(l){if(l===null)throw new he("Supplied point is null.");return k.interpolateZ(l,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return k.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return k.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return k.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return k.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return k.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return k.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var l=arguments[0],h=arguments[1],f=arguments[2];this.p0=l,this.p1=h,this.p2=f}},{key:"area",value:function(l,h,f){return Math.abs(((f.x-l.x)*(h.y-l.y)-(h.x-l.x)*(f.y-l.y))/2)}},{key:"signedArea",value:function(l,h,f){return((f.x-l.x)*(h.y-l.y)-(h.x-l.x)*(f.y-l.y))/2}},{key:"det",value:function(l,h,f,x){return l*x-h*f}},{key:"interpolateZ",value:function(l,h,f,x){var I=h.x,F=h.y,U=f.x-I,Z=x.x-I,le=f.y-F,Ee=x.y-F,Re=U*Ee-Z*le,Ye=l.x-I,pt=l.y-F,ft=(Ee*Ye-Z*pt)/Re,qt=(-le*Ye+U*pt)/Re;return h.getZ()+ft*(f.getZ()-h.getZ())+qt*(x.getZ()-h.getZ())}},{key:"longestSideLength",value:function(l,h,f){var x=l.distance(h),I=h.distance(f),F=f.distance(l),U=x;return I>U&&(U=I),F>U&&(U=F),U}},{key:"circumcentreDD",value:function(l,h,f){var x=He.valueOf(l.x).subtract(f.x),I=He.valueOf(l.y).subtract(f.y),F=He.valueOf(h.x).subtract(f.x),U=He.valueOf(h.y).subtract(f.y),Z=He.determinant(x,I,F,U).multiply(2),le=x.sqr().add(I.sqr()),Ee=F.sqr().add(U.sqr()),Re=He.determinant(I,le,U,Ee),Ye=He.determinant(x,le,F,Ee),pt=He.valueOf(f.x).subtract(Re.divide(Z)).doubleValue(),ft=He.valueOf(f.y).add(Ye.divide(Z)).doubleValue();return new Be(pt,ft)}},{key:"isAcute",value:function(l,h,f){return!!Nr.isAcute(l,h,f)&&!!Nr.isAcute(h,f,l)&&!!Nr.isAcute(f,l,h)}},{key:"circumcentre",value:function(l,h,f){var x=f.x,I=f.y,F=l.x-x,U=l.y-I,Z=h.x-x,le=h.y-I,Ee=2*k.det(F,U,Z,le),Re=k.det(U,F*F+U*U,le,Z*Z+le*le),Ye=k.det(F,F*F+U*U,Z,Z*Z+le*le);return new Be(x-Re/Ee,I+Ye/Ee)}},{key:"perpendicularBisector",value:function(l,h){var f=h.x-l.x,x=h.y-l.y,I=new xs(l.x+f/2,l.y+x/2,1),F=new xs(l.x-x+f/2,l.y+f+x/2,1);return new xs(I,F)}},{key:"angleBisector",value:function(l,h,f){var x=h.distance(l),I=x/(x+h.distance(f)),F=f.x-l.x,U=f.y-l.y;return new Be(l.x+I*F,l.y+I*U)}},{key:"area3D",value:function(l,h,f){var x=h.x-l.x,I=h.y-l.y,F=h.getZ()-l.getZ(),U=f.x-l.x,Z=f.y-l.y,le=f.getZ()-l.getZ(),Ee=I*le-F*Z,Re=F*U-x*le,Ye=x*Z-I*U,pt=Ee*Ee+Re*Re+Ye*Ye,ft=Math.sqrt(pt)/2;return ft}},{key:"centroid",value:function(l,h,f){var x=(l.x+h.x+f.x)/3,I=(l.y+h.y+f.y)/3;return new Be(x,I)}},{key:"inCentre",value:function(l,h,f){var x=h.distance(f),I=l.distance(f),F=l.distance(h),U=x+I+F,Z=(x*l.x+I*h.x+F*f.x)/U,le=(x*l.y+I*h.y+F*f.y)/U;return new Be(Z,le)}}]),k}(),wf=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"addRingSide",value:function(l,h,f,x,I){if(h===0&&l.length<fr.MINIMUM_VALID_SIZE)return null;var F=x,U=I;l.length>=fr.MINIMUM_VALID_SIZE&&jt.isCCW(l)&&(F=I,U=x,f=Xe.opposite(f));var Z=this._curveBuilder.getRingCurve(l,f,h);this.addCurve(Z,F,U)}},{key:"addRingBothSides",value:function(l,h){this.addRingSide(l,h,Xe.LEFT,xe.EXTERIOR,xe.INTERIOR),this.addRingSide(l,h,Xe.RIGHT,xe.INTERIOR,xe.EXTERIOR)}},{key:"addPoint",value:function(l){if(this._distance<=0)return null;var h=l.getCoordinates(),f=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(f,xe.EXTERIOR,xe.INTERIOR)}},{key:"addPolygon",value:function(l){var h=this._distance,f=Xe.LEFT;this._distance<0&&(h=-this._distance,f=Xe.RIGHT);var x=l.getExteriorRing(),I=wn.removeRepeatedPoints(x.getCoordinates());if(this._distance<0&&this.isErodedCompletely(x,this._distance)||this._distance<=0&&I.length<3)return null;this.addRingSide(I,h,f,xe.EXTERIOR,xe.INTERIOR);for(var F=0;F<l.getNumInteriorRing();F++){var U=l.getInteriorRingN(F),Z=wn.removeRepeatedPoints(U.getCoordinates());this._distance>0&&this.isErodedCompletely(U,-this._distance)||this.addRingSide(Z,h,Xe.opposite(f),xe.INTERIOR,xe.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(l,h){var f=new Dc(l[0],l[1],l[2]),x=f.inCentre();return Hr.pointToSegment(x,f.p0,f.p1)<Math.abs(h)}},{key:"addLineString",value:function(l){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var h=wn.removeRepeatedPoints(l.getCoordinates());if(wn.isRing(h)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(h,this._distance);else{var f=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(f,xe.EXTERIOR,xe.INTERIOR)}}},{key:"addCurve",value:function(l,h,f){if(l===null||l.length<2)return null;var x=new jo(l,new sr(0,xe.BOUNDARY,h,f));this._curveList.add(x)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(l){if(l.isEmpty())return null;if(l instanceof Lt)this.addPolygon(l);else if(l instanceof Ae)this.addLineString(l);else if(l instanceof Oe)this.addPoint(l);else if(l instanceof fn)this.addCollection(l);else if(l instanceof Vs)this.addCollection(l);else if(l instanceof Ci)this.addCollection(l);else{if(!(l instanceof an))throw new Jt(l.getGeometryType());this.addCollection(l)}}},{key:"isErodedCompletely",value:function(l,h){var f=l.getCoordinates();if(f.length<4)return h<0;if(f.length===4)return this.isTriangleErodedCompletely(f,h);var x=l.getEnvelopeInternal(),I=Math.min(x.getHeight(),x.getWidth());return h<0&&2*Math.abs(h)>I}},{key:"addCollection",value:function(l){for(var h=0;h<l.getNumGeometries();h++){var f=l.getGeometryN(h);this.add(f)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new st;var l=arguments[0],h=arguments[1],f=arguments[2];this._inputGeom=l,this._distance=h,this._curveBuilder=f}}]),k}(),Mr=function(){function k(){n(this,k)}return u(k,[{key:"locate",value:function(l){}}]),k}(),kf=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,k.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new gn;var l=this._parent.getGeometryN(this._index++);return l instanceof an?(this._subcollectionIterator=new k(l),this._subcollectionIterator.next()):l}},{key:"remove",value:function(){throw new Jt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Nh]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var l=arguments[0];this._parent=l,this._atStart=!0,this._index=0,this._max=l.getNumGeometries()}},{key:"isAtomic",value:function(l){return!(l instanceof an)}}]),k}(),pn=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"locate",value:function(l){return k.locate(l,this._geom)}},{key:"interfaces_",get:function(){return[Mr]}}],[{key:"constructor_",value:function(){this._geom=null;var l=arguments[0];this._geom=l}},{key:"locatePointInPolygon",value:function(l,h){if(h.isEmpty())return xe.EXTERIOR;var f=h.getExteriorRing(),x=k.locatePointInRing(l,f);if(x!==xe.INTERIOR)return x;for(var I=0;I<h.getNumInteriorRing();I++){var F=h.getInteriorRingN(I),U=k.locatePointInRing(l,F);if(U===xe.BOUNDARY)return xe.BOUNDARY;if(U===xe.INTERIOR)return xe.EXTERIOR}return xe.INTERIOR}},{key:"locatePointInRing",value:function(l,h){return h.getEnvelopeInternal().intersects(l)?_s.locateInRing(l,h.getCoordinates()):xe.EXTERIOR}},{key:"containsPointInPolygon",value:function(l,h){return xe.EXTERIOR!==k.locatePointInPolygon(l,h)}},{key:"locateInGeometry",value:function(l,h){if(h instanceof Lt)return k.locatePointInPolygon(l,h);if(h instanceof an)for(var f=new kf(h);f.hasNext();){var x=f.next();if(x!==h){var I=k.locateInGeometry(l,x);if(I!==xe.EXTERIOR)return I}}return xe.EXTERIOR}},{key:"isContained",value:function(l,h){return xe.EXTERIOR!==k.locate(l,h)}},{key:"locate",value:function(l,h){return h.isEmpty()?xe.EXTERIOR:h.getEnvelopeInternal().intersects(l)?k.locateInGeometry(l,h):xe.EXTERIOR}}]),k}(),Cu=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getNextCW",value:function(l){this.getEdges();var h=this._edgeList.indexOf(l),f=h-1;return h===0&&(f=this._edgeList.size()-1),this._edgeList.get(f)}},{key:"propagateSideLabels",value:function(l){for(var h=xe.NONE,f=this.iterator();f.hasNext();){var x=f.next().getLabel();x.isArea(l)&&x.getLocation(l,Xe.LEFT)!==xe.NONE&&(h=x.getLocation(l,Xe.LEFT))}if(h===xe.NONE)return null;for(var I=h,F=this.iterator();F.hasNext();){var U=F.next(),Z=U.getLabel();if(Z.getLocation(l,Xe.ON)===xe.NONE&&Z.setLocation(l,Xe.ON,I),Z.isArea(l)){var le=Z.getLocation(l,Xe.LEFT),Ee=Z.getLocation(l,Xe.RIGHT);if(Ee!==xe.NONE){if(Ee!==I)throw new lt("side location conflict",U.getCoordinate());le===xe.NONE&&Ct.shouldNeverReachHere("found single null side (at "+U.getCoordinate()+")"),I=le}else Ct.isTrue(Z.getLocation(l,Xe.LEFT)===xe.NONE,"found single null side"),Z.setLocation(l,Xe.RIGHT,I),Z.setLocation(l,Xe.LEFT,I)}}}},{key:"getCoordinate",value:function(){var l=this.iterator();return l.hasNext()?l.next().getCoordinate():null}},{key:"print",value:function(l){Sr.out.println("EdgeEndStar:   "+this.getCoordinate());for(var h=this.iterator();h.hasNext();)h.next().print(l)}},{key:"isAreaLabelsConsistent",value:function(l){return this.computeEdgeEndLabels(l.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(l){var h=this.getEdges();if(h.size()<=0)return!0;var f=h.size()-1,x=h.get(f).getLabel().getLocation(l,Xe.LEFT);Ct.isTrue(x!==xe.NONE,"Found unlabelled area edge");for(var I=x,F=this.iterator();F.hasNext();){var U=F.next().getLabel();Ct.isTrue(U.isArea(l),"Found non-area edge");var Z=U.getLocation(l,Xe.LEFT),le=U.getLocation(l,Xe.RIGHT);if(Z===le||le!==I)return!1;I=Z}return!0}},{key:"findIndex",value:function(l){this.iterator();for(var h=0;h<this._edgeList.size();h++)if(this._edgeList.get(h)===l)return h;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new st(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(l,h,f){return this._ptInAreaLocation[l]===xe.NONE&&(this._ptInAreaLocation[l]=pn.locate(h,f[l].getGeometry())),this._ptInAreaLocation[l]}},{key:"toString",value:function(){var l=new dr;l.append("EdgeEndStar:   "+this.getCoordinate()),l.append(`
`);for(var h=this.iterator();h.hasNext();){var f=h.next();l.append(f),l.append(`
`)}return l.toString()}},{key:"computeEdgeEndLabels",value:function(l){for(var h=this.iterator();h.hasNext();)h.next().computeLabel(l)}},{key:"computeLabelling",value:function(l){this.computeEdgeEndLabels(l[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var h=[!1,!1],f=this.iterator();f.hasNext();)for(var x=f.next().getLabel(),I=0;I<2;I++)x.isLine(I)&&x.getLocation(I)===xe.BOUNDARY&&(h[I]=!0);for(var F=this.iterator();F.hasNext();)for(var U=F.next(),Z=U.getLabel(),le=0;le<2;le++)if(Z.isAnyNull(le)){var Ee=xe.NONE;if(h[le])Ee=xe.EXTERIOR;else{var Re=U.getCoordinate();Ee=this.getLocation(le,Re,l)}Z.setAllLocationsIfNull(le,Ee)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(l,h){this._edgeMap.put(l,h),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ya,this._edgeList=null,this._ptInAreaLocation=[xe.NONE,xe.NONE]}}]),k}(),Xn=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var f=null,x=null,I=this._SCANNING_FOR_INCOMING,F=0;F<this._resultAreaEdgeList.size();F++){var U=this._resultAreaEdgeList.get(F),Z=U.getSym();if(U.getLabel().isArea())switch(f===null&&U.isInResult()&&(f=U),I){case this._SCANNING_FOR_INCOMING:if(!Z.isInResult())continue;x=Z,I=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!U.isInResult())continue;x.setNext(U),I=this._SCANNING_FOR_INCOMING}}if(I===this._LINKING_TO_OUTGOING){if(f===null)throw new lt("no outgoing dirEdge found",this.getCoordinate());Ct.isTrue(f.isInResult(),"unable to link last incoming dirEdge"),x.setNext(f)}}},{key:"insert",value:function(f){var x=f;this.insertEdgeEnd(x,x)}},{key:"getRightmostEdge",value:function(){var f=this.getEdges(),x=f.size();if(x<1)return null;var I=f.get(0);if(x===1)return I;var F=f.get(x-1),U=I.getQuadrant(),Z=F.getQuadrant();return ci.isNorthern(U)&&ci.isNorthern(Z)?I:ci.isNorthern(U)||ci.isNorthern(Z)?I.getDy()!==0?I:F.getDy()!==0?F:(Ct.shouldNeverReachHere("found two horizontal edges incident on node"),null):F}},{key:"print",value:function(f){Sr.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var x=this.iterator();x.hasNext();){var I=x.next();f.print("out "),I.print(f),f.println(),f.print("in "),I.getSym().print(f),f.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new st;for(var f=this.iterator();f.hasNext();){var x=f.next();(x.isInResult()||x.getSym().isInResult())&&this._resultAreaEdgeList.add(x)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(f){for(var x=this.iterator();x.hasNext();){var I=x.next().getLabel();I.setAllLocationsIfNull(0,f.getLocation(0)),I.setAllLocationsIfNull(1,f.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var f=null,x=null,I=this._edgeList.size()-1;I>=0;I--){var F=this._edgeList.get(I),U=F.getSym();x===null&&(x=U),f!==null&&U.setNext(f),f=F}x.setNext(f)}},{key:"computeDepths",value:function(){if(arguments.length===1){var f=arguments[0],x=this.findIndex(f),I=f.getDepth(Xe.LEFT),F=f.getDepth(Xe.RIGHT),U=this.computeDepths(x+1,this._edgeList.size(),I),Z=this.computeDepths(0,x,U);if(Z!==F)throw new lt("depth mismatch at "+f.getCoordinate())}else if(arguments.length===3){for(var le=arguments[0],Ee=arguments[1],Re=arguments[2],Ye=Re,pt=le;pt<Ee;pt++){var ft=this._edgeList.get(pt);ft.setEdgeDepths(Xe.RIGHT,Ye),Ye=ft.getDepth(Xe.LEFT)}return Ye}}},{key:"mergeSymLabels",value:function(){for(var f=this.iterator();f.hasNext();){var x=f.next();x.getLabel().merge(x.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(f){for(var x=null,I=null,F=this._SCANNING_FOR_INCOMING,U=this._resultAreaEdgeList.size()-1;U>=0;U--){var Z=this._resultAreaEdgeList.get(U),le=Z.getSym();switch(x===null&&Z.getEdgeRing()===f&&(x=Z),F){case this._SCANNING_FOR_INCOMING:if(le.getEdgeRing()!==f)continue;I=le,F=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Z.getEdgeRing()!==f)continue;I.setNextMin(Z),F=this._SCANNING_FOR_INCOMING}}F===this._LINKING_TO_OUTGOING&&(Ct.isTrue(x!==null,"found null for first outgoing dirEdge"),Ct.isTrue(x.getEdgeRing()===f,"unable to link last incoming dirEdge"),I.setNextMin(x))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var f=0,x=this.iterator();x.hasNext();){var I=x.next();I.isInResult()&&f++}return f}if(arguments.length===1){for(var F=arguments[0],U=0,Z=this.iterator();Z.hasNext();){var le=Z.next();le.getEdgeRing()===F&&U++}return U}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var f=xe.NONE,x=this.iterator();x.hasNext();){var I=x.next(),F=I.getSym();if(!I.isLineEdge()){if(I.isInResult()){f=xe.INTERIOR;break}if(F.isInResult()){f=xe.EXTERIOR;break}}}if(f===xe.NONE)return null;for(var U=f,Z=this.iterator();Z.hasNext();){var le=Z.next(),Ee=le.getSym();le.isLineEdge()?le.getEdge().setCovered(U===xe.INTERIOR):(le.isInResult()&&(U=xe.EXTERIOR),Ee.isInResult()&&(U=xe.INTERIOR))}}},{key:"computeLabelling",value:function(f){H(y(h.prototype),"computeLabelling",this).call(this,f),this._label=new sr(xe.NONE);for(var x=this.iterator();x.hasNext();)for(var I=x.next().getEdge().getLabel(),F=0;F<2;F++){var U=I.getLocation(F);U!==xe.INTERIOR&&U!==xe.BOUNDARY||this._label.setLocation(F,xe.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),h}(Cu),jn=function(k){m(h,k);var l=V(h);function h(){return n(this,h),l.call(this)}return u(h,[{key:"createNode",value:function(f){return new Bl(f,new Xn)}}]),h}(xu),Ws=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"compareTo",value:function(l){var h=l;return k.compareOriented(this._pts,this._orientation,h._pts,h._orientation)}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var l=arguments[0];this._pts=l,this._orientation=k.orientation(l)}},{key:"orientation",value:function(l){return wn.increasingDirection(l)===1}},{key:"compareOriented",value:function(l,h,f,x){for(var I=h?1:-1,F=x?1:-1,U=h?l.length:-1,Z=x?f.length:-1,le=h?0:l.length-1,Ee=x?0:f.length-1;;){var Re=l[le].compareTo(f[Ee]);if(Re!==0)return Re;var Ye=(le+=I)===U,pt=(Ee+=F)===Z;if(Ye&&!pt)return-1;if(!Ye&&pt)return 1;if(Ye&&pt)return 0}}}]),k}(),Gl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"print",value:function(l){l.print("MULTILINESTRING ( ");for(var h=0;h<this._edges.size();h++){var f=this._edges.get(h);h>0&&l.print(","),l.print("(");for(var x=f.getCoordinates(),I=0;I<x.length;I++)I>0&&l.print(","),l.print(x[I].x+" "+x[I].y);l.println(")")}l.print(")  ")}},{key:"addAll",value:function(l){for(var h=l.iterator();h.hasNext();)this.add(h.next())}},{key:"findEdgeIndex",value:function(l){for(var h=0;h<this._edges.size();h++)if(this._edges.get(h).equals(l))return h;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(l){return this._edges.get(l)}},{key:"findEqualEdge",value:function(l){var h=new Ws(l.getCoordinates());return this._ocaMap.get(h)}},{key:"add",value:function(l){this._edges.add(l);var h=new Ws(l.getCoordinates());this._ocaMap.put(h,l)}}],[{key:"constructor_",value:function(){this._edges=new st,this._ocaMap=new Ya}}]),k}(),nl=function(){function k(){n(this,k)}return u(k,[{key:"processIntersections",value:function(l,h,f,x){}},{key:"isDone",value:function(){}}]),k}(),Oc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"isTrivialIntersection",value:function(l,h,f,x){if(l===f&&this._li.getIntersectionNum()===1){if(k.isAdjacentSegments(h,x))return!0;if(l.isClosed()){var I=l.size()-1;if(h===0&&x===I||x===0&&h===I)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(l,h,f,x){if(l===f&&h===x)return null;this.numTests++;var I=l.getCoordinates()[h],F=l.getCoordinates()[h+1],U=f.getCoordinates()[x],Z=f.getCoordinates()[x+1];this._li.computeIntersection(I,F,U,Z),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(l,h,f,x)||(this._hasIntersection=!0,l.addIntersections(this._li,h,0),f.addIntersections(this._li,x,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[nl]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var l=arguments[0];this._li=l}},{key:"isAdjacentSegments",value:function(l,h){return Math.abs(l-h)===1}}]),k}(),Ca=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex),l.println(" dist = "+this.dist)}},{key:"compareTo",value:function(l){var h=l;return this.compare(h.segmentIndex,h.dist)}},{key:"isEndPoint",value:function(l){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===l}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(l,h){return this.segmentIndex<l?-1:this.segmentIndex>l?1:this.dist<h?-1:this.dist>h?1:0}},{key:"interfaces_",get:function(){return[pe]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var l=arguments[0],h=arguments[1],f=arguments[2];this.coord=new Be(l),this.segmentIndex=h,this.dist=f}}]),k}(),rl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"print",value:function(l){l.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(l)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(l){this.addEndpoints();for(var h=this.iterator(),f=h.next();h.hasNext();){var x=h.next(),I=this.createSplitEdge(f,x);l.add(I),f=x}}},{key:"addEndpoints",value:function(){var l=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[l],l,0)}},{key:"createSplitEdge",value:function(l,h){var f=h.segmentIndex-l.segmentIndex+2,x=this.edge.pts[h.segmentIndex],I=h.dist>0||!h.coord.equals2D(x);I||f--;var F=new Array(f).fill(null),U=0;F[U++]=new Be(l.coord);for(var Z=l.segmentIndex+1;Z<=h.segmentIndex;Z++)F[U++]=this.edge.pts[Z];return I&&(F[U]=h.coord),new il(F,new sr(this.edge._label))}},{key:"add",value:function(l,h,f){var x=new Ca(l,h,f),I=this._nodeMap.get(x);return I!==null?I:(this._nodeMap.put(x,x),x)}},{key:"isIntersection",value:function(l){for(var h=this.iterator();h.hasNext();)if(h.next().coord.equals(l))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ya,this.edge=null;var l=arguments[0];this.edge=l}}]),k}(),xo=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])||k.isTrue(this._matrix[xe.INTERIOR][xe.BOUNDARY])||k.isTrue(this._matrix[xe.BOUNDARY][xe.INTERIOR])||k.isTrue(this._matrix[xe.BOUNDARY][xe.BOUNDARY]))&&this._matrix[xe.EXTERIOR][xe.INTERIOR]===oe.FALSE&&this._matrix[xe.EXTERIOR][xe.BOUNDARY]===oe.FALSE}},{key:"isCoveredBy",value:function(){return(k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])||k.isTrue(this._matrix[xe.INTERIOR][xe.BOUNDARY])||k.isTrue(this._matrix[xe.BOUNDARY][xe.INTERIOR])||k.isTrue(this._matrix[xe.BOUNDARY][xe.BOUNDARY]))&&this._matrix[xe.INTERIOR][xe.EXTERIOR]===oe.FALSE&&this._matrix[xe.BOUNDARY][xe.EXTERIOR]===oe.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var l=arguments[0],h=0;h<l.length;h++){var f=Math.trunc(h/3),x=h%3;this._matrix[f][x]=oe.toDimensionValue(l.charAt(h))}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];this._matrix[I][F]=U}}},{key:"isContains",value:function(){return k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&this._matrix[xe.EXTERIOR][xe.INTERIOR]===oe.FALSE&&this._matrix[xe.EXTERIOR][xe.BOUNDARY]===oe.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var l=arguments[0],h=0;h<l.length;h++){var f=Math.trunc(h/3),x=h%3;this.setAtLeast(f,x,oe.toDimensionValue(l.charAt(h)))}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];this._matrix[I][F]<U&&(this._matrix[I][F]=U)}}},{key:"setAtLeastIfValid",value:function(l,h,f){l>=0&&h>=0&&this.setAtLeast(l,h,f)}},{key:"isWithin",value:function(){return k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&this._matrix[xe.INTERIOR][xe.EXTERIOR]===oe.FALSE&&this._matrix[xe.BOUNDARY][xe.EXTERIOR]===oe.FALSE}},{key:"isTouches",value:function(l,h){return l>h?this.isTouches(h,l):(l===oe.A&&h===oe.A||l===oe.L&&h===oe.L||l===oe.L&&h===oe.A||l===oe.P&&h===oe.A||l===oe.P&&h===oe.L)&&this._matrix[xe.INTERIOR][xe.INTERIOR]===oe.FALSE&&(k.isTrue(this._matrix[xe.INTERIOR][xe.BOUNDARY])||k.isTrue(this._matrix[xe.BOUNDARY][xe.INTERIOR])||k.isTrue(this._matrix[xe.BOUNDARY][xe.BOUNDARY]))}},{key:"isOverlaps",value:function(l,h){return l===oe.P&&h===oe.P||l===oe.A&&h===oe.A?k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&k.isTrue(this._matrix[xe.INTERIOR][xe.EXTERIOR])&&k.isTrue(this._matrix[xe.EXTERIOR][xe.INTERIOR]):l===oe.L&&h===oe.L&&this._matrix[xe.INTERIOR][xe.INTERIOR]===1&&k.isTrue(this._matrix[xe.INTERIOR][xe.EXTERIOR])&&k.isTrue(this._matrix[xe.EXTERIOR][xe.INTERIOR])}},{key:"isEquals",value:function(l,h){return l===h&&k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&this._matrix[xe.INTERIOR][xe.EXTERIOR]===oe.FALSE&&this._matrix[xe.BOUNDARY][xe.EXTERIOR]===oe.FALSE&&this._matrix[xe.EXTERIOR][xe.INTERIOR]===oe.FALSE&&this._matrix[xe.EXTERIOR][xe.BOUNDARY]===oe.FALSE}},{key:"toString",value:function(){for(var l=new In("123456789"),h=0;h<3;h++)for(var f=0;f<3;f++)l.setCharAt(3*h+f,oe.toDimensionSymbol(this._matrix[h][f]));return l.toString()}},{key:"setAll",value:function(l){for(var h=0;h<3;h++)for(var f=0;f<3;f++)this._matrix[h][f]=l}},{key:"get",value:function(l,h){return this._matrix[l][h]}},{key:"transpose",value:function(){var l=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=l,l=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=l,l=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=l,this}},{key:"matches",value:function(l){if(l.length!==9)throw new he("Should be length 9: "+l);for(var h=0;h<3;h++)for(var f=0;f<3;f++)if(!k.matches(this._matrix[h][f],l.charAt(3*h+f)))return!1;return!0}},{key:"add",value:function(l){for(var h=0;h<3;h++)for(var f=0;f<3;f++)this.setAtLeast(h,f,l.get(h,f))}},{key:"isDisjoint",value:function(){return this._matrix[xe.INTERIOR][xe.INTERIOR]===oe.FALSE&&this._matrix[xe.INTERIOR][xe.BOUNDARY]===oe.FALSE&&this._matrix[xe.BOUNDARY][xe.INTERIOR]===oe.FALSE&&this._matrix[xe.BOUNDARY][xe.BOUNDARY]===oe.FALSE}},{key:"isCrosses",value:function(l,h){return l===oe.P&&h===oe.L||l===oe.P&&h===oe.A||l===oe.L&&h===oe.A?k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&k.isTrue(this._matrix[xe.INTERIOR][xe.EXTERIOR]):l===oe.L&&h===oe.P||l===oe.A&&h===oe.P||l===oe.A&&h===oe.L?k.isTrue(this._matrix[xe.INTERIOR][xe.INTERIOR])&&k.isTrue(this._matrix[xe.EXTERIOR][xe.INTERIOR]):l===oe.L&&h===oe.L&&this._matrix[xe.INTERIOR][xe.INTERIOR]===0}},{key:"interfaces_",get:function(){return[Ie]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(oe.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var l=arguments[0];k.constructor_.call(this),this.set(l)}else if(arguments[0]instanceof k){var h=arguments[0];k.constructor_.call(this),this._matrix[xe.INTERIOR][xe.INTERIOR]=h._matrix[xe.INTERIOR][xe.INTERIOR],this._matrix[xe.INTERIOR][xe.BOUNDARY]=h._matrix[xe.INTERIOR][xe.BOUNDARY],this._matrix[xe.INTERIOR][xe.EXTERIOR]=h._matrix[xe.INTERIOR][xe.EXTERIOR],this._matrix[xe.BOUNDARY][xe.INTERIOR]=h._matrix[xe.BOUNDARY][xe.INTERIOR],this._matrix[xe.BOUNDARY][xe.BOUNDARY]=h._matrix[xe.BOUNDARY][xe.BOUNDARY],this._matrix[xe.BOUNDARY][xe.EXTERIOR]=h._matrix[xe.BOUNDARY][xe.EXTERIOR],this._matrix[xe.EXTERIOR][xe.INTERIOR]=h._matrix[xe.EXTERIOR][xe.INTERIOR],this._matrix[xe.EXTERIOR][xe.BOUNDARY]=h._matrix[xe.EXTERIOR][xe.BOUNDARY],this._matrix[xe.EXTERIOR][xe.EXTERIOR]=h._matrix[xe.EXTERIOR][xe.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var l=arguments[0],h=arguments[1];return h===oe.SYM_DONTCARE||h===oe.SYM_TRUE&&(l>=0||l===oe.TRUE)||h===oe.SYM_FALSE&&l===oe.FALSE||h===oe.SYM_P&&l===oe.P||h===oe.SYM_L&&l===oe.L||h===oe.SYM_A&&l===oe.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var f=arguments[0],x=arguments[1],I=new k(f);return I.matches(x)}}},{key:"isTrue",value:function(l){return l>=0||l===oe.TRUE}}]),k}(),Fc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(l){return l===null||l.length===0?null:(this.ensureCapacity(this._size+l.length),Sr.arraycopy(l,0,this._data,this._size,l.length),void(this._size+=l.length))}},{key:"ensureCapacity",value:function(l){if(l<=this._data.length)return null;var h=Math.max(l,2*this._data.length);this._data=je.copyOf(this._data,h)}},{key:"toArray",value:function(){var l=new Array(this._size).fill(null);return Sr.arraycopy(this._data,0,l,0,this._size),l}},{key:"add",value:function(l){this.ensureCapacity(this._size+1),this._data[this._size]=l,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)k.constructor_.call(this,10);else if(arguments.length===1){var l=arguments[0];this._data=new Array(l).fill(null)}}}]),k}(),Bc=function(){function k(){n(this,k)}return u(k,[{key:"getChainStartIndices",value:function(l){var h=0,f=new Fc(Math.trunc(l.length/2));f.add(h);do{var x=this.findChainEnd(l,h);f.add(x),h=x}while(h<l.length-1);return f.toArray()}},{key:"findChainEnd",value:function(l,h){for(var f=ci.quadrant(l[h],l[h+1]),x=h+1;x<l.length&&ci.quadrant(l[x-1],l[x])===f;)x++;return x-1}},{key:"OLDgetChainStartIndices",value:function(l){var h=0,f=new st;f.add(h);do{var x=this.findChainEnd(l,h);f.add(x),h=x}while(h<l.length-1);return k.toIntArray(f)}}],[{key:"toIntArray",value:function(l){for(var h=new Array(l.size()).fill(null),f=0;f<h.length;f++)h[f]=l.get(f).intValue();return h}}]),k}(),$c=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(l){var h=this.pts[this.startIndex[l]].x,f=this.pts[this.startIndex[l+1]].x;return h>f?h:f}},{key:"getMinX",value:function(l){var h=this.pts[this.startIndex[l]].x,f=this.pts[this.startIndex[l+1]].x;return h<f?h:f}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var l=arguments[0],h=arguments[1],f=arguments[2],x=arguments[3];this.computeIntersectsForChain(this.startIndex[l],this.startIndex[l+1],h,h.startIndex[f],h.startIndex[f+1],x)}else if(arguments.length===6){var I=arguments[0],F=arguments[1],U=arguments[2],Z=arguments[3],le=arguments[4],Ee=arguments[5];if(F-I==1&&le-Z==1)return Ee.addIntersections(this.e,I,U.e,Z),null;if(!this.overlaps(I,F,U,Z,le))return null;var Re=Math.trunc((I+F)/2),Ye=Math.trunc((Z+le)/2);I<Re&&(Z<Ye&&this.computeIntersectsForChain(I,Re,U,Z,Ye,Ee),Ye<le&&this.computeIntersectsForChain(I,Re,U,Ye,le,Ee)),Re<F&&(Z<Ye&&this.computeIntersectsForChain(Re,F,U,Z,Ye,Ee),Ye<le&&this.computeIntersectsForChain(Re,F,U,Ye,le,Ee))}}},{key:"overlaps",value:function(l,h,f,x,I){return mn.intersects(this.pts[l],this.pts[h],f.pts[x],f.pts[I])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(l,h){for(var f=0;f<this.startIndex.length-1;f++)for(var x=0;x<l.startIndex.length-1;x++)this.computeIntersectsForChain(f,l,x,h)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var l=arguments[0];this.e=l,this.pts=l.getCoordinates();var h=new Bc;this.startIndex=h.getChainStartIndices(this.pts)}}]),k}(),Zs=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"getDepth",value:function(l,h){return this._depth[l][h]}},{key:"setDepth",value:function(l,h,f){this._depth[l][h]=f}},{key:"isNull",value:function(){if(arguments.length===0){for(var l=0;l<2;l++)for(var h=0;h<3;h++)if(this._depth[l][h]!==k.NULL_VALUE)return!1;return!0}if(arguments.length===1){var f=arguments[0];return this._depth[f][1]===k.NULL_VALUE}if(arguments.length===2){var x=arguments[0],I=arguments[1];return this._depth[x][I]===k.NULL_VALUE}}},{key:"normalize",value:function(){for(var l=0;l<2;l++)if(!this.isNull(l)){var h=this._depth[l][1];this._depth[l][2]<h&&(h=this._depth[l][2]),h<0&&(h=0);for(var f=1;f<3;f++){var x=0;this._depth[l][f]>h&&(x=1),this._depth[l][f]=x}}}},{key:"getDelta",value:function(l){return this._depth[l][Xe.RIGHT]-this._depth[l][Xe.LEFT]}},{key:"getLocation",value:function(l,h){return this._depth[l][h]<=0?xe.EXTERIOR:xe.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var l=arguments[0],h=0;h<2;h++)for(var f=1;f<3;f++){var x=l.getLocation(h,f);x!==xe.EXTERIOR&&x!==xe.INTERIOR||(this.isNull(h,f)?this._depth[h][f]=k.depthAtLocation(x):this._depth[h][f]+=k.depthAtLocation(x))}else if(arguments.length===3){var I=arguments[0],F=arguments[1],U=arguments[2];U===xe.INTERIOR&&this._depth[I][F]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var l=0;l<2;l++)for(var h=0;h<3;h++)this._depth[l][h]=k.NULL_VALUE}},{key:"depthAtLocation",value:function(l){return l===xe.EXTERIOR?0:l===xe.INTERIOR?1:k.NULL_VALUE}}]),k}();Zs.NULL_VALUE=-1;var il=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var f=new Array(2).fill(null);return f[0]=this.pts[0],f[1]=this.pts[1],new h(f,sr.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(f){this._isIsolated=f}},{key:"setName",value:function(f){this._name=f}},{key:"equals",value:function(f){if(!(f instanceof h))return!1;var x=f;if(this.pts.length!==x.pts.length)return!1;for(var I=!0,F=!0,U=this.pts.length,Z=0;Z<this.pts.length;Z++)if(this.pts[Z].equals2D(x.pts[Z])||(I=!1),this.pts[Z].equals2D(x.pts[--U])||(F=!1),!I&&!F)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var f=arguments[0];return this.pts[f]}}},{key:"print",value:function(f){f.print("edge "+this._name+": "),f.print("LINESTRING (");for(var x=0;x<this.pts.length;x++)x>0&&f.print(","),f.print(this.pts[x].x+" "+this.pts[x].y);f.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(f){h.updateIM(this._label,f)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(f){f.print("edge "+this._name+": ");for(var x=this.pts.length-1;x>=0;x--)f.print(this.pts[x]+" ");f.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new $c(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new mn;for(var f=0;f<this.pts.length;f++)this._env.expandToInclude(this.pts[f])}return this._env}},{key:"addIntersection",value:function(f,x,I,F){var U=new Be(f.getIntersection(F)),Z=x,le=f.getEdgeDistance(I,F),Ee=Z+1;if(Ee<this.pts.length){var Re=this.pts[Ee];U.equals2D(Re)&&(Z=Ee,le=0)}this.eiList.add(U,Z,le)}},{key:"toString",value:function(){var f=new In;f.append("edge "+this._name+": "),f.append("LINESTRING (");for(var x=0;x<this.pts.length;x++)x>0&&f.append(","),f.append(this.pts[x].x+" "+this.pts[x].y);return f.append(")  "+this._label+" "+this._depthDelta),f.toString()}},{key:"isPointwiseEqual",value:function(f){if(this.pts.length!==f.pts.length)return!1;for(var x=0;x<this.pts.length;x++)if(!this.pts[x].equals2D(f.pts[x]))return!1;return!0}},{key:"setDepthDelta",value:function(f){this._depthDelta=f}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(f,x,I){for(var F=0;F<f.getIntersectionNum();F++)this.addIntersection(f,x,I,F)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new rl(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Zs,this._depthDelta=0,arguments.length===1){var f=arguments[0];h.constructor_.call(this,f,null)}else if(arguments.length===2){var x=arguments[0],I=arguments[1];this.pts=x,this._label=I}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof xo&&arguments[0]instanceof sr))return H(y(h),"updateIM",this).apply(this,arguments);var f=arguments[0],x=arguments[1];x.setAtLeastIfValid(f.getLocation(0,Xe.ON),f.getLocation(1,Xe.ON),1),f.isArea()&&(x.setAtLeastIfValid(f.getLocation(0,Xe.LEFT),f.getLocation(1,Xe.LEFT),2),x.setAtLeastIfValid(f.getLocation(0,Xe.RIGHT),f.getLocation(1,Xe.RIGHT),2))}}]),h}(Fl),ol=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"setWorkingPrecisionModel",value:function(l){this._workingPrecisionModel=l}},{key:"insertUniqueEdge",value:function(l){var h=this._edgeList.findEqualEdge(l);if(h!==null){var f=h.getLabel(),x=l.getLabel();h.isPointwiseEqual(l)||(x=new sr(l.getLabel())).flip(),f.merge(x);var I=k.depthDelta(x),F=h.getDepthDelta()+I;h.setDepthDelta(F)}else this._edgeList.add(l),l.setDepthDelta(k.depthDelta(l.getLabel()))}},{key:"buildSubgraphs",value:function(l,h){for(var f=new st,x=l.iterator();x.hasNext();){var I=x.next(),F=I.getRightmostCoordinate(),U=new Iu(f).getDepth(F);I.computeDepth(U),I.findResultEdges(),f.add(I),h.add(I.getDirectedEdges(),I.getNodes())}}},{key:"createSubgraphs",value:function(l){for(var h=new st,f=l.getNodes().iterator();f.hasNext();){var x=f.next();if(!x.isVisited()){var I=new to;I.create(x),h.add(I)}}return Ja.sort(h,Ja.reverseOrder()),h}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(l){if(this._workingNoder!==null)return this._workingNoder;var h=new Su,f=new Hs;return f.setPrecisionModel(l),h.setSegmentIntersector(new Oc(f)),h}},{key:"buffer",value:function(l,h){var f=this._workingPrecisionModel;f===null&&(f=l.getPrecisionModel()),this._geomFact=l.getFactory();var x=new zc(f,this._bufParams),I=new wf(l,h,x).getCurves();if(I.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(I,f),this._graph=new $o(new jn),this._graph.addEdges(this._edgeList.getEdges());var F=this.createSubgraphs(this._graph),U=new _f(this._geomFact);this.buildSubgraphs(F,U);var Z=U.getPolygons();return Z.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Z)}},{key:"computeNodedEdges",value:function(l,h){var f=this.getNoder(h);f.computeNodes(l);for(var x=f.getNodedSubstrings().iterator();x.hasNext();){var I=x.next(),F=I.getCoordinates();if(F.length!==2||!F[0].equals2D(F[1])){var U=I.getData(),Z=new il(I.getCoordinates(),new sr(U));this.insertUniqueEdge(Z)}}}},{key:"setNoder",value:function(l){this._workingNoder=l}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Gl;var l=arguments[0];this._bufParams=l}},{key:"depthDelta",value:function(l){var h=l.getLocation(0,Xe.LEFT),f=l.getLocation(0,Xe.RIGHT);return h===xe.INTERIOR&&f===xe.EXTERIOR?1:h===xe.EXTERIOR&&f===xe.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(l){for(var h=new mo,f=new st;l.hasNext();){var x=l.next(),I=h.createLineString(x.getCoordinates());f.add(I)}return h.buildGeometry(f)}}]),k}(),sl=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"rescale",value:function(){if(Wt(arguments[0],Vt))for(var l=arguments[0],h=l.iterator();h.hasNext();){var f=h.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var x=arguments[0],I=0;I<x.length;I++)x[I].x=x[I].x/this._scaleFactor+this._offsetX,x[I].y=x[I].y/this._scaleFactor+this._offsetY;x.length===2&&x[0].equals2D(x[1])&&Sr.out.println(x)}}},{key:"scale",value:function(){if(Wt(arguments[0],Vt)){for(var l=arguments[0],h=new st(l.size()),f=l.iterator();f.hasNext();){var x=f.next();h.add(new jo(this.scale(x.getCoordinates()),x.getData()))}return h}if(arguments[0]instanceof Array){for(var I=arguments[0],F=new Array(I.length).fill(null),U=0;U<I.length;U++)F[U]=new Be(Math.round((I[U].x-this._offsetX)*this._scaleFactor),Math.round((I[U].y-this._offsetY)*this._scaleFactor),I[U].getZ());var Z=wn.removeRepeatedPoints(F);return Z}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var l=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(l),l}},{key:"computeNodes",value:function(l){var h=l;this._isScaled&&(h=this.scale(l)),this._noder.computeNodes(h)}},{key:"interfaces_",get:function(){return[ku]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var l=arguments[0],h=arguments[1];k.constructor_.call(this,l,h,0,0)}else if(arguments.length===4){var f=arguments[0],x=arguments[1];this._noder=f,this._scaleFactor=x,this._isScaled=!this.isIntegerPrecision()}}}]),k}(),al=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();){var h=l.next(),f=h.getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(arguments.length===2){for(var x=arguments[0],I=arguments[1],F=I.iterator();F.hasNext();)for(var U=F.next(),Z=U.getCoordinates(),le=1;le<Z.length-1;le++)if(Z[le].equals(x))throw new Ut("found endpt/interior pt intersection at index "+le+" :pt "+x)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();)for(var h=l.next(),f=this._segStrings.iterator();f.hasNext();){var x=f.next();this.checkInteriorIntersections(h,x)}else if(arguments.length===2)for(var I=arguments[0],F=arguments[1],U=I.getCoordinates(),Z=F.getCoordinates(),le=0;le<U.length-1;le++)for(var Ee=0;Ee<Z.length-1;Ee++)this.checkInteriorIntersections(I,le,F,Ee);else if(arguments.length===4){var Re=arguments[0],Ye=arguments[1],pt=arguments[2],ft=arguments[3];if(Re===pt&&Ye===ft)return null;var qt=Re.getCoordinates()[Ye],Yt=Re.getCoordinates()[Ye+1],ln=pt.getCoordinates()[ft],Cn=pt.getCoordinates()[ft+1];if(this._li.computeIntersection(qt,Yt,ln,Cn),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,qt,Yt)||this.hasInteriorIntersection(this._li,ln,Cn)))throw new Ut("found non-noded intersection at "+qt+"-"+Yt+" and "+ln+"-"+Cn)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();){var h=l.next();this.checkCollapses(h)}else if(arguments.length===1)for(var f=arguments[0],x=f.getCoordinates(),I=0;I<x.length-2;I++)this.checkCollapse(x[I],x[I+1],x[I+2])}},{key:"hasInteriorIntersection",value:function(l,h,f){for(var x=0;x<l.getIntersectionNum();x++){var I=l.getIntersection(x);if(!I.equals(h)&&!I.equals(f))return!0}return!1}},{key:"checkCollapse",value:function(l,h,f){if(l.equals(f))throw new Ut("found non-noded collapse at "+k.fact.createLineString([l,h,f]))}}],[{key:"constructor_",value:function(){this._li=new Hs,this._segStrings=null;var l=arguments[0];this._segStrings=l}}]),k}();al.fact=new mo;var ll=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"intersectsScaled",value:function(l,h){var f=Math.min(l.x,h.x),x=Math.max(l.x,h.x),I=Math.min(l.y,h.y),F=Math.max(l.y,h.y),U=this._maxx<f||this._minx>x||this._maxy<I||this._miny>F;if(U)return!1;var Z=this.intersectsToleranceSquare(l,h);return Ct.isTrue(!(U&&Z),"Found bad envelope test"),Z}},{key:"initCorners",value:function(l){var h=.5;this._minx=l.x-h,this._maxx=l.x+h,this._miny=l.y-h,this._maxy=l.y+h,this._corner[0]=new Be(this._maxx,this._maxy),this._corner[1]=new Be(this._minx,this._maxy),this._corner[2]=new Be(this._minx,this._miny),this._corner[3]=new Be(this._maxx,this._miny)}},{key:"intersects",value:function(l,h){return this._scaleFactor===1?this.intersectsScaled(l,h):(this.copyScaled(l,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(l){return Math.round(l*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(l,h){h.x=this.scale(l.x),h.y=this.scale(l.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var l=k.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new mn(this._originalPt.x-l,this._originalPt.x+l,this._originalPt.y-l,this._originalPt.y+l)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(l,h){return this._li.computeIntersection(l,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(l,h){var f=!1,x=!1;return this._li.computeIntersection(l,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(l,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(f=!0),this._li.computeIntersection(l,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(x=!0),this._li.computeIntersection(l,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!f||!x)||!!l.equals(this._pt)||!!h.equals(this._pt))))}},{key:"addSnappedNode",value:function(l,h){var f=l.getCoordinate(h),x=l.getCoordinate(h+1);return!!this.intersects(f,x)&&(l.addIntersection(this.getCoordinate(),h),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var l=arguments[0],h=arguments[1],f=arguments[2];if(this._originalPt=l,this._pt=l,this._scaleFactor=h,this._li=f,h<=0)throw new he("Scale factor must be non-zero");h!==1&&(this._pt=new Be(this.scale(l.x),this.scale(l.y)),this._p0Scaled=new Be,this._p1Scaled=new Be),this.initCorners(this._pt)}}]),k}();ll.SAFE_ENV_EXPANSION_FACTOR=.75;var ul=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"select",value:function(){if(arguments.length!==1&&arguments.length===2){var l=arguments[0],h=arguments[1];l.getLineSegment(h,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ro}}]),k}(),Ma=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"snap",value:function(){if(arguments.length===1){var l=arguments[0];return this.snap(l,null,-1)}if(arguments.length===3){var h=arguments[0],f=arguments[1],x=arguments[2],I=h.getSafeEnvelope(),F=new Uc(h,f,x);return this._index.query(I,new(function(){function U(){n(this,U)}return u(U,[{key:"interfaces_",get:function(){return[Ac]}},{key:"visitItem",value:function(Z){Z.select(I,F)}}]),U}())),F.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var l=arguments[0];this._index=l}}]),k}(),Uc=function(k){m(h,k);var l=V(h);function h(){var f;return n(this,h),f=l.call(this),h.constructor_.apply(R(f),arguments),f}return u(h,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Oh))return H(y(h.prototype),"select",this).apply(this,arguments);var f=arguments[0],x=arguments[1],I=f.getContext();if(this._parentEdge===I&&(x===this._hotPixelVertexIndex||x+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(I,x)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var f=arguments[0],x=arguments[1],I=arguments[2];this._hotPixel=f,this._parentEdge=x,this._hotPixelVertexIndex=I}}]),h}(ul);Ma.HotPixelSnapAction=Uc;var jc=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"processIntersections",value:function(l,h,f,x){if(l===f&&h===x)return null;var I=l.getCoordinates()[h],F=l.getCoordinates()[h+1],U=f.getCoordinates()[x],Z=f.getCoordinates()[x+1];if(this._li.computeIntersection(I,F,U,Z),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var le=0;le<this._li.getIntersectionNum();le++)this._interiorIntersections.add(this._li.getIntersection(le));l.addIntersections(this._li,h,0),f.addIntersections(this._li,x,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[nl]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var l=arguments[0];this._li=l,this._interiorIntersections=new st}}]),k}(),kn=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"checkCorrectness",value:function(l){var h=jo.getNodedSubstrings(l),f=new al(h);try{f.checkValid()}catch(x){if(!(x instanceof ie))throw x;x.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return jo.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(l,h){var f=this.findInteriorIntersections(l,h);this.computeIntersectionSnaps(f),this.computeVertexSnaps(l)}},{key:"findInteriorIntersections",value:function(l,h){var f=new jc(h);return this._noder.setSegmentIntersector(f),this._noder.computeNodes(l),f.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Wt(arguments[0],Vt))for(var l=arguments[0],h=l.iterator();h.hasNext();){var f=h.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof jo)for(var x=arguments[0],I=x.getCoordinates(),F=0;F<I.length;F++){var U=new ll(I[F],this._scaleFactor,this._li),Z=this._pointSnapper.snap(U,x,F);Z&&x.addIntersection(I[F],F)}}},{key:"computeNodes",value:function(l){this._nodedSegStrings=l,this._noder=new Su,this._pointSnapper=new Ma(this._noder.getIndex()),this.snapRound(l,this._li)}},{key:"computeIntersectionSnaps",value:function(l){for(var h=l.iterator();h.hasNext();){var f=h.next(),x=new ll(f,this._scaleFactor,this._li);this._pointSnapper.snap(x)}}},{key:"interfaces_",get:function(){return[ku]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var l=arguments[0];this._pm=l,this._li=new Hs,this._li.setPrecisionModel(l),this._scaleFactor=l.getScale()}}]),k}(),bs=function(){function k(){n(this,k),k.constructor_.apply(this,arguments)}return u(k,[{key:"bufferFixedPrecision",value:function(l){var h=new sl(new kn(new Tr(1)),l.getScale()),f=new ol(this._bufParams);f.setWorkingPrecisionModel(l),f.setNoder(h),this._resultGeometry=f.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var l=k.MAX_PRECISION_DIGITS;l>=0;l--){try{this.bufferReducedPrecision(l)}catch(I){if(!(I instanceof lt))throw I;this._saveException=I}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var h=arguments[0],f=k.precisionScaleFactor(this._argGeom,this._distance,h),x=new Tr(f);this.bufferFixedPrecision(x)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var l=this._argGeom.getFactory().getPrecisionModel();l.getType()===Tr.FIXED?this.bufferFixedPrecision(l):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(l){this._bufParams.setQuadrantSegments(l)}},{key:"bufferOriginalPrecision",value:function(){try{var l=new ol(this._bufParams);this._resultGeometry=l.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof Ut))throw h;this._saveException=h}}},{key:"getResultGeometry",value:function(l){return this._distance=l,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(l){this._bufParams.setEndCapStyle(l)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Q,this._resultGeometry=null,this._saveException=null,arguments.length===1){var l=arguments[0];this._argGeom=l}else if(arguments.length===2){var h=arguments[0],f=arguments[1];this._argGeom=h,this._bufParams=f}}},{key:"bufferOp",value:function(){if(arguments.length===2){var l=arguments[0],h=arguments[1],f=new k(l),x=f.getResultGeometry(h);return x}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Dt&&typeof arguments[1]=="number"){var I=arguments[0],F=arguments[1],U=arguments[2],Z=new k(I);Z.setQuadrantSegments(U);var le=Z.getResultGeometry(F);return le}if(arguments[2]instanceof Q&&arguments[0]instanceof Dt&&typeof arguments[1]=="number"){var Ee=arguments[0],Re=arguments[1],Ye=arguments[2],pt=new k(Ee,Ye),ft=pt.getResultGeometry(Re);return ft}}else if(arguments.length===4){var qt=arguments[0],Yt=arguments[1],ln=arguments[2],Cn=arguments[3],Yn=new k(qt);Yn.setQuadrantSegments(ln),Yn.setEndCapStyle(Cn);var zn=Yn.getResultGeometry(Yt);return zn}}},{key:"precisionScaleFactor",value:function(l,h,f){var x=l.getEnvelopeInternal(),I=Ii.max(Math.abs(x.getMaxX()),Math.abs(x.getMaxY()),Math.abs(x.getMinX()),Math.abs(x.getMinY()))+2*(h>0?h:0),F=f-Math.trunc(Math.log(I)/Math.log(10)+1);return Math.pow(10,F)}}]),k}();bs.CAP_ROUND=Q.CAP_ROUND,bs.CAP_BUTT=Q.CAP_FLAT,bs.CAP_FLAT=Q.CAP_FLAT,bs.CAP_SQUARE=Q.CAP_SQUARE,bs.MAX_PRECISION_DIGITS=12;var Sf=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Vc=function(){function k(l){n(this,k),this.geometryFactory=l||new mo}return u(k,[{key:"read",value:function(l){var h,f=(h=typeof l=="string"?JSON.parse(l):l).type;if(!hi[f])throw new Error("Unknown GeoJSON type: "+h.type);return Sf.indexOf(f)!==-1?hi[f].call(this,h.coordinates):f==="GeometryCollection"?hi[f].call(this,h.geometries):hi[f].call(this,h)}},{key:"write",value:function(l){var h=l.getGeometryType();if(!Vo[h])throw new Error("Geometry is not supported");return Vo[h].call(this,l)}}]),k}(),hi={Feature:function(k){var l={};for(var h in k)l[h]=k[h];if(k.geometry){var f=k.geometry.type;if(!hi[f])throw new Error("Unknown GeoJSON type: "+k.type);l.geometry=this.read(k.geometry)}return k.bbox&&(l.bbox=hi.bbox.call(this,k.bbox)),l},FeatureCollection:function(k){var l={};if(k.features){l.features=[];for(var h=0;h<k.features.length;++h)l.features.push(this.read(k.features[h]))}return k.bbox&&(l.bbox=this.parse.bbox.call(this,k.bbox)),l},coordinates:function(k){for(var l=[],h=0;h<k.length;++h){var f=k[h];l.push(A(Be,ne(f)))}return l},bbox:function(k){return this.geometryFactory.createLinearRing([new Be(k[0],k[1]),new Be(k[2],k[1]),new Be(k[2],k[3]),new Be(k[0],k[3]),new Be(k[0],k[1])])},Point:function(k){var l=A(Be,ne(k));return this.geometryFactory.createPoint(l)},MultiPoint:function(k){for(var l=[],h=0;h<k.length;++h)l.push(hi.Point.call(this,k[h]));return this.geometryFactory.createMultiPoint(l)},LineString:function(k){var l=hi.coordinates.call(this,k);return this.geometryFactory.createLineString(l)},MultiLineString:function(k){for(var l=[],h=0;h<k.length;++h)l.push(hi.LineString.call(this,k[h]));return this.geometryFactory.createMultiLineString(l)},Polygon:function(k){for(var l=hi.coordinates.call(this,k[0]),h=this.geometryFactory.createLinearRing(l),f=[],x=1;x<k.length;++x){var I=k[x],F=hi.coordinates.call(this,I),U=this.geometryFactory.createLinearRing(F);f.push(U)}return this.geometryFactory.createPolygon(h,f)},MultiPolygon:function(k){for(var l=[],h=0;h<k.length;++h){var f=k[h];l.push(hi.Polygon.call(this,f))}return this.geometryFactory.createMultiPolygon(l)},GeometryCollection:function(k){for(var l=[],h=0;h<k.length;++h){var f=k[h];l.push(this.read(f))}return this.geometryFactory.createGeometryCollection(l)}},Vo={coordinate:function(k){var l=[k.x,k.y];return k.z&&l.push(k.z),k.m&&l.push(k.m),l},Point:function(k){return{type:"Point",coordinates:Vo.coordinate.call(this,k.getCoordinate())}},MultiPoint:function(k){for(var l=[],h=0;h<k._geometries.length;++h){var f=k._geometries[h],x=Vo.Point.call(this,f);l.push(x.coordinates)}return{type:"MultiPoint",coordinates:l}},LineString:function(k){for(var l=[],h=k.getCoordinates(),f=0;f<h.length;++f){var x=h[f];l.push(Vo.coordinate.call(this,x))}return{type:"LineString",coordinates:l}},MultiLineString:function(k){for(var l=[],h=0;h<k._geometries.length;++h){var f=k._geometries[h],x=Vo.LineString.call(this,f);l.push(x.coordinates)}return{type:"MultiLineString",coordinates:l}},Polygon:function(k){var l=[],h=Vo.LineString.call(this,k._shell);l.push(h.coordinates);for(var f=0;f<k._holes.length;++f){var x=k._holes[f],I=Vo.LineString.call(this,x);l.push(I.coordinates)}return{type:"Polygon",coordinates:l}},MultiPolygon:function(k){for(var l=[],h=0;h<k._geometries.length;++h){var f=k._geometries[h],x=Vo.Polygon.call(this,f);l.push(x.coordinates)}return{type:"MultiPolygon",coordinates:l}},GeometryCollection:function(k){for(var l=[],h=0;h<k._geometries.length;++h){var f=k._geometries[h],x=f.getGeometryType();l.push(Vo[x].call(this,f))}return{type:"GeometryCollection",geometries:l}}};return{BufferOp:bs,GeoJSONReader:function(){function k(l){n(this,k),this.parser=new Vc(l||new mo)}return u(k,[{key:"read",value:function(l){return this.parser.read(l)}}]),k}(),GeoJSONWriter:function(){function k(){n(this,k),this.parser=new Vc(this.geometryFactory)}return u(k,[{key:"write",value:function(l){return this.parser.write(l)}}]),k}()}})})(xL);var SF=xL.exports;const EF=kF(SF);function Cc(){return new Vy}function Vy(){this.reset()}Vy.prototype={constructor:Vy,reset:function(){this.s=this.t=0},add:function(e){CE(Ag,e,this.t),CE(this,Ag.s,this.s),this.s?this.t+=Ag.t:this.s=Ag.t},valueOf:function(){return this.s}};var Ag=new Vy;function CE(e,t,n){var o=e.s=t+n,u=o-t,m=o-u;e.t=t-m+(n-u)}var Lr=1e-6,Wn=Math.PI,wl=Wn/2,ME=Wn/4,Cl=Wn*2,Yu=180/Wn,ia=Wn/180,Xi=Math.abs,IF=Math.atan,rf=Math.atan2,Jr=Math.cos,Qr=Math.sin,df=Math.sqrt;function bL(e){return e>1?0:e<-1?Wn:Math.acos(e)}function Ih(e){return e>1?wl:e<-1?-wl:Math.asin(e)}function Cp(){}function Gy(e,t){e&&PE.hasOwnProperty(e.type)&&PE[e.type](e,t)}var LE={Feature:function(e,t){Gy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,o=-1,u=n.length;++o<u;)Gy(n[o].geometry,t)}},PE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,o=-1,u=n.length;++o<u;)e=n[o],t.point(e[0],e[1],e[2])},LineString:function(e,t){vx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,o=-1,u=n.length;++o<u;)vx(n[o],t,0)},Polygon:function(e,t){AE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,o=-1,u=n.length;++o<u;)AE(n[o],t)},GeometryCollection:function(e,t){for(var n=e.geometries,o=-1,u=n.length;++o<u;)Gy(n[o],t)}};function vx(e,t,n){var o=-1,u=e.length-n,m;for(t.lineStart();++o<u;)m=e[o],t.point(m[0],m[1],m[2]);t.lineEnd()}function AE(e,t){var n=-1,o=e.length;for(t.polygonStart();++n<o;)vx(e[n],t,1);t.polygonEnd()}function TF(e,t){e&&LE.hasOwnProperty(e.type)?LE[e.type](e,t):Gy(e,t)}Cc();Cc();function _x(e){return[rf(e[1],e[0]),Ih(e[2])]}function of(e){var t=e[0],n=e[1],o=Jr(n);return[o*Jr(t),o*Qr(t),Qr(n)]}function Rg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qy(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ng(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xx(e){var t=df(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Cc();function wL(e,t){function n(o,u){return o=e(o,u),t(o[0],o[1])}return e.invert&&t.invert&&(n.invert=function(o,u){return o=t.invert(o,u),o&&e.invert(o[0],o[1])}),n}function bx(e,t){return[e>Wn?e-Cl:e<-Wn?e+Cl:e,t]}bx.invert=bx;function CF(e,t,n){return(e%=Cl)?t||n?wL(NE(e),zE(t,n)):NE(e):t||n?zE(t,n):bx}function RE(e){return function(t,n){return t+=e,[t>Wn?t-Cl:t<-Wn?t+Cl:t,n]}}function NE(e){var t=RE(e);return t.invert=RE(-e),t}function zE(e,t){var n=Jr(e),o=Qr(e),u=Jr(t),m=Qr(t);function y(d,M){var A=Jr(M),O=Jr(d)*A,R=Qr(d)*A,N=Qr(M),V=N*n+O*o;return[rf(R*u-V*m,O*n-N*o),Ih(V*u+R*m)]}return y.invert=function(d,M){var A=Jr(M),O=Jr(d)*A,R=Qr(d)*A,N=Qr(M),V=N*u-R*m;return[rf(R*u+N*m,O*n+V*o),Ih(V*n-O*o)]},y}function MF(e,t,n,o,u,m){if(n){var y=Jr(t),d=Qr(t),M=o*n;u==null?(u=t+o*Cl,m=t-M/2):(u=DE(y,u),m=DE(y,m),(o>0?u<m:u>m)&&(u+=o*Cl));for(var A,O=u;o>0?O>m:O<m;O-=M)A=_x([y,-d*Jr(O),-d*Qr(O)]),e.point(A[0],A[1])}}function DE(e,t){t=of(t),t[0]-=e,xx(t);var n=bL(-t[1]);return((-t[2]<0?-n:n)+Cl-Lr)%Cl}function kL(){var e=[],t;return{point:function(n,o){t.push([n,o])},lineStart:function(){e.push(t=[])},lineEnd:Cp,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function LF(e,t,n,o,u,m){var y=e[0],d=e[1],M=t[0],A=t[1],O=0,R=1,N=M-y,V=A-d,H;if(H=n-y,!(!N&&H>0)){if(H/=N,N<0){if(H<O)return;H<R&&(R=H)}else if(N>0){if(H>R)return;H>O&&(O=H)}if(H=u-y,!(!N&&H<0)){if(H/=N,N<0){if(H>R)return;H>O&&(O=H)}else if(N>0){if(H<O)return;H<R&&(R=H)}if(H=o-d,!(!V&&H>0)){if(H/=V,V<0){if(H<O)return;H<R&&(R=H)}else if(V>0){if(H>R)return;H>O&&(O=H)}if(H=m-d,!(!V&&H<0)){if(H/=V,V<0){if(H>R)return;H>O&&(O=H)}else if(V>0){if(H<O)return;H<R&&(R=H)}return O>0&&(e[0]=y+O*N,e[1]=d+O*V),R<1&&(t[0]=y+R*N,t[1]=d+R*V),!0}}}}}function ly(e,t){return Xi(e[0]-t[0])<Lr&&Xi(e[1]-t[1])<Lr}function zg(e,t,n,o){this.x=e,this.z=t,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function SL(e,t,n,o,u){var m=[],y=[],d,M;if(e.forEach(function(H){if(!((ne=H.length-1)<=0)){var ne,de=H[0],Y=H[ne],X;if(ly(de,Y)){for(u.lineStart(),d=0;d<ne;++d)u.point((de=H[d])[0],de[1]);u.lineEnd();return}m.push(X=new zg(de,H,null,!0)),y.push(X.o=new zg(de,null,X,!1)),m.push(X=new zg(Y,H,null,!1)),y.push(X.o=new zg(Y,null,X,!0))}}),!!m.length){for(y.sort(t),OE(m),OE(y),d=0,M=y.length;d<M;++d)y[d].e=n=!n;for(var A=m[0],O,R;;){for(var N=A,V=!0;N.v;)if((N=N.n)===A)return;O=N.z,u.lineStart();do{if(N.v=N.o.v=!0,N.e){if(V)for(d=0,M=O.length;d<M;++d)u.point((R=O[d])[0],R[1]);else o(N.x,N.n.x,1,u);N=N.n}else{if(V)for(O=N.p.z,d=O.length-1;d>=0;--d)u.point((R=O[d])[0],R[1]);else o(N.x,N.p.x,-1,u);N=N.p}N=N.o,O=N.z,V=!V}while(!N.v);u.lineEnd()}}}function OE(e){if(t=e.length){for(var t,n=0,o=e[0],u;++n<t;)o.n=u=e[n],u.p=o,o=u;o.n=u=e[0],u.p=o}}function EL(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PF(e){return e.length===1&&(e=AF(e)),{left:function(t,n,o,u){for(o==null&&(o=0),u==null&&(u=t.length);o<u;){var m=o+u>>>1;e(t[m],n)<0?o=m+1:u=m}return o},right:function(t,n,o,u){for(o==null&&(o=0),u==null&&(u=t.length);o<u;){var m=o+u>>>1;e(t[m],n)>0?u=m:o=m+1}return o}}}function AF(e){return function(t,n){return EL(e(t),n)}}PF(EL);function IL(e){for(var t=e.length,n,o=-1,u=0,m,y;++o<t;)u+=e[o].length;for(m=new Array(u);--t>=0;)for(y=e[t],n=y.length;--n>=0;)m[--u]=y[n];return m}var Mp=1e9,Dg=-Mp;function RF(e,t,n,o){function u(A,O){return e<=A&&A<=n&&t<=O&&O<=o}function m(A,O,R,N){var V=0,H=0;if(A==null||(V=y(A,R))!==(H=y(O,R))||M(A,O)<0^R>0)do N.point(V===0||V===3?e:n,V>1?o:t);while((V=(V+R+4)%4)!==H);else N.point(O[0],O[1])}function y(A,O){return Xi(A[0]-e)<Lr?O>0?0:3:Xi(A[0]-n)<Lr?O>0?2:1:Xi(A[1]-t)<Lr?O>0?1:0:O>0?3:2}function d(A,O){return M(A.x,O.x)}function M(A,O){var R=y(A,1),N=y(O,1);return R!==N?R-N:R===0?O[1]-A[1]:R===1?A[0]-O[0]:R===2?A[1]-O[1]:O[0]-A[0]}return function(A){var O=A,R=kL(),N,V,H,ne,de,Y,X,Q,ie,he,_e,pe={point:Ie,lineStart:et,lineEnd:at,polygonStart:$e,polygonEnd:Ze};function Ie(rt,ut){u(rt,ut)&&O.point(rt,ut)}function Le(){for(var rt=0,ut=0,wt=V.length;ut<wt;++ut)for(var Ge=V[ut],ct=1,Je=Ge.length,At=Ge[0],Ut,Sn,Ct=At[0],yn=At[1];ct<Je;++ct)Ut=Ct,Sn=yn,At=Ge[ct],Ct=At[0],yn=At[1],Sn<=o?yn>o&&(Ct-Ut)*(o-Sn)>(yn-Sn)*(e-Ut)&&++rt:yn<=o&&(Ct-Ut)*(o-Sn)<(yn-Sn)*(e-Ut)&&--rt;return rt}function $e(){O=R,N=[],V=[],_e=!0}function Ze(){var rt=Le(),ut=_e&&rt,wt=(N=IL(N)).length;(ut||wt)&&(A.polygonStart(),ut&&(A.lineStart(),m(null,null,1,A),A.lineEnd()),wt&&SL(N,d,rt,m,A),A.polygonEnd()),O=A,N=V=H=null}function et(){pe.point=Ne,V&&V.push(H=[]),he=!0,ie=!1,X=Q=NaN}function at(){N&&(Ne(ne,de),Y&&ie&&R.rejoin(),N.push(R.result())),pe.point=Ie,ie&&O.lineEnd()}function Ne(rt,ut){var wt=u(rt,ut);if(V&&H.push([rt,ut]),he)ne=rt,de=ut,Y=wt,he=!1,wt&&(O.lineStart(),O.point(rt,ut));else if(wt&&ie)O.point(rt,ut);else{var Ge=[X=Math.max(Dg,Math.min(Mp,X)),Q=Math.max(Dg,Math.min(Mp,Q))],ct=[rt=Math.max(Dg,Math.min(Mp,rt)),ut=Math.max(Dg,Math.min(Mp,ut))];LF(Ge,ct,e,t,n,o)?(ie||(O.lineStart(),O.point(Ge[0],Ge[1])),O.point(ct[0],ct[1]),wt||O.lineEnd(),_e=!1):wt&&(O.lineStart(),O.point(rt,ut),_e=!1)}X=rt,Q=ut,ie=wt}return pe}}var V_=Cc();function NF(e,t){var n=t[0],o=t[1],u=[Qr(n),-Jr(n),0],m=0,y=0;V_.reset();for(var d=0,M=e.length;d<M;++d)if(O=(A=e[d]).length)for(var A,O,R=A[O-1],N=R[0],V=R[1]/2+ME,H=Qr(V),ne=Jr(V),de=0;de<O;++de,N=X,H=ie,ne=he,R=Y){var Y=A[de],X=Y[0],Q=Y[1]/2+ME,ie=Qr(Q),he=Jr(Q),_e=X-N,pe=_e>=0?1:-1,Ie=pe*_e,Le=Ie>Wn,$e=H*ie;if(V_.add(rf($e*pe*Qr(Ie),ne*he+$e*Jr(Ie))),m+=Le?_e+pe*Cl:_e,Le^N>=n^X>=n){var Ze=qy(of(R),of(Y));xx(Ze);var et=qy(u,Ze);xx(et);var at=(Le^_e>=0?-1:1)*Ih(et[2]);(o>at||o===at&&(Ze[0]||Ze[1]))&&(y+=Le^_e>=0?1:-1)}}return(m<-Lr||m<Lr&&V_<-Lr)^y&1}Cc();function FE(e){return e}Cc();Cc();var sf=1/0,Hy=sf,dm=-sf,Wy=dm,BE={point:zF,lineStart:Cp,lineEnd:Cp,polygonStart:Cp,polygonEnd:Cp,result:function(){var e=[[sf,Hy],[dm,Wy]];return dm=Wy=-(Hy=sf=1/0),e}};function zF(e,t){e<sf&&(sf=e),e>dm&&(dm=e),t<Hy&&(Hy=t),t>Wy&&(Wy=t)}Cc();function TL(e,t,n,o){return function(u,m){var y=t(m),d=u.invert(o[0],o[1]),M=kL(),A=t(M),O=!1,R,N,V,H={point:ne,lineStart:Y,lineEnd:X,polygonStart:function(){H.point=Q,H.lineStart=ie,H.lineEnd=he,N=[],R=[]},polygonEnd:function(){H.point=ne,H.lineStart=Y,H.lineEnd=X,N=IL(N);var _e=NF(R,d);N.length?(O||(m.polygonStart(),O=!0),SL(N,OF,_e,n,m)):_e&&(O||(m.polygonStart(),O=!0),m.lineStart(),n(null,null,1,m),m.lineEnd()),O&&(m.polygonEnd(),O=!1),N=R=null},sphere:function(){m.polygonStart(),m.lineStart(),n(null,null,1,m),m.lineEnd(),m.polygonEnd()}};function ne(_e,pe){var Ie=u(_e,pe);e(_e=Ie[0],pe=Ie[1])&&m.point(_e,pe)}function de(_e,pe){var Ie=u(_e,pe);y.point(Ie[0],Ie[1])}function Y(){H.point=de,y.lineStart()}function X(){H.point=ne,y.lineEnd()}function Q(_e,pe){V.push([_e,pe]);var Ie=u(_e,pe);A.point(Ie[0],Ie[1])}function ie(){A.lineStart(),V=[]}function he(){Q(V[0][0],V[0][1]),A.lineEnd();var _e=A.clean(),pe=M.result(),Ie,Le=pe.length,$e,Ze,et;if(V.pop(),R.push(V),V=null,!!Le){if(_e&1){if(Ze=pe[0],($e=Ze.length-1)>0){for(O||(m.polygonStart(),O=!0),m.lineStart(),Ie=0;Ie<$e;++Ie)m.point((et=Ze[Ie])[0],et[1]);m.lineEnd()}return}Le>1&&_e&2&&pe.push(pe.pop().concat(pe.shift())),N.push(pe.filter(DF))}}return H}}function DF(e){return e.length>1}function OF(e,t){return((e=e.x)[0]<0?e[1]-wl-Lr:wl-e[1])-((t=t.x)[0]<0?t[1]-wl-Lr:wl-t[1])}const $E=TL(function(){return!0},FF,$F,[-Wn,-wl]);function FF(e){var t=NaN,n=NaN,o=NaN,u;return{lineStart:function(){e.lineStart(),u=1},point:function(m,y){var d=m>0?Wn:-Wn,M=Xi(m-t);Xi(M-Wn)<Lr?(e.point(t,n=(n+y)/2>0?wl:-wl),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(d,n),e.point(m,n),u=0):o!==d&&M>=Wn&&(Xi(t-o)<Lr&&(t-=o*Lr),Xi(m-d)<Lr&&(m-=d*Lr),n=BF(t,n,m,y),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(d,n),u=0),e.point(t=m,n=y),o=d},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-u}}}function BF(e,t,n,o){var u,m,y=Qr(e-n);return Xi(y)>Lr?IF((Qr(t)*(m=Jr(o))*Qr(n)-Qr(o)*(u=Jr(t))*Qr(e))/(u*m*y)):(t+o)/2}function $F(e,t,n,o){var u;if(e==null)u=n*wl,o.point(-Wn,u),o.point(0,u),o.point(Wn,u),o.point(Wn,0),o.point(Wn,-u),o.point(0,-u),o.point(-Wn,-u),o.point(-Wn,0),o.point(-Wn,u);else if(Xi(e[0]-t[0])>Lr){var m=e[0]<t[0]?Wn:-Wn;u=n*m/2,o.point(-m,u),o.point(0,u),o.point(m,u)}else o.point(t[0],t[1])}function UF(e,t){var n=Jr(e),o=n>0,u=Xi(n)>Lr;function m(O,R,N,V){MF(V,e,t,N,O,R)}function y(O,R){return Jr(O)*Jr(R)>n}function d(O){var R,N,V,H,ne;return{lineStart:function(){H=V=!1,ne=1},point:function(de,Y){var X=[de,Y],Q,ie=y(de,Y),he=o?ie?0:A(de,Y):ie?A(de+(de<0?Wn:-Wn),Y):0;if(!R&&(H=V=ie)&&O.lineStart(),ie!==V&&(Q=M(R,X),(!Q||ly(R,Q)||ly(X,Q))&&(X[0]+=Lr,X[1]+=Lr,ie=y(X[0],X[1]))),ie!==V)ne=0,ie?(O.lineStart(),Q=M(X,R),O.point(Q[0],Q[1])):(Q=M(R,X),O.point(Q[0],Q[1]),O.lineEnd()),R=Q;else if(u&&R&&o^ie){var _e;!(he&N)&&(_e=M(X,R,!0))&&(ne=0,o?(O.lineStart(),O.point(_e[0][0],_e[0][1]),O.point(_e[1][0],_e[1][1]),O.lineEnd()):(O.point(_e[1][0],_e[1][1]),O.lineEnd(),O.lineStart(),O.point(_e[0][0],_e[0][1])))}ie&&(!R||!ly(R,X))&&O.point(X[0],X[1]),R=X,V=ie,N=he},lineEnd:function(){V&&O.lineEnd(),R=null},clean:function(){return ne|(H&&V)<<1}}}function M(O,R,N){var V=of(O),H=of(R),ne=[1,0,0],de=qy(V,H),Y=Rg(de,de),X=de[0],Q=Y-X*X;if(!Q)return!N&&O;var ie=n*Y/Q,he=-n*X/Q,_e=qy(ne,de),pe=Ng(ne,ie),Ie=Ng(de,he);j_(pe,Ie);var Le=_e,$e=Rg(pe,Le),Ze=Rg(Le,Le),et=$e*$e-Ze*(Rg(pe,pe)-1);if(!(et<0)){var at=df(et),Ne=Ng(Le,(-$e-at)/Ze);if(j_(Ne,pe),Ne=_x(Ne),!N)return Ne;var rt=O[0],ut=R[0],wt=O[1],Ge=R[1],ct;ut<rt&&(ct=rt,rt=ut,ut=ct);var Je=ut-rt,At=Xi(Je-Wn)<Lr,Ut=At||Je<Lr;if(!At&&Ge<wt&&(ct=wt,wt=Ge,Ge=ct),Ut?At?wt+Ge>0^Ne[1]<(Xi(Ne[0]-rt)<Lr?wt:Ge):wt<=Ne[1]&&Ne[1]<=Ge:Je>Wn^(rt<=Ne[0]&&Ne[0]<=ut)){var Sn=Ng(Le,(-$e+at)/Ze);return j_(Sn,pe),[Ne,_x(Sn)]}}}function A(O,R){var N=o?e:Wn-e,V=0;return O<-N?V|=1:O>N&&(V|=2),R<-N?V|=4:R>N&&(V|=8),V}return TL(y,d,m,o?[0,-e]:[-Wn,e-Wn])}function CL(e){return function(t){var n=new wx;for(var o in e)n[o]=e[o];return n.stream=t,n}}function wx(){}wx.prototype={constructor:wx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ML(e,t,n){var o=t[1][0]-t[0][0],u=t[1][1]-t[0][1],m=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),m!=null&&e.clipExtent(null),TF(n,e.stream(BE));var y=BE.result(),d=Math.min(o/(y[1][0]-y[0][0]),u/(y[1][1]-y[0][1])),M=+t[0][0]+(o-d*(y[1][0]+y[0][0]))/2,A=+t[0][1]+(u-d*(y[1][1]+y[0][1]))/2;return m!=null&&e.clipExtent(m),e.scale(d*150).translate([M,A])}function jF(e,t,n){return ML(e,[[0,0],t],n)}var UE=16,VF=Jr(30*ia);function jE(e,t){return+t?qF(e,t):GF(e)}function GF(e){return CL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function qF(e,t){function n(o,u,m,y,d,M,A,O,R,N,V,H,ne,de){var Y=A-o,X=O-u,Q=Y*Y+X*X;if(Q>4*t&&ne--){var ie=y+N,he=d+V,_e=M+H,pe=df(ie*ie+he*he+_e*_e),Ie=Ih(_e/=pe),Le=Xi(Xi(_e)-1)<Lr||Xi(m-R)<Lr?(m+R)/2:rf(he,ie),$e=e(Le,Ie),Ze=$e[0],et=$e[1],at=Ze-o,Ne=et-u,rt=X*at-Y*Ne;(rt*rt/Q>t||Xi((Y*at+X*Ne)/Q-.5)>.3||y*N+d*V+M*H<VF)&&(n(o,u,m,y,d,M,Ze,et,Le,ie/=pe,he/=pe,_e,ne,de),de.point(Ze,et),n(Ze,et,Le,ie,he,_e,A,O,R,N,V,H,ne,de))}}return function(o){var u,m,y,d,M,A,O,R,N,V,H,ne,de={point:Y,lineStart:X,lineEnd:ie,polygonStart:function(){o.polygonStart(),de.lineStart=he},polygonEnd:function(){o.polygonEnd(),de.lineStart=X}};function Y(Ie,Le){Ie=e(Ie,Le),o.point(Ie[0],Ie[1])}function X(){R=NaN,de.point=Q,o.lineStart()}function Q(Ie,Le){var $e=of([Ie,Le]),Ze=e(Ie,Le);n(R,N,O,V,H,ne,R=Ze[0],N=Ze[1],O=Ie,V=$e[0],H=$e[1],ne=$e[2],UE,o),o.point(R,N)}function ie(){de.point=Y,o.lineEnd()}function he(){X(),de.point=_e,de.lineEnd=pe}function _e(Ie,Le){Q(u=Ie,Le),m=R,y=N,d=V,M=H,A=ne,de.point=Q}function pe(){n(R,N,O,V,H,ne,m,y,u,d,M,A,UE,o),de.lineEnd=ie,ie()}return de}}var HF=CL({point:function(e,t){this.stream.point(e*ia,t*ia)}});function WF(e){return ZF(function(){return e})()}function ZF(e){var t,n=150,o=480,u=250,m,y,d=0,M=0,A=0,O=0,R=0,N,V,H=null,ne=$E,de=null,Y,X,Q,ie=FE,he=.5,_e=jE(Ze,he),pe,Ie;function Le(Ne){return Ne=V(Ne[0]*ia,Ne[1]*ia),[Ne[0]*n+m,y-Ne[1]*n]}function $e(Ne){return Ne=V.invert((Ne[0]-m)/n,(y-Ne[1])/n),Ne&&[Ne[0]*Yu,Ne[1]*Yu]}function Ze(Ne,rt){return Ne=t(Ne,rt),[Ne[0]*n+m,y-Ne[1]*n]}Le.stream=function(Ne){return pe&&Ie===Ne?pe:pe=HF(ne(N,_e(ie(Ie=Ne))))},Le.clipAngle=function(Ne){return arguments.length?(ne=+Ne?UF(H=Ne*ia,6*ia):(H=null,$E),at()):H*Yu},Le.clipExtent=function(Ne){return arguments.length?(ie=Ne==null?(de=Y=X=Q=null,FE):RF(de=+Ne[0][0],Y=+Ne[0][1],X=+Ne[1][0],Q=+Ne[1][1]),at()):de==null?null:[[de,Y],[X,Q]]},Le.scale=function(Ne){return arguments.length?(n=+Ne,et()):n},Le.translate=function(Ne){return arguments.length?(o=+Ne[0],u=+Ne[1],et()):[o,u]},Le.center=function(Ne){return arguments.length?(d=Ne[0]%360*ia,M=Ne[1]%360*ia,et()):[d*Yu,M*Yu]},Le.rotate=function(Ne){return arguments.length?(A=Ne[0]%360*ia,O=Ne[1]%360*ia,R=Ne.length>2?Ne[2]%360*ia:0,et()):[A*Yu,O*Yu,R*Yu]},Le.precision=function(Ne){return arguments.length?(_e=jE(Ze,he=Ne*Ne),at()):df(he)},Le.fitExtent=function(Ne,rt){return ML(Le,Ne,rt)},Le.fitSize=function(Ne,rt){return jF(Le,Ne,rt)};function et(){V=wL(N=CF(A,O,R),t);var Ne=t(d,M);return m=o-Ne[0]*n,y=u+Ne[1]*n,at()}function at(){return pe=Ie=null,Le}return function(){return t=e.apply(this,arguments),Le.invert=t.invert&&$e,et()}}function LL(e){return function(t,n){var o=Jr(t),u=Jr(n),m=e(o*u);return[m*u*Qr(t),m*Qr(n)]}}function PL(e){return function(t,n){var o=df(t*t+n*n),u=e(o),m=Qr(u),y=Jr(u);return[rf(t*m,o*y),Ih(o&&n*m/o)]}}var XF=LL(function(e){return df(2/(1+e))});XF.invert=PL(function(e){return 2*Ih(e/2)});var AL=LL(function(e){return(e=bL(e))&&e/Qr(e)});AL.invert=PL(function(e){return e});function YF(){return WF(AL).scale(79.4188).clipAngle(180-.001)}function VE(e,t){return[e,t]}VE.invert=VE;var{BufferOp:KF,GeoJSONReader:JF,GeoJSONWriter:QF}=EF;function e6(e,t,n){n=n||{};var o=n.units||"kilometers",u=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof u!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(u<=0)throw new Error("steps must be greater than 0");var m=[];switch(e.type){case"GeometryCollection":return Mv(e,function(y){var d=uy(y,t,o,u);d&&m.push(d)}),Eh(m);case"FeatureCollection":return TE(e,function(y){var d=uy(y,t,o,u);d&&TE(d,function(M){M&&m.push(M)})}),Eh(m)}return uy(e,t,o,u)}function uy(e,t,n,o){var u=e.properties||{},m=e.type==="Feature"?e.geometry:e;if(m.type==="GeometryCollection"){var y=[];return Mv(e,function(ne){var de=uy(ne,t,n,o);de&&y.push(de)}),Eh(y)}var d=t6(m),M={type:m.type,coordinates:NL(m.coordinates,d)},A=new JF,O=A.read(M),R=jO(VO(t,n),"meters"),N=KF.bufferOp(O,R,o),V=new QF;if(N=V.write(N),!RL(N.coordinates)){var H={type:N.type,coordinates:zL(N.coordinates,d)};return Em(H,u)}}function RL(e){return Array.isArray(e[0])?RL(e[0]):isNaN(e[0])}function NL(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return NL(n,t)})}function zL(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return zL(n,t)})}function t6(e){var t=bF(e).geometry.coordinates,n=[-t[0],-t[1]];return YF().rotate(n).scale(hs)}var n6=e6;function r6(e){const t=[];if(Mv(e,u=>{t.push(u.coordinates)}),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},o=vL.difference(t[0],...t.slice(1));return o.length===0?null:o.length===1?Kb(o[0],n):gL(o,n)}var i6=r6;function GE(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function qE(e,t){const n=i6(Eh([Kb([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),e]));if(!n)return;n.properties={isMask:"y"};const o=n6(e,0);if(o){if(o.geometry.type==="Polygon")for(const u of o.geometry.coordinates)GE(u);else for(const u of o.geometry.coordinates)for(const m of u)GE(m);t(Eh([o,n]))}}const HE=Eh([]);function o6(e,t,n=!0,o=!0,u={},m={},y={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let d;const M=[];let A,O,R;function N(){!e.getSource("full-geom")&&(y!=null&&y.fill||y!=null&&y.line)&&e.addSource("full-geom",{type:"geojson",data:HE}),!e.getLayer("full-geom-fill")&&y!=null&&y.fill&&e.addLayer({...y==null?void 0:y.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),!e.getLayer("full-geom-line")&&y!=null&&y.line&&e.addLayer({...y==null?void 0:y.line,id:"full-geom-line",type:"line",source:"full-geom"}),R&&ne(R)}e.loaded()?N():e.once("load",()=>{N()}),e.on("styledata",()=>{N()});const V=de=>{d==null||d({type:"mapClick",coordinates:[de.lngLat.lng,de.lngLat.lat]})};function H(de=!1){if(!t)throw new Error;const Y=document.createElement("div");return de&&Y.classList.add("marker-interactive"),new gO({props:{displayIn:"maplibre"},target:Y}),new t.Marker({element:Y,offset:[1,-13]})}function ne(de){var Y;R=de,(Y=e.getSource("full-geom"))==null||Y.setData(de)}return{setEventHandler(de){de?(d=de,e.on("click",V)):(d=void 0,e.off("click",V))},flyTo(de,Y){e.flyTo({center:de,zoom:Y,...u})},fitBounds(de,Y,X){e.fitBounds([[de[0],de[1]],[de[2],de[3]]],{padding:Y,maxZoom:X,...m})},indicateReverse(de){e.getCanvasContainer().style.cursor=de?"crosshair":""},setReverseMarker(de){!t||!n||(O?de?O.setLngLat(de):(O.remove(),O=void 0):de&&(O=(typeof n=="object"?new t.Marker(n):H()).setLngLat(de).addTo(e),O.getElement().classList.add("marker-reverse")))},setMarkers(de,Y){if(n){for(const X of M)X.remove();if(M.length=0,ne(HE),!!t){if(Y){let X=!1;if(Y.geometry.type==="GeometryCollection"){const Q=Y.geometry.geometries.filter(ie=>ie.type==="Polygon"||ie.type==="MultiPolygon");e:if(Q.length>0){const ie=_F(Eh(Q.map(he=>Em(he))));if(!ie)break e;qE({...Y,geometry:ie.geometry},ne),X=!0}else{const ie=Y.geometry.geometries.filter(he=>he.type==="LineString"||he.type==="MultiLineString");ie.length>0&&(ne({...Y,geometry:{type:"GeometryCollection",geometries:ie}}),X=!0)}}if(!X){if(Y.geometry.type==="Polygon"||Y.geometry.type==="MultiPolygon")qE(Y,ne);else if(Y.geometry.type==="LineString"||Y.geometry.type==="MultiLineString"){ne(Y);return}}n&&M.push((typeof n=="object"?new t.Marker(n):H()).setLngLat(Y.center).addTo(e))}if(o)for(const X of de??[]){if(X===Y)continue;const Q=(typeof o=="object"?new t.Marker(o):H(!0)).setLngLat(X.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(X.place_type[0]==="reverse"?X.place_name:X.place_name.replace(/,.*/,""))).addTo(e),ie=Q.getElement();ie.addEventListener("click",he=>{he.stopPropagation(),d==null||d({type:"markerClick",id:X.id})}),ie.addEventListener("mouseenter",()=>{d==null||d({type:"markerMouseEnter",id:X.id}),Q.togglePopup()}),ie.addEventListener("mouseleave",()=>{d==null||d({type:"markerMouseLeave",id:X.id}),Q.togglePopup()}),M.push(Q)}}}},setSelectedMarker(de){A&&A.getElement().classList.toggle("marker-selected",!1),A=de>-1?M[de]:void 0,A==null||A.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const de=e.getCenter();return[e.getZoom(),de.lng,de.lat]}}}var na,wd;class s6 extends EventTarget{constructor(t={}){super(),WS(this,na),WS(this,wd),F_(this,wd,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:o,showResultMarkers:u,flyTo:m,fullGeometryStyle:y,...d}=Na(this,wd),M=typeof m=="boolean"?{}:m,A=this.getExtraProps(t,n),O={mapController:o6(t,this.getMapLibreGl(),o,u,M,M,y),flyTo:m===void 0?!0:!!m,apiKey:"",...A,...d};if(!O.apiKey)throw new Error("no apiKey provided");F_(this,na,new $O({target:n,props:O}));for(const R of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])Na(this,na).$on(R,N=>this.dispatchEvent(N));return n}setOptions(t){var n;F_(this,wd,t);const{marker:o,showResultMarkers:u,flyTo:m,fullGeometryStyle:y,...d}=Na(this,wd);(n=Na(this,na))==null||n.$set(d)}setQuery(t,n=!0){var o;(o=Na(this,na))==null||o.setQuery(t,n)}clearMap(){var t;(t=Na(this,na))==null||t.clearMap()}clearList(){var t;(t=Na(this,na))==null||t.clearList()}setReverseMode(t){var n;(n=Na(this,na))==null||n.$set({reverseActive:t})}focus(){var t;(t=Na(this,na))==null||t.focus()}blur(){var t;(t=Na(this,na))==null||t.blur()}onRemove(){var t;(t=Na(this,na))==null||t.$destroy()}}na=new WeakMap,wd=new WeakMap;class a6 extends s6{getMapLibreGl(){return LD}onAdd(t){return super.onAddInt(t)}getExtraProps(t,n){const o={};if(!("getSdkConfig"in t&&typeof t.getSdkConfig=="function"))throw new Error("MapTiler SDK not detected");const{primaryLanguage:u,apiKey:m}=t.getSdkConfig();o.apiKey=m;const y=/^([a-z]{2})($|_|-)/.exec(u);return y&&(o.language=y[1]),n.className+=" maptiler-ctrl",o}}const fm={black:"#000",white:"#fff"},fd={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},md={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},gd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},yd={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},vp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},l6={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function pm(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const u6=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),Qb="$$material";function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},tt.apply(null,arguments)}function tr(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function DL(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var c6=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h6=DL(function(e){return c6.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),d6=!1;function f6(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function p6(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var m6=function(){function e(n){var o=this;this._insertTag=function(u){var m;o.tags.length===0?o.insertionPoint?m=o.insertionPoint.nextSibling:o.prepend?m=o.container.firstChild:m=o.before:m=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(u,m),o.tags.push(u)},this.isSpeedy=n.speedy===void 0?!d6:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(p6(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var m=f6(u);try{m.insertRule(o,m.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var u;return(u=o.parentNode)==null?void 0:u.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Ao="-ms-",Zy="-moz-",Qn="-webkit-",OL="comm",ew="rule",tw="decl",g6="@import",FL="@keyframes",y6="@layer",v6=Math.abs,Lv=String.fromCharCode,_6=Object.assign;function x6(e,t){return ho(e,0)^45?(((t<<2^ho(e,0))<<2^ho(e,1))<<2^ho(e,2))<<2^ho(e,3):0}function BL(e){return e.trim()}function b6(e,t){return(e=t.exec(e))?e[0]:e}function er(e,t,n){return e.replace(t,n)}function kx(e,t){return e.indexOf(t)}function ho(e,t){return e.charCodeAt(t)|0}function mm(e,t,n){return e.slice(t,n)}function _l(e){return e.length}function nw(e){return e.length}function Og(e,t){return t.push(e),e}function w6(e,t){return e.map(t).join("")}var Pv=1,af=1,$L=0,vs=0,Si=0,ff="";function Av(e,t,n,o,u,m,y){return{value:e,root:t,parent:n,type:o,props:u,children:m,line:Pv,column:af,length:y,return:""}}function _p(e,t){return _6(Av("",null,null,"",null,null,0),e,{length:-e.length},t)}function k6(){return Si}function S6(){return Si=vs>0?ho(ff,--vs):0,af--,Si===10&&(af=1,Pv--),Si}function Os(){return Si=vs<$L?ho(ff,vs++):0,af++,Si===10&&(af=1,Pv++),Si}function El(){return ho(ff,vs)}function cy(){return vs}function Tm(e,t){return mm(ff,e,t)}function gm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function UL(e){return Pv=af=1,$L=_l(ff=e),vs=0,[]}function jL(e){return ff="",e}function hy(e){return BL(Tm(vs-1,Sx(e===91?e+2:e===40?e+1:e)))}function E6(e){for(;(Si=El())&&Si<33;)Os();return gm(e)>2||gm(Si)>3?"":" "}function I6(e,t){for(;--t&&Os()&&!(Si<48||Si>102||Si>57&&Si<65||Si>70&&Si<97););return Tm(e,cy()+(t<6&&El()==32&&Os()==32))}function Sx(e){for(;Os();)switch(Si){case e:return vs;case 34:case 39:e!==34&&e!==39&&Sx(Si);break;case 40:e===41&&Sx(e);break;case 92:Os();break}return vs}function T6(e,t){for(;Os()&&e+Si!==57;)if(e+Si===84&&El()===47)break;return"/*"+Tm(t,vs-1)+"*"+Lv(e===47?e:Os())}function C6(e){for(;!gm(El());)Os();return Tm(e,vs)}function M6(e){return jL(dy("",null,null,null,[""],e=UL(e),0,[0],e))}function dy(e,t,n,o,u,m,y,d,M){for(var A=0,O=0,R=y,N=0,V=0,H=0,ne=1,de=1,Y=1,X=0,Q="",ie=u,he=m,_e=o,pe=Q;de;)switch(H=X,X=Os()){case 40:if(H!=108&&ho(pe,R-1)==58){kx(pe+=er(hy(X),"&","&\f"),"&\f")!=-1&&(Y=-1);break}case 34:case 39:case 91:pe+=hy(X);break;case 9:case 10:case 13:case 32:pe+=E6(H);break;case 92:pe+=I6(cy()-1,7);continue;case 47:switch(El()){case 42:case 47:Og(L6(T6(Os(),cy()),t,n),M);break;default:pe+="/"}break;case 123*ne:d[A++]=_l(pe)*Y;case 125*ne:case 59:case 0:switch(X){case 0:case 125:de=0;case 59+O:Y==-1&&(pe=er(pe,/\f/g,"")),V>0&&_l(pe)-R&&Og(V>32?ZE(pe+";",o,n,R-1):ZE(er(pe," ","")+";",o,n,R-2),M);break;case 59:pe+=";";default:if(Og(_e=WE(pe,t,n,A,O,u,d,Q,ie=[],he=[],R),m),X===123)if(O===0)dy(pe,t,_e,_e,ie,m,R,d,he);else switch(N===99&&ho(pe,3)===110?100:N){case 100:case 108:case 109:case 115:dy(e,_e,_e,o&&Og(WE(e,_e,_e,0,0,u,d,Q,u,ie=[],R),he),u,he,R,d,o?ie:he);break;default:dy(pe,_e,_e,_e,[""],he,0,d,he)}}A=O=V=0,ne=Y=1,Q=pe="",R=y;break;case 58:R=1+_l(pe),V=H;default:if(ne<1){if(X==123)--ne;else if(X==125&&ne++==0&&S6()==125)continue}switch(pe+=Lv(X),X*ne){case 38:Y=O>0?1:(pe+="\f",-1);break;case 44:d[A++]=(_l(pe)-1)*Y,Y=1;break;case 64:El()===45&&(pe+=hy(Os())),N=El(),O=R=_l(Q=pe+=C6(cy())),X++;break;case 45:H===45&&_l(pe)==2&&(ne=0)}}return m}function WE(e,t,n,o,u,m,y,d,M,A,O){for(var R=u-1,N=u===0?m:[""],V=nw(N),H=0,ne=0,de=0;H<o;++H)for(var Y=0,X=mm(e,R+1,R=v6(ne=y[H])),Q=e;Y<V;++Y)(Q=BL(ne>0?N[Y]+" "+X:er(X,/&\f/g,N[Y])))&&(M[de++]=Q);return Av(e,t,n,u===0?ew:d,M,A,O)}function L6(e,t,n){return Av(e,t,n,OL,Lv(k6()),mm(e,2,-2),0)}function ZE(e,t,n,o){return Av(e,t,n,tw,mm(e,0,o),mm(e,o+1,-1),o)}function Wd(e,t){for(var n="",o=nw(e),u=0;u<o;u++)n+=t(e[u],u,e,t)||"";return n}function P6(e,t,n,o){switch(e.type){case y6:if(e.children.length)break;case g6:case tw:return e.return=e.return||e.value;case OL:return"";case FL:return e.return=e.value+"{"+Wd(e.children,o)+"}";case ew:e.value=e.props.join(",")}return _l(n=Wd(e.children,o))?e.return=e.value+"{"+n+"}":""}function A6(e){var t=nw(e);return function(n,o,u,m){for(var y="",d=0;d<t;d++)y+=e[d](n,o,u,m)||"";return y}}function R6(e){return function(t){t.root||(t=t.return)&&e(t)}}var N6=function(t,n,o){for(var u=0,m=0;u=m,m=El(),u===38&&m===12&&(n[o]=1),!gm(m);)Os();return Tm(t,vs)},z6=function(t,n){var o=-1,u=44;do switch(gm(u)){case 0:u===38&&El()===12&&(n[o]=1),t[o]+=N6(vs-1,n,o);break;case 2:t[o]+=hy(u);break;case 4:if(u===44){t[++o]=El()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=Lv(u)}while(u=Os());return t},D6=function(t,n){return jL(z6(UL(t),n))},XE=new WeakMap,O6=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,u=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!XE.get(o))&&!u){XE.set(t,!0);for(var m=[],y=D6(n,m),d=o.props,M=0,A=0;M<y.length;M++)for(var O=0;O<d.length;O++,A++)t.props[A]=m[M]?y[M].replace(/&\f/g,d[O]):d[O]+" "+y[M]}}},F6=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function VL(e,t){switch(x6(e,t)){case 5103:return Qn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qn+e+Zy+e+Ao+e+e;case 6828:case 4268:return Qn+e+Ao+e+e;case 6165:return Qn+e+Ao+"flex-"+e+e;case 5187:return Qn+e+er(e,/(\w+).+(:[^]+)/,Qn+"box-$1$2"+Ao+"flex-$1$2")+e;case 5443:return Qn+e+Ao+"flex-item-"+er(e,/flex-|-self/,"")+e;case 4675:return Qn+e+Ao+"flex-line-pack"+er(e,/align-content|flex-|-self/,"")+e;case 5548:return Qn+e+Ao+er(e,"shrink","negative")+e;case 5292:return Qn+e+Ao+er(e,"basis","preferred-size")+e;case 6060:return Qn+"box-"+er(e,"-grow","")+Qn+e+Ao+er(e,"grow","positive")+e;case 4554:return Qn+er(e,/([^-])(transform)/g,"$1"+Qn+"$2")+e;case 6187:return er(er(er(e,/(zoom-|grab)/,Qn+"$1"),/(image-set)/,Qn+"$1"),e,"")+e;case 5495:case 3959:return er(e,/(image-set\([^]*)/,Qn+"$1$`$1");case 4968:return er(er(e,/(.+:)(flex-)?(.*)/,Qn+"box-pack:$3"+Ao+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qn+e+e;case 4095:case 3583:case 4068:case 2532:return er(e,/(.+)-inline(.+)/,Qn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_l(e)-1-t>6)switch(ho(e,t+1)){case 109:if(ho(e,t+4)!==45)break;case 102:return er(e,/(.+:)(.+)-([^]+)/,"$1"+Qn+"$2-$3$1"+Zy+(ho(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~kx(e,"stretch")?VL(er(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ho(e,t+1)!==115)break;case 6444:switch(ho(e,_l(e)-3-(~kx(e,"!important")&&10))){case 107:return er(e,":",":"+Qn)+e;case 101:return er(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qn+(ho(e,14)===45?"inline-":"")+"box$3$1"+Qn+"$2$3$1"+Ao+"$2box$3")+e}break;case 5936:switch(ho(e,t+11)){case 114:return Qn+e+Ao+er(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qn+e+Ao+er(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qn+e+Ao+er(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qn+e+Ao+e+e}return e}var B6=function(t,n,o,u){if(t.length>-1&&!t.return)switch(t.type){case tw:t.return=VL(t.value,t.length);break;case FL:return Wd([_p(t,{value:er(t.value,"@","@"+Qn)})],u);case ew:if(t.length)return w6(t.props,function(m){switch(b6(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Wd([_p(t,{props:[er(m,/:(read-\w+)/,":"+Zy+"$1")]})],u);case"::placeholder":return Wd([_p(t,{props:[er(m,/:(plac\w+)/,":"+Qn+"input-$1")]}),_p(t,{props:[er(m,/:(plac\w+)/,":"+Zy+"$1")]}),_p(t,{props:[er(m,/:(plac\w+)/,Ao+"input-$1")]})],u)}return""})}},$6=[B6],GL=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(ne){var de=ne.getAttribute("data-emotion");de.indexOf(" ")!==-1&&(document.head.appendChild(ne),ne.setAttribute("data-s",""))})}var u=t.stylisPlugins||$6,m={},y,d=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(ne){for(var de=ne.getAttribute("data-emotion").split(" "),Y=1;Y<de.length;Y++)m[de[Y]]=!0;d.push(ne)});var M,A=[O6,F6];{var O,R=[P6,R6(function(ne){O.insert(ne)})],N=A6(A.concat(u,R)),V=function(de){return Wd(M6(de),N)};M=function(de,Y,X,Q){O=X,V(de?de+"{"+Y.styles+"}":Y.styles),Q&&(H.inserted[Y.name]=!0)}}var H={key:n,sheet:new m6({key:n,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:m,registered:{},insert:M};return H.sheet.hydrate(d),H},qL={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=typeof Symbol=="function"&&Symbol.for,rw=Ki?Symbol.for("react.element"):60103,iw=Ki?Symbol.for("react.portal"):60106,Rv=Ki?Symbol.for("react.fragment"):60107,Nv=Ki?Symbol.for("react.strict_mode"):60108,zv=Ki?Symbol.for("react.profiler"):60114,Dv=Ki?Symbol.for("react.provider"):60109,Ov=Ki?Symbol.for("react.context"):60110,ow=Ki?Symbol.for("react.async_mode"):60111,Fv=Ki?Symbol.for("react.concurrent_mode"):60111,Bv=Ki?Symbol.for("react.forward_ref"):60112,$v=Ki?Symbol.for("react.suspense"):60113,U6=Ki?Symbol.for("react.suspense_list"):60120,Uv=Ki?Symbol.for("react.memo"):60115,jv=Ki?Symbol.for("react.lazy"):60116,j6=Ki?Symbol.for("react.block"):60121,V6=Ki?Symbol.for("react.fundamental"):60117,G6=Ki?Symbol.for("react.responder"):60118,q6=Ki?Symbol.for("react.scope"):60119;function js(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rw:switch(e=e.type,e){case ow:case Fv:case Rv:case zv:case Nv:case $v:return e;default:switch(e=e&&e.$$typeof,e){case Ov:case Bv:case jv:case Uv:case Dv:return e;default:return t}}case iw:return t}}}function HL(e){return js(e)===Fv}ur.AsyncMode=ow;ur.ConcurrentMode=Fv;ur.ContextConsumer=Ov;ur.ContextProvider=Dv;ur.Element=rw;ur.ForwardRef=Bv;ur.Fragment=Rv;ur.Lazy=jv;ur.Memo=Uv;ur.Portal=iw;ur.Profiler=zv;ur.StrictMode=Nv;ur.Suspense=$v;ur.isAsyncMode=function(e){return HL(e)||js(e)===ow};ur.isConcurrentMode=HL;ur.isContextConsumer=function(e){return js(e)===Ov};ur.isContextProvider=function(e){return js(e)===Dv};ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rw};ur.isForwardRef=function(e){return js(e)===Bv};ur.isFragment=function(e){return js(e)===Rv};ur.isLazy=function(e){return js(e)===jv};ur.isMemo=function(e){return js(e)===Uv};ur.isPortal=function(e){return js(e)===iw};ur.isProfiler=function(e){return js(e)===zv};ur.isStrictMode=function(e){return js(e)===Nv};ur.isSuspense=function(e){return js(e)===$v};ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Rv||e===Fv||e===zv||e===Nv||e===$v||e===U6||typeof e=="object"&&e!==null&&(e.$$typeof===jv||e.$$typeof===Uv||e.$$typeof===Dv||e.$$typeof===Ov||e.$$typeof===Bv||e.$$typeof===V6||e.$$typeof===G6||e.$$typeof===q6||e.$$typeof===j6)};ur.typeOf=js;qL.exports=ur;var H6=qL.exports,WL=H6,W6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Z6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZL={};ZL[WL.ForwardRef]=W6;ZL[WL.Memo]=Z6;var X6=!0;function Y6(e,t,n){var o="";return n.split(" ").forEach(function(u){e[u]!==void 0?t.push(e[u]+";"):o+=u+" "}),o}var XL=function(t,n,o){var u=t.key+"-"+n.name;(o===!1||X6===!1)&&t.registered[u]===void 0&&(t.registered[u]=n.styles)},YL=function(t,n,o){XL(t,n,o);var u=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var m=n;do t.insert(n===m?"."+u:"",m,t.sheet,!0),m=m.next;while(m!==void 0)}};function K6(e){for(var t=0,n,o=0,u=e.length;u>=4;++o,u-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(u){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var J6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Q6=!1,eB=/[A-Z]|^ms/g,tB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,KL=function(t){return t.charCodeAt(1)===45},YE=function(t){return t!=null&&typeof t!="boolean"},G_=DL(function(e){return KL(e)?e:e.replace(eB,"-$&").toLowerCase()}),KE=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(tB,function(o,u,m){return xl={name:u,styles:m,next:xl},u})}return J6[t]!==1&&!KL(t)&&typeof n=="number"&&n!==0?n+"px":n},nB="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function ym(e,t,n){if(n==null)return"";var o=n;if(o.__emotion_styles!==void 0)return o;switch(typeof n){case"boolean":return"";case"object":{var u=n;if(u.anim===1)return xl={name:u.name,styles:u.styles,next:xl},u.name;var m=n;if(m.styles!==void 0){var y=m.next;if(y!==void 0)for(;y!==void 0;)xl={name:y.name,styles:y.styles,next:xl},y=y.next;var d=m.styles+";";return d}return rB(e,t,n)}case"function":{if(e!==void 0){var M=xl,A=n(e);return xl=M,ym(e,t,A)}break}}var O=n;if(t==null)return O;var R=t[O];return R!==void 0?R:O}function rB(e,t,n){var o="";if(Array.isArray(n))for(var u=0;u<n.length;u++)o+=ym(e,t,n[u])+";";else for(var m in n){var y=n[m];if(typeof y!="object"){var d=y;t!=null&&t[d]!==void 0?o+=m+"{"+t[d]+"}":YE(d)&&(o+=G_(m)+":"+KE(m,d)+";")}else{if(m==="NO_COMPONENT_SELECTOR"&&Q6)throw new Error(nB);if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var M=0;M<y.length;M++)YE(y[M])&&(o+=G_(m)+":"+KE(m,y[M])+";");else{var A=ym(e,t,y);switch(m){case"animation":case"animationName":{o+=G_(m)+":"+A+";";break}default:o+=m+"{"+A+"}"}}}}return o}var JE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xl;function sw(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,u="";xl=void 0;var m=e[0];if(m==null||m.raw===void 0)o=!1,u+=ym(n,t,m);else{var y=m;u+=y[0]}for(var d=1;d<e.length;d++)if(u+=ym(n,t,e[d]),o){var M=m;u+=M[d]}JE.lastIndex=0;for(var A="",O;(O=JE.exec(u))!==null;)A+="-"+O[1];var R=K6(u)+A;return{name:R,styles:u,next:xl}}var iB=function(t){return t()},JL=K_.useInsertionEffect?K_.useInsertionEffect:!1,oB=JL||iB,QE=JL||qe.useLayoutEffect,QL=qe.createContext(typeof HTMLElement<"u"?GL({key:"css"}):null),sB=QL.Provider,eP=function(t){return qe.forwardRef(function(n,o){var u=qe.useContext(QL);return t(n,u,o)})},Vv=qe.createContext({}),q_={exports:{}},eI;function tP(){return eI||(eI=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var m in u)({}).hasOwnProperty.call(u,m)&&(n[m]=u[m])}return n},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(q_)),q_.exports}tP();var aB=eP(function(e,t){var n=e.styles,o=sw([n],void 0,qe.useContext(Vv)),u=qe.useRef();return QE(function(){var m=t.key+"-global",y=new t.sheet.constructor({key:m,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),d=!1,M=document.querySelector('style[data-emotion="'+m+" "+o.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),M!==null&&(d=!0,M.setAttribute("data-emotion",m),y.hydrate([M])),u.current=[y,d],function(){y.flush()}},[t]),QE(function(){var m=u.current,y=m[0],d=m[1];if(d){m[1]=!1;return}if(o.next!==void 0&&YL(t,o.next,!0),y.tags.length){var M=y.tags[y.tags.length-1].nextElementSibling;y.before=M,y.flush()}t.insert("",o,y,!1)},[t,o.name]),null});function nP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sw(t)}var Gv=function(){var t=nP.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},lB=h6,uB=function(t){return t!=="theme"},tI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?lB:uB},nI=function(t,n,o){var u;if(n){var m=n.shouldForwardProp;u=t.__emotion_forwardProp&&m?function(y){return t.__emotion_forwardProp(y)&&m(y)}:m}return typeof u!="function"&&o&&(u=t.__emotion_forwardProp),u},cB=!1,hB=function(t){var n=t.cache,o=t.serialized,u=t.isStringTag;return XL(n,o,u),oB(function(){return YL(n,o,u)}),null},dB=function e(t,n){var o=t.__emotion_real===t,u=o&&t.__emotion_base||t,m,y;n!==void 0&&(m=n.label,y=n.target);var d=nI(t,n,o),M=d||tI(u),A=!M("as");return function(){var O=arguments,R=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(m!==void 0&&R.push("label:"+m+";"),O[0]==null||O[0].raw===void 0)R.push.apply(R,O);else{R.push(O[0][0]);for(var N=O.length,V=1;V<N;V++)R.push(O[V],O[0][V])}var H=eP(function(ne,de,Y){var X=A&&ne.as||u,Q="",ie=[],he=ne;if(ne.theme==null){he={};for(var _e in ne)he[_e]=ne[_e];he.theme=qe.useContext(Vv)}typeof ne.className=="string"?Q=Y6(de.registered,ie,ne.className):ne.className!=null&&(Q=ne.className+" ");var pe=sw(R.concat(ie),de.registered,he);Q+=de.key+"-"+pe.name,y!==void 0&&(Q+=" "+y);var Ie=A&&d===void 0?tI(X):M,Le={};for(var $e in ne)A&&$e==="as"||Ie($e)&&(Le[$e]=ne[$e]);return Le.className=Q,Y&&(Le.ref=Y),qe.createElement(qe.Fragment,null,qe.createElement(hB,{cache:de,serialized:pe,isStringTag:typeof X=="string"}),qe.createElement(X,Le))});return H.displayName=m!==void 0?m:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",H.defaultProps=t.defaultProps,H.__emotion_real=H,H.__emotion_base=u,H.__emotion_styles=R,H.__emotion_forwardProp=d,Object.defineProperty(H,"toString",{value:function(){return y===void 0&&cB?"NO_COMPONENT_SELECTOR":"."+y}}),H.withComponent=function(ne,de){return e(ne,tt({},n,de,{shouldForwardProp:nI(H,de,!0)})).apply(void 0,R)},H}},fB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ex=dB.bind();fB.forEach(function(e){Ex[e]=Ex(e)});let Ix;typeof document=="object"&&(Ix=GL({key:"css",prepend:!0}));function pB(e){const{injectFirst:t,children:n}=e;return t&&Ix?mt.jsx(sB,{value:Ix,children:n}):n}function mB(e){return e==null||Object.keys(e).length===0}function gB(e){const{styles:t,defaultTheme:n={}}=e,o=typeof t=="function"?u=>t(mB(u)?n:u):t;return mt.jsx(aB,{styles:o})}function rP(e,t){return Ex(e,t)}const yB=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},vB=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:gB,StyledEngineProvider:pB,ThemeContext:Vv,css:nP,default:rP,internal_processStyles:yB,keyframes:Gv},Symbol.toStringTag,{value:"Module"}));function nc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function iP(e){if(!nc(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=iP(e[n])}),t}function Il(e,t,n={clone:!0}){const o=n.clone?tt({},e):e;return nc(e)&&nc(t)&&Object.keys(t).forEach(u=>{nc(t[u])&&Object.prototype.hasOwnProperty.call(e,u)&&nc(e[u])?o[u]=Il(e[u],t[u],n):n.clone?o[u]=nc(t[u])?iP(t[u]):t[u]:o[u]=t[u]}),o}const _B=Object.freeze(Object.defineProperty({__proto__:null,default:Il,isPlainObject:nc},Symbol.toStringTag,{value:"Module"})),xB=["values","unit","step"],bB=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>tt({},n,{[o.key]:o.val}),{})};function oP(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,u=tr(e,xB),m=bB(t),y=Object.keys(m);function d(N){return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${n})`}function M(N){return`@media (max-width:${(typeof t[N]=="number"?t[N]:N)-o/100}${n})`}function A(N,V){const H=y.indexOf(V);return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${n}) and (max-width:${(H!==-1&&typeof t[y[H]]=="number"?t[y[H]]:V)-o/100}${n})`}function O(N){return y.indexOf(N)+1<y.length?A(N,y[y.indexOf(N)+1]):d(N)}function R(N){const V=y.indexOf(N);return V===0?d(y[1]):V===y.length-1?M(y[V]):A(N,y[y.indexOf(N)+1]).replace("@media","@media not all and")}return tt({keys:y,values:m,up:d,down:M,between:A,only:O,not:R,unit:n},u)}const wB={borderRadius:4};function Up(e,t){return t?Il(e,t,{clone:!1}):e}const aw={xs:0,sm:600,md:900,lg:1200,xl:1536},rI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${aw[e]}px)`};function fu(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const m=o.breakpoints||rI;return t.reduce((y,d,M)=>(y[m.up(m.keys[M])]=n(t[M]),y),{})}if(typeof t=="object"){const m=o.breakpoints||rI;return Object.keys(t).reduce((y,d)=>{if(Object.keys(m.values||aw).indexOf(d)!==-1){const M=m.up(d);y[M]=n(t[d],d)}else{const M=d;y[M]=t[M]}return y},{})}return n(t)}function kB(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,u)=>{const m=e.up(u);return o[m]={},o},{}))||{}}function SB(e,t){return e.reduce((n,o)=>{const u=n[o];return(!u||Object.keys(u).length===0)&&delete n[o],n},t)}function Fn(e){if(typeof e!="string")throw new Error(pm(7));return e.charAt(0).toUpperCase()+e.slice(1)}const EB=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"}));function qv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((u,m)=>u&&u[m]?u[m]:null,e);if(o!=null)return o}return t.split(".").reduce((o,u)=>o&&o[u]!=null?o[u]:null,e)}function Xy(e,t,n,o=n){let u;return typeof e=="function"?u=e(n):Array.isArray(e)?u=e[n]||o:u=qv(e,n)||o,t&&(u=t(u,o,e)),u}function gi(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:u}=e,m=y=>{if(y[t]==null)return null;const d=y[t],M=y.theme,A=qv(M,o)||{};return fu(y,d,R=>{let N=Xy(A,u,R);return R===N&&typeof R=="string"&&(N=Xy(A,u,`${t}${R==="default"?"":Fn(R)}`,R)),n===!1?N:{[n]:N}})};return m.propTypes={},m.filterProps=[t],m}function IB(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const TB={m:"margin",p:"padding"},CB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},iI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},MB=IB(e=>{if(e.length>2)if(iI[e])e=iI[e];else return[e];const[t,n]=e.split(""),o=TB[t],u=CB[n]||"";return Array.isArray(u)?u.map(m=>o+m):[o+u]}),lw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],uw=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...lw,...uw];function Cm(e,t,n,o){var u;const m=(u=qv(e,t,!1))!=null?u:n;return typeof m=="number"?y=>typeof y=="string"?y:m*y:Array.isArray(m)?y=>typeof y=="string"?y:m[y]:typeof m=="function"?m:()=>{}}function sP(e){return Cm(e,"spacing",8)}function Mm(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),o=e(n);return t>=0?o:typeof o=="number"?-o:`-${o}`}function LB(e,t){return n=>e.reduce((o,u)=>(o[u]=Mm(t,n),o),{})}function PB(e,t,n,o){if(t.indexOf(n)===-1)return null;const u=MB(n),m=LB(u,o),y=e[n];return fu(e,y,m)}function aP(e,t){const n=sP(e.theme);return Object.keys(e).map(o=>PB(e,t,o,n)).reduce(Up,{})}function ii(e){return aP(e,lw)}ii.propTypes={};ii.filterProps=lw;function oi(e){return aP(e,uw)}oi.propTypes={};oi.filterProps=uw;function AB(e=8){if(e.mui)return e;const t=sP({spacing:e}),n=(...o)=>(o.length===0?[1]:o).map(m=>{const y=t(m);return typeof y=="number"?`${y}px`:y}).join(" ");return n.mui=!0,n}function Hv(...e){const t=e.reduce((o,u)=>(u.filterProps.forEach(m=>{o[m]=u}),o),{}),n=o=>Object.keys(o).reduce((u,m)=>t[m]?Up(u,t[m](o)):u,{});return n.propTypes={},n.filterProps=e.reduce((o,u)=>o.concat(u.filterProps),[]),n}function da(e){return typeof e!="number"?e:`${e}px solid`}function ba(e,t){return gi({prop:e,themeKey:"borders",transform:t})}const RB=ba("border",da),NB=ba("borderTop",da),zB=ba("borderRight",da),DB=ba("borderBottom",da),OB=ba("borderLeft",da),FB=ba("borderColor"),BB=ba("borderTopColor"),$B=ba("borderRightColor"),UB=ba("borderBottomColor"),jB=ba("borderLeftColor"),VB=ba("outline",da),GB=ba("outlineColor"),Wv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Cm(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:Mm(t,o)});return fu(e,e.borderRadius,n)}return null};Wv.propTypes={};Wv.filterProps=["borderRadius"];Hv(RB,NB,zB,DB,OB,FB,BB,$B,UB,jB,Wv,VB,GB);const Zv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Cm(e.theme,"spacing",8),n=o=>({gap:Mm(t,o)});return fu(e,e.gap,n)}return null};Zv.propTypes={};Zv.filterProps=["gap"];const Xv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Cm(e.theme,"spacing",8),n=o=>({columnGap:Mm(t,o)});return fu(e,e.columnGap,n)}return null};Xv.propTypes={};Xv.filterProps=["columnGap"];const Yv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Cm(e.theme,"spacing",8),n=o=>({rowGap:Mm(t,o)});return fu(e,e.rowGap,n)}return null};Yv.propTypes={};Yv.filterProps=["rowGap"];const qB=gi({prop:"gridColumn"}),HB=gi({prop:"gridRow"}),WB=gi({prop:"gridAutoFlow"}),ZB=gi({prop:"gridAutoColumns"}),XB=gi({prop:"gridAutoRows"}),YB=gi({prop:"gridTemplateColumns"}),KB=gi({prop:"gridTemplateRows"}),JB=gi({prop:"gridTemplateAreas"}),QB=gi({prop:"gridArea"});Hv(Zv,Xv,Yv,qB,HB,WB,ZB,XB,YB,KB,JB,QB);function Zd(e,t){return t==="grey"?t:e}const e8=gi({prop:"color",themeKey:"palette",transform:Zd}),t8=gi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Zd}),n8=gi({prop:"backgroundColor",themeKey:"palette",transform:Zd});Hv(e8,t8,n8);function Ns(e){return e<=1&&e!==0?`${e*100}%`:e}const r8=gi({prop:"width",transform:Ns}),cw=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,u;const m=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[n])||aw[n];return m?((u=e.theme)==null||(u=u.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${m}${e.theme.breakpoints.unit}`}:{maxWidth:m}:{maxWidth:Ns(n)}};return fu(e,e.maxWidth,t)}return null};cw.filterProps=["maxWidth"];const i8=gi({prop:"minWidth",transform:Ns}),o8=gi({prop:"height",transform:Ns}),s8=gi({prop:"maxHeight",transform:Ns}),a8=gi({prop:"minHeight",transform:Ns});gi({prop:"size",cssProperty:"width",transform:Ns});gi({prop:"size",cssProperty:"height",transform:Ns});const l8=gi({prop:"boxSizing"});Hv(r8,cw,i8,o8,s8,a8,l8);const Lm={border:{themeKey:"borders",transform:da},borderTop:{themeKey:"borders",transform:da},borderRight:{themeKey:"borders",transform:da},borderBottom:{themeKey:"borders",transform:da},borderLeft:{themeKey:"borders",transform:da},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:da},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Wv},color:{themeKey:"palette",transform:Zd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Zd},backgroundColor:{themeKey:"palette",transform:Zd},p:{style:oi},pt:{style:oi},pr:{style:oi},pb:{style:oi},pl:{style:oi},px:{style:oi},py:{style:oi},padding:{style:oi},paddingTop:{style:oi},paddingRight:{style:oi},paddingBottom:{style:oi},paddingLeft:{style:oi},paddingX:{style:oi},paddingY:{style:oi},paddingInline:{style:oi},paddingInlineStart:{style:oi},paddingInlineEnd:{style:oi},paddingBlock:{style:oi},paddingBlockStart:{style:oi},paddingBlockEnd:{style:oi},m:{style:ii},mt:{style:ii},mr:{style:ii},mb:{style:ii},ml:{style:ii},mx:{style:ii},my:{style:ii},margin:{style:ii},marginTop:{style:ii},marginRight:{style:ii},marginBottom:{style:ii},marginLeft:{style:ii},marginX:{style:ii},marginY:{style:ii},marginInline:{style:ii},marginInlineStart:{style:ii},marginInlineEnd:{style:ii},marginBlock:{style:ii},marginBlockStart:{style:ii},marginBlockEnd:{style:ii},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zv},rowGap:{style:Yv},columnGap:{style:Xv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ns},maxWidth:{style:cw},minWidth:{transform:Ns},height:{transform:Ns},maxHeight:{transform:Ns},minHeight:{transform:Ns},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function u8(...e){const t=e.reduce((o,u)=>o.concat(Object.keys(u)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function c8(e,t){return typeof e=="function"?e(t):e}function lP(){function e(n,o,u,m){const y={[n]:o,theme:u},d=m[n];if(!d)return{[n]:o};const{cssProperty:M=n,themeKey:A,transform:O,style:R}=d;if(o==null)return null;if(A==="typography"&&o==="inherit")return{[n]:o};const N=qv(u,A)||{};return R?R(y):fu(y,o,H=>{let ne=Xy(N,O,H);return H===ne&&typeof H=="string"&&(ne=Xy(N,O,`${n}${H==="default"?"":Fn(H)}`,H)),M===!1?ne:{[M]:ne}})}function t(n){var o;const{sx:u,theme:m={}}=n||{};if(!u)return null;const y=(o=m.unstable_sxConfig)!=null?o:Lm;function d(M){let A=M;if(typeof M=="function")A=M(m);else if(typeof M!="object")return M;if(!A)return null;const O=kB(m.breakpoints),R=Object.keys(O);let N=O;return Object.keys(A).forEach(V=>{const H=c8(A[V],m);if(H!=null)if(typeof H=="object")if(y[V])N=Up(N,e(V,H,m,y));else{const ne=fu({theme:m},H,de=>({[V]:de}));u8(ne,H)?N[V]=t({sx:H,theme:m}):N=Up(N,ne)}else N=Up(N,e(V,H,m,y))}),SB(R,N)}return Array.isArray(u)?u.map(d):d(u)}return t}const Pm=lP();Pm.filterProps=["sx"];function uP(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const h8=["breakpoints","palette","spacing","shape"];function hw(e={},...t){const{breakpoints:n={},palette:o={},spacing:u,shape:m={}}=e,y=tr(e,h8),d=oP(n),M=AB(u);let A=Il({breakpoints:d,direction:"ltr",components:{},palette:tt({mode:"light"},o),spacing:M,shape:tt({},wB,m)},y);return A.applyStyles=uP,A=t.reduce((O,R)=>Il(O,R),A),A.unstable_sxConfig=tt({},Lm,y==null?void 0:y.unstable_sxConfig),A.unstable_sx=function(R){return Pm({sx:R,theme:this})},A}const d8=Object.freeze(Object.defineProperty({__proto__:null,default:hw,private_createBreakpoints:oP,unstable_applyStyles:uP},Symbol.toStringTag,{value:"Module"}));function f8(e){return Object.keys(e).length===0}function p8(e=null){const t=qe.useContext(Vv);return!t||f8(t)?e:t}const m8=hw();function cP(e=m8){return p8(e)}const g8=["sx"],y8=e=>{var t,n;const o={systemProps:{},otherProps:{}},u=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Lm;return Object.keys(e).forEach(m=>{u[m]?o.systemProps[m]=e[m]:o.otherProps[m]=e[m]}),o};function dw(e){const{sx:t}=e,n=tr(e,g8),{systemProps:o,otherProps:u}=y8(n);let m;return Array.isArray(t)?m=[o,...t]:typeof t=="function"?m=(...y)=>{const d=t(...y);return nc(d)?tt({},o,d):o}:m=tt({},o,t),tt({},u,{sx:m})}const v8=Object.freeze(Object.defineProperty({__proto__:null,default:Pm,extendSxProp:dw,unstable_createStyleFunctionSx:lP,unstable_defaultSxConfig:Lm},Symbol.toStringTag,{value:"Module"})),oI=e=>e,_8=()=>{let e=oI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=oI}}},fw=_8();function hP(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=hP(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function $n(){for(var e,t,n=0,o="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=hP(e))&&(o&&(o+=" "),o+=t);return o}const x8=["className","component"];function b8(e={}){const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:u}=e,m=rP("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(Pm);return qe.forwardRef(function(M,A){const O=cP(n),R=dw(M),{className:N,component:V="div"}=R,H=tr(R,x8);return mt.jsx(m,tt({as:V,ref:A,className:$n(N,u?u(o):o),theme:t&&O[t]||O},H))})}const w8={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Do(e,t,n="Mui"){const o=w8[t];return o?`${n}-${o}`:`${fw.generate(e)}-${t}`}function Ji(e,t,n="Mui"){const o={};return t.forEach(u=>{o[u]=Do(e,u,n)}),o}var dP={exports:{}},cr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw=Symbol.for("react.element"),mw=Symbol.for("react.portal"),Kv=Symbol.for("react.fragment"),Jv=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),e0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),k8=Symbol.for("react.server_context"),n0=Symbol.for("react.forward_ref"),r0=Symbol.for("react.suspense"),i0=Symbol.for("react.suspense_list"),o0=Symbol.for("react.memo"),s0=Symbol.for("react.lazy"),S8=Symbol.for("react.offscreen"),fP;fP=Symbol.for("react.module.reference");function wa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pw:switch(e=e.type,e){case Kv:case Qv:case Jv:case r0:case i0:return e;default:switch(e=e&&e.$$typeof,e){case k8:case t0:case n0:case s0:case o0:case e0:return e;default:return t}}case mw:return t}}}cr.ContextConsumer=t0;cr.ContextProvider=e0;cr.Element=pw;cr.ForwardRef=n0;cr.Fragment=Kv;cr.Lazy=s0;cr.Memo=o0;cr.Portal=mw;cr.Profiler=Qv;cr.StrictMode=Jv;cr.Suspense=r0;cr.SuspenseList=i0;cr.isAsyncMode=function(){return!1};cr.isConcurrentMode=function(){return!1};cr.isContextConsumer=function(e){return wa(e)===t0};cr.isContextProvider=function(e){return wa(e)===e0};cr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pw};cr.isForwardRef=function(e){return wa(e)===n0};cr.isFragment=function(e){return wa(e)===Kv};cr.isLazy=function(e){return wa(e)===s0};cr.isMemo=function(e){return wa(e)===o0};cr.isPortal=function(e){return wa(e)===mw};cr.isProfiler=function(e){return wa(e)===Qv};cr.isStrictMode=function(e){return wa(e)===Jv};cr.isSuspense=function(e){return wa(e)===r0};cr.isSuspenseList=function(e){return wa(e)===i0};cr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kv||e===Qv||e===Jv||e===r0||e===i0||e===S8||typeof e=="object"&&e!==null&&(e.$$typeof===s0||e.$$typeof===o0||e.$$typeof===e0||e.$$typeof===t0||e.$$typeof===n0||e.$$typeof===fP||e.getModuleId!==void 0)};cr.typeOf=wa;dP.exports=cr;var sI=dP.exports;const E8=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function pP(e){const t=`${e}`.match(E8);return t&&t[1]||""}function mP(e,t=""){return e.displayName||e.name||pP(e)||t}function aI(e,t,n){const o=mP(t);return e.displayName||(o!==""?`${n}(${o})`:n)}function I8(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return mP(e,"Component");if(typeof e=="object")switch(e.$$typeof){case sI.ForwardRef:return aI(e,e.render,"ForwardRef");case sI.Memo:return aI(e,e.type,"memo");default:return}}}const T8=Object.freeze(Object.defineProperty({__proto__:null,default:I8,getFunctionName:pP},Symbol.toStringTag,{value:"Module"}));function Yy(e,t){const n=tt({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))n[o]=tt({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const u=e[o]||{},m=t[o];n[o]={},!m||!Object.keys(m)?n[o]=u:!u||!Object.keys(u)?n[o]=m:(n[o]=tt({},m),Object.keys(u).forEach(y=>{n[o][y]=Yy(u[y],m[y])}))}else n[o]===void 0&&(n[o]=e[o])}),n}const vm=typeof window<"u"?qe.useLayoutEffect:qe.useEffect;function C8(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const M8=Object.freeze(Object.defineProperty({__proto__:null,default:C8},Symbol.toStringTag,{value:"Module"}));function Tx(...e){return e.reduce((t,n)=>n==null?t:function(...u){t.apply(this,u),n.apply(this,u)},()=>{})}function gP(e,t=166){let n;function o(...u){const m=()=>{e.apply(this,u)};clearTimeout(n),n=setTimeout(m,t)}return o.clear=()=>{clearTimeout(n)},o}function L8(e,t){return()=>null}function yP(e,t){var n,o;return qe.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function su(e){return e&&e.ownerDocument||document}function pf(e){return su(e).defaultView||window}function P8(e,t){return()=>null}function Ky(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let lI=0;function A8(e){const[t,n]=qe.useState(e),o=e||t;return qe.useEffect(()=>{t==null&&(lI+=1,n(`mui-${lI}`))},[t]),o}const uI=K_.useId;function R8(e){if(uI!==void 0){const t=uI();return e??t}return A8(e)}function N8(e,t,n,o,u){return null}function z8({controlled:e,default:t,name:n,state:o="value"}){const{current:u}=qe.useRef(e!==void 0),[m,y]=qe.useState(t),d=u?e:m,M=qe.useCallback(A=>{u||y(A)},[]);return[d,M]}function fh(e){const t=qe.useRef(e);return vm(()=>{t.current=e}),qe.useRef((...n)=>(0,t.current)(...n)).current}function Ml(...e){return qe.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Ky(n,t)})},e)}const cI={};function D8(e,t){const n=qe.useRef(cI);return n.current===cI&&(n.current=e(t)),n}const O8=[];function F8(e){qe.useEffect(e,O8)}class a0{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new a0}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function B8(){const e=D8(a0.create).current;return F8(e.disposeEffect),e}let l0=!0,Cx=!1;const $8=new a0,U8={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function j8(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&U8[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function V8(e){e.metaKey||e.altKey||e.ctrlKey||(l0=!0)}function H_(){l0=!1}function G8(){this.visibilityState==="hidden"&&Cx&&(l0=!0)}function q8(e){e.addEventListener("keydown",V8,!0),e.addEventListener("mousedown",H_,!0),e.addEventListener("pointerdown",H_,!0),e.addEventListener("touchstart",H_,!0),e.addEventListener("visibilitychange",G8,!0)}function H8(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return l0||j8(t)}function vP(){const e=qe.useCallback(u=>{u!=null&&q8(u.ownerDocument)},[]),t=qe.useRef(!1);function n(){return t.current?(Cx=!0,$8.start(100,()=>{Cx=!1}),t.current=!1,!0):!1}function o(u){return H8(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:n,ref:e}}function W8(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function ns(e,t,n=void 0){const o={};return Object.keys(e).forEach(u=>{o[u]=e[u].reduce((m,y)=>{if(y){const d=t(y);d!==""&&m.push(d),n&&n[y]&&m.push(n[y])}return m},[]).join(" ")}),o}function Mx(e){return typeof e=="string"}function Z8(e,t,n){return e===void 0||Mx(e)?t:tt({},t,{ownerState:tt({},t.ownerState,n)})}function _P(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function hI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function X8(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:u,className:m}=e;if(!t){const V=$n(n==null?void 0:n.className,m,u==null?void 0:u.className,o==null?void 0:o.className),H=tt({},n==null?void 0:n.style,u==null?void 0:u.style,o==null?void 0:o.style),ne=tt({},n,u,o);return V.length>0&&(ne.className=V),Object.keys(H).length>0&&(ne.style=H),{props:ne,internalRef:void 0}}const y=_P(tt({},u,o)),d=hI(o),M=hI(u),A=t(y),O=$n(A==null?void 0:A.className,n==null?void 0:n.className,m,u==null?void 0:u.className,o==null?void 0:o.className),R=tt({},A==null?void 0:A.style,n==null?void 0:n.style,u==null?void 0:u.style,o==null?void 0:o.style),N=tt({},A,n,M,d);return O.length>0&&(N.className=O),Object.keys(R).length>0&&(N.style=R),{props:N,internalRef:A.ref}}function Y8(e,t,n){return typeof e=="function"?e(t,n):e}const K8=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function dI(e){var t;const{elementType:n,externalSlotProps:o,ownerState:u,skipResolvingSlotProps:m=!1}=e,y=tr(e,K8),d=m?{}:Y8(o,u),{props:M,internalRef:A}=X8(tt({},y,{externalSlotProps:d})),O=Ml(A,d==null?void 0:d.ref,(t=e.additionalProps)==null?void 0:t.ref);return Z8(n,tt({},M,{ref:O}),u)}const J8=qe.createContext(),Q8=()=>{const e=qe.useContext(J8);return e??!1},e$=qe.createContext(void 0);function t$(e){const{theme:t,name:n,props:o}=e;if(!t||!t.components||!t.components[n])return o;const u=t.components[n];return u.defaultProps?Yy(u.defaultProps,o):!u.styleOverrides&&!u.variants?Yy(u,o):o}function n$({props:e,name:t}){const n=qe.useContext(e$);return t$({props:e,name:t,theme:{components:n}})}function r$(e,t){return tt({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var yi={},xP={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(xP);var Am=xP.exports;const i$=pu(u6),o$=pu(M8);var bP=Am;Object.defineProperty(yi,"__esModule",{value:!0});var ma=yi.alpha=EP;yi.blend=v$;yi.colorChannel=void 0;var s$=yi.darken=yw;yi.decomposeColor=_a;yi.emphasize=IP;var a$=yi.getContrastRatio=f$;yi.getLuminance=Jy;yi.hexToRgb=wP;yi.hslToRgb=SP;var l$=yi.lighten=vw;yi.private_safeAlpha=p$;yi.private_safeColorChannel=void 0;yi.private_safeDarken=m$;yi.private_safeEmphasize=y$;yi.private_safeLighten=g$;yi.recomposeColor=mf;yi.rgbToHex=d$;var fI=bP(i$),u$=bP(o$);function gw(e,t=0,n=1){return(0,u$.default)(e,t,n)}function wP(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,u)=>u<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function c$(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function _a(e){if(e.type)return e;if(e.charAt(0)==="#")return _a(wP(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,fI.default)(9,e));let o=e.substring(t+1,e.length-1),u;if(n==="color"){if(o=o.split(" "),u=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(u)===-1)throw new Error((0,fI.default)(10,u))}else o=o.split(",");return o=o.map(m=>parseFloat(m)),{type:n,values:o,colorSpace:u}}const kP=e=>{const t=_a(e);return t.values.slice(0,3).map((n,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${n}%`:n).join(" ")};yi.colorChannel=kP;const h$=(e,t)=>{try{return kP(e)}catch{return e}};yi.private_safeColorChannel=h$;function mf(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((u,m)=>m<3?parseInt(u,10):u):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function d$(e){if(e.indexOf("#")===0)return e;const{values:t}=_a(e);return`#${t.map((n,o)=>c$(o===3?Math.round(255*n):n)).join("")}`}function SP(e){e=_a(e);const{values:t}=e,n=t[0],o=t[1]/100,u=t[2]/100,m=o*Math.min(u,1-u),y=(A,O=(A+n/30)%12)=>u-m*Math.max(Math.min(O-3,9-O,1),-1);let d="rgb";const M=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(d+="a",M.push(t[3])),mf({type:d,values:M})}function Jy(e){e=_a(e);let t=e.type==="hsl"||e.type==="hsla"?_a(SP(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f$(e,t){const n=Jy(e),o=Jy(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function EP(e,t){return e=_a(e),t=gw(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,mf(e)}function p$(e,t,n){try{return EP(e,t)}catch{return e}}function yw(e,t){if(e=_a(e),t=gw(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return mf(e)}function m$(e,t,n){try{return yw(e,t)}catch{return e}}function vw(e,t){if(e=_a(e),t=gw(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return mf(e)}function g$(e,t,n){try{return vw(e,t)}catch{return e}}function IP(e,t=.15){return Jy(e)>.5?yw(e,t):vw(e,t)}function y$(e,t,n){try{return IP(e,t)}catch{return e}}function v$(e,t,n,o=1){const u=(M,A)=>Math.round((M**(1/o)*(1-n)+A**(1/o)*n)**o),m=_a(e),y=_a(t),d=[u(m.values[0],y.values[0]),u(m.values[1],y.values[1]),u(m.values[2],y.values[2])];return mf({type:"rgb",values:d})}const _$=["mode","contrastThreshold","tonalOffset"],pI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:fm.white,default:fm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},W_={text:{primary:fm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:fm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function mI(e,t,n,o){const u=o.light||o,m=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=l$(e.main,u):t==="dark"&&(e.dark=s$(e.main,m)))}function x$(e="light"){return e==="dark"?{main:md[200],light:md[50],dark:md[400]}:{main:md[700],light:md[400],dark:md[800]}}function b$(e="light"){return e==="dark"?{main:pd[200],light:pd[50],dark:pd[400]}:{main:pd[500],light:pd[300],dark:pd[700]}}function w$(e="light"){return e==="dark"?{main:fd[500],light:fd[300],dark:fd[700]}:{main:fd[700],light:fd[400],dark:fd[800]}}function k$(e="light"){return e==="dark"?{main:gd[400],light:gd[300],dark:gd[700]}:{main:gd[700],light:gd[500],dark:gd[900]}}function S$(e="light"){return e==="dark"?{main:yd[400],light:yd[300],dark:yd[700]}:{main:yd[800],light:yd[500],dark:yd[900]}}function E$(e="light"){return e==="dark"?{main:vp[400],light:vp[300],dark:vp[700]}:{main:"#ed6c02",light:vp[500],dark:vp[900]}}function I$(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,u=tr(e,_$),m=e.primary||x$(t),y=e.secondary||b$(t),d=e.error||w$(t),M=e.info||k$(t),A=e.success||S$(t),O=e.warning||E$(t);function R(ne){return a$(ne,W_.text.primary)>=n?W_.text.primary:pI.text.primary}const N=({color:ne,name:de,mainShade:Y=500,lightShade:X=300,darkShade:Q=700})=>{if(ne=tt({},ne),!ne.main&&ne[Y]&&(ne.main=ne[Y]),!ne.hasOwnProperty("main"))throw new Error(pm(11,de?` (${de})`:"",Y));if(typeof ne.main!="string")throw new Error(pm(12,de?` (${de})`:"",JSON.stringify(ne.main)));return mI(ne,"light",X,o),mI(ne,"dark",Q,o),ne.contrastText||(ne.contrastText=R(ne.main)),ne},V={dark:W_,light:pI};return Il(tt({common:tt({},fm),mode:t,primary:N({color:m,name:"primary"}),secondary:N({color:y,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:d,name:"error"}),warning:N({color:O,name:"warning"}),info:N({color:M,name:"info"}),success:N({color:A,name:"success"}),grey:l6,contrastThreshold:n,getContrastText:R,augmentColor:N,tonalOffset:o},V[t]),u)}const T$=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function C$(e){return Math.round(e*1e5)/1e5}const gI={textTransform:"uppercase"},yI='"Roboto", "Helvetica", "Arial", sans-serif';function M$(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:o=yI,fontSize:u=14,fontWeightLight:m=300,fontWeightRegular:y=400,fontWeightMedium:d=500,fontWeightBold:M=700,htmlFontSize:A=16,allVariants:O,pxToRem:R}=n,N=tr(n,T$),V=u/14,H=R||(Y=>`${Y/A*V}rem`),ne=(Y,X,Q,ie,he)=>tt({fontFamily:o,fontWeight:Y,fontSize:H(X),lineHeight:Q},o===yI?{letterSpacing:`${C$(ie/X)}em`}:{},he,O),de={h1:ne(m,96,1.167,-1.5),h2:ne(m,60,1.2,-.5),h3:ne(y,48,1.167,0),h4:ne(y,34,1.235,.25),h5:ne(y,24,1.334,0),h6:ne(d,20,1.6,.15),subtitle1:ne(y,16,1.75,.15),subtitle2:ne(d,14,1.57,.1),body1:ne(y,16,1.5,.15),body2:ne(y,14,1.43,.15),button:ne(d,14,1.75,.4,gI),caption:ne(y,12,1.66,.4),overline:ne(y,12,2.66,1,gI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Il(tt({htmlFontSize:A,pxToRem:H,fontFamily:o,fontSize:u,fontWeightLight:m,fontWeightRegular:y,fontWeightMedium:d,fontWeightBold:M},de),N,{clone:!1})}const L$=.2,P$=.14,A$=.12;function jr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${L$})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${P$})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${A$})`].join(",")}const R$=["none",jr(0,2,1,-1,0,1,1,0,0,1,3,0),jr(0,3,1,-2,0,2,2,0,0,1,5,0),jr(0,3,3,-2,0,3,4,0,0,1,8,0),jr(0,2,4,-1,0,4,5,0,0,1,10,0),jr(0,3,5,-1,0,5,8,0,0,1,14,0),jr(0,3,5,-1,0,6,10,0,0,1,18,0),jr(0,4,5,-2,0,7,10,1,0,2,16,1),jr(0,5,5,-3,0,8,10,1,0,3,14,2),jr(0,5,6,-3,0,9,12,1,0,3,16,2),jr(0,6,6,-3,0,10,14,1,0,4,18,3),jr(0,6,7,-4,0,11,15,1,0,4,20,3),jr(0,7,8,-4,0,12,17,2,0,5,22,4),jr(0,7,8,-4,0,13,19,2,0,5,24,4),jr(0,7,9,-4,0,14,21,2,0,5,26,4),jr(0,8,9,-5,0,15,22,2,0,6,28,5),jr(0,8,10,-5,0,16,24,2,0,6,30,5),jr(0,8,11,-5,0,17,26,2,0,6,32,5),jr(0,9,11,-5,0,18,28,2,0,7,34,6),jr(0,9,12,-6,0,19,29,2,0,7,36,6),jr(0,10,13,-6,0,20,31,3,0,8,38,7),jr(0,10,13,-6,0,21,33,3,0,8,40,7),jr(0,10,14,-6,0,22,35,3,0,8,42,7),jr(0,11,14,-7,0,23,36,3,0,9,44,8),jr(0,11,15,-7,0,24,38,3,0,9,46,8)],N$=["duration","easing","delay"],z$={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},D$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vI(e){return`${Math.round(e)}ms`}function O$(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function F$(e){const t=tt({},z$,e.easing),n=tt({},D$,e.duration);return tt({getAutoHeightDuration:O$,create:(u=["all"],m={})=>{const{duration:y=n.standard,easing:d=t.easeInOut,delay:M=0}=m;return tr(m,N$),(Array.isArray(u)?u:[u]).map(A=>`${A} ${typeof y=="string"?y:vI(y)} ${d} ${typeof M=="string"?M:vI(M)}`).join(",")}},e,{easing:t,duration:n})}const B$={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},$$=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function TP(e={},...t){const{mixins:n={},palette:o={},transitions:u={},typography:m={}}=e,y=tr(e,$$);if(e.vars)throw new Error(pm(18));const d=I$(o),M=hw(e);let A=Il(M,{mixins:r$(M.breakpoints,n),palette:d,shadows:R$.slice(),typography:M$(d,m),transitions:F$(u),zIndex:tt({},B$)});return A=Il(A,y),A=t.reduce((O,R)=>Il(O,R),A),A.unstable_sxConfig=tt({},Lm,y==null?void 0:y.unstable_sxConfig),A.unstable_sx=function(R){return Pm({sx:R,theme:this})},A}const CP=TP();function u0(){const e=cP(CP);return e[Qb]||e}var Rm={},Z_={exports:{}},_I;function U$(){return _I||(_I=1,function(e){function t(n,o){if(n==null)return{};var u={};for(var m in n)if({}.hasOwnProperty.call(n,m)){if(o.indexOf(m)>=0)continue;u[m]=n[m]}return u}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Z_)),Z_.exports}const j$=pu(vB),V$=pu(_B),G$=pu(EB),q$=pu(T8),H$=pu(d8),W$=pu(v8);var gf=Am;Object.defineProperty(Rm,"__esModule",{value:!0});var Z$=Rm.default=a7;Rm.shouldForwardProp=fy;Rm.systemDefaultTheme=void 0;var sa=gf(tP()),Lx=gf(U$()),xI=t7(j$),X$=V$;gf(G$);gf(q$);var Y$=gf(H$),K$=gf(W$);const J$=["ownerState"],Q$=["variants"],e7=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function MP(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(MP=function(o){return o?n:t})(e)}function t7(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=MP(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in e)if(m!=="default"&&Object.prototype.hasOwnProperty.call(e,m)){var y=u?Object.getOwnPropertyDescriptor(e,m):null;y&&(y.get||y.set)?Object.defineProperty(o,m,y):o[m]=e[m]}return o.default=e,n&&n.set(e,o),o}function n7(e){return Object.keys(e).length===0}function r7(e){return typeof e=="string"&&e.charCodeAt(0)>96}function fy(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const i7=Rm.systemDefaultTheme=(0,Y$.default)(),o7=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Fg({defaultTheme:e,theme:t,themeId:n}){return n7(t)?e:t[n]||t}function s7(e){return e?(t,n)=>n[e]:null}function py(e,t){let{ownerState:n}=t,o=(0,Lx.default)(t,J$);const u=typeof e=="function"?e((0,sa.default)({ownerState:n},o)):e;if(Array.isArray(u))return u.flatMap(m=>py(m,(0,sa.default)({ownerState:n},o)));if(u&&typeof u=="object"&&Array.isArray(u.variants)){const{variants:m=[]}=u;let d=(0,Lx.default)(u,Q$);return m.forEach(M=>{let A=!0;typeof M.props=="function"?A=M.props((0,sa.default)({ownerState:n},o,n)):Object.keys(M.props).forEach(O=>{(n==null?void 0:n[O])!==M.props[O]&&o[O]!==M.props[O]&&(A=!1)}),A&&(Array.isArray(d)||(d=[d]),d.push(typeof M.style=="function"?M.style((0,sa.default)({ownerState:n},o,n)):M.style))}),d}return u}function a7(e={}){const{themeId:t,defaultTheme:n=i7,rootShouldForwardProp:o=fy,slotShouldForwardProp:u=fy}=e,m=y=>(0,K$.default)((0,sa.default)({},y,{theme:Fg((0,sa.default)({},y,{defaultTheme:n,themeId:t}))}));return m.__mui_systemSx=!0,(y,d={})=>{(0,xI.internal_processStyles)(y,he=>he.filter(_e=>!(_e!=null&&_e.__mui_systemSx)));const{name:M,slot:A,skipVariantsResolver:O,skipSx:R,overridesResolver:N=s7(o7(A))}=d,V=(0,Lx.default)(d,e7),H=O!==void 0?O:A&&A!=="Root"&&A!=="root"||!1,ne=R||!1;let de,Y=fy;A==="Root"||A==="root"?Y=o:A?Y=u:r7(y)&&(Y=void 0);const X=(0,xI.default)(y,(0,sa.default)({shouldForwardProp:Y,label:de},V)),Q=he=>typeof he=="function"&&he.__emotion_real!==he||(0,X$.isPlainObject)(he)?_e=>py(he,(0,sa.default)({},_e,{theme:Fg({theme:_e.theme,defaultTheme:n,themeId:t})})):he,ie=(he,..._e)=>{let pe=Q(he);const Ie=_e?_e.map(Q):[];M&&N&&Ie.push(Ze=>{const et=Fg((0,sa.default)({},Ze,{defaultTheme:n,themeId:t}));if(!et.components||!et.components[M]||!et.components[M].styleOverrides)return null;const at=et.components[M].styleOverrides,Ne={};return Object.entries(at).forEach(([rt,ut])=>{Ne[rt]=py(ut,(0,sa.default)({},Ze,{theme:et}))}),N(Ze,Ne)}),M&&!H&&Ie.push(Ze=>{var et;const at=Fg((0,sa.default)({},Ze,{defaultTheme:n,themeId:t})),Ne=at==null||(et=at.components)==null||(et=et[M])==null?void 0:et.variants;return py({variants:Ne},(0,sa.default)({},Ze,{theme:at}))}),ne||Ie.push(m);const Le=Ie.length-_e.length;if(Array.isArray(he)&&Le>0){const Ze=new Array(Le).fill("");pe=[...he,...Ze],pe.raw=[...he.raw,...Ze]}const $e=X(pe,...Ie);return y.muiName&&($e.muiName=y.muiName),$e};return X.withConfig&&(ie.withConfig=X.withConfig),ie}}function l7(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const _w=e=>l7(e)&&e!=="classes",Ar=Z$({themeId:Qb,defaultTheme:CP,rootShouldForwardProp:_w}),bI=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function Oo(e){return n$(e)}function u7(e){return Do("MuiSvgIcon",e)}Ji("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const c7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],h7=e=>{const{color:t,fontSize:n,classes:o}=e,u={root:["root",t!=="inherit"&&`color${Fn(t)}`,`fontSize${Fn(n)}`]};return ns(u,u7,o)},d7=Ar("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Fn(n.color)}`],t[`fontSize${Fn(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,o,u,m,y,d,M,A,O,R,N,V,H;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(o=n.create)==null?void 0:o.call(n,"fill",{duration:(u=e.transitions)==null||(u=u.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((m=e.typography)==null||(y=m.pxToRem)==null?void 0:y.call(m,20))||"1.25rem",medium:((d=e.typography)==null||(M=d.pxToRem)==null?void 0:M.call(d,24))||"1.5rem",large:((A=e.typography)==null||(O=A.pxToRem)==null?void 0:O.call(A,35))||"2.1875rem"}[t.fontSize],color:(R=(N=(e.vars||e).palette)==null||(N=N[t.color])==null?void 0:N.main)!=null?R:{action:(V=(e.vars||e).palette)==null||(V=V.action)==null?void 0:V.active,disabled:(H=(e.vars||e).palette)==null||(H=H.action)==null?void 0:H.disabled,inherit:void 0}[t.color]}}),Px=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiSvgIcon"}),{children:u,className:m,color:y="inherit",component:d="svg",fontSize:M="medium",htmlColor:A,inheritViewBox:O=!1,titleAccess:R,viewBox:N="0 0 24 24"}=o,V=tr(o,c7),H=qe.isValidElement(u)&&u.type==="svg",ne=tt({},o,{color:y,component:d,fontSize:M,instanceFontSize:t.fontSize,inheritViewBox:O,viewBox:N,hasSvgAsChild:H}),de={};O||(de.viewBox=N);const Y=h7(ne);return mt.jsxs(d7,tt({as:d,className:$n(Y.root,m),focusable:"false",color:A,"aria-hidden":R?void 0:!0,role:R?"img":void 0,ref:n},de,V,H&&u.props,{ownerState:ne,children:[H?u.props.children:u,R?mt.jsx("title",{children:R}):null]}))});Px.muiName="SvgIcon";function f7(e,t){function n(o,u){return mt.jsx(Px,tt({"data-testid":`${t}Icon`,ref:u},o,{children:e}))}return n.muiName=Px.muiName,qe.memo(qe.forwardRef(n))}const p7={configure:e=>{fw.configure(e)}},m7=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Fn,createChainedFunction:Tx,createSvgIcon:f7,debounce:gP,deprecatedPropType:L8,isMuiElement:yP,ownerDocument:su,ownerWindow:pf,requirePropFactory:P8,setRef:Ky,unstable_ClassNameGenerator:p7,unstable_useEnhancedEffect:vm,unstable_useId:R8,unsupportedProp:N8,useControlled:z8,useEventCallback:fh,useForkRef:Ml,useIsFocusVisible:vP},Symbol.toStringTag,{value:"Module"}));function Ax(e,t){return Ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Ax(e,t)}function LP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ax(e,t)}const wI={disabled:!1},Qy=Ba.createContext(null);var g7=function(t){return t.scrollTop},Lp="unmounted",ah="exited",lh="entering",kd="entered",Rx="exiting",Ll=function(e){LP(t,e);function t(o,u){var m;m=e.call(this,o,u)||this;var y=u,d=y&&!y.isMounting?o.enter:o.appear,M;return m.appearStatus=null,o.in?d?(M=ah,m.appearStatus=lh):M=kd:o.unmountOnExit||o.mountOnEnter?M=Lp:M=ah,m.state={status:M},m.nextCallback=null,m}t.getDerivedStateFromProps=function(u,m){var y=u.in;return y&&m.status===Lp?{status:ah}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var m=null;if(u!==this.props){var y=this.state.status;this.props.in?y!==lh&&y!==kd&&(m=lh):(y===lh||y===kd)&&(m=Rx)}this.updateStatus(!1,m)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,m,y,d;return m=y=d=u,u!=null&&typeof u!="number"&&(m=u.exit,y=u.enter,d=u.appear!==void 0?u.appear:y),{exit:m,enter:y,appear:d}},n.updateStatus=function(u,m){if(u===void 0&&(u=!1),m!==null)if(this.cancelNextCallback(),m===lh){if(this.props.unmountOnExit||this.props.mountOnEnter){var y=this.props.nodeRef?this.props.nodeRef.current:Tg.findDOMNode(this);y&&g7(y)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ah&&this.setState({status:Lp})},n.performEnter=function(u){var m=this,y=this.props.enter,d=this.context?this.context.isMounting:u,M=this.props.nodeRef?[d]:[Tg.findDOMNode(this),d],A=M[0],O=M[1],R=this.getTimeouts(),N=d?R.appear:R.enter;if(!u&&!y||wI.disabled){this.safeSetState({status:kd},function(){m.props.onEntered(A)});return}this.props.onEnter(A,O),this.safeSetState({status:lh},function(){m.props.onEntering(A,O),m.onTransitionEnd(N,function(){m.safeSetState({status:kd},function(){m.props.onEntered(A,O)})})})},n.performExit=function(){var u=this,m=this.props.exit,y=this.getTimeouts(),d=this.props.nodeRef?void 0:Tg.findDOMNode(this);if(!m||wI.disabled){this.safeSetState({status:ah},function(){u.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:Rx},function(){u.props.onExiting(d),u.onTransitionEnd(y.exit,function(){u.safeSetState({status:ah},function(){u.props.onExited(d)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,m){m=this.setNextCallback(m),this.setState(u,m)},n.setNextCallback=function(u){var m=this,y=!0;return this.nextCallback=function(d){y&&(y=!1,m.nextCallback=null,u(d))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},n.onTransitionEnd=function(u,m){this.setNextCallback(m);var y=this.props.nodeRef?this.props.nodeRef.current:Tg.findDOMNode(this),d=u==null&&!this.props.addEndListener;if(!y||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var M=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],A=M[0],O=M[1];this.props.addEndListener(A,O)}u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===Lp)return null;var m=this.props,y=m.children;m.in,m.mountOnEnter,m.unmountOnExit,m.appear,m.enter,m.exit,m.timeout,m.addEndListener,m.onEnter,m.onEntering,m.onEntered,m.onExit,m.onExiting,m.onExited,m.nodeRef;var d=tr(m,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ba.createElement(Qy.Provider,{value:null},typeof y=="function"?y(u,d):Ba.cloneElement(Ba.Children.only(y),d))},t}(Ba.Component);Ll.contextType=Qy;Ll.propTypes={};function vd(){}Ll.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vd,onEntering:vd,onEntered:vd,onExit:vd,onExiting:vd,onExited:vd};Ll.UNMOUNTED=Lp;Ll.EXITED=ah;Ll.ENTERING=lh;Ll.ENTERED=kd;Ll.EXITING=Rx;function y7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xw(e,t){var n=function(m){return t&&qe.isValidElement(m)?t(m):m},o=Object.create(null);return e&&qe.Children.map(e,function(u){return u}).forEach(function(u){o[u.key]=n(u)}),o}function v7(e,t){e=e||{},t=t||{};function n(O){return O in t?t[O]:e[O]}var o=Object.create(null),u=[];for(var m in e)m in t?u.length&&(o[m]=u,u=[]):u.push(m);var y,d={};for(var M in t){if(o[M])for(y=0;y<o[M].length;y++){var A=o[M][y];d[o[M][y]]=n(A)}d[M]=n(M)}for(y=0;y<u.length;y++)d[u[y]]=n(u[y]);return d}function ph(e,t,n){return n[t]!=null?n[t]:e.props[t]}function _7(e,t){return xw(e.children,function(n){return qe.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:ph(n,"appear",e),enter:ph(n,"enter",e),exit:ph(n,"exit",e)})})}function x7(e,t,n){var o=xw(e.children),u=v7(t,o);return Object.keys(u).forEach(function(m){var y=u[m];if(qe.isValidElement(y)){var d=m in t,M=m in o,A=t[m],O=qe.isValidElement(A)&&!A.props.in;M&&(!d||O)?u[m]=qe.cloneElement(y,{onExited:n.bind(null,y),in:!0,exit:ph(y,"exit",e),enter:ph(y,"enter",e)}):!M&&d&&!O?u[m]=qe.cloneElement(y,{in:!1}):M&&d&&qe.isValidElement(A)&&(u[m]=qe.cloneElement(y,{onExited:n.bind(null,y),in:A.props.in,exit:ph(y,"exit",e),enter:ph(y,"enter",e)}))}}),u}var b7=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},w7={component:"div",childFactory:function(t){return t}},bw=function(e){LP(t,e);function t(o,u){var m;m=e.call(this,o,u)||this;var y=m.handleExited.bind(y7(m));return m.state={contextValue:{isMounting:!0},handleExited:y,firstRender:!0},m}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(u,m){var y=m.children,d=m.handleExited,M=m.firstRender;return{children:M?_7(u,d):x7(u,y,d),firstRender:!1}},n.handleExited=function(u,m){var y=xw(this.props.children);u.key in y||(u.props.onExited&&u.props.onExited(m),this.mounted&&this.setState(function(d){var M=tt({},d.children);return delete M[u.key],{children:M}}))},n.render=function(){var u=this.props,m=u.component,y=u.childFactory,d=tr(u,["component","childFactory"]),M=this.state.contextValue,A=b7(this.state.children).map(y);return delete d.appear,delete d.enter,delete d.exit,m===null?Ba.createElement(Qy.Provider,{value:M},A):Ba.createElement(Qy.Provider,{value:M},Ba.createElement(m,d,A))},t}(Ba.Component);bw.propTypes={};bw.defaultProps=w7;const PP=e=>e.scrollTop;function ev(e,t){var n,o;const{timeout:u,easing:m,style:y={}}=e;return{duration:(n=y.transitionDuration)!=null?n:typeof u=="number"?u:u[t.mode]||0,easing:(o=y.transitionTimingFunction)!=null?o:typeof m=="object"?m[t.mode]:m,delay:y.transitionDelay}}function k7(e){return Do("MuiPaper",e)}Ji("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const S7=["className","component","elevation","square","variant"],E7=e=>{const{square:t,elevation:n,variant:o,classes:u}=e,m={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return ns(m,k7,u)},I7=Ar("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return tt({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&tt({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${ma("#fff",bI(t.elevation))}, ${ma("#fff",bI(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),AP=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiPaper"}),{className:u,component:m="div",elevation:y=1,square:d=!1,variant:M="elevation"}=o,A=tr(o,S7),O=tt({},o,{component:m,elevation:y,square:d,variant:M}),R=E7(O);return mt.jsx(I7,tt({as:m,ownerState:O,className:$n(R.root,u),ref:n},A))});function T7(e){const{className:t,classes:n,pulsate:o=!1,rippleX:u,rippleY:m,rippleSize:y,in:d,onExited:M,timeout:A}=e,[O,R]=qe.useState(!1),N=$n(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),V={width:y,height:y,top:-(y/2)+m,left:-(y/2)+u},H=$n(n.child,O&&n.childLeaving,o&&n.childPulsate);return!d&&!O&&R(!0),qe.useEffect(()=>{if(!d&&M!=null){const ne=setTimeout(M,A);return()=>{clearTimeout(ne)}}},[M,d,A]),mt.jsx("span",{className:N,style:V,children:mt.jsx("span",{className:H})})}const la=Ji("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),C7=["center","classes","className"];let c0=e=>e,kI,SI,EI,II;const Nx=550,M7=80,L7=Gv(kI||(kI=c0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),P7=Gv(SI||(SI=c0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),A7=Gv(EI||(EI=c0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),R7=Ar("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),N7=Ar(T7,{name:"MuiTouchRipple",slot:"Ripple"})(II||(II=c0`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),la.rippleVisible,L7,Nx,({theme:e})=>e.transitions.easing.easeInOut,la.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,la.child,la.childLeaving,P7,Nx,({theme:e})=>e.transitions.easing.easeInOut,la.childPulsate,A7,({theme:e})=>e.transitions.easing.easeInOut),z7=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiTouchRipple"}),{center:u=!1,classes:m={},className:y}=o,d=tr(o,C7),[M,A]=qe.useState([]),O=qe.useRef(0),R=qe.useRef(null);qe.useEffect(()=>{R.current&&(R.current(),R.current=null)},[M]);const N=qe.useRef(!1),V=B8(),H=qe.useRef(null),ne=qe.useRef(null),de=qe.useCallback(ie=>{const{pulsate:he,rippleX:_e,rippleY:pe,rippleSize:Ie,cb:Le}=ie;A($e=>[...$e,mt.jsx(N7,{classes:{ripple:$n(m.ripple,la.ripple),rippleVisible:$n(m.rippleVisible,la.rippleVisible),ripplePulsate:$n(m.ripplePulsate,la.ripplePulsate),child:$n(m.child,la.child),childLeaving:$n(m.childLeaving,la.childLeaving),childPulsate:$n(m.childPulsate,la.childPulsate)},timeout:Nx,pulsate:he,rippleX:_e,rippleY:pe,rippleSize:Ie},O.current)]),O.current+=1,R.current=Le},[m]),Y=qe.useCallback((ie={},he={},_e=()=>{})=>{const{pulsate:pe=!1,center:Ie=u||he.pulsate,fakeElement:Le=!1}=he;if((ie==null?void 0:ie.type)==="mousedown"&&N.current){N.current=!1;return}(ie==null?void 0:ie.type)==="touchstart"&&(N.current=!0);const $e=Le?null:ne.current,Ze=$e?$e.getBoundingClientRect():{width:0,height:0,left:0,top:0};let et,at,Ne;if(Ie||ie===void 0||ie.clientX===0&&ie.clientY===0||!ie.clientX&&!ie.touches)et=Math.round(Ze.width/2),at=Math.round(Ze.height/2);else{const{clientX:rt,clientY:ut}=ie.touches&&ie.touches.length>0?ie.touches[0]:ie;et=Math.round(rt-Ze.left),at=Math.round(ut-Ze.top)}if(Ie)Ne=Math.sqrt((2*Ze.width**2+Ze.height**2)/3),Ne%2===0&&(Ne+=1);else{const rt=Math.max(Math.abs(($e?$e.clientWidth:0)-et),et)*2+2,ut=Math.max(Math.abs(($e?$e.clientHeight:0)-at),at)*2+2;Ne=Math.sqrt(rt**2+ut**2)}ie!=null&&ie.touches?H.current===null&&(H.current=()=>{de({pulsate:pe,rippleX:et,rippleY:at,rippleSize:Ne,cb:_e})},V.start(M7,()=>{H.current&&(H.current(),H.current=null)})):de({pulsate:pe,rippleX:et,rippleY:at,rippleSize:Ne,cb:_e})},[u,de,V]),X=qe.useCallback(()=>{Y({},{pulsate:!0})},[Y]),Q=qe.useCallback((ie,he)=>{if(V.clear(),(ie==null?void 0:ie.type)==="touchend"&&H.current){H.current(),H.current=null,V.start(0,()=>{Q(ie,he)});return}H.current=null,A(_e=>_e.length>0?_e.slice(1):_e),R.current=he},[V]);return qe.useImperativeHandle(n,()=>({pulsate:X,start:Y,stop:Q}),[X,Y,Q]),mt.jsx(R7,tt({className:$n(la.root,m.root,y),ref:ne},d,{children:mt.jsx(bw,{component:null,exit:!0,children:M})}))});function D7(e){return Do("MuiButtonBase",e)}const O7=Ji("MuiButtonBase",["root","disabled","focusVisible"]),F7=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],B7=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:o,classes:u}=e,y=ns({root:["root",t&&"disabled",n&&"focusVisible"]},D7,u);return n&&o&&(y.root+=` ${o}`),y},$7=Ar("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${O7.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ww=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiButtonBase"}),{action:u,centerRipple:m=!1,children:y,className:d,component:M="button",disabled:A=!1,disableRipple:O=!1,disableTouchRipple:R=!1,focusRipple:N=!1,LinkComponent:V="a",onBlur:H,onClick:ne,onContextMenu:de,onDragLeave:Y,onFocus:X,onFocusVisible:Q,onKeyDown:ie,onKeyUp:he,onMouseDown:_e,onMouseLeave:pe,onMouseUp:Ie,onTouchEnd:Le,onTouchMove:$e,onTouchStart:Ze,tabIndex:et=0,TouchRippleProps:at,touchRippleRef:Ne,type:rt}=o,ut=tr(o,F7),wt=qe.useRef(null),Ge=qe.useRef(null),ct=Ml(Ge,Ne),{isFocusVisibleRef:Je,onFocus:At,onBlur:Ut,ref:Sn}=vP(),[Ct,yn]=qe.useState(!1);A&&Ct&&yn(!1),qe.useImperativeHandle(u,()=>({focusVisible:()=>{yn(!0),wt.current.focus()}}),[]);const[Zn,nr]=qe.useState(!1);qe.useEffect(()=>{nr(!0)},[]);const Be=Zn&&!O&&!A;qe.useEffect(()=>{Ct&&N&&!O&&Zn&&Ge.current.pulsate()},[O,N,Ct,Zn]);function hr(Gt,Kt,jt=R){return fh(eo=>(Kt&&Kt(eo),!jt&&Ge.current&&Ge.current[Gt](eo),!0))}const mn=hr("start",_e),Dt=hr("stop",de),xe=hr("stop",Y),Vt=hr("stop",Ie),gn=hr("stop",Gt=>{Ct&&Gt.preventDefault(),pe&&pe(Gt)}),Jt=hr("start",Ze),Ve=hr("stop",Le),Er=hr("stop",$e),Ln=hr("stop",Gt=>{Ut(Gt),Je.current===!1&&yn(!1),H&&H(Gt)},!1),Xe=fh(Gt=>{wt.current||(wt.current=Gt.currentTarget),At(Gt),Je.current===!0&&(yn(!0),Q&&Q(Gt)),X&&X(Gt)}),En=()=>{const Gt=wt.current;return M&&M!=="button"&&!(Gt.tagName==="A"&&Gt.href)},li=qe.useRef(!1),kr=fh(Gt=>{N&&!li.current&&Ct&&Ge.current&&Gt.key===" "&&(li.current=!0,Ge.current.stop(Gt,()=>{Ge.current.start(Gt)})),Gt.target===Gt.currentTarget&&En()&&Gt.key===" "&&Gt.preventDefault(),ie&&ie(Gt),Gt.target===Gt.currentTarget&&En()&&Gt.key==="Enter"&&!A&&(Gt.preventDefault(),ne&&ne(Gt))}),vi=fh(Gt=>{N&&Gt.key===" "&&Ge.current&&Ct&&!Gt.defaultPrevented&&(li.current=!1,Ge.current.stop(Gt,()=>{Ge.current.pulsate(Gt)})),he&&he(Gt),ne&&Gt.target===Gt.currentTarget&&En()&&Gt.key===" "&&!Gt.defaultPrevented&&ne(Gt)});let Wt=M;Wt==="button"&&(ut.href||ut.to)&&(Wt=V);const dr={};Wt==="button"?(dr.type=rt===void 0?"button":rt,dr.disabled=A):(!ut.href&&!ut.to&&(dr.role="button"),A&&(dr["aria-disabled"]=A));const qr=Ml(n,Sn,wt),Qi=tt({},o,{centerRipple:m,component:M,disabled:A,disableRipple:O,disableTouchRipple:R,focusRipple:N,tabIndex:et,focusVisible:Ct}),He=B7(Qi);return mt.jsxs($7,tt({as:Wt,className:$n(He.root,d),ownerState:Qi,onBlur:Ln,onClick:ne,onContextMenu:Dt,onFocus:Xe,onKeyDown:kr,onKeyUp:vi,onMouseDown:mn,onMouseLeave:gn,onMouseUp:Vt,onDragLeave:xe,onTouchEnd:Ve,onTouchMove:Er,onTouchStart:Jt,ref:qr,tabIndex:A?-1:et,type:rt},dr,ut,{children:[y,Be?mt.jsx(z7,tt({ref:ct,center:m},at)):null]}))});function U7(e){return Do("MuiIconButton",e)}const j7=Ji("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),V7=["edge","children","className","color","disabled","disableFocusRipple","size"],G7=e=>{const{classes:t,disabled:n,color:o,edge:u,size:m}=e,y={root:["root",n&&"disabled",o!=="default"&&`color${Fn(o)}`,u&&`edge${Fn(u)}`,`size${Fn(m)}`]};return ns(y,U7,t)},q7=Ar(ww,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Fn(n.color)}`],n.edge&&t[`edge${Fn(n.edge)}`],t[`size${Fn(n.size)}`]]}})(({theme:e,ownerState:t})=>tt({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ma(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const o=(n=(e.vars||e).palette)==null?void 0:n[t.color];return tt({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&tt({color:o==null?void 0:o.main},!t.disableRipple&&{"&:hover":tt({},o&&{backgroundColor:e.vars?`rgba(${o.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ma(o.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${j7.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),RP=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiIconButton"}),{edge:u=!1,children:m,className:y,color:d="default",disabled:M=!1,disableFocusRipple:A=!1,size:O="medium"}=o,R=tr(o,V7),N=tt({},o,{edge:u,color:d,disabled:M,disableFocusRipple:A,size:O}),V=G7(N);return mt.jsx(q7,tt({className:$n(V.root,y),centerRipple:!0,focusRipple:!A,disabled:M,ref:n},R,{ownerState:N,children:m}))});function H7(e){return Do("MuiTypography",e)}Ji("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const W7=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Z7=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:u,variant:m,classes:y}=e,d={root:["root",m,e.align!=="inherit"&&`align${Fn(t)}`,n&&"gutterBottom",o&&"noWrap",u&&"paragraph"]};return ns(d,H7,y)},X7=Ar("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Fn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>tt({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),TI={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Y7={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},K7=e=>Y7[e]||e,ua=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiTypography"}),u=K7(o.color),m=dw(tt({},o,{color:u})),{align:y="inherit",className:d,component:M,gutterBottom:A=!1,noWrap:O=!1,paragraph:R=!1,variant:N="body1",variantMapping:V=TI}=m,H=tr(m,W7),ne=tt({},m,{align:y,color:u,className:d,component:M,gutterBottom:A,noWrap:O,paragraph:R,variant:N,variantMapping:V}),de=M||(R?"p":V[N]||TI[N])||"span",Y=Z7(ne);return mt.jsx(X7,tt({as:de,ref:n,ownerState:ne,className:$n(Y.root,d)},H))});function J7(e){return Do("MuiAppBar",e)}Ji("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Q7=["className","color","enableColorOnDark","position"],eU=e=>{const{color:t,position:n,classes:o}=e,u={root:["root",`color${Fn(t)}`,`position${Fn(n)}`]};return ns(u,J7,o)},Bg=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,tU=Ar(AP,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Fn(n.position)}`],t[`color${Fn(n.color)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return tt({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&tt({},t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&tt({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&tt({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:Bg(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:Bg(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:Bg(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:Bg(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},!["inherit","transparent"].includes(t.color)&&{backgroundColor:"var(--AppBar-background)"},{color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),nU=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiAppBar"}),{className:u,color:m="primary",enableColorOnDark:y=!1,position:d="fixed"}=o,M=tr(o,Q7),A=tt({},o,{color:m,position:d,enableColorOnDark:y}),O=eU(A);return mt.jsx(tU,tt({square:!0,component:"header",ownerState:A,elevation:4,className:$n(O.root,u,d==="fixed"&&"mui-fixed"),ref:n},M))});function rU(e){return typeof e=="function"?e():e}const iU=qe.forwardRef(function(t,n){const{children:o,container:u,disablePortal:m=!1}=t,[y,d]=qe.useState(null),M=Ml(qe.isValidElement(o)?o.ref:null,n);if(vm(()=>{m||d(rU(u)||document.body)},[u,m]),vm(()=>{if(y&&!m)return Ky(n,y),()=>{Ky(n,null)}},[n,y,m]),m){if(qe.isValidElement(o)){const A={ref:M};return qe.cloneElement(o,A)}return mt.jsx(qe.Fragment,{children:o})}return mt.jsx(qe.Fragment,{children:y&&Mb.createPortal(o,y)})}),oU=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],sU={entering:{opacity:1},entered:{opacity:1}},aU=qe.forwardRef(function(t,n){const o=u0(),u={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:m,appear:y=!0,children:d,easing:M,in:A,onEnter:O,onEntered:R,onEntering:N,onExit:V,onExited:H,onExiting:ne,style:de,timeout:Y=u,TransitionComponent:X=Ll}=t,Q=tr(t,oU),ie=qe.useRef(null),he=Ml(ie,d.ref,n),_e=Ne=>rt=>{if(Ne){const ut=ie.current;rt===void 0?Ne(ut):Ne(ut,rt)}},pe=_e(N),Ie=_e((Ne,rt)=>{PP(Ne);const ut=ev({style:de,timeout:Y,easing:M},{mode:"enter"});Ne.style.webkitTransition=o.transitions.create("opacity",ut),Ne.style.transition=o.transitions.create("opacity",ut),O&&O(Ne,rt)}),Le=_e(R),$e=_e(ne),Ze=_e(Ne=>{const rt=ev({style:de,timeout:Y,easing:M},{mode:"exit"});Ne.style.webkitTransition=o.transitions.create("opacity",rt),Ne.style.transition=o.transitions.create("opacity",rt),V&&V(Ne)}),et=_e(H),at=Ne=>{m&&m(ie.current,Ne)};return mt.jsx(X,tt({appear:y,in:A,nodeRef:ie,onEnter:Ie,onEntered:Le,onEntering:pe,onExit:Ze,onExited:et,onExiting:$e,addEndListener:at,timeout:Y},Q,{children:(Ne,rt)=>qe.cloneElement(d,tt({style:tt({opacity:0,visibility:Ne==="exited"&&!A?"hidden":void 0},sU[Ne],de,d.props.style),ref:he},rt))}))});function lU(e){return Do("MuiBackdrop",e)}Ji("MuiBackdrop",["root","invisible"]);const uU=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],cU=e=>{const{classes:t,invisible:n}=e;return ns({root:["root",n&&"invisible"]},lU,t)},hU=Ar("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>tt({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),dU=qe.forwardRef(function(t,n){var o,u,m;const y=Oo({props:t,name:"MuiBackdrop"}),{children:d,className:M,component:A="div",components:O={},componentsProps:R={},invisible:N=!1,open:V,slotProps:H={},slots:ne={},TransitionComponent:de=aU,transitionDuration:Y}=y,X=tr(y,uU),Q=tt({},y,{component:A,invisible:N}),ie=cU(Q),he=(o=H.root)!=null?o:R.root;return mt.jsx(de,tt({in:V,timeout:Y},X,{children:mt.jsx(hU,tt({"aria-hidden":!0},he,{as:(u=(m=ne.root)!=null?m:O.Root)!=null?u:A,className:$n(ie.root,M,he==null?void 0:he.className),ownerState:tt({},Q,he==null?void 0:he.ownerState),classes:ie,ref:n,children:d}))}))}),fU=Ji("MuiBox",["root"]),pU=TP(),mU=b8({themeId:Qb,defaultTheme:pU,defaultClassName:fU.root,generateClassName:fw.generate});function gU(e){return Do("MuiButton",e)}const $g=Ji("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),yU=qe.createContext({}),vU=qe.createContext(void 0),_U=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],xU=e=>{const{color:t,disableElevation:n,fullWidth:o,size:u,variant:m,classes:y}=e,d={root:["root",m,`${m}${Fn(t)}`,`size${Fn(u)}`,`${m}Size${Fn(u)}`,`color${Fn(t)}`,n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Fn(u)}`],endIcon:["icon","endIcon",`iconSize${Fn(u)}`]},M=ns(d,gU,y);return tt({},y,M)},NP=e=>tt({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),bU=Ar(ww,{shouldForwardProp:e=>_w(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Fn(n.color)}`],t[`size${Fn(n.size)}`],t[`${n.variant}Size${Fn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,o;const u=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],m=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return tt({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":tt({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ma(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ma(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ma(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:m,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":tt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${$g.focusVisible}`]:tt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${$g.disabled}`]:tt({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${ma(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(o=e.palette).getContrastText)==null?void 0:n.call(o,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:u,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${$g.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${$g.disabled}`]:{boxShadow:"none"}}),wU=Ar("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Fn(n.size)}`]]}})(({ownerState:e})=>tt({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},NP(e))),kU=Ar("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Fn(n.size)}`]]}})(({ownerState:e})=>tt({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},NP(e))),SU=qe.forwardRef(function(t,n){const o=qe.useContext(yU),u=qe.useContext(vU),m=Yy(o,t),y=Oo({props:m,name:"MuiButton"}),{children:d,color:M="primary",component:A="button",className:O,disabled:R=!1,disableElevation:N=!1,disableFocusRipple:V=!1,endIcon:H,focusVisibleClassName:ne,fullWidth:de=!1,size:Y="medium",startIcon:X,type:Q,variant:ie="text"}=y,he=tr(y,_U),_e=tt({},y,{color:M,component:A,disabled:R,disableElevation:N,disableFocusRipple:V,fullWidth:de,size:Y,type:Q,variant:ie}),pe=xU(_e),Ie=X&&mt.jsx(wU,{className:pe.startIcon,ownerState:_e,children:X}),Le=H&&mt.jsx(kU,{className:pe.endIcon,ownerState:_e,children:H}),$e=u||"";return mt.jsxs(bU,tt({ownerState:_e,className:$n(o.className,pe.root,O,$e),component:A,disabled:R,focusRipple:!V,focusVisibleClassName:$n(pe.focusVisible,ne),ref:n,type:Q},he,{classes:pe,children:[Ie,d,Le]}))});function EU(e){const t=su(e);return t.body===e?pf(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function jp(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function CI(e){return parseInt(pf(e).getComputedStyle(e).paddingRight,10)||0}function IU(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||o}function MI(e,t,n,o,u){const m=[t,n,...o];[].forEach.call(e.children,y=>{const d=m.indexOf(y)===-1,M=!IU(y);d&&M&&jp(y,u)})}function X_(e,t){let n=-1;return e.some((o,u)=>t(o)?(n=u,!0):!1),n}function TU(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(EU(o)){const y=W8(su(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${CI(o)+y}px`;const d=su(o).querySelectorAll(".mui-fixed");[].forEach.call(d,M=>{n.push({value:M.style.paddingRight,property:"padding-right",el:M}),M.style.paddingRight=`${CI(M)+y}px`})}let m;if(o.parentNode instanceof DocumentFragment)m=su(o).body;else{const y=o.parentElement,d=pf(o);m=(y==null?void 0:y.nodeName)==="HTML"&&d.getComputedStyle(y).overflowY==="scroll"?y:o}n.push({value:m.style.overflow,property:"overflow",el:m},{value:m.style.overflowX,property:"overflow-x",el:m},{value:m.style.overflowY,property:"overflow-y",el:m}),m.style.overflow="hidden"}return()=>{n.forEach(({value:m,el:y,property:d})=>{m?y.style.setProperty(d,m):y.style.removeProperty(d)})}}function CU(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class MU{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&jp(t.modalRef,!1);const u=CU(n);MI(n,t.mount,t.modalRef,u,!0);const m=X_(this.containers,y=>y.container===n);return m!==-1?(this.containers[m].modals.push(t),o):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:u}),o)}mount(t,n){const o=X_(this.containers,m=>m.modals.indexOf(t)!==-1),u=this.containers[o];u.restore||(u.restore=TU(u,n))}remove(t,n=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const u=X_(this.containers,y=>y.modals.indexOf(t)!==-1),m=this.containers[u];if(m.modals.splice(m.modals.indexOf(t),1),this.modals.splice(o,1),m.modals.length===0)m.restore&&m.restore(),t.modalRef&&jp(t.modalRef,n),MI(m.container,t.mount,t.modalRef,m.hiddenSiblings,!1),this.containers.splice(u,1);else{const y=m.modals[m.modals.length-1];y.modalRef&&jp(y.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const LU=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function PU(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function AU(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function RU(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||AU(e))}function NU(e){const t=[],n=[];return Array.from(e.querySelectorAll(LU)).forEach((o,u)=>{const m=PU(o);m===-1||!RU(o)||(m===0?t.push(o):n.push({documentOrder:u,tabIndex:m,node:o}))}),n.sort((o,u)=>o.tabIndex===u.tabIndex?o.documentOrder-u.documentOrder:o.tabIndex-u.tabIndex).map(o=>o.node).concat(t)}function zU(){return!0}function DU(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:u=!1,getTabbable:m=NU,isEnabled:y=zU,open:d}=e,M=qe.useRef(!1),A=qe.useRef(null),O=qe.useRef(null),R=qe.useRef(null),N=qe.useRef(null),V=qe.useRef(!1),H=qe.useRef(null),ne=Ml(t.ref,H),de=qe.useRef(null);qe.useEffect(()=>{!d||!H.current||(V.current=!n)},[n,d]),qe.useEffect(()=>{if(!d||!H.current)return;const Q=su(H.current);return H.current.contains(Q.activeElement)||(H.current.hasAttribute("tabIndex")||H.current.setAttribute("tabIndex","-1"),V.current&&H.current.focus()),()=>{u||(R.current&&R.current.focus&&(M.current=!0,R.current.focus()),R.current=null)}},[d]),qe.useEffect(()=>{if(!d||!H.current)return;const Q=su(H.current),ie=pe=>{de.current=pe,!(o||!y()||pe.key!=="Tab")&&Q.activeElement===H.current&&pe.shiftKey&&(M.current=!0,O.current&&O.current.focus())},he=()=>{const pe=H.current;if(pe===null)return;if(!Q.hasFocus()||!y()||M.current){M.current=!1;return}if(pe.contains(Q.activeElement)||o&&Q.activeElement!==A.current&&Q.activeElement!==O.current)return;if(Q.activeElement!==N.current)N.current=null;else if(N.current!==null)return;if(!V.current)return;let Ie=[];if((Q.activeElement===A.current||Q.activeElement===O.current)&&(Ie=m(H.current)),Ie.length>0){var Le,$e;const Ze=!!((Le=de.current)!=null&&Le.shiftKey&&(($e=de.current)==null?void 0:$e.key)==="Tab"),et=Ie[0],at=Ie[Ie.length-1];typeof et!="string"&&typeof at!="string"&&(Ze?at.focus():et.focus())}else pe.focus()};Q.addEventListener("focusin",he),Q.addEventListener("keydown",ie,!0);const _e=setInterval(()=>{Q.activeElement&&Q.activeElement.tagName==="BODY"&&he()},50);return()=>{clearInterval(_e),Q.removeEventListener("focusin",he),Q.removeEventListener("keydown",ie,!0)}},[n,o,u,y,d,m]);const Y=Q=>{R.current===null&&(R.current=Q.relatedTarget),V.current=!0,N.current=Q.target;const ie=t.props.onFocus;ie&&ie(Q)},X=Q=>{R.current===null&&(R.current=Q.relatedTarget),V.current=!0};return mt.jsxs(qe.Fragment,{children:[mt.jsx("div",{tabIndex:d?0:-1,onFocus:X,ref:A,"data-testid":"sentinelStart"}),qe.cloneElement(t,{ref:ne,onFocus:Y}),mt.jsx("div",{tabIndex:d?0:-1,onFocus:X,ref:O,"data-testid":"sentinelEnd"})]})}function OU(e){return typeof e=="function"?e():e}function FU(e){return e?e.props.hasOwnProperty("in"):!1}const BU=new MU;function $U(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,manager:u=BU,closeAfterTransition:m=!1,onTransitionEnter:y,onTransitionExited:d,children:M,onClose:A,open:O,rootRef:R}=e,N=qe.useRef({}),V=qe.useRef(null),H=qe.useRef(null),ne=Ml(H,R),[de,Y]=qe.useState(!O),X=FU(M);let Q=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(Q=!1);const ie=()=>su(V.current),he=()=>(N.current.modalRef=H.current,N.current.mount=V.current,N.current),_e=()=>{u.mount(he(),{disableScrollLock:o}),H.current&&(H.current.scrollTop=0)},pe=fh(()=>{const ut=OU(t)||ie().body;u.add(he(),ut),H.current&&_e()}),Ie=qe.useCallback(()=>u.isTopModal(he()),[u]),Le=fh(ut=>{V.current=ut,ut&&(O&&Ie()?_e():H.current&&jp(H.current,Q))}),$e=qe.useCallback(()=>{u.remove(he(),Q)},[Q,u]);qe.useEffect(()=>()=>{$e()},[$e]),qe.useEffect(()=>{O?pe():(!X||!m)&&$e()},[O,$e,X,m,pe]);const Ze=ut=>wt=>{var Ge;(Ge=ut.onKeyDown)==null||Ge.call(ut,wt),!(wt.key!=="Escape"||wt.which===229||!Ie())&&(n||(wt.stopPropagation(),A&&A(wt,"escapeKeyDown")))},et=ut=>wt=>{var Ge;(Ge=ut.onClick)==null||Ge.call(ut,wt),wt.target===wt.currentTarget&&A&&A(wt,"backdropClick")};return{getRootProps:(ut={})=>{const wt=_P(e);delete wt.onTransitionEnter,delete wt.onTransitionExited;const Ge=tt({},wt,ut);return tt({role:"presentation"},Ge,{onKeyDown:Ze(Ge),ref:ne})},getBackdropProps:(ut={})=>{const wt=ut;return tt({"aria-hidden":!0},wt,{onClick:et(wt),open:O})},getTransitionProps:()=>{const ut=()=>{Y(!1),y&&y()},wt=()=>{Y(!0),d&&d(),m&&$e()};return{onEnter:Tx(ut,M==null?void 0:M.props.onEnter),onExited:Tx(wt,M==null?void 0:M.props.onExited)}},rootRef:ne,portalRef:Le,isTopModal:Ie,exited:de,hasTransition:X}}function UU(e){return Do("MuiModal",e)}Ji("MuiModal",["root","hidden","backdrop"]);const jU=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],VU=e=>{const{open:t,exited:n,classes:o}=e;return ns({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},UU,o)},GU=Ar("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>tt({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),qU=Ar(dU,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),HU=qe.forwardRef(function(t,n){var o,u,m,y,d,M;const A=Oo({name:"MuiModal",props:t}),{BackdropComponent:O=qU,BackdropProps:R,className:N,closeAfterTransition:V=!1,children:H,container:ne,component:de,components:Y={},componentsProps:X={},disableAutoFocus:Q=!1,disableEnforceFocus:ie=!1,disableEscapeKeyDown:he=!1,disablePortal:_e=!1,disableRestoreFocus:pe=!1,disableScrollLock:Ie=!1,hideBackdrop:Le=!1,keepMounted:$e=!1,onBackdropClick:Ze,open:et,slotProps:at,slots:Ne}=A,rt=tr(A,jU),ut=tt({},A,{closeAfterTransition:V,disableAutoFocus:Q,disableEnforceFocus:ie,disableEscapeKeyDown:he,disablePortal:_e,disableRestoreFocus:pe,disableScrollLock:Ie,hideBackdrop:Le,keepMounted:$e}),{getRootProps:wt,getBackdropProps:Ge,getTransitionProps:ct,portalRef:Je,isTopModal:At,exited:Ut,hasTransition:Sn}=$U(tt({},ut,{rootRef:n})),Ct=tt({},ut,{exited:Ut}),yn=VU(Ct),Zn={};if(H.props.tabIndex===void 0&&(Zn.tabIndex="-1"),Sn){const{onEnter:Vt,onExited:gn}=ct();Zn.onEnter=Vt,Zn.onExited=gn}const nr=(o=(u=Ne==null?void 0:Ne.root)!=null?u:Y.Root)!=null?o:GU,Be=(m=(y=Ne==null?void 0:Ne.backdrop)!=null?y:Y.Backdrop)!=null?m:O,hr=(d=at==null?void 0:at.root)!=null?d:X.root,mn=(M=at==null?void 0:at.backdrop)!=null?M:X.backdrop,Dt=dI({elementType:nr,externalSlotProps:hr,externalForwardedProps:rt,getSlotProps:wt,additionalProps:{ref:n,as:de},ownerState:Ct,className:$n(N,hr==null?void 0:hr.className,yn==null?void 0:yn.root,!Ct.open&&Ct.exited&&(yn==null?void 0:yn.hidden))}),xe=dI({elementType:Be,externalSlotProps:mn,additionalProps:R,getSlotProps:Vt=>Ge(tt({},Vt,{onClick:gn=>{Ze&&Ze(gn),Vt!=null&&Vt.onClick&&Vt.onClick(gn)}})),className:$n(mn==null?void 0:mn.className,R==null?void 0:R.className,yn==null?void 0:yn.backdrop),ownerState:Ct});return!$e&&!et&&(!Sn||Ut)?null:mt.jsx(iU,{ref:Je,container:ne,disablePortal:_e,children:mt.jsxs(nr,tt({},Dt,{children:[!Le&&O?mt.jsx(Be,tt({},xe)):null,mt.jsx(DU,{disableEnforceFocus:ie,disableAutoFocus:Q,disableRestoreFocus:pe,isEnabled:At,open:et,children:qe.cloneElement(H,Zn)})]}))})}),WU=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ZU(e,t,n){const o=t.getBoundingClientRect(),u=n&&n.getBoundingClientRect(),m=pf(t);let y;if(t.fakeTransform)y=t.fakeTransform;else{const A=m.getComputedStyle(t);y=A.getPropertyValue("-webkit-transform")||A.getPropertyValue("transform")}let d=0,M=0;if(y&&y!=="none"&&typeof y=="string"){const A=y.split("(")[1].split(")")[0].split(",");d=parseInt(A[4],10),M=parseInt(A[5],10)}return e==="left"?u?`translateX(${u.right+d-o.left}px)`:`translateX(${m.innerWidth+d-o.left}px)`:e==="right"?u?`translateX(-${o.right-u.left-d}px)`:`translateX(-${o.left+o.width-d}px)`:e==="up"?u?`translateY(${u.bottom+M-o.top}px)`:`translateY(${m.innerHeight+M-o.top}px)`:u?`translateY(-${o.top-u.top+o.height-M}px)`:`translateY(-${o.top+o.height-M}px)`}function XU(e){return typeof e=="function"?e():e}function Ug(e,t,n){const o=XU(n),u=ZU(e,t,o);u&&(t.style.webkitTransform=u,t.style.transform=u)}const YU=qe.forwardRef(function(t,n){const o=u0(),u={enter:o.transitions.easing.easeOut,exit:o.transitions.easing.sharp},m={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:y,appear:d=!0,children:M,container:A,direction:O="down",easing:R=u,in:N,onEnter:V,onEntered:H,onEntering:ne,onExit:de,onExited:Y,onExiting:X,style:Q,timeout:ie=m,TransitionComponent:he=Ll}=t,_e=tr(t,WU),pe=qe.useRef(null),Ie=Ml(M.ref,pe,n),Le=Ge=>ct=>{Ge&&(ct===void 0?Ge(pe.current):Ge(pe.current,ct))},$e=Le((Ge,ct)=>{Ug(O,Ge,A),PP(Ge),V&&V(Ge,ct)}),Ze=Le((Ge,ct)=>{const Je=ev({timeout:ie,style:Q,easing:R},{mode:"enter"});Ge.style.webkitTransition=o.transitions.create("-webkit-transform",tt({},Je)),Ge.style.transition=o.transitions.create("transform",tt({},Je)),Ge.style.webkitTransform="none",Ge.style.transform="none",ne&&ne(Ge,ct)}),et=Le(H),at=Le(X),Ne=Le(Ge=>{const ct=ev({timeout:ie,style:Q,easing:R},{mode:"exit"});Ge.style.webkitTransition=o.transitions.create("-webkit-transform",ct),Ge.style.transition=o.transitions.create("transform",ct),Ug(O,Ge,A),de&&de(Ge)}),rt=Le(Ge=>{Ge.style.webkitTransition="",Ge.style.transition="",Y&&Y(Ge)}),ut=Ge=>{y&&y(pe.current,Ge)},wt=qe.useCallback(()=>{pe.current&&Ug(O,pe.current,A)},[O,A]);return qe.useEffect(()=>{if(N||O==="down"||O==="right")return;const Ge=gP(()=>{pe.current&&Ug(O,pe.current,A)}),ct=pf(pe.current);return ct.addEventListener("resize",Ge),()=>{Ge.clear(),ct.removeEventListener("resize",Ge)}},[O,N,A]),qe.useEffect(()=>{N||wt()},[N,wt]),mt.jsx(he,tt({nodeRef:pe,onEnter:$e,onEntered:et,onEntering:Ze,onExit:Ne,onExited:rt,onExiting:at,addEndListener:ut,appear:d,in:N,timeout:ie},_e,{children:(Ge,ct)=>qe.cloneElement(M,tt({ref:Ie,style:tt({visibility:Ge==="exited"&&!N?"hidden":void 0},Q,M.props.style)},ct))}))});function KU(e){return Do("MuiDrawer",e)}Ji("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const JU=["BackdropProps"],QU=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],zP=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},ej=e=>{const{classes:t,anchor:n,variant:o}=e,u={root:["root"],docked:[(o==="permanent"||o==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Fn(n)}`,o!=="temporary"&&`paperAnchorDocked${Fn(n)}`]};return ns(u,KU,t)},tj=Ar(HU,{name:"MuiDrawer",slot:"Root",overridesResolver:zP})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),LI=Ar("div",{shouldForwardProp:_w,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:zP})({flex:"0 0 auto"}),nj=Ar(AP,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Fn(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Fn(n.anchor)}`]]}})(({theme:e,ownerState:t})=>tt({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),DP={left:"right",right:"left",top:"down",bottom:"up"};function rj(e){return["left","right"].indexOf(e)!==-1}function ij({direction:e},t){return e==="rtl"&&rj(t)?DP[t]:t}const oj=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiDrawer"}),u=u0(),m=Q8(),y={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:d="left",BackdropProps:M,children:A,className:O,elevation:R=16,hideBackdrop:N=!1,ModalProps:{BackdropProps:V}={},onClose:H,open:ne=!1,PaperProps:de={},SlideProps:Y,TransitionComponent:X=YU,transitionDuration:Q=y,variant:ie="temporary"}=o,he=tr(o.ModalProps,JU),_e=tr(o,QU),pe=qe.useRef(!1);qe.useEffect(()=>{pe.current=!0},[]);const Ie=ij({direction:m?"rtl":"ltr"},d),$e=tt({},o,{anchor:d,elevation:R,open:ne,variant:ie},_e),Ze=ej($e),et=mt.jsx(nj,tt({elevation:ie==="temporary"?R:0,square:!0},de,{className:$n(Ze.paper,de.className),ownerState:$e,children:A}));if(ie==="permanent")return mt.jsx(LI,tt({className:$n(Ze.root,Ze.docked,O),ownerState:$e,ref:n},_e,{children:et}));const at=mt.jsx(X,tt({in:ne,direction:DP[Ie],timeout:Q,appear:pe.current},Y,{children:et}));return ie==="persistent"?mt.jsx(LI,tt({className:$n(Ze.root,Ze.docked,O),ownerState:$e,ref:n},_e,{children:at})):mt.jsx(tj,tt({BackdropProps:tt({},M,V,{transitionDuration:Q}),className:$n(Ze.root,Ze.modal,O),open:ne,ownerState:$e,onClose:H,hideBackdrop:N,ref:n},_e,he,{children:at}))}),Xd=qe.createContext({});function sj(e){return Do("MuiList",e)}Ji("MuiList",["root","padding","dense","subheader"]);const aj=["children","className","component","dense","disablePadding","subheader"],lj=e=>{const{classes:t,disablePadding:n,dense:o,subheader:u}=e;return ns({root:["root",!n&&"padding",o&&"dense",u&&"subheader"]},sj,t)},uj=Ar("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>tt({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),PI=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiList"}),{children:u,className:m,component:y="ul",dense:d=!1,disablePadding:M=!1,subheader:A}=o,O=tr(o,aj),R=qe.useMemo(()=>({dense:d}),[d]),N=tt({},o,{component:y,dense:d,disablePadding:M}),V=lj(N);return mt.jsx(Xd.Provider,{value:R,children:mt.jsxs(uj,tt({as:y,className:$n(V.root,m),ref:n,ownerState:N},O,{children:[A,u]}))})});function cj(e){return Do("MuiListItem",e)}const Sd=Ji("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),hj=Ji("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function dj(e){return Do("MuiListItemSecondaryAction",e)}Ji("MuiListItemSecondaryAction",["root","disableGutters"]);const fj=["className"],pj=e=>{const{disableGutters:t,classes:n}=e;return ns({root:["root",t&&"disableGutters"]},dj,n)},mj=Ar("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>tt({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),OP=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiListItemSecondaryAction"}),{className:u}=o,m=tr(o,fj),y=qe.useContext(Xd),d=tt({},o,{disableGutters:y.disableGutters}),M=pj(d);return mt.jsx(mj,tt({className:$n(M.root,u),ownerState:d,ref:n},m))});OP.muiName="ListItemSecondaryAction";const gj=["className"],yj=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],vj=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},_j=e=>{const{alignItems:t,button:n,classes:o,dense:u,disabled:m,disableGutters:y,disablePadding:d,divider:M,hasSecondaryAction:A,selected:O}=e;return ns({root:["root",u&&"dense",!y&&"gutters",!d&&"padding",M&&"divider",m&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",A&&"secondaryAction",O&&"selected"],container:["container"]},cj,o)},xj=Ar("div",{name:"MuiListItem",slot:"Root",overridesResolver:vj})(({theme:e,ownerState:t})=>tt({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&tt({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${hj.root}`]:{paddingRight:48}},{[`&.${Sd.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Sd.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ma(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Sd.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ma(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Sd.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Sd.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ma(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ma(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),bj=Ar("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),xp=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiListItem"}),{alignItems:u="center",autoFocus:m=!1,button:y=!1,children:d,className:M,component:A,components:O={},componentsProps:R={},ContainerComponent:N="li",ContainerProps:{className:V}={},dense:H=!1,disabled:ne=!1,disableGutters:de=!1,disablePadding:Y=!1,divider:X=!1,focusVisibleClassName:Q,secondaryAction:ie,selected:he=!1,slotProps:_e={},slots:pe={}}=o,Ie=tr(o.ContainerProps,gj),Le=tr(o,yj),$e=qe.useContext(Xd),Ze=qe.useMemo(()=>({dense:H||$e.dense||!1,alignItems:u,disableGutters:de}),[u,$e.dense,H,de]),et=qe.useRef(null);vm(()=>{m&&et.current&&et.current.focus()},[m]);const at=qe.Children.toArray(d),Ne=at.length&&yP(at[at.length-1],["ListItemSecondaryAction"]),rt=tt({},o,{alignItems:u,autoFocus:m,button:y,dense:Ze.dense,disabled:ne,disableGutters:de,disablePadding:Y,divider:X,hasSecondaryAction:Ne,selected:he}),ut=_j(rt),wt=Ml(et,n),Ge=pe.root||O.Root||xj,ct=_e.root||R.root||{},Je=tt({className:$n(ut.root,ct.className,M),disabled:ne},Le);let At=A||"li";return y&&(Je.component=A||"div",Je.focusVisibleClassName=$n(Sd.focusVisible,Q),At=ww),Ne?(At=!Je.component&&!A?"div":At,N==="li"&&(At==="li"?At="div":Je.component==="li"&&(Je.component="div")),mt.jsx(Xd.Provider,{value:Ze,children:mt.jsxs(bj,tt({as:N,className:$n(ut.container,V),ref:wt,ownerState:rt},Ie,{children:[mt.jsx(Ge,tt({},ct,!Mx(Ge)&&{as:At,ownerState:tt({},rt,ct.ownerState)},Je,{children:at})),at.pop()]}))})):mt.jsx(Xd.Provider,{value:Ze,children:mt.jsxs(Ge,tt({},ct,{as:At,ref:wt},!Mx(Ge)&&{ownerState:tt({},rt,ct.ownerState)},Je,{children:[at,ie&&mt.jsx(OP,{children:ie})]}))})});function wj(e){return Do("MuiListItemText",e)}const AI=Ji("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),kj=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Sj=e=>{const{classes:t,inset:n,primary:o,secondary:u,dense:m}=e;return ns({root:["root",n&&"inset",m&&"dense",o&&u&&"multiline"],primary:["primary"],secondary:["secondary"]},wj,t)},Ej=Ar("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${AI.primary}`]:t.primary},{[`& .${AI.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>tt({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),bp=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiListItemText"}),{children:u,className:m,disableTypography:y=!1,inset:d=!1,primary:M,primaryTypographyProps:A,secondary:O,secondaryTypographyProps:R}=o,N=tr(o,kj),{dense:V}=qe.useContext(Xd);let H=M??u,ne=O;const de=tt({},o,{disableTypography:y,inset:d,primary:!!H,secondary:!!ne,dense:V}),Y=Sj(de);return H!=null&&H.type!==ua&&!y&&(H=mt.jsx(ua,tt({variant:V?"body2":"body1",className:Y.primary,component:A!=null&&A.variant?void 0:"span",display:"block"},A,{children:H}))),ne!=null&&ne.type!==ua&&!y&&(ne=mt.jsx(ua,tt({variant:"body2",className:Y.secondary,color:"text.secondary",display:"block"},R,{children:ne}))),mt.jsxs(Ej,tt({className:$n(Y.root,m),ownerState:de,ref:n},N,{children:[H,ne]}))});function Ij(e){return Do("MuiToolbar",e)}Ji("MuiToolbar",["root","gutters","regular","dense"]);const Tj=["className","component","disableGutters","variant"],Cj=e=>{const{classes:t,disableGutters:n,variant:o}=e;return ns({root:["root",!n&&"gutters",o]},Ij,t)},Mj=Ar("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>tt({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),Lj=qe.forwardRef(function(t,n){const o=Oo({props:t,name:"MuiToolbar"}),{className:u,component:m="div",disableGutters:y=!1,variant:d="regular"}=o,M=tr(o,Tj),A=tt({},o,{component:m,disableGutters:y,variant:d}),O=Cj(A);return mt.jsx(Mj,tt({as:m,className:$n(O.root,u),ref:n,ownerState:A},M))}),RI={MAPTILER_API_KEY:"qC6zBtR7VUaKtyyiLcJq",MAPTILER_DATSET_ID:"57ce7daa-ea5b-4cd6-8975-32c41f5c5d90"};var kw={},Y_={};const Pj=pu(m7);var NI;function Sw(){return NI||(NI=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Pj}(Y_)),Y_}var Aj=Am;Object.defineProperty(kw,"__esModule",{value:!0});var FP=kw.default=void 0,Rj=Aj(Sw()),Nj=mt;FP=kw.default=(0,Rj.default)((0,Nj.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");function zj({handleDrawerOpen:e,open:t}){const o=Ar(nU,{shouldForwardProp:u=>u!=="open"})(({theme:u,open:m})=>({transition:u.transitions.create("margin",{easing:u.transitions.easing.sharp,duration:u.transitions.duration.leavingScreen}),...m&&{width:"calc(100% - 250px)",marginLeft:"-250px",transition:u.transitions.create("margin",{easing:u.transitions.easing.easeOut,duration:u.transitions.duration.enteringScreen})}}));return mt.jsx(o,{position:"fixed",open:t,sx:{p:0},children:mt.jsxs(Lj,{children:[mt.jsx(RP,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:e,sx:{mr:2,...t&&{display:"none"}},children:mt.jsx(FP,{})}),mt.jsx(ua,{variant:"h6",color:"inherit",component:"div",children:"Honolulu Accommodation"})]})})}var Ew={},Dj=Am;Object.defineProperty(Ew,"__esModule",{value:!0});var BP=Ew.default=void 0,Oj=Dj(Sw()),Fj=mt;BP=Ew.default=(0,Oj.default)((0,Fj.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");var Iw={},Bj=Am;Object.defineProperty(Iw,"__esModule",{value:!0});var $P=Iw.default=void 0,$j=Bj(Sw()),Uj=mt;$P=Iw.default=(0,$j.default)((0,Uj.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function jj({open:e,handleDrawerClose:t,item:n}){const o="250px",u=u0(),m=Ar("div")(({theme:y})=>({display:"flex",alignItems:"center",padding:y.spacing(0,1),...y.mixins.toolbar,justifyContent:"flex-end"}));return mt.jsxs(oj,{sx:{width:o,flexShrink:0,"& .MuiDrawer-paper":{width:o,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:e,children:[mt.jsx(m,{children:mt.jsx(RP,{onClick:t,children:u.direction==="ltr"?mt.jsx(BP,{}):mt.jsx($P,{})})}),n?mt.jsxs(PI,{children:[mt.jsx(xp,{children:mt.jsx(bp,{primary:mt.jsx(ua,{variant:"h4",children:n.name})})}),mt.jsx(xp,{children:mt.jsx(bp,{primary:mt.jsxs(ua,{variant:"h5",children:["Host: ",n.host_name]}),secondary:mt.jsxs(ua,{variant:"body",children:["id: ",n.host_id]})})}),mt.jsx(xp,{children:mt.jsx(bp,{primary:mt.jsxs(ua,{variant:"p",children:[mt.jsx("b",{children:"Room type:"})," ",n.room_type]})})}),mt.jsx(xp,{children:mt.jsx(bp,{primary:mt.jsxs(ua,{variant:"p",children:[mt.jsx("b",{children:"Minimum night:"})," ",n.minimum_nights]})})}),mt.jsx(xp,{children:mt.jsx(bp,{primary:mt.jsxs(ua,{variant:"p",children:[mt.jsx("b",{children:"Neighbourhood: "}),n.neighbourhood,", ",n.neighbourhood_group]})})},n.id)]}):mt.jsx(PI,{children:mt.jsx(ua,{variant:"body-1",component:"p",sx:{padding:2},children:"Click to point to see more details"})})]})}const Vj=Ar("main",{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:"-250px",...t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}));function Gj(){const e=qe.useRef(null),t=qe.useRef(null),n=RI.MAPTILER_DATSET_ID,o={lng:-157.9253,lat:21.4732},u=9.79;Ni.apiKey=RI.MAPTILER_API_KEY;const[m,y]=qe.useState(""),[d,M]=qe.useState(""),[A,O]=qe.useState(""),[R,N]=qe.useState("point"),[V,H]=qe.useState(!1),[ne,de]=qe.useState(!1),[Y,X]=qe.useState();qe.useEffect(()=>{if(t.current)return;t.current=new Gb({container:e.current,style:wv.DATAVIZ.LIGHT,center:[o.lng,o.lat],zoom:u,hash:!0});const _e=new a6({limit:10,country:"us",proximity:[{type:"map-center"}],types:["address"]});t.current.addControl(_e),t.current.on("load",()=>{const{heatmapLayerId:pe}=ux.addHeatmap(t.current,{data:n,property:"minimum_nights",weight:[{propertyValue:1,value:1},{propertyValue:30,value:0}],radius:[{propertyValue:1,value:60},{propertyValue:30,value:0}],colorRamp:lm.COOL});y(pe),H(!0)}),t.current.on("load",()=>{const{pointLayerId:pe,labelLayerId:Ie}=ux.addPoint(t.current,{data:n,pointColor:lm.COOL.scale(0,30),property:"minimum_nights",pointOpacity:.5,showLabel:!0,labelColor:"black"});O(Ie),M(pe),H(!0)})},[o.lng,o.lat,u]),qe.useEffect(()=>{V&&t.current.on("click",d,_e=>{let pe=_e.features[0].geometry.coordinates.slice(),Ie=_e.features[0].properties.name;new $M().setLngLat(pe).setHTML(Ie).addTo(t.current),X(_e.features[0].properties),de(!0)})},[V]),qe.useEffect(()=>{m&&V&&t.current.setLayoutProperty(m,"visibility",R==="heatmap"?"visible":"none")},[m,R,V]),qe.useEffect(()=>{d&&V&&(t.current.setLayoutProperty(d,"visibility",R==="point"?"visible":"none"),t.current.setLayoutProperty(A,"visibility",R==="point"?"visible":"none"))},[d,R,V]);const Q=()=>{N(_e=>_e==="point"?"heatmap":"point")},ie=()=>{de(!0)},he=()=>{de(!1)};return mt.jsxs(mU,{sx:{display:"flex"},children:[mt.jsx(zj,{handleDrawerOpen:ie,open:ne}),mt.jsx(jj,{handleDrawerClose:he,open:ne,item:Y}),mt.jsx(Vj,{open:ne,children:mt.jsxs(SU,{variant:"contained",className:"btn",sx:{top:84,left:10,zIndex:10},onClick:Q,children:["Change to ",R==="point"?"heatmap":"point"]})}),mt.jsx("div",{className:"container",children:mt.jsx("div",{ref:e,id:"map",className:"map"})})]})}function qj(){return mt.jsx("div",{className:"App",children:mt.jsx(Gj,{})})}J_.createRoot(document.getElementById("root")).render(mt.jsx(Ba.StrictMode,{children:mt.jsx(qj,{})}));
